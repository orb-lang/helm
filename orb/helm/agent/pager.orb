* PagerAgent

Agent for results display. For now this turns out to be the simplest of the
lot, basically just a dumb value holder. It may get some more responsibility
later, not sure.

#!lua
local meta = assert(require "core:cluster" . Meta)
local Agent = require "helm:agent/agent"
local PagerAgent = meta(getmetatable(Agent))
#/lua


*** PagerAgent:update(result), :clear()

#!lua
function PagerAgent.update(agent, str)
   agent.str = str
   agent.touched = true
end

function PagerAgent.clear(agent)
   agent:update(nil)
end
#/lua


*** PagerAgent:bufferValue()

#!lua
function PagerAgent.bufferValue(agent)
   -- #todo we should work with a Rainbuf that does word-aware wrapping
   -- and accepts a string directly, rather than abusing Resbuf
   return { n = 1, agent.str }
end
#/lua


#!lua
local PagerAgent_class = setmetatable({}, PagerAgent)
PagerAgent.idEst = PagerAgent_class

return PagerAgent_class
#/lua#/lua