<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="4221pt" height="5773pt"
 viewBox="0.00 0.00 4221.00 5773.21" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5769.2099)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-5769.2099 4217,-5769.2099 4217,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="959" cy="-5747.2099" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="959" y="-5743.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 389</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="959" cy="-5675.2099" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="959" y="-5671.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;43</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M959,-5729.0413C959,-5721.3409 959,-5712.1843 959,-5703.6266"/>
<polygon fill="#000000" stroke="#000000" points="962.5001,-5703.6232 959,-5693.6232 955.5001,-5703.6232 962.5001,-5703.6232"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="628" cy="-5603.2099" rx="49.8395" ry="18"/>
<text text-anchor="middle" x="628" y="-5599.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Reflect</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M905.999,-5666.3094C850.9258,-5656.6829 762.4106,-5640.1483 687,-5621.2099 683.1375,-5620.2399 679.1521,-5619.1719 675.1612,-5618.0548"/>
<polygon fill="#000000" stroke="#000000" points="675.8743,-5614.6177 665.2958,-5615.2048 673.9315,-5621.3427 675.8743,-5614.6177"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="728" cy="-5603.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="728" y="-5599.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M911.9762,-5663.7591C873.1773,-5653.8566 816.9185,-5638.4467 769,-5621.2099 766.7781,-5620.4107 764.5062,-5619.5477 762.2275,-5618.6473"/>
<polygon fill="#000000" stroke="#000000" points="763.5109,-5615.3906 752.9323,-5614.8032 760.8357,-5621.8593 763.5109,-5615.3906"/>
</g>
<!-- structure_4 -->
<g id="node5" class="node">
<title>structure_4</title>
<ellipse fill="none" stroke="#000000" cx="823" cy="-5603.2099" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="823" y="-5599.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_1&#45;&gt;structure_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;structure_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M929.1542,-5659.4092C908.6291,-5648.543 881.2469,-5634.0465 859.434,-5622.4985"/>
<polygon fill="#000000" stroke="#000000" points="860.9383,-5619.3347 850.4628,-5617.7491 857.6631,-5625.5212 860.9383,-5619.3347"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="918" cy="-5603.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="918" y="-5599.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M948.8652,-5657.4122C944.0632,-5648.9794 938.2315,-5638.7385 932.9358,-5629.4387"/>
<polygon fill="#000000" stroke="#000000" points="935.8667,-5627.5124 927.8768,-5620.5545 929.7838,-5630.9763 935.8667,-5627.5124"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1000" cy="-5603.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1000" y="-5599.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M969.1348,-5657.4122C973.9368,-5648.9794 979.7685,-5638.7385 985.0642,-5629.4387"/>
<polygon fill="#000000" stroke="#000000" points="988.2162,-5630.9763 990.1232,-5620.5545 982.1333,-5627.5124 988.2162,-5630.9763"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1744" cy="-5603.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1744" y="-5599.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1017.0417,-5669.8864C1168.1313,-5656.0285 1570.991,-5619.0783 1702.1164,-5607.0515"/>
<polygon fill="#000000" stroke="#000000" points="1702.5228,-5610.529 1712.1613,-5606.1302 1701.8834,-5603.5582 1702.5228,-5610.529"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2371" cy="-5603.2099" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2371" y="-5599.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 20&#45;43</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1019.2202,-5672.1392C1245.7172,-5660.5898 2046.2455,-5619.7696 2296.0022,-5607.0342"/>
<polygon fill="#000000" stroke="#000000" points="2296.2589,-5610.5257 2306.0677,-5606.5209 2295.9024,-5603.5348 2296.2589,-5610.5257"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="3137" cy="-5603.2099" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3137" y="-5599.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 44&#45;389</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1019.5254,-5673.2091C1326.2681,-5663.0688 2708.193,-5617.3854 3056.8985,-5605.8579"/>
<polygon fill="#000000" stroke="#000000" points="3057.0329,-5609.3555 3066.9118,-5605.5269 3056.8016,-5602.3593 3057.0329,-5609.3555"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="667.5,-5549.2099 588.5,-5549.2099 588.5,-5513.2099 667.5,-5513.2099 667.5,-5549.2099"/>
<text text-anchor="middle" x="628" y="-5527.7099" font-family="Inconsolata" font-size="14.00" fill="#000000">* Reflect</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M628,-5585.0413C628,-5577.3409 628,-5568.1843 628,-5559.6266"/>
<polygon fill="#000000" stroke="#000000" points="631.5001,-5559.6232 628,-5549.6232 624.5001,-5559.6232 631.5001,-5559.6232"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="721" cy="-5531.2099" rx="27" ry="18"/>
<text text-anchor="middle" x="721" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.2336,-5585.0413C725.485,-5577.3409 724.5947,-5568.1843 723.7627,-5559.6266"/>
<polygon fill="#000000" stroke="#000000" points="727.2415,-5559.2376 722.7902,-5549.6232 720.2744,-5559.915 727.2415,-5559.2376"/>
</g>
<!-- hashline_13 -->
<g id="node14" class="node">
<title>hashline_13</title>
<ellipse fill="none" stroke="#000000" cx="816" cy="-5531.2099" rx="43.0992" ry="18"/>
<text text-anchor="middle" x="816" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">hashline</text>
</g>
<!-- structure_4&#45;&gt;hashline_13 -->
<g id="edge13" class="edge">
<title>structure_4&#45;&gt;hashline_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M821.2336,-5585.0413C820.485,-5577.3409 819.5947,-5568.1843 818.7627,-5559.6266"/>
<polygon fill="#000000" stroke="#000000" points="822.2415,-5559.2376 817.7902,-5549.6232 815.2744,-5559.915 822.2415,-5559.2376"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="911" cy="-5531.2099" rx="27" ry="18"/>
<text text-anchor="middle" x="911" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_5&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M916.2336,-5585.0413C915.485,-5577.3409 914.5947,-5568.1843 913.7627,-5559.6266"/>
<polygon fill="#000000" stroke="#000000" points="917.2415,-5559.2376 912.7902,-5549.6232 910.2744,-5559.915 917.2415,-5559.2376"/>
</g>
<!-- raw_18 -->
<g id="node19" class="node">
<title>raw_18</title>
<ellipse fill="none" stroke="#000000" cx="1000" cy="-5531.2099" rx="27" ry="18"/>
<text text-anchor="middle" x="1000" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_18 -->
<g id="edge18" class="edge">
<title>prose_6&#45;&gt;raw_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1000,-5585.0413C1000,-5577.3409 1000,-5568.1843 1000,-5559.6266"/>
<polygon fill="#000000" stroke="#000000" points="1003.5001,-5559.6232 1000,-5549.6232 996.5001,-5559.6232 1003.5001,-5559.6232"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="1657" cy="-5531.2099" rx="27" ry="18"/>
<text text-anchor="middle" x="1657" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_7&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1725.5495,-5587.9406C1712.7906,-5577.3815 1695.6703,-5563.2129 1681.7312,-5551.6771"/>
<polygon fill="#000000" stroke="#000000" points="1683.8841,-5548.9157 1673.9487,-5545.2364 1679.4211,-5554.3085 1683.8841,-5548.9157"/>
</g>
<!-- link_21 -->
<g id="node22" class="node">
<title>link_21</title>
<ellipse fill="none" stroke="#000000" cx="1917" cy="-5531.2099" rx="27" ry="18"/>
<text text-anchor="middle" x="1917" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">link</text>
</g>
<!-- prose_7&#45;&gt;link_21 -->
<g id="edge21" class="edge">
<title>prose_7&#45;&gt;link_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1769.8998,-5592.4308C1800.5274,-5579.6841 1851.5248,-5558.4597 1884.7028,-5544.6515"/>
<polygon fill="#000000" stroke="#000000" points="1886.0829,-5547.8683 1893.9704,-5540.7945 1883.3932,-5541.4056 1886.0829,-5547.8683"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="2036" cy="-5531.2099" rx="27" ry="18"/>
<text text-anchor="middle" x="2036" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_7&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1773.6054,-5595.91C1827.7694,-5582.5545 1942.5823,-5554.2444 2000.7069,-5539.9123"/>
<polygon fill="#000000" stroke="#000000" points="2001.6668,-5543.2805 2010.5381,-5537.4882 1999.9909,-5536.4841 2001.6668,-5543.2805"/>
</g>
<!-- header_29 -->
<g id="node30" class="node">
<title>header_29</title>
<ellipse fill="none" stroke="#000000" cx="2203" cy="-5531.2099" rx="76.4002" ry="18"/>
<text text-anchor="middle" x="2203" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : License (MIT)</text>
</g>
<!-- section_8&#45;&gt;header_29 -->
<g id="edge29" class="edge">
<title>section_8&#45;&gt;header_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2335.3715,-5587.9406C2310.2991,-5577.1952 2276.5049,-5562.712 2249.3383,-5551.0692"/>
<polygon fill="#000000" stroke="#000000" points="2250.601,-5547.8025 2240.0308,-5547.0803 2247.8435,-5554.2365 2250.601,-5547.8025"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="2330" cy="-5531.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2330" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_8&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2360.8652,-5585.4122C2356.0632,-5576.9794 2350.2315,-5566.7385 2344.9358,-5557.4387"/>
<polygon fill="#000000" stroke="#000000" points="2347.8667,-5555.5124 2339.8768,-5548.5545 2341.7838,-5558.9763 2347.8667,-5555.5124"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="2412" cy="-5531.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2412" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_8&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2381.1348,-5585.4122C2385.9368,-5576.9794 2391.7685,-5566.7385 2397.0642,-5557.4387"/>
<polygon fill="#000000" stroke="#000000" points="2400.2162,-5558.9763 2402.1232,-5548.5545 2394.1333,-5555.5124 2400.2162,-5558.9763"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="2554" cy="-5531.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2554" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_8&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2408.9177,-5588.2915C2440.8477,-5575.7289 2486.2186,-5557.878 2517.6872,-5545.4969"/>
<polygon fill="#000000" stroke="#000000" points="2519.3568,-5548.6012 2527.3811,-5541.683 2516.7939,-5542.0873 2519.3568,-5548.6012"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="2873" cy="-5531.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2873" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_8&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2429.5682,-5594.8097C2532.3171,-5580.0728 2742.5846,-5549.9149 2831.6592,-5537.1393"/>
<polygon fill="#000000" stroke="#000000" points="2832.2537,-5540.5899 2841.6555,-5535.7056 2831.2599,-5533.6608 2832.2537,-5540.5899"/>
</g>
<!-- header_43 -->
<g id="node44" class="node">
<title>header_43</title>
<ellipse fill="none" stroke="#000000" cx="3089" cy="-5531.2099" rx="46.4563" ry="18"/>
<text text-anchor="middle" x="3089" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : reflect</text>
</g>
<!-- section_9&#45;&gt;header_43 -->
<g id="edge43" class="edge">
<title>section_9&#45;&gt;header_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3125.1348,-5585.4122C3119.4965,-5576.9547 3112.6457,-5566.6784 3106.4313,-5557.3569"/>
<polygon fill="#000000" stroke="#000000" points="3109.1879,-5555.182 3100.7287,-5548.803 3103.3635,-5559.0649 3109.1879,-5555.182"/>
</g>
<!-- prose_44 -->
<g id="node45" class="node">
<title>prose_44</title>
<ellipse fill="none" stroke="#000000" cx="3186" cy="-5531.2099" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3186" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_44 -->
<g id="edge44" class="edge">
<title>section_9&#45;&gt;prose_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3149.1124,-5585.4122C3155.0143,-5576.74 3162.2176,-5566.1554 3168.6874,-5556.6488"/>
<polygon fill="#000000" stroke="#000000" points="3171.6316,-5558.5435 3174.3644,-5548.3071 3165.8446,-5554.6051 3171.6316,-5558.5435"/>
</g>
<!-- codeblock_45 -->
<g id="node46" class="node">
<title>codeblock_45</title>
<ellipse fill="none" stroke="#000000" cx="3520" cy="-5531.2099" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="3520" y="-5527.0099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 46&#45;389</text>
</g>
<!-- section_9&#45;&gt;codeblock_45 -->
<g id="edge45" class="edge">
<title>section_9&#45;&gt;codeblock_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3193.9254,-5592.5085C3261.2943,-5579.8439 3373.5939,-5558.7328 3447.2221,-5544.8914"/>
<polygon fill="#000000" stroke="#000000" points="3448.1648,-5548.2756 3457.346,-5542.9882 3446.8715,-5541.3961 3448.1648,-5548.2756"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-2848.5051 0,-2848.5051 0,-2812.5051 54,-2812.5051 54,-2848.5051"/>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M698.5602,-5520.5892C691.492,-5517.6951 683.5553,-5514.8961 676,-5513.2099 609.4098,-5498.3482 110.1457,-5526.5293 63,-5477.2099 -32.2794,-5377.5376 19.4702,-3137.7436 26.2916,-2858.9106"/>
<polygon fill="#000000" stroke="#000000" points="29.7934,-2858.8781 26.5405,-2848.795 22.7955,-2858.7059 29.7934,-2858.8781"/>
</g>
<!-- hashtag_14 -->
<g id="node15" class="node">
<title>hashtag_14</title>
<ellipse fill="none" stroke="#000000" cx="114" cy="-2830.5051" rx="41.6544" ry="18"/>
<text text-anchor="middle" x="114" y="-2826.3051" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">hashtag</text>
</g>
<!-- hashline_13&#45;&gt;hashtag_14 -->
<g id="edge14" class="edge">
<title>hashline_13&#45;&gt;hashtag_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M782.9498,-5519.634C774.5779,-5517.1168 765.5367,-5514.7495 757,-5513.2099 692.1469,-5501.5141 210.6217,-5524.7639 165,-5477.2099 69.5329,-5377.6995 108.2584,-3137.7638 113.457,-2858.9125"/>
<polygon fill="#000000" stroke="#000000" points="116.9585,-2858.8602 113.647,-2848.7962 109.9597,-2858.7287 116.9585,-2858.8602"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="141,-91.9001 87,-91.9001 87,-55.9001 141,-55.9001 141,-91.9001"/>
<text text-anchor="middle" x="114" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">NB</text>
</g>
<!-- hashtag_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>hashtag_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M114,-2812.1732C114,-2588.0203 114,-378.8539 114,-102.2857"/>
<polygon fill="#000000" stroke="#000000" points="117.5001,-101.9093 114,-91.9093 110.5001,-101.9093 117.5001,-101.9093"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="708,-2857.8055 174,-2857.8055 174,-2803.2046 708,-2803.2046 708,-2857.8055"/>
<text text-anchor="middle" x="441" y="-2826.7051" font-family="Inconsolata" font-size="14.00" fill="#000000">so we can find names for struct fields and otherwise iterate over compound</text>
<text text-anchor="middle" x="441" y="-2811.3051" font-family="Inconsolata" font-size="14.00" fill="#000000">data in C.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M888.4978,-5520.9813C881.9678,-5518.235 874.7709,-5515.418 868,-5513.2099 802.4078,-5491.8192 762.5094,-5529.0635 717,-5477.2099 4.2577,-4665.1084 363.4758,-3127.7487 430.8645,-2868.172"/>
<polygon fill="#000000" stroke="#000000" points="434.3494,-2868.6799 433.495,-2858.1195 427.5774,-2866.9078 434.3494,-2868.6799"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1274,-2865.7055 726,-2865.7055 726,-2795.3047 1274,-2795.3047 1274,-2865.7055"/>
<text text-anchor="middle" x="1000" y="-2834.4051" font-family="Inconsolata" font-size="14.00" fill="#000000">This is going to take awhile: I want to be able to derive both the C type</text>
<text text-anchor="middle" x="1000" y="-2819.0051" font-family="Inconsolata" font-size="14.00" fill="#000000">signature and the Lua type signature of a function, and likewise for all the</text>
<text text-anchor="middle" x="1000" y="-2803.6051" font-family="Inconsolata" font-size="14.00" fill="#000000">other primitive and compound C types.</text>
</g>
<!-- raw_18&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>raw_18&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1000,-5512.8875C1000,-5295.5201 1000,-3211.2601 1000,-2875.9355"/>
<polygon fill="#000000" stroke="#000000" points="1003.5001,-2875.6351 1000,-2865.6351 996.5001,-2875.6351 1003.5001,-2875.6351"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1847.5,-2849.8056 1292.5,-2849.8056 1292.5,-2811.2045 1847.5,-2811.2045 1847.5,-2849.8056"/>
<text text-anchor="middle" x="1570" y="-2834.7051" font-family="Inconsolata" font-size="14.00" fill="#000000">&quot;Note that typedefs are resolved by the parser, and are therefore not visible</text>
<text text-anchor="middle" x="1570" y="-2819.3051" font-family="Inconsolata" font-size="14.00" fill="#000000">when reflected&quot;. &#160;</text>
</g>
<!-- raw_20&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_20&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1656.4098,-5512.8875C1649.2853,-5291.7268 1579.9038,-3137.9456 1570.9501,-2859.9971"/>
<polygon fill="#000000" stroke="#000000" points="1574.4441,-2859.7527 1570.6238,-2849.8706 1567.4477,-2859.9782 1574.4441,-2859.7527"/>
</g>
<!-- anchortext_24 -->
<g id="node25" class="node">
<title>anchortext_24</title>
<ellipse fill="none" stroke="#000000" cx="1917" cy="-2830.5051" rx="51.3018" ry="18"/>
<text text-anchor="middle" x="1917" y="-2826.3051" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">anchortext</text>
</g>
<!-- link_21&#45;&gt;anchortext_24 -->
<g id="edge24" class="edge">
<title>link_21&#45;&gt;anchortext_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1917,-5512.8875C1917,-5291.4945 1917,-3133.4204 1917,-2859.1277"/>
<polygon fill="#000000" stroke="#000000" points="1920.5001,-2858.8175 1917,-2848.8175 1913.5001,-2858.8176 1920.5001,-2858.8175"/>
</g>
<!-- url_25 -->
<g id="node26" class="node">
<title>url_25</title>
<ellipse fill="none" stroke="#000000" cx="2013" cy="-2830.5051" rx="27" ry="18"/>
<text text-anchor="middle" x="2013" y="-2826.3051" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">url</text>
</g>
<!-- link_21&#45;&gt;url_25 -->
<g id="edge25" class="edge">
<title>link_21&#45;&gt;url_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1937.5044,-5519.2035C1951.4656,-5509.7594 1968.8383,-5495.2056 1977,-5477.2099 2090.674,-5226.5709 2023.1282,-3127.4313 2013.9807,-2858.7663"/>
<polygon fill="#000000" stroke="#000000" points="2017.4749,-2858.5333 2013.6346,-2848.659 2010.479,-2858.7729 2017.4749,-2858.5333"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2112,-2850.4072 2058,-2850.4072 2058,-2810.603 2112,-2810.603 2112,-2850.4072"/>
<text text-anchor="middle" x="2085" y="-2835.0051" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_22&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>raw_22&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2041.3466,-5513.3949C2044.2121,-5502.9566 2047.4621,-5489.4566 2049,-5477.2099 2117.0894,-4934.9977 2089.7355,-3115.8533 2085.5105,-2860.4053"/>
<polygon fill="#000000" stroke="#000000" points="2089.0096,-2860.3143 2085.3431,-2850.3741 2082.0105,-2860.4312 2089.0096,-2860.3143"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1243,-91.9001 1185,-91.9001 1185,-55.9001 1243,-55.9001 1243,-91.9001"/>
<text text-anchor="middle" x="1214" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">Indeed</text>
</g>
<!-- anchortext_24&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>anchortext_24&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1918.0434,-2812.2778C1930.6451,-2588.939 2049.8027,-384.8068 1856,-183.8002 1809.3362,-135.4019 1308.3205,-184.514 1252,-147.8002 1235.9866,-137.3615 1226.3698,-117.9316 1220.818,-101.6142"/>
<polygon fill="#000000" stroke="#000000" points="1224.1383,-100.5031 1217.8656,-91.9647 1217.4446,-102.5512 1224.1383,-100.5031"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1529,-91.9001 1261,-91.9001 1261,-55.9001 1529,-55.9001 1529,-91.9001"/>
<text text-anchor="middle" x="1395" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">http://corsix.github.io/ffi&#45;reflect/</text>
</g>
<!-- url_25&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>url_25&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2013.4507,-2812.2234C2019.0037,-2583.6053 2072.3762,-285.9155 1977,-183.8002 1910.187,-112.2663 1632.0871,-174.7946 1538,-147.8002 1499.097,-136.6386 1458.4442,-114.4543 1430.4722,-97.2913"/>
<polygon fill="#000000" stroke="#000000" points="1432.1914,-94.2385 1421.8543,-91.9156 1428.4866,-100.1778 1432.1914,-94.2385"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2274,-2848.5051 2132,-2848.5051 2132,-2812.5051 2274,-2812.5051 2274,-2848.5051"/>
<text text-anchor="middle" x="2203" y="-2827.0051" font-family="Inconsolata" font-size="14.00" fill="#000000">**** License (MIT)</text>
</g>
<!-- header_29&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>header_29&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2203,-5512.8875C2203,-5291.4945 2203,-3133.4204 2203,-2859.1277"/>
<polygon fill="#000000" stroke="#000000" points="2206.5001,-2858.8175 2203,-2848.8175 2199.5001,-2858.8176 2206.5001,-2858.8175"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2325" cy="-2830.5051" rx="27" ry="18"/>
<text text-anchor="middle" x="2325" y="-2826.3051" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_30&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2329.9661,-5512.8875C2329.5562,-5291.4945 2325.5608,-3133.4204 2325.053,-2859.1277"/>
<polygon fill="#000000" stroke="#000000" points="2328.5525,-2858.811 2325.0339,-2848.8175 2321.5525,-2858.824 2328.5525,-2858.811"/>
</g>
<!-- raw_37 -->
<g id="node38" class="node">
<title>raw_37</title>
<ellipse fill="none" stroke="#000000" cx="2412" cy="-2830.5051" rx="27" ry="18"/>
<text text-anchor="middle" x="2412" y="-2826.3051" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_31&#45;&gt;raw_37 -->
<g id="edge37" class="edge">
<title>prose_31&#45;&gt;raw_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2412,-5512.8875C2412,-5291.4945 2412,-3133.4204 2412,-2859.1277"/>
<polygon fill="#000000" stroke="#000000" points="2415.5001,-2858.8175 2412,-2848.8175 2408.5001,-2858.8176 2415.5001,-2858.8175"/>
</g>
<!-- raw_39 -->
<g id="node40" class="node">
<title>raw_39</title>
<ellipse fill="none" stroke="#000000" cx="2916" cy="-2830.5051" rx="27" ry="18"/>
<text text-anchor="middle" x="2916" y="-2826.3051" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_32&#45;&gt;raw_39 -->
<g id="edge39" class="edge">
<title>prose_32&#45;&gt;raw_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2556.4074,-5513.2498C2585.8282,-5293.7553 2875.6551,-3131.4987 2912.2162,-2858.7343"/>
<polygon fill="#000000" stroke="#000000" points="2915.7296,-2858.8673 2913.5892,-2848.4909 2908.7916,-2857.9373 2915.7296,-2858.8673"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2995" cy="-2830.5051" rx="27" ry="18"/>
<text text-anchor="middle" x="2995" y="-2826.3051" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_33&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_33&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2899.7826,-5520.7966C2918.0609,-5512.1236 2940.8989,-5497.8371 2952,-5477.2099 3082.4301,-5234.8556 3006.4106,-3128.4957 2996.1052,-2858.8688"/>
<polygon fill="#000000" stroke="#000000" points="2999.5969,-2858.5833 2995.7153,-2848.7252 2992.6021,-2858.8523 2999.5969,-2858.5833"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2116.5,-109.2005 1547.5,-109.2005 1547.5,-38.5998 2116.5,-38.5998 2116.5,-109.2005"/>
<text text-anchor="middle" x="1832" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">LuaJIT FFI reflection Library</text>
<text text-anchor="middle" x="1832" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">Copyright (C) 2014 Peter Cawley [[mailto:lua@corsix.org]]. All rights reserved.</text>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2325.3527,-2812.2712C2329.6869,-2584.2449 2371.0068,-292.3371 2283,-183.8002 2237.6392,-127.8577 2195.0332,-164.6082 2125,-147.8002 2077.4941,-136.3988 2025.778,-123.5132 1979.2013,-111.7319"/>
<polygon fill="#000000" stroke="#000000" points="1979.8969,-108.2977 1969.3437,-109.2356 1978.1784,-115.0835 1979.8969,-108.2977"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2689.5,-132.301 2134.5,-132.301 2134.5,-15.4992 2689.5,-15.4992 2689.5,-132.301"/>
<text text-anchor="middle" x="2412" y="-100.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">Permission is hereby granted, free of charge, to any person obtaining a copy</text>
<text text-anchor="middle" x="2412" y="-85.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">of this software and associated documentation files (the &quot;Software&quot;), to deal</text>
<text text-anchor="middle" x="2412" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">in the Software without restriction, including without limitation the rights</text>
<text text-anchor="middle" x="2412" y="-54.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</text>
<text text-anchor="middle" x="2412" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">copies of the Software, and to permit persons to whom the Software is</text>
<text text-anchor="middle" x="2412" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">furnished to do so, subject to the following conditions:</text>
</g>
<!-- raw_37&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>raw_37&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2412,-2812.1732C2412,-2596.5811 2412,-544.7027 2412,-142.2122"/>
<polygon fill="#000000" stroke="#000000" points="2415.5001,-142.1752 2412,-132.1753 2408.5001,-142.1753 2415.5001,-142.1752"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="3242,-101.2005 2708,-101.2005 2708,-46.5997 3242,-46.5997 3242,-101.2005"/>
<text text-anchor="middle" x="2975" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">The above copyright notice and this permission notice shall be included in</text>
<text text-anchor="middle" x="2975" y="-54.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">all copies or substantial portions of the Software.</text>
</g>
<!-- raw_39&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>raw_39&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2915.4026,-2812.3416C2909.9273,-2640.3239 2870.641,-1280.3129 2959,-183.8002 2960.9564,-159.5216 2964.8782,-132.4425 2968.3492,-111.2389"/>
<polygon fill="#000000" stroke="#000000" points="2971.8071,-111.7806 2970.0063,-101.3399 2964.9032,-110.6248 2971.8071,-111.7806"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3815.5,-147.7005 3260.5,-147.7005 3260.5,-.0998 3815.5,-.0998 3815.5,-147.7005"/>
<text text-anchor="middle" x="3538" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</text>
<text text-anchor="middle" x="3538" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</text>
<text text-anchor="middle" x="3538" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. &#160;IN NO EVENT SHALL THE</text>
<text text-anchor="middle" x="3538" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</text>
<text text-anchor="middle" x="3538" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</text>
<text text-anchor="middle" x="3538" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</text>
<text text-anchor="middle" x="3538" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">THE SOFTWARE.</text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2994.595,-2812.2516C2989.6105,-2583.9821 2941.84,-289.6984 3033,-183.8002 3063.2814,-148.6232 3188.1875,-156.8364 3250.3593,-147.5709"/>
<polygon fill="#000000" stroke="#000000" points="3251.2534,-150.9671 3260.4891,-145.7756 3250.0318,-144.0745 3251.2534,-150.9671"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="3135.5,-2848.5051 3042.5,-2848.5051 3042.5,-2812.5051 3135.5,-2812.5051 3135.5,-2848.5051"/>
<text text-anchor="middle" x="3089" y="-2827.0051" font-family="Inconsolata" font-size="14.00" fill="#000000">*** reflect</text>
</g>
<!-- header_43&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>header_43&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3089,-5512.8875C3089,-5291.4945 3089,-3133.4204 3089,-2859.1277"/>
<polygon fill="#000000" stroke="#000000" points="3092.5001,-2858.8175 3089,-2848.8175 3085.5001,-2858.8176 3092.5001,-2858.8175"/>
</g>
<!-- raw_47 -->
<g id="node48" class="node">
<title>raw_47</title>
<ellipse fill="none" stroke="#000000" cx="3186" cy="-2830.5051" rx="27" ry="18"/>
<text text-anchor="middle" x="3186" y="-2826.3051" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_44&#45;&gt;raw_47 -->
<g id="edge47" class="edge">
<title>prose_44&#45;&gt;raw_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3186,-5512.8875C3186,-5291.4945 3186,-3133.4204 3186,-2859.1277"/>
<polygon fill="#000000" stroke="#000000" points="3189.5001,-2858.8175 3186,-2848.8175 3182.5001,-2858.8176 3189.5001,-2858.8175"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="4213,-5477.4148 3231,-5477.4148 3231,-183.5953 4213,-183.5953 4213,-5477.4148"/>
<text text-anchor="middle" x="3722" y="-5462.0099" font-family="Inconsolata" font-size="14.00" fill="#000000">local ffi = require &quot;ffi&quot;</text>
<text text-anchor="middle" x="3722" y="-5446.6099" font-family="Inconsolata" font-size="14.00" fill="#000000">local bit = require &quot;bit&quot;</text>
<text text-anchor="middle" x="3722" y="-5431.2099" font-family="Inconsolata" font-size="14.00" fill="#000000">local reflect = {}</text>
<text text-anchor="middle" x="3722" y="-5399.8098" font-family="Inconsolata" font-size="14.00" fill="#000000">local CTState, init_CTState</text>
<text text-anchor="middle" x="3722" y="-5384.4098" font-family="Inconsolata" font-size="14.00" fill="#000000">local miscmap, init_miscmap</text>
<text text-anchor="middle" x="3722" y="-5353.0098" font-family="Inconsolata" font-size="14.00" fill="#000000">local function gc_str(gcref) &#45;&#45; Convert a GCref (to a GCstr) into a string</text>
<text text-anchor="middle" x="3722" y="-5337.6097" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if gcref ~= 0 then</text>
<text text-anchor="middle" x="3722" y="-5322.2097" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local ts = ffi.cast(&quot;uint32_t*&quot;, gcref)</text>
<text text-anchor="middle" x="3722" y="-5306.8097" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return ffi.string(ts + 4, ts[3])</text>
<text text-anchor="middle" x="3722" y="-5291.4096" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-5276.0096" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-5244.6096" font-family="Inconsolata" font-size="14.00" fill="#000000">local typeinfo = rawget(ffi, &quot;typeinfo&quot;)</text>
<text text-anchor="middle" x="3722" y="-5213.2095" font-family="Inconsolata" font-size="14.00" fill="#000000">typeinfo = typeinfo or function(id)</text>
<text text-anchor="middle" x="3722" y="-5197.8095" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; ffi.typeof is present in LuaJIT v2.1 since 8th Oct 2014 (d6ff3afc)</text>
<text text-anchor="middle" x="3722" y="-5182.4095" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; this is an emulation layer for older versions of LuaJIT</text>
<text text-anchor="middle" x="3722" y="-5167.0095" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local ctype = (CTState or init_CTState()).tab[id]</text>
<text text-anchor="middle" x="3722" y="-5151.6094" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return {</text>
<text text-anchor="middle" x="3722" y="-5136.2094" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;info = ctype.info,</text>
<text text-anchor="middle" x="3722" y="-5120.8094" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;size = bit.bnot(ctype.size) ~= 0 and ctype.size,</text>
<text text-anchor="middle" x="3722" y="-5105.4093" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;sib = ctype.sib ~= 0 and ctype.sib,</text>
<text text-anchor="middle" x="3722" y="-5090.0093" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;name = gc_str(ctype.name),</text>
<text text-anchor="middle" x="3722" y="-5074.6093" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="3722" y="-5059.2092" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-5027.8092" font-family="Inconsolata" font-size="14.00" fill="#000000">local function memptr(gcobj)</text>
<text text-anchor="middle" x="3722" y="-5012.4092" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return tonumber(tostring(gcobj):match&quot;%x*$&quot;, 16)</text>
<text text-anchor="middle" x="3722" y="-4997.0091" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-4965.6091" font-family="Inconsolata" font-size="14.00" fill="#000000">init_CTState = function()</text>
<text text-anchor="middle" x="3722" y="-4950.2091" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; Relevant minimal definitions from lj_ctype.h</text>
<text text-anchor="middle" x="3722" y="-4934.8091" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;ffi.cdef [[</text>
<text text-anchor="middle" x="3722" y="-4919.409" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;typedef struct CType {</text>
<text text-anchor="middle" x="3722" y="-4904.009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;uint32_t info;</text>
<text text-anchor="middle" x="3722" y="-4888.609" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;uint32_t size;</text>
<text text-anchor="middle" x="3722" y="-4873.2089" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;uint16_t sib;</text>
<text text-anchor="middle" x="3722" y="-4857.8089" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;uint16_t next;</text>
<text text-anchor="middle" x="3722" y="-4842.4089" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;uint32_t name;</text>
<text text-anchor="middle" x="3722" y="-4827.0088" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;} CType;</text>
<text text-anchor="middle" x="3722" y="-4795.6088" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;typedef struct CTState {</text>
<text text-anchor="middle" x="3722" y="-4780.2088" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;CType *tab;</text>
<text text-anchor="middle" x="3722" y="-4764.8087" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;uint32_t top;</text>
<text text-anchor="middle" x="3722" y="-4749.4087" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;uint32_t sizetab;</text>
<text text-anchor="middle" x="3722" y="-4734.0087" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;void *L;</text>
<text text-anchor="middle" x="3722" y="-4718.6086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;void *g;</text>
<text text-anchor="middle" x="3722" y="-4703.2086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;void *finalizer;</text>
<text text-anchor="middle" x="3722" y="-4687.8086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;void *miscmap;</text>
<text text-anchor="middle" x="3722" y="-4672.4086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;} CTState;</text>
<text text-anchor="middle" x="3722" y="-4657.0085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;]]</text>
<text text-anchor="middle" x="3722" y="-4625.6085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; Acquire a pointer to this Lua universe&#39;s CTState</text>
<text text-anchor="middle" x="3722" y="-4610.2085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local co = coroutine.create(function()end) &#45;&#45; Any live coroutine will do.</text>
<text text-anchor="middle" x="3722" y="-4594.8084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local uint32_ptr = ffi.typeof(&quot;uint32_t*&quot;)</text>
<text text-anchor="middle" x="3722" y="-4579.4084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local G = ffi.cast(uint32_ptr, ffi.cast(uint32_ptr, memptr(co))[2])</text>
<text text-anchor="middle" x="3722" y="-4564.0084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; In global_State, `MRef ctype_state` is immediately before `GCRef gcroot[GCROOT_MAX]`.</text>
<text text-anchor="middle" x="3722" y="-4548.6083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; We first find (an entry in) gcroot by looking for a metamethod name string.</text>
<text text-anchor="middle" x="3722" y="-4533.2083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local anchor = ffi.cast(&quot;uint32_t&quot;, ffi.cast(&quot;const char*&quot;, &quot;__index&quot;))</text>
<text text-anchor="middle" x="3722" y="-4517.8083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local i = 0</text>
<text text-anchor="middle" x="3722" y="-4502.4082" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;while math.abs(tonumber(G[i] &#45; anchor)) &gt; 64 do</text>
<text text-anchor="middle" x="3722" y="-4487.0082" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;i = i + 1</text>
<text text-anchor="middle" x="3722" y="-4471.6082" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-4456.2081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; We then work backwards looking for something resembling ctype_state.</text>
<text text-anchor="middle" x="3722" y="-4440.8081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;repeat</text>
<text text-anchor="middle" x="3722" y="-4425.4081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;i = i &#45; 1</text>
<text text-anchor="middle" x="3722" y="-4410.0081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;CTState = ffi.cast(&quot;CTState*&quot;, G[i])</text>
<text text-anchor="middle" x="3722" y="-4394.608" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;until ffi.cast(uint32_ptr, CTState.g) == G</text>
<text text-anchor="middle" x="3722" y="-4363.208" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return CTState</text>
<text text-anchor="middle" x="3722" y="-4347.808" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-4316.4079" font-family="Inconsolata" font-size="14.00" fill="#000000">init_miscmap = function()</text>
<text text-anchor="middle" x="3722" y="-4301.0079" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; Acquire the CTState&#39;s miscmap table as a Lua variable</text>
<text text-anchor="middle" x="3722" y="-4285.6079" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local t = {}; t[0] = t</text>
<text text-anchor="middle" x="3722" y="-4270.2078" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local tvalue = ffi.cast(&quot;uint32_t*&quot;, memptr(t))[2]</text>
<text text-anchor="middle" x="3722" y="-4254.8078" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;ffi.cast(&quot;uint32_t*&quot;, tvalue)[ffi.abi&quot;le&quot; and 0 or 1] = ffi.cast(&quot;uint32_t&quot;, ffi.cast(&quot;uintptr_t&quot;, (CTState or init_CTState()).miscmap))</text>
<text text-anchor="middle" x="3722" y="-4239.4078" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;miscmap = t[0]</text>
<text text-anchor="middle" x="3722" y="-4224.0077" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return miscmap</text>
<text text-anchor="middle" x="3722" y="-4208.6077" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-4177.2077" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; Information for unpacking a `struct CType`.</text>
<text text-anchor="middle" x="3722" y="-4161.8076" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; One table per CT_* constant, containing:</text>
<text text-anchor="middle" x="3722" y="-4146.4076" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; * A name for that CT_</text>
<text text-anchor="middle" x="3722" y="-4131.0076" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; * Roles of the cid and size fields.</text>
<text text-anchor="middle" x="3722" y="-4115.6076" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; * Whether the sib field is meaningful.</text>
<text text-anchor="middle" x="3722" y="-4100.2075" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; * Zero or more applicable boolean flags.</text>
<text text-anchor="middle" x="3722" y="-4084.8075" font-family="Inconsolata" font-size="14.00" fill="#000000">local CTs = {[0] =</text>
<text text-anchor="middle" x="3722" y="-4069.4075" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;int&quot;,</text>
<text text-anchor="middle" x="3722" y="-4054.0074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;&quot;, &quot;size&quot;, false,</text>
<text text-anchor="middle" x="3722" y="-4038.6074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x08000000, &quot;bool&quot;},</text>
<text text-anchor="middle" x="3722" y="-4023.2074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x04000000, &quot;float&quot;, &quot;subwhat&quot;},</text>
<text text-anchor="middle" x="3722" y="-4007.8073" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x02000000, &quot;const&quot;},</text>
<text text-anchor="middle" x="3722" y="-3992.4073" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x01000000, &quot;volatile&quot;},</text>
<text text-anchor="middle" x="3722" y="-3977.0073" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00800000, &quot;unsigned&quot;},</text>
<text text-anchor="middle" x="3722" y="-3961.6072" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00400000, &quot;long&quot;},</text>
<text text-anchor="middle" x="3722" y="-3946.2072" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3930.8072" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;struct&quot;,</text>
<text text-anchor="middle" x="3722" y="-3915.4071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;&quot;, &quot;size&quot;, true,</text>
<text text-anchor="middle" x="3722" y="-3900.0071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x02000000, &quot;const&quot;},</text>
<text text-anchor="middle" x="3722" y="-3884.6071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x01000000, &quot;volatile&quot;},</text>
<text text-anchor="middle" x="3722" y="-3869.2071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00800000, &quot;union&quot;, &quot;subwhat&quot;},</text>
<text text-anchor="middle" x="3722" y="-3853.807" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00100000, &quot;vla&quot;},</text>
<text text-anchor="middle" x="3722" y="-3838.407" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3823.007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;ptr&quot;,</text>
<text text-anchor="middle" x="3722" y="-3807.6069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;element_type&quot;, &quot;size&quot;, false,</text>
<text text-anchor="middle" x="3722" y="-3792.2069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x02000000, &quot;const&quot;},</text>
<text text-anchor="middle" x="3722" y="-3776.8069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x01000000, &quot;volatile&quot;},</text>
<text text-anchor="middle" x="3722" y="-3761.4068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00800000, &quot;ref&quot;, &quot;subwhat&quot;},</text>
<text text-anchor="middle" x="3722" y="-3746.0068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3730.6068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;array&quot;,</text>
<text text-anchor="middle" x="3722" y="-3715.2067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;element_type&quot;, &quot;size&quot;, false,</text>
<text text-anchor="middle" x="3722" y="-3699.8067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x08000000, &quot;vector&quot;},</text>
<text text-anchor="middle" x="3722" y="-3684.4067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x04000000, &quot;complex&quot;},</text>
<text text-anchor="middle" x="3722" y="-3669.0066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x02000000, &quot;const&quot;},</text>
<text text-anchor="middle" x="3722" y="-3653.6066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x01000000, &quot;volatile&quot;},</text>
<text text-anchor="middle" x="3722" y="-3638.2066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00100000, &quot;vla&quot;},</text>
<text text-anchor="middle" x="3722" y="-3622.8066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3607.4065" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;void&quot;,</text>
<text text-anchor="middle" x="3722" y="-3592.0065" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;&quot;, &quot;size&quot;, false,</text>
<text text-anchor="middle" x="3722" y="-3576.6065" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x02000000, &quot;const&quot;},</text>
<text text-anchor="middle" x="3722" y="-3561.2064" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x01000000, &quot;volatile&quot;},</text>
<text text-anchor="middle" x="3722" y="-3545.8064" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3530.4064" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;enum&quot;,</text>
<text text-anchor="middle" x="3722" y="-3515.0063" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;type&quot;, &quot;size&quot;, true,</text>
<text text-anchor="middle" x="3722" y="-3499.6063" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3484.2063" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;func&quot;,</text>
<text text-anchor="middle" x="3722" y="-3468.8062" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;return_type&quot;, &quot;nargs&quot;, true,</text>
<text text-anchor="middle" x="3722" y="-3453.4062" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00800000, &quot;vararg&quot;},</text>
<text text-anchor="middle" x="3722" y="-3438.0062" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00400000, &quot;sse_reg_params&quot;},</text>
<text text-anchor="middle" x="3722" y="-3422.6061" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3407.2061" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;typedef&quot;, &#45;&#45; Not seen</text>
<text text-anchor="middle" x="3722" y="-3391.8061" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;element_type&quot;, &quot;&quot;, false,</text>
<text text-anchor="middle" x="3722" y="-3376.4061" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3361.006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;attrib&quot;, &#45;&#45; Only seen internally</text>
<text text-anchor="middle" x="3722" y="-3345.606" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;type&quot;, &quot;value&quot;, true,</text>
<text text-anchor="middle" x="3722" y="-3330.206" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3314.8059" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;field&quot;,</text>
<text text-anchor="middle" x="3722" y="-3299.4059" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;type&quot;, &quot;offset&quot;, true,</text>
<text text-anchor="middle" x="3722" y="-3284.0059" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3268.6058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;bitfield&quot;,</text>
<text text-anchor="middle" x="3722" y="-3253.2058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;&quot;, &quot;offset&quot;, true,</text>
<text text-anchor="middle" x="3722" y="-3237.8058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x08000000, &quot;bool&quot;},</text>
<text text-anchor="middle" x="3722" y="-3222.4057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x02000000, &quot;const&quot;},</text>
<text text-anchor="middle" x="3722" y="-3207.0057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x01000000, &quot;volatile&quot;},</text>
<text text-anchor="middle" x="3722" y="-3191.6057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x00800000, &quot;unsigned&quot;},</text>
<text text-anchor="middle" x="3722" y="-3176.2056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3160.8056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;constant&quot;,</text>
<text text-anchor="middle" x="3722" y="-3145.4056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;type&quot;, &quot;value&quot;, true,</text>
<text text-anchor="middle" x="3722" y="-3130.0056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;{0x02000000, &quot;const&quot;},</text>
<text text-anchor="middle" x="3722" y="-3114.6055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3099.2055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;extern&quot;, &#45;&#45; Not seen</text>
<text text-anchor="middle" x="3722" y="-3083.8055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;CID&quot;, &quot;&quot;, true,</text>
<text text-anchor="middle" x="3722" y="-3068.4054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3053.0054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;{&quot;kw&quot;, &#45;&#45; Not seen</text>
<text text-anchor="middle" x="3722" y="-3037.6054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&quot;TOK&quot;, &quot;size&quot;,</text>
<text text-anchor="middle" x="3722" y="-3022.2053" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;},</text>
<text text-anchor="middle" x="3722" y="-3006.8053" font-family="Inconsolata" font-size="14.00" fill="#000000">}</text>
<text text-anchor="middle" x="3722" y="-2975.4053" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; Set of CType::cid roles which are a CTypeID.</text>
<text text-anchor="middle" x="3722" y="-2960.0052" font-family="Inconsolata" font-size="14.00" fill="#000000">local type_keys = {</text>
<text text-anchor="middle" x="3722" y="-2944.6052" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;element_type = true,</text>
<text text-anchor="middle" x="3722" y="-2929.2052" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return_type = true,</text>
<text text-anchor="middle" x="3722" y="-2913.8051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;value_type = true,</text>
<text text-anchor="middle" x="3722" y="-2898.4051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;type = true,</text>
<text text-anchor="middle" x="3722" y="-2883.0051" font-family="Inconsolata" font-size="14.00" fill="#000000">}</text>
<text text-anchor="middle" x="3722" y="-2851.6051" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; Create a metatable for each CT.</text>
<text text-anchor="middle" x="3722" y="-2836.205" font-family="Inconsolata" font-size="14.00" fill="#000000">local metatables = {</text>
<text text-anchor="middle" x="3722" y="-2820.805" font-family="Inconsolata" font-size="14.00" fill="#000000">}</text>
<text text-anchor="middle" x="3722" y="-2805.405" font-family="Inconsolata" font-size="14.00" fill="#000000">for _, CT in ipairs(CTs) do</text>
<text text-anchor="middle" x="3722" y="-2790.0049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local what = CT[1]</text>
<text text-anchor="middle" x="3722" y="-2774.6049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local mt = {__index = {}}</text>
<text text-anchor="middle" x="3722" y="-2759.2049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;metatables[what] = mt</text>
<text text-anchor="middle" x="3722" y="-2743.8048" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-2712.4048" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; Logic for merging an attribute CType onto the annotated CType.</text>
<text text-anchor="middle" x="3722" y="-2697.0048" font-family="Inconsolata" font-size="14.00" fill="#000000">local CTAs = {[0] =</text>
<text text-anchor="middle" x="3722" y="-2681.6047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;function(a, refct) error(&quot;TODO: CTA_NONE&quot;) end,</text>
<text text-anchor="middle" x="3722" y="-2666.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;function(a, refct) error(&quot;TODO: CTA_QUAL&quot;) end,</text>
<text text-anchor="middle" x="3722" y="-2650.8047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;function(a, refct)</text>
<text text-anchor="middle" x="3722" y="-2635.4047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;a = 2^a.value</text>
<text text-anchor="middle" x="3722" y="-2620.0046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.alignment = a</text>
<text text-anchor="middle" x="3722" y="-2604.6046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.attributes.align = a</text>
<text text-anchor="middle" x="3722" y="-2589.2046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end,</text>
<text text-anchor="middle" x="3722" y="-2573.8045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;function(a, refct)</text>
<text text-anchor="middle" x="3722" y="-2558.4045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.transparent = true</text>
<text text-anchor="middle" x="3722" y="-2543.0045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.attributes.subtype = refct.typeid</text>
<text text-anchor="middle" x="3722" y="-2527.6044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end,</text>
<text text-anchor="middle" x="3722" y="-2512.2044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;function(a, refct) refct.sym_name = a.name end,</text>
<text text-anchor="middle" x="3722" y="-2496.8044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;function(a, refct) error(&quot;TODO: CTA_BAD&quot;) end,</text>
<text text-anchor="middle" x="3722" y="-2481.4043" font-family="Inconsolata" font-size="14.00" fill="#000000">}</text>
<text text-anchor="middle" x="3722" y="-2450.0043" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; C function calling conventions (CTCC_* constants in lj_refct.h)</text>
<text text-anchor="middle" x="3722" y="-2434.6043" font-family="Inconsolata" font-size="14.00" fill="#000000">local CTCCs = {[0] =</text>
<text text-anchor="middle" x="3722" y="-2419.2042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;cdecl&quot;,</text>
<text text-anchor="middle" x="3722" y="-2403.8042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;thiscall&quot;,</text>
<text text-anchor="middle" x="3722" y="-2388.4042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;fastcall&quot;,</text>
<text text-anchor="middle" x="3722" y="-2373.0042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;stdcall&quot;,</text>
<text text-anchor="middle" x="3722" y="-2357.6041" font-family="Inconsolata" font-size="14.00" fill="#000000">}</text>
<text text-anchor="middle" x="3722" y="-2326.2041" font-family="Inconsolata" font-size="14.00" fill="#000000">local function refct_from_id(id) &#45;&#45; refct = refct_from_id(CTypeID)</text>
<text text-anchor="middle" x="3722" y="-2310.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local ctype = typeinfo(id)</text>
<text text-anchor="middle" x="3722" y="-2295.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local CT_code = bit.rshift(ctype.info, 28)</text>
<text text-anchor="middle" x="3722" y="-2280.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local CT = CTs[CT_code]</text>
<text text-anchor="middle" x="3722" y="-2264.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local what = CT[1]</text>
<text text-anchor="middle" x="3722" y="-2249.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local refct = setmetatable({</text>
<text text-anchor="middle" x="3722" y="-2233.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;what = what,</text>
<text text-anchor="middle" x="3722" y="-2218.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;typeid = id,</text>
<text text-anchor="middle" x="3722" y="-2203.0038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;name = ctype.name,</text>
<text text-anchor="middle" x="3722" y="-2187.6038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}, metatables[what])</text>
<text text-anchor="middle" x="3722" y="-2156.2038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; Interpret (most of) the CType::info field</text>
<text text-anchor="middle" x="3722" y="-2140.8037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 5, #CT do</text>
<text text-anchor="middle" x="3722" y="-2125.4037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if bit.band(ctype.info, CT[i][1]) ~= 0 then</text>
<text text-anchor="middle" x="3722" y="-2110.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if CT[i][3] == &quot;subwhat&quot; then</text>
<text text-anchor="middle" x="3722" y="-2094.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;refct.what = CT[i][2]</text>
<text text-anchor="middle" x="3722" y="-2079.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3722" y="-2063.8036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;refct[CT[i][2]] = true</text>
<text text-anchor="middle" x="3722" y="-2048.4036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-2033.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-2017.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-2002.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if CT_code &lt;= 5 then</text>
<text text-anchor="middle" x="3722" y="-1986.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.alignment = bit.lshift(1, bit.band(bit.rshift(ctype.info, 16), 15))</text>
<text text-anchor="middle" x="3722" y="-1971.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;elseif what == &quot;func&quot; then</text>
<text text-anchor="middle" x="3722" y="-1956.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.convention = CTCCs[bit.band(bit.rshift(ctype.info, 16), 3)]</text>
<text text-anchor="middle" x="3722" y="-1940.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-1909.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if CT[2] ~= &quot;&quot; then &#45;&#45; Interpret the CType::cid field</text>
<text text-anchor="middle" x="3722" y="-1893.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local k = CT[2]</text>
<text text-anchor="middle" x="3722" y="-1878.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local cid = bit.band(ctype.info, 0xffff)</text>
<text text-anchor="middle" x="3722" y="-1863.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if type_keys[k] then</text>
<text text-anchor="middle" x="3722" y="-1847.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if cid == 0 then</text>
<text text-anchor="middle" x="3722" y="-1832.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;cid = nil</text>
<text text-anchor="middle" x="3722" y="-1816.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3722" y="-1801.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;cid = refct_from_id(cid)</text>
<text text-anchor="middle" x="3722" y="-1786.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-1770.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-1755.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct[k] = cid</text>
<text text-anchor="middle" x="3722" y="-1739.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-1708.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if CT[3] ~= &quot;&quot; then &#45;&#45; Interpret the CType::size field</text>
<text text-anchor="middle" x="3722" y="-1693.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local k = CT[3]</text>
<text text-anchor="middle" x="3722" y="-1677.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct[k] = ctype.size or (k == &quot;size&quot; and &quot;none&quot;)</text>
<text text-anchor="middle" x="3722" y="-1662.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-1630.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if what == &quot;attrib&quot; then</text>
<text text-anchor="middle" x="3722" y="-1615.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Merge leading attributes onto the type being decorated.</text>
<text text-anchor="middle" x="3722" y="-1600.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local CTA = CTAs[bit.band(bit.rshift(ctype.info, 16), 0xff)]</text>
<text text-anchor="middle" x="3722" y="-1584.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if refct.type then</text>
<text text-anchor="middle" x="3722" y="-1569.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local ct = refct.type</text>
<text text-anchor="middle" x="3722" y="-1553.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;ct.attributes = {}</text>
<text text-anchor="middle" x="3722" y="-1538.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;CTA(refct, ct)</text>
<text text-anchor="middle" x="3722" y="-1523.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;ct.typeid = refct.typeid</text>
<text text-anchor="middle" x="3722" y="-1507.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;refct = ct</text>
<text text-anchor="middle" x="3722" y="-1492.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3722" y="-1476.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;refct.CTA = CTA</text>
<text text-anchor="middle" x="3722" y="-1461.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-1446.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;elseif what == &quot;bitfield&quot; then</text>
<text text-anchor="middle" x="3722" y="-1430.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Decode extra bitfield fields, and make it look like a normal field.</text>
<text text-anchor="middle" x="3722" y="-1415.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.offset = refct.offset + bit.band(ctype.info, 127) / 8</text>
<text text-anchor="middle" x="3722" y="-1399.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.size = bit.band(bit.rshift(ctype.info, 8), 127) / 8</text>
<text text-anchor="middle" x="3722" y="-1384.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.type = {</text>
<text text-anchor="middle" x="3722" y="-1369.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;what = &quot;int&quot;,</text>
<text text-anchor="middle" x="3722" y="-1353.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;bool = refct.bool,</text>
<text text-anchor="middle" x="3722" y="-1338.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;const = refct.const,</text>
<text text-anchor="middle" x="3722" y="-1322.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;volatile = refct.volatile,</text>
<text text-anchor="middle" x="3722" y="-1307.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;unsigned = refct.unsigned,</text>
<text text-anchor="middle" x="3722" y="-1292.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;size = bit.band(bit.rshift(ctype.info, 16), 127),</text>
<text text-anchor="middle" x="3722" y="-1276.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;}</text>
<text text-anchor="middle" x="3722" y="-1261.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct.bool, refct.const, refct.volatile, refct.unsigned = nil</text>
<text text-anchor="middle" x="3722" y="-1245.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-1214.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if CT[4] then &#45;&#45; Merge sibling attributes onto this type.</text>
<text text-anchor="middle" x="3722" y="-1199.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;while ctype.sib do</text>
<text text-anchor="middle" x="3722" y="-1183.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local entry = typeinfo(ctype.sib)</text>
<text text-anchor="middle" x="3722" y="-1168.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if CTs[bit.rshift(entry.info, 28)][1] ~= &quot;attrib&quot; then break end</text>
<text text-anchor="middle" x="3722" y="-1152.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if bit.band(entry.info, 0xffff) ~= 0 then break end</text>
<text text-anchor="middle" x="3722" y="-1137.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local sib = refct_from_id(ctype.sib)</text>
<text text-anchor="middle" x="3722" y="-1122.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;sib:CTA(refct)</text>
<text text-anchor="middle" x="3722" y="-1106.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;ctype = entry</text>
<text text-anchor="middle" x="3722" y="-1091.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-1075.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-1044.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return refct</text>
<text text-anchor="middle" x="3722" y="-1029.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-997.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local function sib_iter(s, refct)</text>
<text text-anchor="middle" x="3722" y="-982.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;repeat</text>
<text text-anchor="middle" x="3722" y="-966.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local ctype = typeinfo(refct.typeid)</text>
<text text-anchor="middle" x="3722" y="-951.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not ctype.sib then return end</text>
<text text-anchor="middle" x="3722" y="-936.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct = refct_from_id(ctype.sib)</text>
<text text-anchor="middle" x="3722" y="-920.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;until refct.what ~= &quot;attrib&quot; &#45;&#45; Pure attribs are skipped.</text>
<text text-anchor="middle" x="3722" y="-905.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return refct</text>
<text text-anchor="middle" x="3722" y="-889.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-858.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local function siblings(refct)</text>
<text text-anchor="middle" x="3722" y="-843.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; Follow to the end of the attrib chain, if any.</text>
<text text-anchor="middle" x="3722" y="-827.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;while refct.attributes do</text>
<text text-anchor="middle" x="3722" y="-812.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refct = refct_from_id(refct.attributes.subtype or typeinfo(refct.typeid).sib)</text>
<text text-anchor="middle" x="3722" y="-796.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-765.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return sib_iter, nil, refct</text>
<text text-anchor="middle" x="3722" y="-750.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-718.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">metatables.struct.__index.members = siblings</text>
<text text-anchor="middle" x="3722" y="-703.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">metatables.func.__index.arguments = siblings</text>
<text text-anchor="middle" x="3722" y="-687.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">metatables.enum.__index.values = siblings</text>
<text text-anchor="middle" x="3722" y="-656.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function find_sibling(refct, name)</text>
<text text-anchor="middle" x="3722" y="-641.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local num = tonumber(name)</text>
<text text-anchor="middle" x="3722" y="-625.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if num then</text>
<text text-anchor="middle" x="3722" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for sib in siblings(refct) do</text>
<text text-anchor="middle" x="3722" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if num == 1 then</text>
<text text-anchor="middle" x="3722" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return sib</text>
<text text-anchor="middle" x="3722" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;num = num &#45; 1</text>
<text text-anchor="middle" x="3722" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="3722" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for sib in siblings(refct) do</text>
<text text-anchor="middle" x="3722" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if sib.name == name then</text>
<text text-anchor="middle" x="3722" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return sib</text>
<text text-anchor="middle" x="3722" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3722" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3722" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-378.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">metatables.struct.__index.member = find_sibling</text>
<text text-anchor="middle" x="3722" y="-363.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">metatables.func.__index.argument = find_sibling</text>
<text text-anchor="middle" x="3722" y="-347.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">metatables.enum.__index.value = find_sibling</text>
<text text-anchor="middle" x="3722" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">function reflect.typeof(x) &#45;&#45; refct = reflect.typeof(ct)</text>
<text text-anchor="middle" x="3722" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return refct_from_id(tonumber(ffi.typeof(x)))</text>
<text text-anchor="middle" x="3722" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">function reflect.getmetatable(x) &#45;&#45; mt = reflect.getmetatable(ct)</text>
<text text-anchor="middle" x="3722" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return (miscmap or init_miscmap())[&#45;tonumber(ffi.typeof(x))]</text>
<text text-anchor="middle" x="3722" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3722" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">return reflect</text>
</g>
<!-- codeblock_45&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>codeblock_45&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3521.3704,-5512.8875C3521.8711,-5506.1938 3522.5042,-5497.7296 3523.2618,-5487.6007"/>
<polygon fill="#000000" stroke="#000000" points="3526.7703,-5487.616 3524.026,-5477.3828 3519.7898,-5487.0938 3526.7703,-5487.616"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3888,-91.9001 3834,-91.9001 3834,-55.9001 3888,-55.9001 3888,-91.9001"/>
</g>
<!-- raw_47&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>raw_47&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3185.5409,-2812.2155C3179.8845,-2583.4997 3125.5017,-284.8558 3222,-183.8002 3268.2767,-135.338 3768.0666,-184.6998 3824,-147.8002 3839.8691,-137.3313 3849.223,-117.9024 3854.5549,-101.5931"/>
<polygon fill="#000000" stroke="#000000" points="3857.9275,-102.5299 3857.3772,-91.9493 3851.2093,-100.5637 3857.9275,-102.5299"/>
</g>
</g>
</svg>
