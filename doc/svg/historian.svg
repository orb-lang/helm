<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="14440pt" height="2190pt"
 viewBox="0.00 0.00 14440.00 2190.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2186.2032)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2186.2032 14436,-2186.2032 14436,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1806" cy="-2164.2032" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1806" y="-2160.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 366</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1806" cy="-2092.2032" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1806" y="-2088.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;285</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1806,-2146.0346C1806,-2138.3342 1806,-2129.1776 1806,-2120.6198"/>
<polygon fill="#000000" stroke="#000000" points="1809.5001,-2120.6164 1806,-2110.6165 1802.5001,-2120.6165 1809.5001,-2120.6164"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1383" cy="-2020.2032" rx="57.0821" ry="18"/>
<text text-anchor="middle" x="1383" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Historian</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1745.7149,-2084.8459C1675.1794,-2075.8076 1555.0436,-2059.0738 1453,-2038.2032 1447.6215,-2037.1032 1442.037,-2035.8534 1436.4738,-2034.5372"/>
<polygon fill="#000000" stroke="#000000" points="1437.0769,-2031.0818 1426.5325,-2032.1144 1435.4193,-2037.8828 1437.0769,-2031.0818"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1494" cy="-2020.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1494" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1747.191,-2084.0467C1691.8997,-2075.5362 1607.2172,-2060.3226 1536,-2038.2032 1533.5472,-2037.4414 1531.0431,-2036.5844 1528.5399,-2035.6685"/>
<polygon fill="#000000" stroke="#000000" points="1529.5872,-2032.3195 1518.9998,-2031.9204 1527.0274,-2038.8348 1529.5872,-2032.3195"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1577" cy="-2020.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1577" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1757.4359,-2079.9484C1719.3795,-2069.9221 1665.3029,-2054.7391 1619,-2038.2032 1616.5813,-2037.3394 1614.1026,-2036.4062 1611.6178,-2035.435"/>
<polygon fill="#000000" stroke="#000000" points="1612.6994,-2032.0964 1602.1178,-2031.5669 1610.0596,-2038.5796 1612.6994,-2032.0964"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1660" cy="-2020.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1660" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1773.9597,-2076.4025C1750.0983,-2064.6353 1717.6044,-2048.6108 1693.4189,-2036.6838"/>
<polygon fill="#000000" stroke="#000000" points="1694.7832,-2033.4541 1684.2664,-2032.1702 1691.6871,-2039.7322 1694.7832,-2033.4541"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1742" cy="-2020.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1742" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1790.1798,-2074.4055C1782.1184,-2065.3364 1772.1979,-2054.1758 1763.4584,-2044.3439"/>
<polygon fill="#000000" stroke="#000000" points="1766.0204,-2041.9579 1756.7607,-2036.809 1760.7885,-2046.6084 1766.0204,-2041.9579"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1870" cy="-2020.2032" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1870" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 16&#45;25</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1821.8202,-2074.4055C1829.5126,-2065.7515 1838.8978,-2055.1932 1847.3344,-2045.7021"/>
<polygon fill="#000000" stroke="#000000" points="1850.1122,-2047.8452 1854.14,-2038.0458 1844.8803,-2043.1946 1850.1122,-2047.8452"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="2087" cy="-2020.2032" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2087" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 27&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1853.9863,-2079.9078C1901.2571,-2067.7957 1973.679,-2049.2392 2025.2255,-2036.0316"/>
<polygon fill="#000000" stroke="#000000" points="2026.1011,-2039.4203 2034.9194,-2033.5477 2024.3636,-2032.6394 2026.1011,-2039.4203"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="5729" cy="-2020.2032" rx="70.655" ry="18"/>
<text text-anchor="middle" x="5729" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 32&#45;189</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1871.6291,-2090.9987C2337.0244,-2082.4572 5134.9235,-2031.1065 5648.1586,-2021.6869"/>
<polygon fill="#000000" stroke="#000000" points="5648.4961,-2025.1814 5658.4301,-2021.4984 5648.3676,-2018.1826 5648.4961,-2025.1814"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="11088" cy="-2020.2032" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="11088" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 240&#45;285</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1871.817,-2091.6927C2651.7686,-2085.6426 10117.1188,-2027.7343 11002.3555,-2020.8676"/>
<polygon fill="#000000" stroke="#000000" points="11002.4931,-2024.3667 11012.4656,-2020.7891 11002.4387,-2017.3669 11002.4931,-2024.3667"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="12117" cy="-2020.2032" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="12117" y="-2016.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 286&#45;332</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1872.0429,-2092.159C2487.4954,-2091.6778 7283.9624,-2086.4383 11172,-2038.2032 11489.0098,-2034.2704 11865.7757,-2026.0213 12031.5381,-2022.2111"/>
<polygon fill="#000000" stroke="#000000" points="12031.7532,-2025.7072 12041.6699,-2021.9777 12031.5919,-2018.709 12031.7532,-2025.7072"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="1428.5,-1918.6031 1335.5,-1918.6031 1335.5,-1882.6031 1428.5,-1882.6031 1428.5,-1918.6031"/>
<text text-anchor="middle" x="1382" y="-1897.1031" font-family="Inconsolata" font-size="14.00" fill="#000000">* Historian</text>
</g>
<!-- header_2&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>header_2&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1382.8481,-2002.0385C1382.6859,-1982.6325 1382.4265,-1951.6132 1382.2373,-1928.981"/>
<polygon fill="#000000" stroke="#000000" points="1385.7369,-1928.9091 1382.1533,-1918.9387 1378.7371,-1928.9677 1385.7369,-1928.9091"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="1474" cy="-1900.6031" rx="27" ry="18"/>
<text text-anchor="middle" x="1474" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_3&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.9624,-2002.0385C1487.6984,-1982.5196 1482.4697,-1951.2521 1478.6796,-1928.5871"/>
<polygon fill="#000000" stroke="#000000" points="1482.1021,-1927.8326 1477.0006,-1918.5468 1475.198,-1928.9872 1482.1021,-1927.8326"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="1546" cy="-1900.6031" rx="27" ry="18"/>
<text text-anchor="middle" x="1546" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1572.359,-2002.2979C1567.291,-1982.7453 1559.1105,-1951.1845 1553.2061,-1928.4047"/>
<polygon fill="#000000" stroke="#000000" points="1556.5699,-1927.4328 1550.6727,-1918.6308 1549.7938,-1929.1892 1556.5699,-1927.4328"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="1618" cy="-1900.6031" rx="27" ry="18"/>
<text text-anchor="middle" x="1618" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_5&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1653.7122,-2002.2979C1646.7751,-1982.5437 1635.5337,-1950.5324 1627.5166,-1927.7028"/>
<polygon fill="#000000" stroke="#000000" points="1630.8094,-1926.5159 1624.1937,-1918.2405 1624.2048,-1928.8353 1630.8094,-1926.5159"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1690" cy="-1900.6031" rx="27" ry="18"/>
<text text-anchor="middle" x="1690" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_6&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1734.3272,-2002.5558C1725.6753,-1982.6563 1711.5143,-1950.086 1701.5301,-1927.1225"/>
<polygon fill="#000000" stroke="#000000" points="1704.7323,-1925.7092 1697.5352,-1917.9341 1698.3128,-1928.5003 1704.7323,-1925.7092"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2017,-1966.3035 1735,-1966.3035 1735,-1834.9027 2017,-1834.9027 2017,-1966.3035"/>
<text text-anchor="middle" x="1876" y="-1951.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">local Linebuf = require &quot;linebuf&quot;</text>
<text text-anchor="middle" x="1876" y="-1935.6032" font-family="Inconsolata" font-size="14.00" fill="#000000">local sql &#160;&#160;&#160;&#160;= require &quot;sqlayer&quot;</text>
<text text-anchor="middle" x="1876" y="-1920.2032" font-family="Inconsolata" font-size="14.00" fill="#000000">local color &#160;&#160;= require &quot;color&quot;</text>
<text text-anchor="middle" x="1876" y="-1904.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">local L &#160;&#160;&#160;&#160;&#160;&#160;= require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1876" y="-1889.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">local format &#160;= assert (string.format)</text>
<text text-anchor="middle" x="1876" y="-1874.0031" font-family="Inconsolata" font-size="14.00" fill="#000000">local sub &#160;&#160;&#160;&#160;= assert (string.sub)</text>
<text text-anchor="middle" x="1876" y="-1858.603" font-family="Inconsolata" font-size="14.00" fill="#000000">local reverse = assert (table.reverse)</text>
<text text-anchor="middle" x="1876" y="-1843.203" font-family="Inconsolata" font-size="14.00" fill="#000000">assert(meta)</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_7&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1870.9113,-2002.0385C1871.2762,-1994.7635 1871.7231,-1985.8565 1872.1989,-1976.3711"/>
<polygon fill="#000000" stroke="#000000" points="1875.6976,-1976.4839 1872.7031,-1966.3211 1868.7064,-1976.1331 1875.6976,-1976.4839"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2226.5,-1918.6031 2035.5,-1918.6031 2035.5,-1882.6031 2226.5,-1882.6031 2226.5,-1918.6031"/>
<text text-anchor="middle" x="2131" y="-1897.1031" font-family="Inconsolata" font-size="14.00" fill="#000000">local Historian = meta {}</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_8&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2093.6827,-2002.0385C2100.8866,-1982.4568 2112.4407,-1951.0508 2120.7853,-1928.3687"/>
<polygon fill="#000000" stroke="#000000" points="2124.0865,-1929.5322 2124.2545,-1918.9387 2117.5169,-1927.1153 2124.0865,-1929.5322"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="2313" cy="-1900.6031" rx="68.6997" ry="18"/>
<text text-anchor="middle" x="2313" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Persistence</text>
</g>
<!-- section_9&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_9&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5658.3947,-2019.7142C5183.4064,-2016.3451 2470.2508,-1995.8272 2391,-1966.2032 2368.9823,-1957.973 2348.8118,-1940.6197 2334.5002,-1925.8279"/>
<polygon fill="#000000" stroke="#000000" points="2336.9481,-1923.3207 2327.5715,-1918.3881 2331.8255,-1928.0914 2336.9481,-1923.3207"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2432" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2432" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_9&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5658.1647,-2019.7512C5233.5812,-2016.9318 3034.2973,-2000.7458 2736,-1966.2032 2639.361,-1955.0125 2528.1613,-1927.0774 2470.7708,-1911.5122"/>
<polygon fill="#000000" stroke="#000000" points="2471.5993,-1908.1103 2461.0302,-1908.8486 2469.7528,-1914.8624 2471.5993,-1908.1103"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="2777" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2777" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5658.8051,-2018.2038C5435.3498,-2011.7596 4720.5034,-1990.5336 4129,-1966.2032 3613.1994,-1944.9867 2987.0741,-1911.8774 2819.7794,-1902.9089"/>
<polygon fill="#000000" stroke="#000000" points="2819.6028,-1899.3945 2809.4296,-1902.3535 2819.2276,-1906.3844 2819.6028,-1899.3945"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="4170" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4170" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_9&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5661.2605,-2015.0065C5395.3634,-1994.608 4427.1218,-1920.3284 4212.3765,-1903.854"/>
<polygon fill="#000000" stroke="#000000" points="4212.3903,-1900.3449 4202.1518,-1903.0696 4211.8548,-1907.3244 4212.3903,-1900.3449"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="5307" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5307" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_9&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5681.4115,-2006.716C5597.1412,-1982.8328 5423.2674,-1933.5547 5345.7596,-1911.5881"/>
<polygon fill="#000000" stroke="#000000" points="5346.4949,-1908.1586 5335.9194,-1908.7992 5344.5861,-1914.8934 5346.4949,-1908.1586"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="5770" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5770" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_9&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5735.227,-2002.0385C5741.9485,-1982.4313 5752.7341,-1950.9689 5760.5121,-1928.28"/>
<polygon fill="#000000" stroke="#000000" points="5763.9167,-1929.1415 5763.8487,-1918.5468 5757.295,-1926.8714 5763.9167,-1929.1415"/>
</g>
<!-- prose_29 -->
<g id="node30" class="node">
<title>prose_29</title>
<ellipse fill="none" stroke="#000000" cx="6240" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6240" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_29 -->
<g id="edge29" class="edge">
<title>section_9&#45;&gt;prose_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5781.2845,-2007.966C5883.6649,-1984.0037 6108.5527,-1931.3685 6200.0714,-1909.9484"/>
<polygon fill="#000000" stroke="#000000" points="6201.1045,-1913.3013 6210.0438,-1907.6144 6199.5092,-1906.4855 6201.1045,-1913.3013"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="7397" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7397" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_9&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5796.9745,-2015.3293C6076.1687,-1995.3103 7130.5694,-1919.7069 7354.8794,-1903.6232"/>
<polygon fill="#000000" stroke="#000000" points="7355.203,-1907.1091 7364.927,-1902.9028 7354.7023,-1900.1271 7355.203,-1907.1091"/>
</g>
<!-- section_31 -->
<g id="node32" class="node">
<title>section_31</title>
<ellipse fill="none" stroke="#000000" cx="8001" cy="-1900.6031" rx="70.655" ry="18"/>
<text text-anchor="middle" x="8001" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 59&#45;130</text>
</g>
<!-- section_9&#45;&gt;section_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;section_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5799.648,-2018.7679C6079.5955,-2012.9569 7111.6141,-1990.3315 7438,-1966.2032 7615.3051,-1953.0958 7822.7646,-1925.8152 7929.5031,-1910.8955"/>
<polygon fill="#000000" stroke="#000000" points="7930.097,-1914.3465 7939.5138,-1909.4911 7929.1245,-1907.4144 7930.097,-1914.3465"/>
</g>
<!-- section_32 -->
<g id="node33" class="node">
<title>section_32</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-1900.6031" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8865" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 131&#45;189</text>
</g>
<!-- section_9&#45;&gt;section_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;section_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5799.6241,-2019.1595C6140.7489,-2014.0296 7620.2426,-1990.7466 8081,-1966.2032 8338.9768,-1952.4614 8643.7166,-1923.2159 8785.2956,-1908.8773"/>
<polygon fill="#000000" stroke="#000000" points="8786.0196,-1912.3219 8795.6148,-1907.8293 8785.3123,-1905.3577 8786.0196,-1912.3219"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="10132" cy="-1900.6031" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10132" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 190&#45;239</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5799.8441,-2020.0285C6145.2151,-2018.964 7686.9405,-2011.7608 8949,-1966.2032 9362.493,-1951.277 9856.565,-1919.3059 10049.2979,-1906.2912"/>
<polygon fill="#000000" stroke="#000000" points="10049.6109,-1909.7782 10059.3518,-1905.6111 10049.1383,-1902.7941 10049.6109,-1909.7782"/>
</g>
<!-- header_155 -->
<g id="node156" class="node">
<title>header_155</title>
<ellipse fill="none" stroke="#000000" cx="11009" cy="-1900.6031" rx="107.339" ry="18"/>
<text text-anchor="middle" x="11009" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Historian:search(frag)</text>
</g>
<!-- section_10&#45;&gt;header_155 -->
<g id="edge155" class="edge">
<title>section_10&#45;&gt;header_155</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11076.1729,-2002.2979C11063.0251,-1982.393 11041.6569,-1950.0432 11026.5563,-1927.182"/>
<polygon fill="#000000" stroke="#000000" points="11029.3399,-1925.0458 11020.908,-1918.6308 11023.4991,-1928.904 11029.3399,-1925.0458"/>
</g>
<!-- prose_156 -->
<g id="node157" class="node">
<title>prose_156</title>
<ellipse fill="none" stroke="#000000" cx="11167" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11167" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_156 -->
<g id="edge156" class="edge">
<title>section_10&#45;&gt;prose_156</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11100.4746,-2002.2984C11107.7161,-1991.8301 11116.9661,-1978.3301 11125,-1966.2032 11133.6297,-1953.1768 11143.0256,-1938.5454 11150.738,-1926.4115"/>
<polygon fill="#000000" stroke="#000000" points="11153.8701,-1928.0076 11156.2669,-1917.6874 11147.9575,-1924.2604 11153.8701,-1928.0076"/>
</g>
<!-- codeblock_157 -->
<g id="node158" class="node">
<title>codeblock_157</title>
<ellipse fill="none" stroke="#000000" cx="11394" cy="-1900.6031" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11394" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 242&#45;283</text>
</g>
<!-- section_10&#45;&gt;codeblock_157 -->
<g id="edge157" class="edge">
<title>section_10&#45;&gt;codeblock_157</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11127.3777,-2004.8124C11182.5371,-1983.2534 11282.8341,-1944.0523 11343.4467,-1920.3619"/>
<polygon fill="#000000" stroke="#000000" points="11344.7811,-1923.5982 11352.8209,-1916.698 11342.2329,-1917.0785 11344.7811,-1923.5982"/>
</g>
<!-- header_162 -->
<g id="node163" class="node">
<title>header_162</title>
<ellipse fill="none" stroke="#000000" cx="11866" cy="-1900.6031" rx="82.6821" ry="18"/>
<text text-anchor="middle" x="11866" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Historian:prev()</text>
</g>
<!-- section_11&#45;&gt;header_162 -->
<g id="edge162" class="edge">
<title>section_11&#45;&gt;header_162</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12080.587,-2004.2866C12056.7045,-1993.7321 12024.857,-1979.439 11997,-1966.2032 11966.8198,-1951.8636 11933.118,-1934.9666 11907.4561,-1921.9129"/>
<polygon fill="#000000" stroke="#000000" points="11908.8856,-1918.7131 11898.3869,-1917.2893 11905.7063,-1924.9494 11908.8856,-1918.7131"/>
</g>
<!-- prose_163 -->
<g id="node164" class="node">
<title>prose_163</title>
<ellipse fill="none" stroke="#000000" cx="12038" cy="-1900.6031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12038" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_163 -->
<g id="edge163" class="edge">
<title>section_11&#45;&gt;prose_163</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12105.1729,-2002.2979C12091.8731,-1982.1629 12070.1618,-1949.2936 12055.0351,-1926.393"/>
<polygon fill="#000000" stroke="#000000" points="12057.8263,-1924.2683 12049.3944,-1917.8533 12051.9855,-1928.1264 12057.8263,-1924.2683"/>
</g>
<!-- codeblock_164 -->
<g id="node165" class="node">
<title>codeblock_164</title>
<ellipse fill="none" stroke="#000000" cx="12186" cy="-1900.6031" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12186" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 288&#45;300</text>
</g>
<!-- section_11&#45;&gt;codeblock_164 -->
<g id="edge164" class="edge">
<title>section_11&#45;&gt;codeblock_164</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12127.33,-2002.2979C12138.7627,-1982.4811 12157.3118,-1950.3293 12170.4906,-1927.486"/>
<polygon fill="#000000" stroke="#000000" points="12173.6338,-1929.0418 12175.5994,-1918.6308 12167.5705,-1925.5437 12173.6338,-1929.0418"/>
</g>
<!-- section_165 -->
<g id="node166" class="node">
<title>section_165</title>
<ellipse fill="none" stroke="#000000" cx="12622" cy="-1900.6031" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="12622" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 303&#45;332</text>
</g>
<!-- section_11&#45;&gt;section_165 -->
<g id="edge165" class="edge">
<title>section_11&#45;&gt;section_165</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12170.5657,-2007.5171C12264.3143,-1985.3145 12457.7003,-1939.5145 12558.2049,-1915.7118"/>
<polygon fill="#000000" stroke="#000000" points="12559.2992,-1919.0495 12568.2234,-1913.3391 12557.686,-1912.238 12559.2992,-1919.0495"/>
</g>
<!-- section_166 -->
<g id="node167" class="node">
<title>section_166</title>
<ellipse fill="none" stroke="#000000" cx="13557" cy="-1900.6031" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="13557" y="-1896.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 333&#45;366</text>
</g>
<!-- section_11&#45;&gt;section_166 -->
<g id="edge166" class="edge">
<title>section_11&#45;&gt;section_166</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12188.4098,-2014.2722C12430.4796,-1994.167 13219.1051,-1928.6672 13475.5931,-1907.3644"/>
<polygon fill="#000000" stroke="#000000" points="13475.9094,-1910.8503 13485.5854,-1906.5345 13475.33,-1903.8743 13475.9094,-1910.8503"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="324,-1522.0035 0,-1522.0035 0,-1450.2012 324,-1450.2012 324,-1522.0035"/>
<text text-anchor="middle" x="162" y="-1458.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">This module is responsible for REPL history.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1469.2603,-1882.6304C1464.1116,-1867.0597 1454.2199,-1845.4407 1437,-1835.003 1332.0438,-1771.3845 437.5278,-1863.3229 333,-1799.003 235.8874,-1739.2459 189.9966,-1603.4976 171.8927,-1532.0439"/>
<polygon fill="#000000" stroke="#000000" points="175.206,-1530.8604 169.4204,-1521.9848 168.4083,-1532.5312 175.206,-1530.8604"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="897.5,-1513.4028 342.5,-1513.4028 342.5,-1458.802 897.5,-1458.802 897.5,-1513.4028"/>
<text text-anchor="middle" x="620" y="-1482.3024" font-family="Inconsolata" font-size="14.00" fill="#000000">Eventually this will include persisting and restoring from a SQLite database,</text>
<text text-anchor="middle" x="620" y="-1466.9024" font-family="Inconsolata" font-size="14.00" fill="#000000">fuzzy searching, and variable cacheing.</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1541.4601,-1882.7549C1536.4988,-1867.2681 1526.9051,-1845.7022 1510,-1835.003 1396.5705,-1763.2133 1028.2178,-1856.6766 907,-1799.003 778.3195,-1737.7787 680.3217,-1590.5868 640.0477,-1522.1794"/>
<polygon fill="#000000" stroke="#000000" points="643.0277,-1520.3414 634.9746,-1513.4567 636.9766,-1523.8607 643.0277,-1520.3414"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1464,-1513.4028 916,-1513.4028 916,-1458.802 1464,-1458.802 1464,-1513.4028"/>
<text text-anchor="middle" x="1190" y="-1482.3024" font-family="Inconsolata" font-size="14.00" fill="#000000">Currently does the basic job of retaining history and not letting subsequent</text>
<text text-anchor="middle" x="1190" y="-1466.9024" font-family="Inconsolata" font-size="14.00" fill="#000000">edits munge it.</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1612.4099,-1882.8804C1606.8952,-1868.1181 1597.0799,-1847.5492 1582,-1835.003 1542.7807,-1802.373 1515.7512,-1826.8454 1473,-1799.003 1356.0536,-1722.8398 1256.4186,-1586.715 1213.11,-1522.078"/>
<polygon fill="#000000" stroke="#000000" points="1215.8249,-1519.8395 1207.3768,-1513.4456 1209.9937,-1523.7122 1215.8249,-1519.8395"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="2030,-1521.4027 1482,-1521.4027 1482,-1450.802 2030,-1450.802 2030,-1521.4027"/>
<text text-anchor="middle" x="1756" y="-1490.3024" font-family="Inconsolata" font-size="14.00" fill="#000000">Next step: now that we clone a new linebuf each time, we have an immutable</text>
<text text-anchor="middle" x="1756" y="-1474.9024" font-family="Inconsolata" font-size="14.00" fill="#000000">record. &#160;We should store the line as a string, to facilitate fuzzy matching.</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1692.8784,-1882.526C1702.5897,-1821.536 1734.3431,-1622.1143 1748.7614,-1531.5628"/>
<polygon fill="#000000" stroke="#000000" points="1752.2329,-1532.0186 1750.349,-1521.5926 1745.32,-1530.9178 1752.2329,-1532.0186"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2162,-1504.1024 2048,-1504.1024 2048,-1468.1024 2162,-1468.1024 2162,-1504.1024"/>
<text text-anchor="middle" x="2105" y="-1482.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">** Persistence</text>
</g>
<!-- header_23&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>header_23&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2294.2485,-1883.108C2278.9263,-1869.246 2256.3814,-1849.8144 2235,-1835.003 2208.1724,-1816.4189 2190.31,-1825.3129 2171,-1799.003 2106.3679,-1710.9413 2102.0982,-1573.4124 2103.5836,-1514.4724"/>
<polygon fill="#000000" stroke="#000000" points="2107.0838,-1514.5209 2103.9147,-1504.4112 2100.0876,-1514.2906 2107.0838,-1514.5209"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2207" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="2207" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_24&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2425.3924,-1882.837C2418.9012,-1867.8397 2407.5503,-1846.9539 2391,-1835.003 2336.1172,-1795.3722 2287.8087,-1849.7464 2243,-1799.003 2171.1264,-1717.61 2189.0952,-1574.2171 2200.7726,-1513.984"/>
<polygon fill="#000000" stroke="#000000" points="2204.2266,-1514.5619 2202.7871,-1504.0653 2197.3666,-1513.1685 2204.2266,-1514.5619"/>
</g>
<!-- prespace_36 -->
<g id="node37" class="node">
<title>prespace_36</title>
<ellipse fill="none" stroke="#000000" cx="2298" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2298" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_24&#45;&gt;prespace_36 -->
<g id="edge36" class="edge">
<title>prose_24&#45;&gt;prespace_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2422.6152,-1883.1292C2414.9161,-1869.4548 2403.312,-1850.264 2391,-1835.003 2376.5937,-1817.1458 2364.7594,-1819.2676 2354,-1799.003 2303.4303,-1703.7582 2297.4333,-1571.6082 2297.4275,-1514.3859"/>
<polygon fill="#000000" stroke="#000000" points="2300.928,-1514.3074 2297.4907,-1504.2857 2293.9281,-1514.2636 2300.928,-1514.3074"/>
</g>
<!-- literal_37 -->
<g id="node38" class="node">
<title>literal_37</title>
<ellipse fill="none" stroke="#000000" cx="2394" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2394" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_24&#45;&gt;literal_37 -->
<g id="edge37" class="edge">
<title>prose_24&#45;&gt;literal_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2430.3428,-1882.526C2424.367,-1817.343 2403.8954,-1594.0402 2396.6044,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="2400.0644,-1513.9133 2395.666,-1504.2747 2393.0936,-1514.5525 2400.0644,-1513.9133"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="2470" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="2470" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_24&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2433.6572,-1882.526C2439.633,-1817.343 2460.1046,-1594.0402 2467.3956,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="2470.9064,-1514.5525 2468.334,-1504.2747 2463.9356,-1513.9133 2470.9064,-1514.5525"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="2542" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="2542" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_25&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2746.4474,-1894.4937C2701.3914,-1883.7395 2618.1392,-1856.8457 2578,-1799.003 2516.5159,-1710.4012 2528.4005,-1572.6028 2537.0987,-1513.9986"/>
<polygon fill="#000000" stroke="#000000" points="2540.5739,-1514.4291 2538.6673,-1504.0073 2533.6586,-1513.3434 2540.5739,-1514.4291"/>
</g>
<!-- link_44 -->
<g id="node45" class="node">
<title>link_44</title>
<ellipse fill="none" stroke="#000000" cx="2614" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="2614" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">link</text>
</g>
<!-- prose_25&#45;&gt;link_44 -->
<g id="edge44" class="edge">
<title>prose_25&#45;&gt;link_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2752.546,-1888.6914C2722.7579,-1872.7553 2673.5094,-1841.4995 2650,-1799.003 2598.1522,-1705.2807 2604.5703,-1571.7953 2610.4448,-1514.2643"/>
<polygon fill="#000000" stroke="#000000" points="2613.9464,-1514.4405 2611.5581,-1504.1183 2606.9882,-1513.6769 2613.9464,-1514.4405"/>
</g>
<!-- raw_45 -->
<g id="node46" class="node">
<title>raw_45</title>
<ellipse fill="none" stroke="#000000" cx="2686" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="2686" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_45 -->
<g id="edge45" class="edge">
<title>prose_25&#45;&gt;raw_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2765.0979,-1883.5349C2752.1641,-1864.0509 2732.0098,-1830.7583 2722,-1799.003 2690.0978,-1697.7959 2685.8755,-1570.222 2685.6999,-1514.4149"/>
<polygon fill="#000000" stroke="#000000" points="2689.2,-1514.2436 2685.7117,-1504.2395 2682.2,-1514.2354 2689.2,-1514.2436"/>
</g>
<!-- prespace_46 -->
<g id="node47" class="node">
<title>prespace_46</title>
<ellipse fill="none" stroke="#000000" cx="2777" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2777" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_25&#45;&gt;prespace_46 -->
<g id="edge46" class="edge">
<title>prose_25&#45;&gt;prespace_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2777,-1882.526C2777,-1817.343 2777,-1594.0402 2777,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="2780.5001,-1514.2746 2777,-1504.2747 2773.5001,-1514.2747 2780.5001,-1514.2746"/>
</g>
<!-- literal_47 -->
<g id="node48" class="node">
<title>literal_47</title>
<ellipse fill="none" stroke="#000000" cx="2873" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2873" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_25&#45;&gt;literal_47 -->
<g id="edge47" class="edge">
<title>prose_25&#45;&gt;literal_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2788.8096,-1883.5053C2801.6604,-1863.9948 2821.7405,-1830.6785 2832,-1799.003 2864.7612,-1697.8544 2871.4133,-1570.2503 2872.7145,-1514.4252"/>
<polygon fill="#000000" stroke="#000000" points="2876.2172,-1514.3116 2872.9095,-1504.2463 2869.2185,-1514.1774 2876.2172,-1514.3116"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="3060" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="3060" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_25&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2800.1998,-1888.0949C2829.7012,-1871.2104 2880.6808,-1838.6287 2913,-1799.003 2987.6381,-1707.4911 3034.3799,-1571.8155 3052.0172,-1513.918"/>
<polygon fill="#000000" stroke="#000000" points="3055.4591,-1514.6242 3054.9719,-1504.0406 3048.7527,-1512.618 3055.4591,-1514.6242"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="3866" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="3866" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_26&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4145.1238,-1889.0472C4112.547,-1872.8643 4055.3214,-1840.6956 4019,-1799.003 3940.6615,-1709.0797 3892.2183,-1571.996 3874.1034,-1513.7896"/>
<polygon fill="#000000" stroke="#000000" points="3877.3417,-1512.41 3871.0735,-1503.8683 3870.647,-1514.4546 3877.3417,-1512.41"/>
</g>
<!-- prespace_59 -->
<g id="node60" class="node">
<title>prespace_59</title>
<ellipse fill="none" stroke="#000000" cx="4074" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="4074" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_26&#45;&gt;prespace_59 -->
<g id="edge59" class="edge">
<title>prose_26&#45;&gt;prespace_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4161.8251,-1882.9865C4152.8501,-1863.011 4138.5778,-1829.2794 4130,-1799.003 4100.8777,-1696.2118 4083.7764,-1569.9466 4077.1692,-1514.4946"/>
<polygon fill="#000000" stroke="#000000" points="4080.624,-1513.9026 4075.9873,-1504.3763 4073.6712,-1514.7149 4080.624,-1513.9026"/>
</g>
<!-- literal_60 -->
<g id="node61" class="node">
<title>literal_60</title>
<ellipse fill="none" stroke="#000000" cx="4170" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="4170" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_26&#45;&gt;literal_60 -->
<g id="edge60" class="edge">
<title>prose_26&#45;&gt;literal_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4170,-1882.526C4170,-1817.343 4170,-1594.0402 4170,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="4173.5001,-1514.2746 4170,-1504.2747 4166.5001,-1514.2747 4173.5001,-1514.2746"/>
</g>
<!-- raw_61 -->
<g id="node62" class="node">
<title>raw_61</title>
<ellipse fill="none" stroke="#000000" cx="4268" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="4268" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_61 -->
<g id="edge61" class="edge">
<title>prose_26&#45;&gt;raw_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4178.1402,-1882.9766C4187.0841,-1862.9923 4201.3286,-1829.2528 4210,-1799.003 4239.4733,-1696.1865 4257.5385,-1569.9343 4264.5948,-1514.4901"/>
<polygon fill="#000000" stroke="#000000" points="4268.0919,-1514.7302 4265.8593,-1504.3733 4261.1459,-1513.8619 4268.0919,-1514.7302"/>
</g>
<!-- raw_66 -->
<g id="node67" class="node">
<title>raw_66</title>
<ellipse fill="none" stroke="#000000" cx="4948" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="4948" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_66 -->
<g id="edge66" class="edge">
<title>prose_27&#45;&gt;raw_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5287.2275,-1886.3643C5262.0686,-1867.7649 5217.9309,-1833.4907 5185,-1799.003 5091.3822,-1700.9592 5000.153,-1566.3527 4964.1278,-1511.2059"/>
<polygon fill="#000000" stroke="#000000" points="4967.0185,-1509.231 4958.6336,-1502.7546 4961.1497,-1513.0464 4967.0185,-1509.231"/>
</g>
<!-- raw_68 -->
<g id="node69" class="node">
<title>raw_68</title>
<ellipse fill="none" stroke="#000000" cx="5221" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="5221" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_68 -->
<g id="edge68" class="edge">
<title>prose_28&#45;&gt;raw_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5738.1338,-1897.5583C5645.7132,-1888.1123 5380.1902,-1856.4354 5318,-1799.003 5234.8334,-1722.1988 5222.3543,-1575.6633 5220.9179,-1514.2662"/>
<polygon fill="#000000" stroke="#000000" points="5224.416,-1514.1075 5220.7657,-1504.1614 5217.4168,-1514.213 5224.416,-1514.1075"/>
</g>
<!-- prespace_69 -->
<g id="node70" class="node">
<title>prespace_69</title>
<ellipse fill="none" stroke="#000000" cx="5373" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5373" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_69 -->
<g id="edge69" class="edge">
<title>prose_28&#45;&gt;prespace_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5738.9825,-1895.5937C5663.0622,-1882.6986 5471.0306,-1846.0483 5429,-1799.003 5356.1618,-1717.4742 5362.52,-1574.7491 5369.1211,-1514.3641"/>
<polygon fill="#000000" stroke="#000000" points="5372.5997,-1514.7501 5370.2956,-1504.4089 5365.6479,-1513.9298 5372.5997,-1514.7501"/>
</g>
<!-- literal_70 -->
<g id="node71" class="node">
<title>literal_70</title>
<ellipse fill="none" stroke="#000000" cx="5469" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5469" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_70 -->
<g id="edge70" class="edge">
<title>prose_28&#45;&gt;literal_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5737.8004,-1898.2948C5681.4919,-1892.3938 5565.739,-1871.6056 5509,-1799.003 5442.3321,-1713.6955 5454.7778,-1573.5417 5463.905,-1514.1259"/>
<polygon fill="#000000" stroke="#000000" points="5467.4007,-1514.4348 5465.5508,-1504.0027 5460.4914,-1513.3114 5467.4007,-1514.4348"/>
</g>
<!-- raw_71 -->
<g id="node72" class="node">
<title>raw_71</title>
<ellipse fill="none" stroke="#000000" cx="5545" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="5545" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_71 -->
<g id="edge71" class="edge">
<title>prose_28&#45;&gt;raw_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5739.871,-1893.7288C5696.7895,-1882.1812 5618.6434,-1854.4954 5581,-1799.003 5520.6027,-1709.9676 5531.7793,-1572.9618 5540.1874,-1514.3159"/>
<polygon fill="#000000" stroke="#000000" points="5543.6663,-1514.7187 5541.7073,-1504.3066 5536.7456,-1513.6678 5543.6663,-1514.7187"/>
</g>
<!-- prespace_72 -->
<g id="node73" class="node">
<title>prespace_72</title>
<ellipse fill="none" stroke="#000000" cx="5636" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5636" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_72 -->
<g id="edge72" class="edge">
<title>prose_28&#45;&gt;prespace_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5754.0369,-1884.9548C5735.9691,-1866.2531 5707.0942,-1833.177 5692,-1799.003 5648.6255,-1700.8011 5638.8345,-1571.1661 5636.6333,-1514.5738"/>
<polygon fill="#000000" stroke="#000000" points="5640.1207,-1514.137 5636.2865,-1504.2602 5633.1246,-1514.3722 5640.1207,-1514.137"/>
</g>
<!-- literal_73 -->
<g id="node74" class="node">
<title>literal_73</title>
<ellipse fill="none" stroke="#000000" cx="5732" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5732" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_73 -->
<g id="edge73" class="edge">
<title>prose_28&#45;&gt;literal_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5768.3428,-1882.526C5762.367,-1817.343 5741.8954,-1594.0402 5734.6044,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="5738.0644,-1513.9133 5733.666,-1504.2747 5731.0936,-1514.5525 5738.0644,-1513.9133"/>
</g>
<!-- raw_74 -->
<g id="node75" class="node">
<title>raw_74</title>
<ellipse fill="none" stroke="#000000" cx="5808" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="5808" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_74 -->
<g id="edge74" class="edge">
<title>prose_28&#45;&gt;raw_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5771.6572,-1882.526C5777.633,-1817.343 5798.1046,-1594.0402 5805.3956,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="5808.9064,-1514.5525 5806.334,-1504.2747 5801.9356,-1513.9133 5808.9064,-1514.5525"/>
</g>
<!-- prespace_75 -->
<g id="node76" class="node">
<title>prespace_75</title>
<ellipse fill="none" stroke="#000000" cx="5899" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5899" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_75 -->
<g id="edge75" class="edge">
<title>prose_28&#45;&gt;prespace_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5785.4462,-1884.4634C5802.601,-1865.5603 5829.7502,-1832.5435 5844,-1799.003 5885.9554,-1700.2506 5895.9066,-1570.9017 5898.2666,-1514.4786"/>
<polygon fill="#000000" stroke="#000000" points="5901.7747,-1514.3189 5898.6446,-1504.197 5894.7794,-1514.0616 5901.7747,-1514.3189"/>
</g>
<!-- literal_76 -->
<g id="node77" class="node">
<title>literal_76</title>
<ellipse fill="none" stroke="#000000" cx="5995" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5995" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_76 -->
<g id="edge76" class="edge">
<title>prose_28&#45;&gt;literal_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5799.5894,-1893.3067C5841.4891,-1881.3011 5917.108,-1853.1265 5954,-1799.003 6014.7139,-1709.9307 6006.3207,-1572.9447 5999.184,-1514.31"/>
<polygon fill="#000000" stroke="#000000" points="6002.6431,-1513.7679 5997.883,-1504.3026 5995.7015,-1514.6704 6002.6431,-1513.7679"/>
</g>
<!-- raw_77 -->
<g id="node78" class="node">
<title>raw_77</title>
<ellipse fill="none" stroke="#000000" cx="6102" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="6102" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_77 -->
<g id="edge77" class="edge">
<title>prose_28&#45;&gt;raw_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5802.0658,-1897.9587C5858.2546,-1891.5311 5974.2925,-1869.9451 6035,-1799.003 6106.4075,-1715.5568 6107.483,-1574.3896 6104.2689,-1514.4156"/>
<polygon fill="#000000" stroke="#000000" points="6107.7474,-1513.9583 6103.6349,-1504.1942 6100.7608,-1514.3918 6107.7474,-1513.9583"/>
</g>
<!-- prespace_78 -->
<g id="node79" class="node">
<title>prespace_78</title>
<ellipse fill="none" stroke="#000000" cx="6210" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="6210" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_78 -->
<g id="edge78" class="edge">
<title>prose_28&#45;&gt;prespace_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5801.2269,-1896.1322C5881.2673,-1884.0506 6090.7817,-1848.3069 6138,-1799.003 6214.562,-1719.0592 6215.6692,-1574.8673 6212.3138,-1514.2027"/>
<polygon fill="#000000" stroke="#000000" points="6215.806,-1513.9678 6211.6765,-1504.2109 6208.8202,-1514.4134 6215.806,-1513.9678"/>
</g>
<!-- literal_79 -->
<g id="node80" class="node">
<title>literal_79</title>
<ellipse fill="none" stroke="#000000" cx="6322" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="6322" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_79 -->
<g id="edge79" class="edge">
<title>prose_28&#45;&gt;literal_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5801.4863,-1896.2138C5905.2972,-1881.4637 6232.0298,-1832.715 6265,-1799.003 6341.6657,-1720.6121 6333.6903,-1575.5639 6326.255,-1514.4371"/>
<polygon fill="#000000" stroke="#000000" points="6329.7054,-1513.8295 6324.94,-1504.3669 6322.7644,-1514.7359 6329.7054,-1513.8295"/>
</g>
<!-- raw_80 -->
<g id="node81" class="node">
<title>raw_80</title>
<ellipse fill="none" stroke="#000000" cx="6459" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="6459" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_80 -->
<g id="edge80" class="edge">
<title>prose_28&#45;&gt;raw_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5801.36,-1896.1466C5920.6445,-1879.0769 6340.4908,-1817.8709 6362,-1799.003 6447.1031,-1724.3502 6458.5073,-1576.6205 6459.3696,-1514.5856"/>
<polygon fill="#000000" stroke="#000000" points="6462.8706,-1514.3915 6459.4245,-1504.3728 6455.8707,-1514.3537 6462.8706,-1514.3915"/>
</g>
<!-- raw_94 -->
<g id="node95" class="node">
<title>raw_94</title>
<ellipse fill="none" stroke="#000000" cx="6665" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="6665" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_29&#45;&gt;raw_94 -->
<g id="edge94" class="edge">
<title>prose_29&#45;&gt;raw_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6271.0661,-1895.3349C6323.0149,-1885.1122 6428.3639,-1858.1741 6495,-1799.003 6586.7981,-1717.4886 6638.4708,-1574.1626 6657.0332,-1513.9656"/>
<polygon fill="#000000" stroke="#000000" points="6660.4861,-1514.6377 6660.0202,-1504.0531 6653.7838,-1512.618 6660.4861,-1514.6377"/>
</g>
<!-- raw_96 -->
<g id="node97" class="node">
<title>raw_96</title>
<ellipse fill="none" stroke="#000000" cx="7079" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="7079" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_96 -->
<g id="edge96" class="edge">
<title>prose_30&#45;&gt;raw_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7365.1652,-1897.2905C7311.174,-1889.8997 7201.9765,-1866.9618 7145,-1799.003 7074.4842,-1714.895 7073.5195,-1574.0881 7076.7379,-1514.3126"/>
<polygon fill="#000000" stroke="#000000" points="7080.2438,-1514.3242 7077.3716,-1504.1261 7073.2573,-1513.8894 7080.2438,-1514.3242"/>
</g>
<!-- prespace_97 -->
<g id="node98" class="node">
<title>prespace_97</title>
<ellipse fill="none" stroke="#000000" cx="7200" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="7200" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_30&#45;&gt;prespace_97 -->
<g id="edge97" class="edge">
<title>prose_30&#45;&gt;prespace_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7376.3246,-1886.5671C7351.907,-1868.9267 7311.7443,-1836.3912 7289,-1799.003 7231.6435,-1704.7173 7209.9935,-1572.0622 7202.958,-1514.5471"/>
<polygon fill="#000000" stroke="#000000" points="7206.4088,-1513.9207 7201.7742,-1504.3934 7199.4559,-1514.7315 7206.4088,-1513.9207"/>
</g>
<!-- literal_98 -->
<g id="node99" class="node">
<title>literal_98</title>
<ellipse fill="none" stroke="#000000" cx="7329" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="7329" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_30&#45;&gt;literal_98 -->
<g id="edge98" class="edge">
<title>prose_30&#45;&gt;literal_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7394.0344,-1882.526C7383.3409,-1817.343 7346.7075,-1594.0402 7333.6605,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="7337.054,-1513.5761 7331.9812,-1504.2747 7330.1463,-1514.7094 7337.054,-1513.5761"/>
</g>
<!-- raw_99 -->
<g id="node100" class="node">
<title>raw_99</title>
<ellipse fill="none" stroke="#000000" cx="7466" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="7466" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_99 -->
<g id="edge99" class="edge">
<title>prose_30&#45;&gt;raw_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7400.0092,-1882.526C7410.8599,-1817.343 7448.0321,-1594.0402 7461.271,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="7464.7853,-1514.7137 7462.9749,-1504.2747 7457.8803,-1513.5642 7464.7853,-1514.7137"/>
</g>
<!-- prespace_100 -->
<g id="node101" class="node">
<title>prespace_100</title>
<ellipse fill="none" stroke="#000000" cx="7613" cy="-1486.1024" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="7613" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_30&#45;&gt;prespace_100 -->
<g id="edge100" class="edge">
<title>prose_30&#45;&gt;prespace_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7416.6922,-1886.1894C7440.0291,-1868.1771 7478.68,-1835.2756 7502,-1799.003 7562.9101,-1704.2617 7595.5067,-1571.8465 7607.5251,-1514.4705"/>
<polygon fill="#000000" stroke="#000000" points="7611.0217,-1514.8405 7609.5945,-1504.3422 7604.1634,-1513.4392 7611.0217,-1514.8405"/>
</g>
<!-- literal_101 -->
<g id="node102" class="node">
<title>literal_101</title>
<ellipse fill="none" stroke="#000000" cx="7723" cy="-1486.1024" rx="31.481" ry="18"/>
<text text-anchor="middle" x="7723" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_30&#45;&gt;literal_101 -->
<g id="edge101" class="edge">
<title>prose_30&#45;&gt;literal_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7429.1338,-1898.5149C7486.6414,-1892.945 7606.846,-1872.6399 7668,-1799.003 7737.6646,-1715.1181 7732.5327,-1574.1897 7726.5815,-1514.3473"/>
<polygon fill="#000000" stroke="#000000" points="7730.0336,-1513.7147 7725.4786,-1504.1491 7723.0742,-1514.4674 7730.0336,-1513.7147"/>
</g>
<!-- raw_102 -->
<g id="node103" class="node">
<title>raw_102</title>
<ellipse fill="none" stroke="#000000" cx="7813" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="7813" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_102 -->
<g id="edge102" class="edge">
<title>prose_30&#45;&gt;raw_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7428.5444,-1896.2434C7508.8365,-1884.4912 7717.7979,-1849.5904 7763,-1799.003 7835.7878,-1717.5433 7825.7387,-1574.1872 7817.5682,-1513.9739"/>
<polygon fill="#000000" stroke="#000000" points="7821.0297,-1513.4551 7816.1352,-1504.0586 7814.1017,-1514.4565 7821.0297,-1513.4551"/>
</g>
<!-- header_110 -->
<g id="node111" class="node">
<title>header_110</title>
<ellipse fill="none" stroke="#000000" cx="7937" cy="-1486.1024" rx="78.8488" ry="18"/>
<text text-anchor="middle" x="7937" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : SQLite battery</text>
</g>
<!-- section_31&#45;&gt;header_110 -->
<g id="edge110" class="edge">
<title>section_31&#45;&gt;header_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7998.2088,-1882.526C7988.1444,-1817.343 7953.6659,-1594.0402 7941.3864,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="7944.7909,-1513.6234 7939.8058,-1504.2747 7937.8729,-1514.6917 7944.7909,-1513.6234"/>
</g>
<!-- prose_111 -->
<g id="node112" class="node">
<title>prose_111</title>
<ellipse fill="none" stroke="#000000" cx="8066" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8066" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_31&#45;&gt;prose_111 -->
<g id="edge111" class="edge">
<title>section_31&#45;&gt;prose_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8005.8997,-1882.367C8011.2,-1862.1227 8019.6129,-1828.4189 8025,-1799.003 8044.1065,-1694.6731 8057.7623,-1569.1964 8063.2848,-1514.2203"/>
<polygon fill="#000000" stroke="#000000" points="8066.7752,-1514.489 8064.28,-1504.1922 8059.8094,-1513.7976 8066.7752,-1514.489"/>
</g>
<!-- codeblock_112 -->
<g id="node113" class="node">
<title>codeblock_112</title>
<ellipse fill="none" stroke="#000000" cx="8286" cy="-1486.1024" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="8286" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 61&#45;128</text>
</g>
<!-- section_31&#45;&gt;codeblock_112 -->
<g id="edge112" class="edge">
<title>section_31&#45;&gt;codeblock_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8022.2595,-1883.4342C8045.0012,-1864.3797 8081.2659,-1831.949 8107,-1799.003 8182.5926,-1702.2255 8247.4657,-1569.9777 8273.6419,-1513.49"/>
<polygon fill="#000000" stroke="#000000" points="8276.9348,-1514.7064 8277.9323,-1504.1586 8270.5748,-1511.7822 8276.9348,-1514.7064"/>
</g>
<!-- header_117 -->
<g id="node118" class="node">
<title>header_117</title>
<ellipse fill="none" stroke="#000000" cx="8732" cy="-1486.1024" rx="82.2147" ry="18"/>
<text text-anchor="middle" x="8732" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:load()</text>
</g>
<!-- section_32&#45;&gt;header_117 -->
<g id="edge117" class="edge">
<title>section_32&#45;&gt;header_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8857.0498,-1882.4528C8848.3629,-1862.2837 8834.3112,-1828.6454 8824,-1799.003 8787.9109,-1695.2547 8753.6864,-1569.0605 8739.2251,-1514.0182"/>
<polygon fill="#000000" stroke="#000000" points="8742.5966,-1513.0765 8736.6801,-1504.2876 8735.8244,-1514.8478 8742.5966,-1513.0765"/>
</g>
<!-- prose_118 -->
<g id="node119" class="node">
<title>prose_118</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8865" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_32&#45;&gt;prose_118 -->
<g id="edge118" class="edge">
<title>section_32&#45;&gt;prose_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8865,-1882.526C8865,-1817.343 8865,-1594.0402 8865,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="8868.5001,-1514.2746 8865,-1504.2747 8861.5001,-1514.2747 8868.5001,-1514.2746"/>
</g>
<!-- prose_119 -->
<g id="node120" class="node">
<title>prose_119</title>
<ellipse fill="none" stroke="#000000" cx="8947" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8947" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_32&#45;&gt;prose_119 -->
<g id="edge119" class="edge">
<title>section_32&#45;&gt;prose_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8873.8358,-1882.7227C8883.298,-1862.7899 8898.025,-1829.3574 8906,-1799.003 8932.9517,-1696.4195 8942.5873,-1570.0478 8945.6834,-1514.5316"/>
<polygon fill="#000000" stroke="#000000" points="8949.1861,-1514.5719 8946.2186,-1504.4011 8942.1958,-1514.2025 8949.1861,-1514.5719"/>
</g>
<!-- codeblock_120 -->
<g id="node121" class="node">
<title>codeblock_120</title>
<ellipse fill="none" stroke="#000000" cx="9153" cy="-1486.1024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9153" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 138&#45;187</text>
</g>
<!-- section_32&#45;&gt;codeblock_120 -->
<g id="edge120" class="edge">
<title>section_32&#45;&gt;codeblock_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8891.1207,-1883.6473C8917.9527,-1865.2519 8959.6879,-1833.8122 8988,-1799.003 9064.2197,-1705.2923 9120.7194,-1570.8705 9142.8079,-1513.6153"/>
<polygon fill="#000000" stroke="#000000" points="9146.1197,-1514.7531 9146.4112,-1504.1623 9139.5788,-1512.2598 9146.1197,-1514.7531"/>
</g>
<!-- header_127 -->
<g id="node128" class="node">
<title>header_127</title>
<ellipse fill="none" stroke="#000000" cx="9882" cy="-1486.1024" rx="117.9886" ry="18"/>
<text text-anchor="middle" x="9882" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:persist(linebuf)</text>
</g>
<!-- section_33&#45;&gt;header_127 -->
<g id="edge127" class="edge">
<title>section_33&#45;&gt;header_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10104.3981,-1883.6986C10076.9674,-1865.6803 10035.2966,-1834.8448 10009,-1799.003 9940.9275,-1706.2215 9902.5813,-1571.7699 9888.3954,-1514.0919"/>
<polygon fill="#000000" stroke="#000000" points="9891.768,-1513.1469 9886.0261,-1504.2429 9884.9622,-1514.7842 9891.768,-1513.1469"/>
</g>
<!-- prose_128 -->
<g id="node129" class="node">
<title>prose_128</title>
<ellipse fill="none" stroke="#000000" cx="10050" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10050" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_128 -->
<g id="edge128" class="edge">
<title>section_33&#45;&gt;prose_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10123.1642,-1882.7227C10113.702,-1862.7899 10098.975,-1829.3574 10091,-1799.003 10064.0483,-1696.4195 10054.4127,-1570.0478 10051.3166,-1514.5316"/>
<polygon fill="#000000" stroke="#000000" points="10054.8042,-1514.2025 10050.7814,-1504.4011 10047.8139,-1514.5719 10054.8042,-1514.2025"/>
</g>
<!-- prose_129 -->
<g id="node130" class="node">
<title>prose_129</title>
<ellipse fill="none" stroke="#000000" cx="10132" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10132" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_129 -->
<g id="edge129" class="edge">
<title>section_33&#45;&gt;prose_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10132,-1882.526C10132,-1817.343 10132,-1594.0402 10132,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="10135.5001,-1514.2746 10132,-1504.2747 10128.5001,-1514.2747 10135.5001,-1514.2746"/>
</g>
<!-- prose_130 -->
<g id="node131" class="node">
<title>prose_130</title>
<ellipse fill="none" stroke="#000000" cx="10593" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10593" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_130 -->
<g id="edge130" class="edge">
<title>section_33&#45;&gt;prose_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10151.5141,-1883.0573C10225.1529,-1816.8462 10486.1401,-1582.1838 10568.1491,-1508.4467"/>
<polygon fill="#000000" stroke="#000000" points="10570.6367,-1510.9167 10575.7328,-1501.6279 10565.9564,-1505.7114 10570.6367,-1510.9167"/>
</g>
<!-- prose_131 -->
<g id="node132" class="node">
<title>prose_131</title>
<ellipse fill="none" stroke="#000000" cx="10675" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10675" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_131 -->
<g id="edge131" class="edge">
<title>section_33&#45;&gt;prose_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10205.3787,-1895.994C10330.3766,-1886.5428 10576.6796,-1860.4463 10634,-1799.003 10708.2145,-1719.4504 10691.9634,-1575.0427 10680.9389,-1514.2618"/>
<polygon fill="#000000" stroke="#000000" points="10684.3411,-1513.4178 10679.0304,-1504.2502 10677.465,-1514.7287 10684.3411,-1513.4178"/>
</g>
<!-- codeblock_132 -->
<g id="node133" class="node">
<title>codeblock_132</title>
<ellipse fill="none" stroke="#000000" cx="10813" cy="-1486.1024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10813" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 205&#45;237</text>
</g>
<!-- section_33&#45;&gt;codeblock_132 -->
<g id="edge132" class="edge">
<title>section_33&#45;&gt;codeblock_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10206.3309,-1897.133C10346.2174,-1889.1196 10641.2732,-1864.7047 10716,-1799.003 10801.0178,-1724.2531 10812.4694,-1576.5773 10813.3569,-1514.5712"/>
<polygon fill="#000000" stroke="#000000" points="10816.858,-1514.3834 10813.4162,-1504.3632 10809.8581,-1514.3427 10816.858,-1514.3834"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="1722.5,-649.6024 1503.5,-649.6024 1503.5,-593.7995 1722.5,-593.7995 1722.5,-649.6024"/>
<text text-anchor="middle" x="1613" y="-602.201" font-family="Inconsolata" font-size="14.00" fill="#000000">This is where we practice for</text>
</g>
<!-- raw_35&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_35&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2211.6482,-1468.3161C2224.4641,-1414.7367 2254.1049,-1253.6304 2171,-1173.2018 2100.663,-1105.1299 1806.0471,-1201.2184 1732,-1137.2018 1589.348,-1013.8736 1598.9655,-756.8104 1608.369,-659.8333"/>
<polygon fill="#000000" stroke="#000000" points="1611.8781,-659.9226 1609.4176,-649.6174 1604.9147,-659.2078 1611.8781,-659.9226"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="1795,-639.701 1741,-639.701 1741,-603.701 1795,-603.701 1795,-639.701"/>
<text text-anchor="middle" x="1768" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_36&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>prespace_36&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2301.406,-1468.1503C2310.5088,-1414.1008 2329.2,-1251.8012 2243,-1173.2018 2170.671,-1107.2503 1872.7938,-1206.833 1804,-1137.2018 1735.7805,-1068.1518 1757.1672,-747.5205 1765.419,-649.9488"/>
<polygon fill="#000000" stroke="#000000" points="1768.9098,-650.206 1766.2862,-639.9411 1761.9359,-649.6016 1768.9098,-650.206"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="1867,-639.701 1813,-639.701 1813,-603.701 1867,-603.701 1867,-639.701"/>
<text text-anchor="middle" x="1840" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">codex</text>
</g>
<!-- literal_37&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>literal_37&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2398.3428,-1468.2459C2410.2425,-1414.4674 2437.1566,-1252.8557 2353,-1173.2018 2275.7966,-1100.1291 1950.9555,-1212.5787 1876,-1137.2018 1807.5567,-1068.3737 1829.0979,-747.5892 1837.4029,-649.9648"/>
<polygon fill="#000000" stroke="#000000" points="1840.8941,-650.2178 1838.2757,-639.9516 1833.9205,-649.6099 1840.8941,-650.2178"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="1939,-639.701 1885,-639.701 1885,-603.701 1939,-603.701 1939,-639.701"/>
<text text-anchor="middle" x="1912" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_38&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_38&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2474.6768,-1468.2863C2487.5741,-1414.6226 2517.4212,-1253.3023 2434,-1173.2018 2355.8842,-1098.1956 2024.4151,-1213.9399 1948,-1137.2018 1879.5089,-1068.4212 1901.0831,-747.6039 1909.3995,-649.9682"/>
<polygon fill="#000000" stroke="#000000" points="1912.8907,-650.2203 1910.2734,-639.9538 1905.9172,-649.6117 1912.8907,-650.2203"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="2449,-641.603 1957,-641.603 1957,-601.7989 2449,-601.7989 2449,-641.603"/>
<text text-anchor="middle" x="2203" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">Note: I&#39;m not happy with how the existing SQLite binding is handling</text>
</g>
<!-- raw_43&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_43&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2544.6021,-1467.9962C2550.9362,-1417.4562 2562.7408,-1272.0902 2506,-1173.2018 2492.7285,-1150.0722 2475.0428,-1157.7117 2458,-1137.2018 2324.6106,-976.6763 2239.0403,-734.6036 2212.1311,-651.1806"/>
<polygon fill="#000000" stroke="#000000" points="2215.4445,-650.0509 2209.0709,-641.5875 2208.7756,-652.1783 2215.4445,-650.0509"/>
</g>
<!-- anchortext_50 -->
<g id="node51" class="node">
<title>anchortext_50</title>
<ellipse fill="none" stroke="#000000" cx="2518" cy="-621.701" rx="51.3018" ry="18"/>
<text text-anchor="middle" x="2518" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">anchortext</text>
</g>
<!-- link_44&#45;&gt;anchortext_50 -->
<g id="edge50" class="edge">
<title>link_44&#45;&gt;anchortext_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2611.9949,-1468.0481C2599.8439,-1358.6387 2536.0907,-784.5929 2521.1398,-649.9726"/>
<polygon fill="#000000" stroke="#000000" points="2524.617,-649.5728 2520.0345,-640.0203 2517.6598,-650.3456 2524.617,-649.5728"/>
</g>
<!-- url_51 -->
<g id="node52" class="node">
<title>url_51</title>
<ellipse fill="none" stroke="#000000" cx="2614" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="2614" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">url</text>
</g>
<!-- link_44&#45;&gt;url_51 -->
<g id="edge51" class="edge">
<title>link_44&#45;&gt;url_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2614,-1468.0481C2614,-1358.7484 2614,-785.744 2614,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="2617.5001,-650.0203 2614,-640.0203 2610.5001,-650.0203 2617.5001,-650.0203"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="2731,-639.701 2659,-639.701 2659,-603.701 2731,-603.701 2731,-639.701"/>
<text text-anchor="middle" x="2695" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">. &#160;Lua&#39;s</text>
</g>
<!-- raw_45&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_45&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2686.188,-1468.0481C2687.326,-1358.7484 2693.292,-785.744 2694.7014,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="2698.2049,-650.0562 2694.8093,-640.0203 2691.2052,-649.9833 2698.2049,-650.0562"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="2803,-639.701 2749,-639.701 2749,-603.701 2803,-603.701 2803,-639.701"/>
<text text-anchor="middle" x="2776" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_46&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>prespace_46&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2776.9791,-1468.0481C2776.8527,-1358.7484 2776.1898,-785.744 2776.0332,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="2779.5329,-650.0162 2776.0212,-640.0203 2772.5329,-650.0244 2779.5329,-650.0162"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="2875,-639.701 2821,-639.701 2821,-603.701 2875,-603.701 2875,-639.701"/>
<text text-anchor="middle" x="2848" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">nil</text>
</g>
<!-- literal_47&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>literal_47&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2872.4778,-1468.0481C2869.3167,-1358.7484 2852.7444,-785.744 2848.8294,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="2852.3176,-649.9149 2848.5298,-640.0203 2845.3205,-650.1173 2852.3176,-649.9149"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3448.5,-648.9014 2893.5,-648.9014 2893.5,-594.5005 3448.5,-594.5005 3448.5,-648.9014"/>
<text text-anchor="middle" x="3171" y="-633.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> is a frequent source of</text>
<text text-anchor="middle" x="3171" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">annoyance, true, but every union type system has a bottom value, and Lua&#39;s is</text>
<text text-anchor="middle" x="3171" y="-602.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">implemented cleanly.</text>
</g>
<!-- raw_48&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>raw_48&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3062.3184,-1468.0481C3076.0758,-1360.9138 3147.0427,-808.2664 3166.219,-658.9327"/>
<polygon fill="#000000" stroke="#000000" points="3169.7064,-659.2538 3167.5087,-648.8894 3162.7634,-658.3621 3169.7064,-659.2538"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="2576,-53.1 2434,-53.1 2434,-17.1 2576,-17.1 2576,-53.1"/>
<text text-anchor="middle" x="2505" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">three&#45;valued logic</text>
</g>
<!-- anchortext_50&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>anchortext_50&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2517.5967,-603.5019C2515.7297,-519.2592 2507.9207,-166.8931 2505.6326,-63.6454"/>
<polygon fill="#000000" stroke="#000000" points="2509.1258,-63.2964 2505.405,-53.3764 2502.1275,-63.4516 2509.1258,-63.2964"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="2659.5,-53.1 2594.5,-53.1 2594.5,-17.1 2659.5,-17.1 2659.5,-53.1"/>
<text text-anchor="middle" x="2627" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">httk://</text>
</g>
<!-- url_51&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>url_51&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2614.4033,-603.5019C2616.2703,-519.2592 2624.0793,-166.8931 2626.3674,-63.6454"/>
<polygon fill="#000000" stroke="#000000" points="2629.8725,-63.4516 2626.595,-53.3764 2622.8742,-63.2964 2629.8725,-63.4516"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4029,-664.302 3467,-664.302 3467,-579.0999 4029,-579.0999 4029,-664.302"/>
<text text-anchor="middle" x="3748" y="-633.301" font-family="Inconsolata" font-size="14.00" fill="#000000">But this is not the semantics of SQLite&#39;s NULL, which cleanly represents &quot;no</text>
<text text-anchor="middle" x="3748" y="-617.901" font-family="Inconsolata" font-size="14.00" fill="#000000">answer available for constraint&quot;. &#160;Our bindings would appear to represent</text>
<text text-anchor="middle" x="3748" y="-602.501" font-family="Inconsolata" font-size="14.00" fill="#000000">nulls on the right side of a left join as missing values, which breaks some of</text>
<text text-anchor="middle" x="3748" y="-587.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">the conventions of Lua, such as</text>
</g>
<!-- raw_58&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>raw_58&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3863.5354,-1468.0481C3849.3771,-1364.3326 3778.2211,-843.0838 3755.1985,-674.4334"/>
<polygon fill="#000000" stroke="#000000" points="3758.6372,-673.7457 3753.8167,-664.311 3751.7015,-674.6926 3758.6372,-673.7457"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="4101,-639.701 4047,-639.701 4047,-603.701 4101,-603.701 4101,-639.701"/>
<text text-anchor="middle" x="4074" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_59&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prespace_59&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4074,-1468.0481C4074,-1358.7484 4074,-785.744 4074,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="4077.5001,-650.0203 4074,-640.0203 4070.5001,-650.0203 4077.5001,-650.0203"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="4173,-639.701 4119,-639.701 4119,-603.701 4173,-603.701 4173,-639.701"/>
<text text-anchor="middle" x="4146" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">#</text>
</g>
<!-- literal_60&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>literal_60&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4169.4987,-1468.0481C4166.464,-1358.7484 4150.5546,-785.744 4146.7962,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="4150.2849,-649.9193 4146.5086,-640.0203 4143.2876,-650.1136 4150.2849,-649.9193"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="4389,-639.701 4191,-639.701 4191,-603.701 4389,-603.701 4389,-639.701"/>
<text text-anchor="middle" x="4290" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">, to no plausible benefit.</text>
</g>
<!-- raw_61&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>raw_61&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4268.4595,-1468.0481C4271.2413,-1358.7484 4285.8249,-785.744 4289.2701,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="4292.7781,-650.1062 4289.5338,-640.0203 4285.7804,-649.928 4292.7781,-650.1062"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="4962.5,-649.0014 4407.5,-649.0014 4407.5,-594.4005 4962.5,-594.4005 4962.5,-649.0014"/>
<text text-anchor="middle" x="4685" y="-617.901" font-family="Inconsolata" font-size="14.00" fill="#000000">It&#39;s also quite possible I&#39;m trying to unwrap a data structure which is meant</text>
<text text-anchor="middle" x="4685" y="-602.501" font-family="Inconsolata" font-size="14.00" fill="#000000">to be handled through method calls.</text>
</g>
<!-- raw_66&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>raw_66&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4942.6273,-1468.4439C4910.3359,-1362.3119 4741.9128,-808.7562 4696.3656,-659.0563"/>
<polygon fill="#000000" stroke="#000000" points="4699.6831,-657.9355 4693.4238,-649.3873 4692.9862,-659.9731 4699.6831,-657.9355"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="5339.5,-641.603 4980.5,-641.603 4980.5,-601.7989 5339.5,-601.7989 5339.5,-641.603"/>
<text text-anchor="middle" x="5160" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">Looks like there&#39;s a magic &quot;hik&quot; string where the</text>
</g>
<!-- raw_68&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>raw_68&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5219.7259,-1468.0481C5212.0383,-1359.1108 5171.8441,-789.5383 5162.1198,-651.7397"/>
<polygon fill="#000000" stroke="#000000" points="5165.5934,-651.2409 5161.3981,-641.5122 5158.6108,-651.7338 5165.5934,-651.2409"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="5412,-639.701 5358,-639.701 5358,-603.701 5412,-603.701 5412,-639.701"/>
<text text-anchor="middle" x="5385" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_69&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>prespace_69&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5373.2506,-1468.0481C5374.768,-1358.7484 5382.7227,-785.744 5384.6019,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="5388.1064,-650.068 5384.7457,-640.0203 5381.1071,-649.9707 5388.1064,-650.068"/>
</g>
<!-- leaf_83 -->
<g id="node84" class="node">
<title>leaf_83</title>
<polygon fill="none" stroke="#c0c0c0" points="5484,-639.701 5430,-639.701 5430,-603.701 5484,-603.701 5484,-639.701"/>
<text text-anchor="middle" x="5457" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">i</text>
</g>
<!-- literal_70&#45;&gt;leaf_83 -->
<g id="edge83" class="edge">
<title>literal_70&#45;&gt;leaf_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5468.7494,-1468.0481C5467.232,-1358.7484 5459.2773,-785.744 5457.3981,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="5460.8929,-649.9707 5457.2543,-640.0203 5453.8936,-650.068 5460.8929,-649.9707"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="5588,-639.701 5502,-639.701 5502,-603.701 5588,-603.701 5588,-639.701"/>
<text text-anchor="middle" x="5545" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> is index,</text>
</g>
<!-- raw_71&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>raw_71&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5545,-1468.0481C5545,-1358.7484 5545,-785.744 5545,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="5548.5001,-650.0203 5545,-640.0203 5541.5001,-650.0203 5548.5001,-650.0203"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="5660,-639.701 5606,-639.701 5606,-603.701 5660,-603.701 5660,-639.701"/>
<text text-anchor="middle" x="5633" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_72&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>prespace_72&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5635.9373,-1468.0481C5635.558,-1358.7484 5633.5693,-785.744 5633.0995,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="5636.5984,-650.0081 5633.0636,-640.0203 5629.5984,-650.0324 5636.5984,-650.0081"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="5732,-639.701 5678,-639.701 5678,-603.701 5732,-603.701 5732,-639.701"/>
<text text-anchor="middle" x="5705" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">k</text>
</g>
<!-- literal_73&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>literal_73&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.4361,-1468.0481C5728.022,-1358.7484 5710.124,-785.744 5705.8958,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="5709.3828,-649.9061 5705.5722,-640.0203 5702.3862,-650.1247 5709.3828,-649.9061"/>
</g>
<!-- leaf_87 -->
<g id="node88" class="node">
<title>leaf_87</title>
<polygon fill="none" stroke="#c0c0c0" points="5864,-641.0015 5750,-641.0015 5750,-602.4004 5864,-602.4004 5864,-641.0015"/>
<text text-anchor="middle" x="5807" y="-625.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> is key/value,</text>
<text text-anchor="middle" x="5807" y="-610.501" font-family="Inconsolata" font-size="14.00" fill="#000000">and</text>
</g>
<!-- raw_74&#45;&gt;leaf_87 -->
<g id="edge87" class="edge">
<title>raw_74&#45;&gt;leaf_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5807.9791,-1468.0481C5807.853,-1358.9927 5807.1927,-788.3035 5807.0342,-651.2934"/>
<polygon fill="#000000" stroke="#000000" points="5810.5341,-651.13 5807.0225,-641.1341 5803.5342,-651.1382 5810.5341,-651.13"/>
</g>
<!-- leaf_88 -->
<g id="node89" class="node">
<title>leaf_88</title>
<polygon fill="none" stroke="#c0c0c0" points="5936,-639.701 5882,-639.701 5882,-603.701 5936,-603.701 5936,-639.701"/>
<text text-anchor="middle" x="5909" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_75&#45;&gt;leaf_88 -->
<g id="edge88" class="edge">
<title>prespace_75&#45;&gt;leaf_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5899.2089,-1468.0481C5900.4733,-1358.7484 5907.1022,-785.744 5908.6682,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="5912.1721,-650.0602 5908.7881,-640.0203 5905.1725,-649.9791 5912.1721,-650.0602"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="6008,-639.701 5954,-639.701 5954,-603.701 6008,-603.701 6008,-639.701"/>
<text text-anchor="middle" x="5981" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">h</text>
</g>
<!-- literal_76&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>literal_76&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5994.7076,-1468.0481C5992.9374,-1358.7484 5983.6569,-785.744 5981.4645,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="5984.9583,-649.9623 5981.2967,-640.0203 5977.9592,-650.0757 5984.9583,-649.9623"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="6238,-639.701 6026,-639.701 6026,-603.701 6238,-603.701 6238,-639.701"/>
<text text-anchor="middle" x="6132" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> is some weird object on the</text>
</g>
<!-- raw_77&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>raw_77&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6102.6266,-1468.0481C6106.42,-1358.7484 6126.3067,-785.744 6131.0047,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="6134.5152,-650.1357 6131.3642,-640.0203 6127.5194,-649.8929 6134.5152,-650.1357"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6310,-639.701 6256,-639.701 6256,-603.701 6310,-603.701 6310,-639.701"/>
<text text-anchor="middle" x="6283" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_78&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>prespace_78&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6212.1561,-1467.9637C6218.245,-1416.3168 6235.8511,-1264.0202 6247,-1137.2018 6263.3208,-951.5541 6276.8586,-727.765 6281.3837,-649.9717"/>
<polygon fill="#000000" stroke="#000000" points="6284.8781,-650.1683 6281.9617,-639.9828 6277.8898,-649.7639 6284.8781,-650.1683"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="6382,-639.701 6328,-639.701 6328,-603.701 6382,-603.701 6382,-639.701"/>
<text text-anchor="middle" x="6355" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">[0]</text>
</g>
<!-- literal_79&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>literal_79&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6322.6893,-1468.0481C6326.862,-1358.7484 6348.7374,-785.744 6353.9052,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="6357.4165,-650.1466 6354.3006,-640.0203 6350.4216,-649.8795 6357.4165,-650.1466"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="6640,-641.0015 6400,-641.0015 6400,-602.4004 6640,-602.4004 6640,-641.0015"/>
<text text-anchor="middle" x="6520" y="-625.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> index which has column&#45;centered</text>
<text text-anchor="middle" x="6520" y="-610.501" font-family="Inconsolata" font-size="14.00" fill="#000000">values.</text>
</g>
<!-- raw_80&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>raw_80&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6460.2741,-1468.0481C6467.97,-1358.9927 6508.243,-788.3035 6517.9117,-651.2934"/>
<polygon fill="#000000" stroke="#000000" points="6521.4159,-651.3557 6518.6286,-641.1341 6514.4333,-650.8629 6521.4159,-651.3557"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="6940,-641.603 6658,-641.603 6658,-601.7989 6940,-601.7989 6940,-641.603"/>
<text text-anchor="middle" x="6799" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ve been getting back all three. Hmm.</text>
</g>
<!-- raw_94&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>raw_94&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6667.7988,-1468.0481C6684.6863,-1359.1108 6772.9818,-789.5383 6794.3434,-651.7397"/>
<polygon fill="#000000" stroke="#000000" points="6797.8556,-651.9303 6795.9289,-641.5122 6790.9382,-650.8579 6797.8556,-651.9303"/>
</g>
<!-- leaf_103 -->
<g id="node104" class="node">
<title>leaf_103</title>
<polygon fill="none" stroke="#c0c0c0" points="7149.5,-641.603 6958.5,-641.603 6958.5,-601.7989 7149.5,-601.7989 7149.5,-641.603"/>
<text text-anchor="middle" x="7054" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">Also the return format is</text>
</g>
<!-- raw_96&#45;&gt;leaf_103 -->
<g id="edge103" class="edge">
<title>raw_96&#45;&gt;leaf_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7078.4778,-1468.0481C7075.3272,-1359.1108 7058.8541,-789.5383 7054.8688,-651.7397"/>
<polygon fill="#000000" stroke="#000000" points="7058.3607,-651.4068 7054.573,-641.5122 7051.3636,-651.6092 7058.3607,-651.4068"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="7222,-639.701 7168,-639.701 7168,-603.701 7222,-603.701 7222,-639.701"/>
<text text-anchor="middle" x="7195" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_97&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>prespace_97&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7199.8956,-1468.0481C7199.2633,-1358.7484 7195.9489,-785.744 7195.1659,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="7198.6638,-649.9999 7195.106,-640.0203 7191.664,-650.0404 7198.6638,-649.9999"/>
</g>
<!-- leaf_105 -->
<g id="node106" class="node">
<title>leaf_105</title>
<polygon fill="none" stroke="#c0c0c0" points="7361.5,-639.701 7240.5,-639.701 7240.5,-603.701 7361.5,-603.701 7361.5,-639.701"/>
<text text-anchor="middle" x="7301" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">resultset, nrow</text>
</g>
<!-- literal_98&#45;&gt;leaf_105 -->
<g id="edge105" class="edge">
<title>literal_98&#45;&gt;leaf_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7328.4152,-1468.0481C7324.8747,-1358.7484 7306.3137,-785.744 7301.9289,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="7305.4154,-649.9017 7301.5934,-640.0203 7298.4191,-650.1284 7305.4154,-649.9017"/>
</g>
<!-- leaf_106 -->
<g id="node107" class="node">
<title>leaf_106</title>
<polygon fill="none" stroke="#c0c0c0" points="7620,-639.701 7380,-639.701 7380,-603.701 7620,-603.701 7620,-639.701"/>
<text text-anchor="middle" x="7500" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> which mitigates the damage from</text>
</g>
<!-- raw_99&#45;&gt;leaf_106 -->
<g id="edge106" class="edge">
<title>raw_99&#45;&gt;leaf_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7466.7101,-1468.0481C7471.0093,-1358.7484 7493.5476,-785.744 7498.872,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="7502.3836,-650.1502 7499.2794,-640.0203 7495.389,-649.875 7502.3836,-650.1502"/>
</g>
<!-- leaf_107 -->
<g id="node108" class="node">
<title>leaf_107</title>
<polygon fill="none" stroke="#c0c0c0" points="7692,-639.701 7638,-639.701 7638,-603.701 7692,-603.701 7692,-639.701"/>
</g>
<!-- prespace_100&#45;&gt;leaf_107 -->
<g id="edge107" class="edge">
<title>prespace_100&#45;&gt;leaf_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7614.0861,-1468.0481C7620.6613,-1358.7484 7655.1316,-785.744 7663.2748,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="7666.7911,-650.2125 7663.898,-640.0203 7659.8037,-649.7921 7666.7911,-650.2125"/>
</g>
<!-- leaf_108 -->
<g id="node109" class="node">
<title>leaf_108</title>
<polygon fill="none" stroke="#c0c0c0" points="7764,-639.701 7710,-639.701 7710,-603.701 7764,-603.701 7764,-639.701"/>
<text text-anchor="middle" x="7737" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">NULL</text>
</g>
<!-- literal_101&#45;&gt;leaf_108 -->
<g id="edge108" class="edge">
<title>literal_101&#45;&gt;leaf_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7723.2924,-1468.0481C7725.0626,-1358.7484 7734.3431,-785.744 7736.5355,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="7740.0408,-650.0757 7736.7033,-640.0203 7733.0417,-649.9623 7740.0408,-650.0757"/>
</g>
<!-- leaf_109 -->
<g id="node110" class="node">
<title>leaf_109</title>
<polygon fill="none" stroke="#c0c0c0" points="7847.5,-641.603 7782.5,-641.603 7782.5,-601.7989 7847.5,-601.7989 7847.5,-641.603"/>
<text text-anchor="middle" x="7815" y="-626.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> holes.</text>
</g>
<!-- raw_102&#45;&gt;leaf_109 -->
<g id="edge109" class="edge">
<title>raw_102&#45;&gt;leaf_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7813.0418,-1468.0481C7813.2938,-1359.1108 7814.6117,-789.5383 7814.9305,-651.7397"/>
<polygon fill="#000000" stroke="#000000" points="7818.4309,-651.5203 7814.9542,-641.5122 7811.4309,-651.504 7818.4309,-651.5203"/>
</g>
<!-- leaf_113 -->
<g id="node114" class="node">
<title>leaf_113</title>
<polygon fill="none" stroke="#c0c0c0" points="8008,-639.701 7866,-639.701 7866,-603.701 8008,-603.701 8008,-639.701"/>
<text text-anchor="middle" x="7937" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">*** SQLite battery</text>
</g>
<!-- header_110&#45;&gt;leaf_113 -->
<g id="edge113" class="edge">
<title>header_110&#45;&gt;leaf_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7937,-1468.0481C7937,-1358.7484 7937,-785.744 7937,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="7940.5001,-650.0203 7937,-640.0203 7933.5001,-650.0203 7940.5001,-650.0203"/>
</g>
<!-- raw_114 -->
<g id="node115" class="node">
<title>raw_114</title>
<ellipse fill="none" stroke="#000000" cx="8053" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="8053" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_111&#45;&gt;raw_114 -->
<g id="edge114" class="edge">
<title>prose_111&#45;&gt;raw_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8065.7285,-1468.0481C8064.0847,-1358.7484 8055.4671,-785.744 8053.4313,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="8056.9256,-649.9665 8053.2755,-640.0203 8049.9264,-650.0718 8056.9256,-649.9665"/>
</g>
<!-- leaf_116 -->
<g id="node117" class="node">
<title>leaf_116</title>
<polygon fill="none" stroke="#c0c0c0" points="8646,-1137.2027 8098,-1137.2027 8098,-106.1992 8646,-106.1992 8646,-1137.2027"/>
<text text-anchor="middle" x="8372" y="-1122.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.HISTORY_LIMIT = 1000</text>
<text text-anchor="middle" x="8372" y="-1090.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_repl_table = [[</text>
<text text-anchor="middle" x="8372" y="-1075.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS repl (</text>
<text text-anchor="middle" x="8372" y="-1059.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">line_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-1044.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">project TEXT,</text>
<text text-anchor="middle" x="8372" y="-1029.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">line TEXT,</text>
<text text-anchor="middle" x="8372" y="-1013.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">time DATETIME DEFAULT CURRENT_TIMESTAMP);</text>
<text text-anchor="middle" x="8372" y="-998.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-966.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_result_table = [[</text>
<text text-anchor="middle" x="8372" y="-951.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS results (</text>
<text text-anchor="middle" x="8372" y="-936.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">result_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-920.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">line_id INTEGER,</text>
<text text-anchor="middle" x="8372" y="-905.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">repr text NOT NULL,</text>
<text text-anchor="middle" x="8372" y="-889.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">value blob,</text>
<text text-anchor="middle" x="8372" y="-874.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">FOREIGN KEY (line_id)</text>
<text text-anchor="middle" x="8372" y="-859.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;REFERENCES repl (line_id)</text>
<text text-anchor="middle" x="8372" y="-843.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ON DELETE CASCADE);</text>
<text text-anchor="middle" x="8372" y="-828.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-796.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert_line_stmt = [[</text>
<text text-anchor="middle" x="8372" y="-781.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">INSERT INTO repl (project, line) VALUES (:project, :line);</text>
<text text-anchor="middle" x="8372" y="-766.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-734.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert_result_stmt = [[</text>
<text text-anchor="middle" x="8372" y="-719.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">INSERT INTO results (line_id, repr) VALUES (:line_id, :repr);</text>
<text text-anchor="middle" x="8372" y="-703.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-672.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_tables = [[</text>
<text text-anchor="middle" x="8372" y="-657.001" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT name FROM sqlite_master WHERE type=&#39;table&#39;;</text>
<text text-anchor="middle" x="8372" y="-641.601" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_recent = [[</text>
<text text-anchor="middle" x="8372" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT CAST (line_id AS REAL), line FROM repl</text>
<text text-anchor="middle" x="8372" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;WHERE project = %s</text>
<text text-anchor="middle" x="8372" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ORDER BY time</text>
<text text-anchor="middle" x="8372" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;DESC LIMIT %d;</text>
<text text-anchor="middle" x="8372" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-501.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_reprs = [[</text>
<text text-anchor="middle" x="8372" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT CAST (repl.line_id AS REAL), results.repr</text>
<text text-anchor="middle" x="8372" y="-471.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">FROM repl</text>
<text text-anchor="middle" x="8372" y="-455.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">LEFT OUTER JOIN results</text>
<text text-anchor="middle" x="8372" y="-440.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">ON repl.line_id = results.line_id</text>
<text text-anchor="middle" x="8372" y="-424.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">WHERE repl.project = &#39;%s&#39;</text>
<text text-anchor="middle" x="8372" y="-409.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">ORDER BY repl.time</text>
<text text-anchor="middle" x="8372" y="-394.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">DESC LIMIT %d;</text>
<text text-anchor="middle" x="8372" y="-378.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local home_dir = io.popen(&quot;echo $HOME&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local bridge_home = io.popen(&quot;echo $BRIDGE_HOME&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.bridge_home = bridge_home ~= &quot;&quot; and bridge_home</text>
<text text-anchor="middle" x="8372" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or home_dir .. &quot;/.bridge&quot;</text>
<text text-anchor="middle" x="8372" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.project = io.popen(&quot;pwd&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-222.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function has(table, name)</text>
<text text-anchor="middle" x="8372" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _,v in ipairs(table) do</text>
<text text-anchor="middle" x="8372" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if name == v then</text>
<text text-anchor="middle" x="8372" y="-176.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="8372" y="-160.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8372" y="-145.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="8372" y="-129.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return false</text>
<text text-anchor="middle" x="8372" y="-114.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_112&#45;&gt;leaf_116 -->
<g id="edge116" class="edge">
<title>codeblock_112&#45;&gt;leaf_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8287.7962,-1468.0481C8292.4089,-1421.6855 8305.3224,-1291.8893 8319.6926,-1147.4519"/>
<polygon fill="#000000" stroke="#000000" points="8323.1781,-1147.7707 8320.6854,-1137.4733 8316.2125,-1147.0776 8323.1781,-1147.7707"/>
</g>
<!-- leaf_115 -->
<g id="node116" class="node">
<title>leaf_115</title>
<polygon fill="none" stroke="#c0c0c0" points="8010,-53.1 7956,-53.1 7956,-17.1 8010,-17.1 8010,-53.1"/>
</g>
<!-- raw_114&#45;&gt;leaf_115 -->
<g id="edge115" class="edge">
<title>raw_114&#45;&gt;leaf_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8054.153,-603.4982C8057.9139,-536.1621 8066.8801,-295.3104 8017,-106.2001 8012.9845,-90.9762 8005.7094,-75.0731 7998.9163,-62.1772"/>
<polygon fill="#000000" stroke="#000000" points="8001.9726,-60.4711 7994.1086,-53.3712 7995.8286,-63.8255 8001.9726,-60.4711"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="8820,-639.701 8664,-639.701 8664,-603.701 8820,-603.701 8820,-639.701"/>
<text text-anchor="middle" x="8742" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:load()</text>
</g>
<!-- header_117&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>header_117&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8732.2089,-1468.0481C8733.4733,-1358.7484 8740.1022,-785.744 8741.6682,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="8745.1721,-650.0602 8741.7881,-640.0203 8738.1725,-649.9791 8745.1721,-650.0602"/>
</g>
<!-- raw_122 -->
<g id="node123" class="node">
<title>raw_122</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="8865" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_118&#45;&gt;raw_122 -->
<g id="edge122" class="edge">
<title>prose_118&#45;&gt;raw_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8865,-1468.0481C8865,-1358.7484 8865,-785.744 8865,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="8868.5001,-650.0203 8865,-640.0203 8861.5001,-650.0203 8868.5001,-650.0203"/>
</g>
<!-- raw_124 -->
<g id="node125" class="node">
<title>raw_124</title>
<ellipse fill="none" stroke="#000000" cx="8937" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="8937" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_119&#45;&gt;raw_124 -->
<g id="edge124" class="edge">
<title>prose_119&#45;&gt;raw_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8946.7911,-1468.0481C8945.5267,-1358.7484 8938.8978,-785.744 8937.3318,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="8940.8275,-649.9791 8937.2119,-640.0203 8933.8279,-650.0602 8940.8275,-649.9791"/>
</g>
<!-- leaf_126 -->
<g id="node127" class="node">
<title>leaf_126</title>
<polygon fill="none" stroke="#c0c0c0" points="9460,-995.4025 8982,-995.4025 8982,-247.9994 9460,-247.9994 9460,-995.4025"/>
<text text-anchor="middle" x="9221" y="-980.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.load(historian)</text>
<text text-anchor="middle" x="9221" y="-964.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local conn = sql.open(historian.bridge_home)</text>
<text text-anchor="middle" x="9221" y="-949.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.conn = conn</text>
<text text-anchor="middle" x="9221" y="-933.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Set up bridge tables</text>
<text text-anchor="middle" x="9221" y="-918.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn.pragma.foreign_keys(true)</text>
<text text-anchor="middle" x="9221" y="-903.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn:exec(create_result_table)</text>
<text text-anchor="middle" x="9221" y="-887.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn:exec(create_repl_table)</text>
<text text-anchor="middle" x="9221" y="-872.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Create insert prepared statements</text>
<text text-anchor="middle" x="9221" y="-856.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.insert_line_stmt = conn:prepare(insert_line_stmt)</text>
<text text-anchor="middle" x="9221" y="-841.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.insert_result_stmt = conn:prepare(insert_result_stmt)</text>
<text text-anchor="middle" x="9221" y="-826.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Retrieve history</text>
<text text-anchor="middle" x="9221" y="-810.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local pop_str = sql.format(get_recent, historian.project,</text>
<text text-anchor="middle" x="9221" y="-795.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.HISTORY_LIMIT)</text>
<text text-anchor="middle" x="9221" y="-779.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local repl_val, repl_row = sql.pexec(conn, pop_str, &quot;i&quot;)</text>
<text text-anchor="middle" x="9221" y="-764.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local res_str = sql.format(get_reprs, historian.project,</text>
<text text-anchor="middle" x="9221" y="-749.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.HISTORY_LIMIT * 2)</text>
<text text-anchor="middle" x="9221" y="-733.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local res_val, res_row = sql.pexec(conn, res_str, &quot;i&quot;)</text>
<text text-anchor="middle" x="9221" y="-718.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if repl_val and res_val then</text>
<text text-anchor="middle" x="9221" y="-702.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local lines = reverse(repl_val[2])</text>
<text text-anchor="middle" x="9221" y="-687.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local line_ids = reverse(repl_val[1])</text>
<text text-anchor="middle" x="9221" y="-672.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local repl_map = {}</text>
<text text-anchor="middle" x="9221" y="-656.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i, v in ipairs(lines) do</text>
<text text-anchor="middle" x="9221" y="-641.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local buf = Linebuf(v)</text>
<text text-anchor="middle" x="9221" y="-625.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian[i] = buf</text>
<text text-anchor="middle" x="9221" y="-610.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repl_map[line_ids[i]] = buf</text>
<text text-anchor="middle" x="9221" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9221" y="-579.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.cursor = #historian</text>
<text text-anchor="middle" x="9221" y="-564.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.repl_map = repl_map &#45;&#45; remove</text>
<text text-anchor="middle" x="9221" y="-548.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; reuse line_id var for foreign keys</text>
<text text-anchor="middle" x="9221" y="-533.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;line_ids = res_val[1]</text>
<text text-anchor="middle" x="9221" y="-518.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local reprs = res_val[2]</text>
<text text-anchor="middle" x="9221" y="-502.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; This is keyed by linebuf with a string value.</text>
<text text-anchor="middle" x="9221" y="-487.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local result_map = {}</text>
<text text-anchor="middle" x="9221" y="-471.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, #reprs do</text>
<text text-anchor="middle" x="9221" y="-456.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local buf = repl_map[line_ids[i]]</text>
<text text-anchor="middle" x="9221" y="-441.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if buf then</text>
<text text-anchor="middle" x="9221" y="-425.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local result = result_map[buf] or {frozen = true}</text>
<text text-anchor="middle" x="9221" y="-410.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result[#result + 1] = reprs[i]</text>
<text text-anchor="middle" x="9221" y="-394.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result.n = #result &#45;&#45; for compat with nil in live use</text>
<text text-anchor="middle" x="9221" y="-379.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result_map[buf] = result</text>
<text text-anchor="middle" x="9221" y="-364.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9221" y="-348.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9221" y="-333.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.results = result_map</text>
<text text-anchor="middle" x="9221" y="-317.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="9221" y="-302.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; one of the &#39;row&#39; vals will have an error</text>
<text text-anchor="middle" x="9221" y="-287.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;error(repr_row .. res_row)</text>
<text text-anchor="middle" x="9221" y="-271.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="9221" y="-256.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_120&#45;&gt;leaf_126 -->
<g id="edge126" class="edge">
<title>codeblock_120&#45;&gt;leaf_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9154.4203,-1468.0481C9159.2428,-1406.7455 9175.5403,-1199.5743 9190.8028,-1005.5616"/>
<polygon fill="#000000" stroke="#000000" points="9194.3028,-1005.6982 9191.5979,-995.4545 9187.3243,-1005.1491 9194.3028,-1005.6982"/>
</g>
<!-- leaf_123 -->
<g id="node124" class="node">
<title>leaf_123</title>
<polygon fill="none" stroke="#c0c0c0" points="8541.5,-63.0015 8028.5,-63.0015 8028.5,-7.1986 8541.5,-7.1986 8541.5,-63.0015"/>
<text text-anchor="middle" x="8285" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Brings up the project history and (eventually) results and user config.</text>
</g>
<!-- raw_122&#45;&gt;leaf_123 -->
<g id="edge123" class="edge">
<title>raw_122&#45;&gt;leaf_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8866.6372,-603.5346C8873.6888,-520.6743 8898.0922,-179.4647 8829,-106.2001 8786.1099,-60.72 8611.9865,-78.3043 8550,-70.2001 8534.995,-68.2383 8519.5131,-66.2068 8503.9194,-64.1552"/>
<polygon fill="#000000" stroke="#000000" points="8504.031,-60.6398 8493.6597,-62.8046 8503.1174,-67.5799 8504.031,-60.6398"/>
</g>
<!-- leaf_125 -->
<g id="node126" class="node">
<title>leaf_125</title>
<polygon fill="none" stroke="#c0c0c0" points="9058.5,-62.4005 8559.5,-62.4005 8559.5,-7.7996 9058.5,-7.7996 9058.5,-62.4005"/>
<text text-anchor="middle" x="8809" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">Most of the complexity serves to make a simple key/value relationship</text>
<text text-anchor="middle" x="8809" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">between the regenerated linebufs and their associated result history.</text>
</g>
<!-- raw_124&#45;&gt;leaf_125 -->
<g id="edge125" class="edge">
<title>raw_124&#45;&gt;leaf_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8940.6788,-603.8402C8953.9573,-534.6946 8993.9003,-279.8332 8901,-106.2001 8893.1926,-91.608 8880.9503,-79.07 8867.9144,-68.7672"/>
<polygon fill="#000000" stroke="#000000" points="8869.8315,-65.8304 8859.7276,-62.6426 8865.6383,-71.4355 8869.8315,-65.8304"/>
</g>
<!-- leaf_133 -->
<g id="node134" class="node">
<title>leaf_133</title>
<polygon fill="none" stroke="#c0c0c0" points="9995,-639.701 9769,-639.701 9769,-603.701 9995,-603.701 9995,-639.701"/>
<text text-anchor="middle" x="9882" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:persist(linebuf)</text>
</g>
<!-- header_127&#45;&gt;leaf_133 -->
<g id="edge133" class="edge">
<title>header_127&#45;&gt;leaf_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9882,-1468.0481C9882,-1358.7484 9882,-785.744 9882,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="9885.5001,-650.0203 9882,-640.0203 9878.5001,-650.0203 9885.5001,-650.0203"/>
</g>
<!-- raw_134 -->
<g id="node135" class="node">
<title>raw_134</title>
<ellipse fill="none" stroke="#000000" cx="10045" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="10045" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_128&#45;&gt;raw_134 -->
<g id="edge134" class="edge">
<title>prose_128&#45;&gt;raw_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10049.8956,-1468.0481C10049.2633,-1358.7484 10045.9489,-785.744 10045.1659,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="10048.6638,-649.9999 10045.106,-640.0203 10041.664,-650.0404 10048.6638,-649.9999"/>
</g>
<!-- raw_136 -->
<g id="node137" class="node">
<title>raw_136</title>
<ellipse fill="none" stroke="#000000" cx="10124" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="10124" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_129&#45;&gt;raw_136 -->
<g id="edge136" class="edge">
<title>prose_129&#45;&gt;raw_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10131.8329,-1468.0481C10130.8213,-1358.7484 10125.5182,-785.744 10124.2654,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="10127.762,-649.9875 10124.1695,-640.0203 10120.7623,-650.0523 10127.762,-649.9875"/>
</g>
<!-- raw_138 -->
<g id="node139" class="node">
<title>raw_138</title>
<ellipse fill="none" stroke="#000000" cx="10336" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="10336" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_138 -->
<g id="edge138" class="edge">
<title>prose_130&#45;&gt;raw_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10583.982,-1468.8023C10558.241,-1418.7697 10483.6054,-1269.0693 10442,-1137.2018 10384.76,-955.7805 10350.5116,-728.4734 10339.7189,-649.924"/>
<polygon fill="#000000" stroke="#000000" points="10343.1646,-649.2865 10338.3518,-639.8479 10336.2281,-650.2277 10343.1646,-649.2865"/>
</g>
<!-- prespace_139 -->
<g id="node140" class="node">
<title>prespace_139</title>
<ellipse fill="none" stroke="#000000" cx="10497" cy="-621.701" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10497" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_139 -->
<g id="edge139" class="edge">
<title>prose_130&#45;&gt;prespace_139</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10590.8799,-1467.9456C10584.852,-1416.2514 10567.1379,-1263.842 10553,-1137.2018 10532.2521,-951.3516 10508.303,-727.6887 10500.0092,-649.9501"/>
<polygon fill="#000000" stroke="#000000" points="10503.4855,-649.5409 10498.9447,-639.9684 10496.5249,-650.2832 10503.4855,-649.5409"/>
</g>
<!-- literal_140 -->
<g id="node141" class="node">
<title>literal_140</title>
<ellipse fill="none" stroke="#000000" cx="10593" cy="-621.701" rx="31.481" ry="18"/>
<text text-anchor="middle" x="10593" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_140 -->
<g id="edge140" class="edge">
<title>prose_130&#45;&gt;literal_140</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10593,-1468.0481C10593,-1358.7484 10593,-785.744 10593,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="10596.5001,-650.0203 10593,-640.0203 10589.5001,-650.0203 10596.5001,-650.0203"/>
</g>
<!-- raw_141 -->
<g id="node142" class="node">
<title>raw_141</title>
<ellipse fill="none" stroke="#000000" cx="10669" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="10669" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_141 -->
<g id="edge141" class="edge">
<title>prose_130&#45;&gt;raw_141</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10595.3668,-1467.9708C10602.0437,-1416.3427 10621.3016,-1264.0906 10633,-1137.2018 10650.1092,-951.625 10663.1559,-727.7918 10667.4678,-649.9792"/>
<polygon fill="#000000" stroke="#000000" points="10670.9627,-650.1651 10668.0177,-639.9878 10663.9733,-649.7803 10670.9627,-650.1651"/>
</g>
<!-- prespace_142 -->
<g id="node143" class="node">
<title>prespace_142</title>
<ellipse fill="none" stroke="#000000" cx="10760" cy="-621.701" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10760" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_142 -->
<g id="edge142" class="edge">
<title>prose_130&#45;&gt;prespace_142</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10590.0036,-1468.1552C10582.4532,-1416.7904 10567.6916,-1266.8904 10634,-1173.2018 10654.4392,-1144.3229 10684.9088,-1166.3239 10705,-1137.2018 10812.7214,-981.0596 10780.3505,-732.6093 10765.546,-649.6769"/>
<polygon fill="#000000" stroke="#000000" points="10768.9703,-648.946 10763.7138,-639.7472 10762.0865,-650.2163 10768.9703,-648.946"/>
</g>
<!-- literal_143 -->
<g id="node144" class="node">
<title>literal_143</title>
<ellipse fill="none" stroke="#000000" cx="10856" cy="-621.701" rx="31.481" ry="18"/>
<text text-anchor="middle" x="10856" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_143 -->
<g id="edge143" class="edge">
<title>prose_130&#45;&gt;literal_143</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10588.9562,-1467.942C10578.2639,-1414.6897 10555.188,-1257.3985 10634,-1173.2018 10690.0506,-1113.3216 10760.492,-1198.4896 10815,-1137.2018 10941.5789,-994.8788 10886.5194,-734.4157 10863.9442,-649.365"/>
<polygon fill="#000000" stroke="#000000" points="10867.3064,-648.3905 10861.3045,-639.6596 10860.5518,-650.2277 10867.3064,-648.3905"/>
</g>
<!-- raw_144 -->
<g id="node145" class="node">
<title>raw_144</title>
<ellipse fill="none" stroke="#000000" cx="10932" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="10932" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_144 -->
<g id="edge144" class="edge">
<title>prose_130&#45;&gt;raw_144</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10588.8017,-1468.0974C10577.4997,-1414.594 10552.5137,-1255.1998 10634,-1173.2018 10716.8518,-1089.8298 10815.7107,-1223.0443 10896,-1137.2018 10962.2375,-1066.383 10942.2808,-747.5978 10934.4672,-650.1126"/>
<polygon fill="#000000" stroke="#000000" points="10937.9315,-649.5338 10933.6235,-639.8544 10930.9551,-650.1077 10937.9315,-649.5338"/>
</g>
<!-- raw_152 -->
<g id="node153" class="node">
<title>raw_152</title>
<ellipse fill="none" stroke="#000000" cx="11004" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="11004" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_131&#45;&gt;raw_152 -->
<g id="edge152" class="edge">
<title>prose_131&#45;&gt;raw_152</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10670.8909,-1468.111C10659.8483,-1414.6456 10635.5933,-1255.3465 10717,-1173.2018 10796.3285,-1093.1542 10891.2612,-1219.7354 10968,-1137.2018 11034.0281,-1066.1877 11014.2157,-747.537 11006.452,-650.0984"/>
<polygon fill="#000000" stroke="#000000" points="11009.917,-649.5267 11005.6136,-639.8452 11002.9403,-650.0972 11009.917,-649.5267"/>
</g>
<!-- leaf_154 -->
<g id="node155" class="node">
<title>leaf_154</title>
<polygon fill="none" stroke="#c0c0c0" points="11555,-864.7019 11049,-864.7019 11049,-378.7 11555,-378.7 11555,-864.7019"/>
<text text-anchor="middle" x="11302" y="-849.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.persist(historian, linebuf, results)</text>
<text text-anchor="middle" x="11302" y="-834.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local lb = tostring(linebuf)</text>
<text text-anchor="middle" x="11302" y="-818.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if lb ~= &quot;&quot; then</text>
<text text-anchor="middle" x="11302" y="-803.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.insert_line_stmt:bindkv { project = historian.project,</text>
<text text-anchor="middle" x="11302" y="-787.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;line &#160;&#160;&#160;= lb }</text>
<text text-anchor="middle" x="11302" y="-772.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local err = historian.insert_line_stmt:step()</text>
<text text-anchor="middle" x="11302" y="-757.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not err then</text>
<text text-anchor="middle" x="11302" y="-741.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_line_stmt:clearbind():reset()</text>
<text text-anchor="middle" x="11302" y="-726.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="11302" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error(err)</text>
<text text-anchor="middle" x="11302" y="-695.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11302" y="-680.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local line_id = sql.lastRowId(historian.conn)</text>
<text text-anchor="middle" x="11302" y="-664.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if results and type(results) == &quot;table&quot; then</text>
<text text-anchor="middle" x="11302" y="-649.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _,v in ipairs(results) do</text>
<text text-anchor="middle" x="11302" y="-633.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; insert result repr</text>
<text text-anchor="middle" x="11302" y="-618.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; tostring() just for compactness</text>
<text text-anchor="middle" x="11302" y="-603.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_result_stmt:bindkv { line_id = line_id,</text>
<text text-anchor="middle" x="11302" y="-587.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repr = color.ts(v) }</text>
<text text-anchor="middle" x="11302" y="-572.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;err = historian.insert_result_stmt:step()</text>
<text text-anchor="middle" x="11302" y="-556.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not err then</text>
<text text-anchor="middle" x="11302" y="-541.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_result_stmt:clearbind():reset()</text>
<text text-anchor="middle" x="11302" y="-526.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11302" y="-510.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11302" y="-495.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11302" y="-463.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return true</text>
<text text-anchor="middle" x="11302" y="-448.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="11302" y="-433.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; A blank line can have no results and is uninteresting.</text>
<text text-anchor="middle" x="11302" y="-417.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="11302" y="-402.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11302" y="-386.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_132&#45;&gt;leaf_154 -->
<g id="edge154" class="edge">
<title>codeblock_132&#45;&gt;leaf_154</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10812.8871,-1467.859C10813.5875,-1414.3784 10823.1841,-1256.5227 10909,-1173.2018 10952.3207,-1131.1406 10993.2165,-1175.3741 11040,-1137.2018 11122.9002,-1069.5606 11182.1845,-968.8945 11223.1481,-874.4242"/>
<polygon fill="#000000" stroke="#000000" points="11226.4608,-875.5792 11227.1795,-865.0088 11220.0259,-872.8239 11226.4608,-875.5792"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="9351.5,-63.0015 9076.5,-63.0015 9076.5,-7.1986 9351.5,-7.1986 9351.5,-63.0015"/>
<text text-anchor="middle" x="9214" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Persists a line and results to store.</text>
</g>
<!-- raw_134&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>raw_134&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10046.5426,-603.6832C10053.221,-520.7394 10076.1708,-176.6988 10004,-106.2001 9952.8126,-56.1985 9431.8038,-80.5506 9361,-70.2001 9350.966,-68.7333 9340.6112,-66.9093 9330.2612,-64.8695"/>
<polygon fill="#000000" stroke="#000000" points="9330.8473,-61.4171 9320.3501,-62.8523 9329.4511,-68.2765 9330.8473,-61.4171"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="9932,-70.3004 9370,-70.3004 9370,.1003 9932,.1003 9932,-70.3004"/>
<text text-anchor="middle" x="9651" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">The hooks are in place to persist the results. I&#39;m starting with a string</text>
<text text-anchor="middle" x="9651" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">representation; the goal is to provide the sense of persistence across</text>
<text text-anchor="middle" x="9651" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">sessions, and supplement that over time with better and better approximations.</text>
</g>
<!-- raw_136&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>raw_136&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10129.3547,-603.6092C10149.8428,-530.2702 10215.5712,-252.0862 10081,-106.2001 10074.138,-98.7612 9997.8905,-85.1195 9911.4589,-71.7598"/>
<polygon fill="#000000" stroke="#000000" points="9911.8395,-68.2773 9901.4238,-70.2168 9910.7757,-75.196 9911.8395,-68.2773"/>
</g>
<!-- leaf_145 -->
<g id="node146" class="node">
<title>leaf_145</title>
<polygon fill="none" stroke="#c0c0c0" points="10470,-62.4005 9950,-62.4005 9950,-7.7996 10470,-7.7996 10470,-62.4005"/>
<text text-anchor="middle" x="10210" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">To really nail it down will require semantic analysis and hence thorough</text>
<text text-anchor="middle" x="10210" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">parsing. &#160;General&#45;purpose persistence tools belong in</text>
</g>
<!-- raw_138&#45;&gt;leaf_145 -->
<g id="edge145" class="edge">
<title>raw_138&#45;&gt;leaf_145</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10332.1603,-603.8249C10314.6826,-522.4564 10242.4509,-186.1772 10218.0755,-72.6961"/>
<polygon fill="#000000" stroke="#000000" points="10221.4578,-71.7758 10215.9357,-62.7339 10214.6139,-73.2459 10221.4578,-71.7758"/>
</g>
<!-- leaf_146 -->
<g id="node147" class="node">
<title>leaf_146</title>
<polygon fill="none" stroke="#c0c0c0" points="10542,-53.1 10488,-53.1 10488,-17.1 10542,-17.1 10542,-53.1"/>
<text text-anchor="middle" x="10515" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_139&#45;&gt;leaf_146 -->
<g id="edge146" class="edge">
<title>prespace_139&#45;&gt;leaf_146</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10497.5584,-603.5019C10500.1435,-519.2592 10510.9559,-166.8931 10514.1241,-63.6454"/>
<polygon fill="#000000" stroke="#000000" points="10517.6307,-63.4791 10514.4392,-53.3764 10510.634,-63.2643 10517.6307,-63.4791"/>
</g>
<!-- leaf_147 -->
<g id="node148" class="node">
<title>leaf_147</title>
<polygon fill="none" stroke="#c0c0c0" points="10625.5,-53.1 10560.5,-53.1 10560.5,-17.1 10625.5,-17.1 10625.5,-53.1"/>
<text text-anchor="middle" x="10593" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlayer</text>
</g>
<!-- literal_140&#45;&gt;leaf_147 -->
<g id="edge147" class="edge">
<title>literal_140&#45;&gt;leaf_147</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10593,-603.5019C10593,-519.2592 10593,-166.8931 10593,-63.6454"/>
<polygon fill="#000000" stroke="#000000" points="10596.5001,-63.3764 10593,-53.3764 10589.5001,-63.3765 10596.5001,-63.3764"/>
</g>
<!-- leaf_148 -->
<g id="node149" class="node">
<title>leaf_148</title>
<polygon fill="none" stroke="#c0c0c0" points="10912,-54.4006 10644,-54.4006 10644,-15.7995 10912,-15.7995 10912,-54.4006"/>
<text text-anchor="middle" x="10778" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">, which will</text>
<text text-anchor="middle" x="10778" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">merge with our increasingly&#45;modified</text>
</g>
<!-- raw_141&#45;&gt;leaf_148 -->
<g id="edge148" class="edge">
<title>raw_141&#45;&gt;leaf_148</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10665.8594,-603.6788C10654.7645,-534.9821 10622.3545,-284.4476 10705,-106.2001 10713.0871,-88.758 10727.4629,-73.3121 10741.3309,-61.3105"/>
<polygon fill="#000000" stroke="#000000" points="10743.9076,-63.7216 10749.3862,-54.6532 10739.4482,-58.3259 10743.9076,-63.7216"/>
</g>
<!-- leaf_149 -->
<g id="node150" class="node">
<title>leaf_149</title>
<polygon fill="none" stroke="#c0c0c0" points="10984,-53.1 10930,-53.1 10930,-17.1 10984,-17.1 10984,-53.1"/>
<text text-anchor="middle" x="10957" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_142&#45;&gt;leaf_149 -->
<g id="edge149" class="edge">
<title>prespace_142&#45;&gt;leaf_149</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10755.7817,-603.6561C10740.0797,-531.6456 10692.0574,-261.2515 10816,-106.2001 10846.8034,-67.6653 10878.9813,-96.0499 10921,-70.2001 10925.5306,-67.4129 10929.9441,-63.9638 10934.0395,-60.3258"/>
<polygon fill="#000000" stroke="#000000" points="10936.661,-62.6618 10941.4704,-53.2215 10931.8236,-57.6021 10936.661,-62.6618"/>
</g>
<!-- leaf_150 -->
<g id="node151" class="node">
<title>leaf_150</title>
<polygon fill="none" stroke="#c0c0c0" points="11060,-53.1 11002,-53.1 11002,-17.1 11060,-17.1 11060,-53.1"/>
<text text-anchor="middle" x="11031" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlite</text>
</g>
<!-- literal_143&#45;&gt;leaf_150 -->
<g id="edge150" class="edge">
<title>literal_143&#45;&gt;leaf_150</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10851.2163,-603.8261C10833.2588,-532.4629 10776.7768,-264.1984 10896,-106.2001 10923.6983,-69.4935 10953.8107,-94.2576 10993,-70.2001 10997.5708,-67.3942 11002.0769,-63.9873 11006.2999,-60.4126"/>
<polygon fill="#000000" stroke="#000000" points="11008.9389,-62.7453 11014.0142,-53.4451 11004.247,-57.5504 11008.9389,-62.7453"/>
</g>
<!-- leaf_151 -->
<g id="node152" class="node">
<title>leaf_151</title>
<polygon fill="none" stroke="#c0c0c0" points="11164,-53.1 11078,-53.1 11078,-17.1 11164,-17.1 11164,-53.1"/>
<text text-anchor="middle" x="11121" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> bindings.</text>
</g>
<!-- raw_144&#45;&gt;leaf_151 -->
<g id="edge151" class="edge">
<title>raw_144&#45;&gt;leaf_151</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10930.7181,-603.5778C10925.2942,-521.6397 10907.198,-186.3373 10968,-106.2001 10996.8046,-68.2355 11026.4707,-91.7006 11069,-70.2001 11075.5491,-66.8892 11082.2528,-62.8899 11088.5761,-58.7937"/>
<polygon fill="#000000" stroke="#000000" points="11090.5563,-61.68 11096.9127,-53.2037 11086.6578,-55.866 11090.5563,-61.68"/>
</g>
<!-- leaf_153 -->
<g id="node154" class="node">
<title>leaf_153</title>
<polygon fill="none" stroke="#c0c0c0" points="11716,-62.4005 11182,-62.4005 11182,-7.7996 11716,-7.7996 11716,-62.4005"/>
<text text-anchor="middle" x="11449" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">Medium&#45;term goal is to hash any Lua object in a way that will resolve to a</text>
<text text-anchor="middle" x="11449" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">common value for any identical semantics.</text>
</g>
<!-- raw_152&#45;&gt;leaf_153 -->
<g id="edge153" class="edge">
<title>raw_152&#45;&gt;leaf_153</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11002.4364,-603.6025C10995.71,-521.0423 10972.5285,-180.9599 11040,-106.2001 11053.2233,-91.5484 11130.0118,-76.4178 11213.5475,-63.9007"/>
<polygon fill="#000000" stroke="#000000" points="11214.1193,-67.3543 11223.4983,-62.4264 11213.0933,-60.4299 11214.1193,-67.3543"/>
</g>
<!-- leaf_158 -->
<g id="node159" class="node">
<title>leaf_158</title>
<polygon fill="none" stroke="#c0c0c0" points="11109.5,-1504.1024 10918.5,-1504.1024 10918.5,-1468.1024 11109.5,-1468.1024 11109.5,-1504.1024"/>
<text text-anchor="middle" x="11014" y="-1482.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">** Historian:search(frag)</text>
</g>
<!-- header_155&#45;&gt;leaf_158 -->
<g id="edge158" class="edge">
<title>header_155&#45;&gt;leaf_158</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11009.2181,-1882.526C11010.0043,-1817.343 11012.698,-1594.0402 11013.6573,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="11017.1598,-1514.3162 11013.7808,-1504.2747 11010.1603,-1514.2317 11017.1598,-1514.3162"/>
</g>
<!-- raw_159 -->
<g id="node160" class="node">
<title>raw_159</title>
<ellipse fill="none" stroke="#000000" cx="11163" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="11163" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_156&#45;&gt;raw_159 -->
<g id="edge159" class="edge">
<title>prose_156&#45;&gt;raw_159</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11166.8256,-1882.526C11166.1965,-1817.343 11164.0416,-1594.0402 11163.2741,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="11166.7718,-1514.2404 11163.1754,-1504.2747 11159.7721,-1514.308 11166.7718,-1514.2404"/>
</g>
<!-- leaf_161 -->
<g id="node162" class="node">
<title>leaf_161</title>
<polygon fill="none" stroke="#c0c0c0" points="11763.5,-1798.9036 11208.5,-1798.9036 11208.5,-1173.3012 11763.5,-1173.3012 11763.5,-1798.9036"/>
<text text-anchor="middle" x="11486" y="-1783.803" font-family="Inconsolata" font-size="14.00" fill="#000000">local P, match = L.P, L.match</text>
<text text-anchor="middle" x="11486" y="-1752.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; second_best is broke and I don&#39;t know why</text>
<text text-anchor="middle" x="11486" y="-1737.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; also this fails on a single key search &gt;.&lt;</text>
<text text-anchor="middle" x="11486" y="-1721.6029" font-family="Inconsolata" font-size="14.00" fill="#000000">local function fuzz_patt(frag)</text>
<text text-anchor="middle" x="11486" y="-1706.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;frag = type(frag) == &quot;string&quot; and codepoints(frag) or frag</text>
<text text-anchor="middle" x="11486" y="-1690.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt = &#160;&#160;&#160;&#160;&#160;&#160;&#160;(P(1) &#45; P(frag[1]))^0</text>
<text text-anchor="middle" x="11486" y="-1675.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = 1 , #frag &#45; 1 do</text>
<text text-anchor="middle" x="11486" y="-1660.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local v = frag[i]</text>
<text text-anchor="middle" x="11486" y="-1644.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;patt = patt * (P(v) * (P(1) &#45; P(frag[i + 1]))^0)</text>
<text text-anchor="middle" x="11486" y="-1629.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11486" y="-1613.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;patt = patt * P(frag[#frag])</text>
<text text-anchor="middle" x="11486" y="-1598.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return patt</text>
<text text-anchor="middle" x="11486" y="-1583.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="11486" y="-1551.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.search(historian, frag)</text>
<text text-anchor="middle" x="11486" y="-1536.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local collection = {}</text>
<text text-anchor="middle" x="11486" y="-1520.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local best = true</text>
<text text-anchor="middle" x="11486" y="-1505.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt = fuzz_patt(frag)</text>
<text text-anchor="middle" x="11486" y="-1490.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = #historian, 1, &#45;1 do</text>
<text text-anchor="middle" x="11486" y="-1474.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local score = match(patt, tostring(historian[i]))</text>
<text text-anchor="middle" x="11486" y="-1459.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if score then</text>
<text text-anchor="middle" x="11486" y="-1443.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collection[#collection + 1] = tostring(historian[i])</text>
<text text-anchor="middle" x="11486" y="-1428.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11486" y="-1413.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11486" y="-1397.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if #collection == 0 then</text>
<text text-anchor="middle" x="11486" y="-1382.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; try the transpose</text>
<text text-anchor="middle" x="11486" y="-1366.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;best = false</text>
<text text-anchor="middle" x="11486" y="-1351.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local slip = sub(frag, 1, &#45;3) .. sub(frag, &#45;1, &#45;1) .. sub(frag, &#45;2, &#45;2)</text>
<text text-anchor="middle" x="11486" y="-1336.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local second = fuzz_patt(slip)</text>
<text text-anchor="middle" x="11486" y="-1320.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = #historian, 1, &#45;1 do</text>
<text text-anchor="middle" x="11486" y="-1305.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local score = match(second, tostring(historian[i]))</text>
<text text-anchor="middle" x="11486" y="-1289.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if score then</text>
<text text-anchor="middle" x="11486" y="-1274.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collection[#collection + 1] = tostring(historian[i])</text>
<text text-anchor="middle" x="11486" y="-1259.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11486" y="-1243.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11486" y="-1228.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11486" y="-1196.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return collection, best</text>
<text text-anchor="middle" x="11486" y="-1181.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_157&#45;&gt;leaf_161 -->
<g id="edge161" class="edge">
<title>codeblock_157&#45;&gt;leaf_161</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11398.0123,-1882.526C11401.6167,-1866.2867 11407.3993,-1840.2333 11414.3241,-1809.0339"/>
<polygon fill="#000000" stroke="#000000" points="11417.7587,-1809.7122 11416.5087,-1799.1913 11410.925,-1808.1954 11417.7587,-1809.7122"/>
</g>
<!-- leaf_160 -->
<g id="node161" class="node">
<title>leaf_160</title>
<polygon fill="none" stroke="#c0c0c0" points="11627,-639.701 11573,-639.701 11573,-603.701 11627,-603.701 11627,-639.701"/>
</g>
<!-- raw_159&#45;&gt;leaf_160 -->
<g id="edge160" class="edge">
<title>raw_159&#45;&gt;leaf_160</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11158.3222,-1467.9974C11145.63,-1414.2148 11116.756,-1254.1212 11199,-1173.2018 11257.0985,-1116.0391 11507.1972,-1195.6523 11564,-1137.2018 11696.7967,-1000.5531 11634.0226,-735.8143 11608.7824,-649.585"/>
<polygon fill="#000000" stroke="#000000" points="11612.0587,-648.3249 11605.837,-639.7493 11605.3529,-650.3331 11612.0587,-648.3249"/>
</g>
<!-- leaf_167 -->
<g id="node168" class="node">
<title>leaf_167</title>
<polygon fill="none" stroke="#c0c0c0" points="11930.5,-1504.1024 11781.5,-1504.1024 11781.5,-1468.1024 11930.5,-1468.1024 11930.5,-1504.1024"/>
<text text-anchor="middle" x="11856" y="-1482.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">** Historian:prev()</text>
</g>
<!-- header_162&#45;&gt;leaf_167 -->
<g id="edge167" class="edge">
<title>header_162&#45;&gt;leaf_167</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11865.5639,-1882.526C11863.9913,-1817.343 11858.604,-1594.0402 11856.6854,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="11860.1787,-1514.1873 11856.4384,-1504.2747 11853.1807,-1514.3562 11860.1787,-1514.1873"/>
</g>
<!-- raw_168 -->
<g id="node169" class="node">
<title>raw_168</title>
<ellipse fill="none" stroke="#000000" cx="11976" cy="-1486.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="11976" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_163&#45;&gt;raw_168 -->
<g id="edge168" class="edge">
<title>prose_163&#45;&gt;raw_168</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12032.6533,-1882.7809C12026.7899,-1862.6212 12017.4865,-1828.725 12012,-1799.003 11992.7836,-1694.902 11982.0435,-1569.308 11977.9491,-1514.2611"/>
<polygon fill="#000000" stroke="#000000" points="11981.435,-1513.9391 11977.2183,-1504.2196 11974.4535,-1514.4473 11981.435,-1513.9391"/>
</g>
<!-- leaf_170 -->
<g id="node171" class="node">
<title>leaf_170</title>
<polygon fill="none" stroke="#c0c0c0" points="12388.9016,-1580.0833 12021.0984,-1580.0833 12021.0984,-1392.1215 12388.9016,-1392.1215 12388.9016,-1580.0833"/>
<text text-anchor="middle" x="12205" y="-1564.6425" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.prev(historian)</text>
<text text-anchor="middle" x="12205" y="-1549.2425" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if historian.cursor == 0 then</text>
<text text-anchor="middle" x="12205" y="-1533.8425" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Linebuf()</text>
<text text-anchor="middle" x="12205" y="-1518.4424" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12205" y="-1503.0424" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local Δ = historian.cursor &gt; 1 and 1 or 0</text>
<text text-anchor="middle" x="12205" y="-1484.2824" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local linebuf = historian[historian.cursor &#45; Δ]</text>
<text text-anchor="middle" x="12205" y="-1465.5224" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local result = historian.results[linebuf]</text>
<text text-anchor="middle" x="12205" y="-1450.1224" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = historian.cursor &#45; Δ</text>
<text text-anchor="middle" x="12205" y="-1431.3624" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;linebuf.cursor = #linebuf.lines + 1</text>
<text text-anchor="middle" x="12205" y="-1415.9623" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return linebuf:clone(), result</text>
<text text-anchor="middle" x="12205" y="-1400.5623" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_164&#45;&gt;leaf_170 -->
<g id="edge170" class="edge">
<title>codeblock_164&#45;&gt;leaf_170</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12186.8286,-1882.526C12189.1177,-1832.587 12195.6611,-1689.8373 12200.2358,-1590.0367"/>
<polygon fill="#000000" stroke="#000000" points="12203.7383,-1590.0615 12200.6999,-1579.9117 12196.7456,-1589.7409 12203.7383,-1590.0615"/>
</g>
<!-- header_171 -->
<g id="node172" class="node">
<title>header_171</title>
<ellipse fill="none" stroke="#000000" cx="12489" cy="-1486.1024" rx="82.2061" ry="18"/>
<text text-anchor="middle" x="12489" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:next()</text>
</g>
<!-- section_165&#45;&gt;header_171 -->
<g id="edge171" class="edge">
<title>section_165&#45;&gt;header_171</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12614.0498,-1882.4528C12605.3629,-1862.2837 12591.3112,-1828.6454 12581,-1799.003 12544.9109,-1695.2547 12510.6864,-1569.0605 12496.2251,-1514.0182"/>
<polygon fill="#000000" stroke="#000000" points="12499.5966,-1513.0765 12493.6801,-1504.2876 12492.8244,-1514.8478 12499.5966,-1513.0765"/>
</g>
<!-- prose_172 -->
<g id="node173" class="node">
<title>prose_172</title>
<ellipse fill="none" stroke="#000000" cx="12622" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12622" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_165&#45;&gt;prose_172 -->
<g id="edge172" class="edge">
<title>section_165&#45;&gt;prose_172</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12622,-1882.526C12622,-1817.343 12622,-1594.0402 12622,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="12625.5001,-1514.2746 12622,-1504.2747 12618.5001,-1514.2747 12625.5001,-1514.2746"/>
</g>
<!-- prose_173 -->
<g id="node174" class="node">
<title>prose_173</title>
<ellipse fill="none" stroke="#000000" cx="12737" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12737" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_165&#45;&gt;prose_173 -->
<g id="edge173" class="edge">
<title>section_165&#45;&gt;prose_173</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12630.2535,-1882.5538C12639.2059,-1862.473 12653.4888,-1828.9117 12663,-1799.003 12695.7499,-1696.018 12721.2861,-1569.8521 12731.79,-1514.46"/>
<polygon fill="#000000" stroke="#000000" points="12735.2822,-1514.8273 12733.6881,-1504.3531 12728.4024,-1513.5353 12735.2822,-1514.8273"/>
</g>
<!-- codeblock_174 -->
<g id="node175" class="node">
<title>codeblock_174</title>
<ellipse fill="none" stroke="#000000" cx="12942" cy="-1486.1024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12942" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 310&#45;330</text>
</g>
<!-- section_165&#45;&gt;codeblock_174 -->
<g id="edge174" class="edge">
<title>section_165&#45;&gt;codeblock_174</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12656.6787,-1884.5943C12690.9635,-1867.3806 12743.2013,-1837.2564 12778,-1799.003 12859.3716,-1709.5529 12912.6813,-1572.2873 12932.8878,-1513.9155"/>
<polygon fill="#000000" stroke="#000000" points="12936.2579,-1514.8764 12936.1684,-1504.2819 12929.6316,-1512.6198 12936.2579,-1514.8764"/>
</g>
<!-- header_187 -->
<g id="node188" class="node">
<title>header_187</title>
<ellipse fill="none" stroke="#000000" cx="13330" cy="-1486.1024" rx="95.2951" ry="18"/>
<text text-anchor="middle" x="13330" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:append()</text>
</g>
<!-- section_166&#45;&gt;header_187 -->
<g id="edge187" class="edge">
<title>section_166&#45;&gt;header_187</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13528.6482,-1883.8795C13500.8312,-1866.1098 13459.0457,-1835.5621 13434,-1799.003 13370.6279,-1706.4992 13343.3472,-1572.3677 13334.0284,-1514.466"/>
<polygon fill="#000000" stroke="#000000" points="13337.4358,-1513.5983 13332.4456,-1504.2523 13330.5184,-1514.6703 13337.4358,-1513.5983"/>
</g>
<!-- prose_188 -->
<g id="node189" class="node">
<title>prose_188</title>
<ellipse fill="none" stroke="#000000" cx="13475" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="13475" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_166&#45;&gt;prose_188 -->
<g id="edge188" class="edge">
<title>section_166&#45;&gt;prose_188</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13548.1642,-1882.7227C13538.702,-1862.7899 13523.975,-1829.3574 13516,-1799.003 13489.0483,-1696.4195 13479.4127,-1570.0478 13476.3166,-1514.5316"/>
<polygon fill="#000000" stroke="#000000" points="13479.8042,-1514.2025 13475.7814,-1504.4011 13472.8139,-1514.5719 13479.8042,-1514.2025"/>
</g>
<!-- prose_189 -->
<g id="node190" class="node">
<title>prose_189</title>
<ellipse fill="none" stroke="#000000" cx="13557" cy="-1486.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="13557" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_166&#45;&gt;prose_189 -->
<g id="edge189" class="edge">
<title>section_166&#45;&gt;prose_189</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13557,-1882.526C13557,-1817.343 13557,-1594.0402 13557,-1514.511"/>
<polygon fill="#000000" stroke="#000000" points="13560.5001,-1514.2746 13557,-1504.2747 13553.5001,-1514.2747 13560.5001,-1514.2746"/>
</g>
<!-- codeblock_190 -->
<g id="node191" class="node">
<title>codeblock_190</title>
<ellipse fill="none" stroke="#000000" cx="13754" cy="-1486.1024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="13754" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 339&#45;353</text>
</g>
<!-- section_166&#45;&gt;codeblock_190 -->
<g id="edge190" class="edge">
<title>section_166&#45;&gt;codeblock_190</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13565.5915,-1882.526C13596.6978,-1817.0764 13703.5697,-1592.2109 13740.9586,-1513.5424"/>
<polygon fill="#000000" stroke="#000000" points="13744.2318,-1514.8089 13745.3633,-1504.2747 13737.9095,-1511.8041 13744.2318,-1514.8089"/>
</g>
<!-- codeblock_191 -->
<g id="node192" class="node">
<title>codeblock_191</title>
<ellipse fill="none" stroke="#000000" cx="14070" cy="-1486.1024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="14070" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 355&#45;362</text>
</g>
<!-- section_166&#45;&gt;codeblock_191 -->
<g id="edge191" class="edge">
<title>section_166&#45;&gt;codeblock_191</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13619.7984,-1890.5089C13683.0413,-1877.8282 13780.8866,-1851.0963 13850,-1799.003 13955.7411,-1719.3019 14030.23,-1573.9257 14057.9994,-1513.5376"/>
<polygon fill="#000000" stroke="#000000" points="14061.2602,-1514.8214 14062.2001,-1504.2683 14054.8844,-1511.9319 14061.2602,-1514.8214"/>
</g>
<!-- codeblock_192 -->
<g id="node193" class="node">
<title>codeblock_192</title>
<ellipse fill="none" stroke="#000000" cx="14326" cy="-1486.1024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="14326" y="-1481.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 364&#45;366</text>
</g>
<!-- section_166&#45;&gt;codeblock_192 -->
<g id="edge192" class="edge">
<title>section_166&#45;&gt;codeblock_192</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13630.7129,-1896.5054C13773.643,-1887.262 14081.8202,-1860.6006 14166,-1799.003 14264.4446,-1726.9672 14306.712,-1576.5974 14320.504,-1514.1878"/>
<polygon fill="#000000" stroke="#000000" points="14323.956,-1514.7816 14322.6171,-1504.2717 14317.1097,-1513.3226 14323.956,-1514.7816"/>
</g>
<!-- leaf_169 -->
<g id="node170" class="node">
<title>leaf_169</title>
<polygon fill="none" stroke="#c0c0c0" points="12003,-639.701 11949,-639.701 11949,-603.701 12003,-603.701 12003,-639.701"/>
</g>
<!-- raw_168&#45;&gt;leaf_169 -->
<g id="edge169" class="edge">
<title>raw_168&#45;&gt;leaf_169</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11976,-1468.0481C11976,-1358.7484 11976,-785.744 11976,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="11979.5001,-650.0203 11976,-640.0203 11972.5001,-650.0203 11979.5001,-650.0203"/>
</g>
<!-- leaf_175 -->
<g id="node176" class="node">
<title>leaf_175</title>
<polygon fill="none" stroke="#c0c0c0" points="12373,-639.701 12217,-639.701 12217,-603.701 12373,-603.701 12373,-639.701"/>
<text text-anchor="middle" x="12295" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:next()</text>
</g>
<!-- header_171&#45;&gt;leaf_175 -->
<g id="edge175" class="edge">
<title>header_171&#45;&gt;leaf_175</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12484.6097,-1467.8367C12472.7288,-1419.2262 12438.1272,-1282.9188 12398,-1173.2018 12391.9859,-1156.758 12387.0522,-1153.9662 12382,-1137.2018 12327.4724,-956.2662 12304.0924,-728.6547 12297.2631,-649.9748"/>
<polygon fill="#000000" stroke="#000000" points="12300.7398,-649.5502 12296.4078,-639.8815 12293.7648,-650.1414 12300.7398,-649.5502"/>
</g>
<!-- raw_176 -->
<g id="node177" class="node">
<title>raw_176</title>
<ellipse fill="none" stroke="#000000" cx="12418" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="12418" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_172&#45;&gt;raw_176 -->
<g id="edge176" class="edge">
<title>prose_172&#45;&gt;raw_176</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12625.7115,-1467.8581C12635.318,-1415.0458 12655.2854,-1260.2676 12580,-1173.2018 12541.9059,-1129.1468 12490.6717,-1182.4477 12454,-1137.2018 12393.0118,-1061.954 12409.2951,-746.8962 12415.8871,-650.1077"/>
<polygon fill="#000000" stroke="#000000" points="12419.3936,-650.1361 12416.6011,-639.916 12412.4107,-649.6469 12419.3936,-650.1361"/>
</g>
<!-- prespace_177 -->
<g id="node178" class="node">
<title>prespace_177</title>
<ellipse fill="none" stroke="#000000" cx="12509" cy="-621.701" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="12509" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_172&#45;&gt;prespace_177 -->
<g id="edge177" class="edge">
<title>prose_172&#45;&gt;prespace_177</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12621.2104,-1467.7853C12618.7543,-1419.0488 12609.5466,-1282.4603 12580,-1173.2018 12575.4751,-1156.4695 12569.3135,-1153.9898 12565,-1137.2018 12518.3557,-955.6638 12510.5414,-728.4298 12509.2495,-649.9118"/>
<polygon fill="#000000" stroke="#000000" points="12512.7482,-649.7893 12509.1071,-639.8398 12505.7489,-649.8883 12512.7482,-649.7893"/>
</g>
<!-- literal_178 -->
<g id="node179" class="node">
<title>literal_178</title>
<ellipse fill="none" stroke="#000000" cx="12605" cy="-621.701" rx="31.481" ry="18"/>
<text text-anchor="middle" x="12605" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_172&#45;&gt;literal_178 -->
<g id="edge178" class="edge">
<title>prose_172&#45;&gt;literal_178</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12621.6449,-1468.0481C12619.4954,-1358.7484 12608.2262,-785.744 12605.564,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="12609.0563,-649.9495 12605.3603,-640.0203 12602.0577,-650.0872 12609.0563,-649.9495"/>
</g>
<!-- raw_179 -->
<g id="node180" class="node">
<title>raw_179</title>
<ellipse fill="none" stroke="#000000" cx="12681" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="12681" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_172&#45;&gt;raw_179 -->
<g id="edge179" class="edge">
<title>prose_172&#45;&gt;raw_179</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12623.2323,-1468.0481C12630.6926,-1358.7484 12669.8032,-785.744 12679.0426,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="12682.5604,-650.2355 12679.7496,-640.0203 12675.5767,-649.7587 12682.5604,-650.2355"/>
</g>
<!-- raw_184 -->
<g id="node185" class="node">
<title>raw_184</title>
<ellipse fill="none" stroke="#000000" cx="12753" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="12753" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_173&#45;&gt;raw_184 -->
<g id="edge184" class="edge">
<title>prose_173&#45;&gt;raw_184</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12737.3342,-1468.0481C12739.3573,-1358.7484 12749.9636,-785.744 12752.4692,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="12755.9751,-650.0834 12752.6609,-640.0203 12748.9763,-649.9538 12755.9751,-650.0834"/>
</g>
<!-- leaf_186 -->
<g id="node187" class="node">
<title>leaf_186</title>
<polygon fill="none" stroke="#c0c0c0" points="13186.4016,-778.7414 12797.5984,-778.7414 12797.5984,-464.6605 13186.4016,-464.6605 13186.4016,-778.7414"/>
<text text-anchor="middle" x="12992" y="-763.5212" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.next(historian)</text>
<text text-anchor="middle" x="12992" y="-748.1212" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local Δ = historian.cursor &lt; #historian and 1 or 0</text>
<text text-anchor="middle" x="12992" y="-729.3612" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if historian.cursor == 0 then</text>
<text text-anchor="middle" x="12992" y="-713.9611" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Linebuf()</text>
<text text-anchor="middle" x="12992" y="-698.5611" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12992" y="-683.1611" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local linebuf= historian[historian.cursor + Δ]</text>
<text text-anchor="middle" x="12992" y="-664.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local result = historian.results[linebuf]</text>
<text text-anchor="middle" x="12992" y="-649.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not linebuf then</text>
<text text-anchor="middle" x="12992" y="-633.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Linebuf()</text>
<text text-anchor="middle" x="12992" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12992" y="-602.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = historian.cursor + Δ</text>
<text text-anchor="middle" x="12992" y="-584.0409" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;linebuf.cursor = #linebuf.lines + 1</text>
<text text-anchor="middle" x="12992" y="-568.6409" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not (Δ &gt; 0) and #linebuf.lines &gt; 0 then</text>
<text text-anchor="middle" x="12992" y="-549.8809" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.cursor = #historian + 1</text>
<text text-anchor="middle" x="12992" y="-534.4809" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return linebuf:clone(), nil, true</text>
<text text-anchor="middle" x="12992" y="-519.0808" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="12992" y="-503.6808" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return linebuf:clone(), result, false</text>
<text text-anchor="middle" x="12992" y="-488.2808" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12992" y="-472.8807" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_174&#45;&gt;leaf_186 -->
<g id="edge186" class="edge">
<title>codeblock_174&#45;&gt;leaf_186</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12943.0443,-1468.0481C12948.0096,-1382.2091 12969.5183,-1010.3655 12982.3158,-789.1215"/>
<polygon fill="#000000" stroke="#000000" points="12985.8162,-789.2141 12982.8996,-779.0287 12978.8279,-788.8098 12985.8162,-789.2141"/>
</g>
<!-- leaf_180 -->
<g id="node181" class="node">
<title>leaf_180</title>
<polygon fill="none" stroke="#c0c0c0" points="12430,-63.0015 11952,-63.0015 11952,-7.1986 12430,-7.1986 12430,-63.0015"/>
<text text-anchor="middle" x="12191" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Returns the next linebuf in history, and a second flag to tell the</text>
</g>
<!-- raw_176&#45;&gt;leaf_180 -->
<g id="edge180" class="edge">
<title>raw_176&#45;&gt;leaf_180</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12419.256,-603.5973C12424.5667,-521.7445 12442.2411,-186.7598 12382,-106.2001 12371.3232,-91.9221 12339.4543,-77.8674 12304.7325,-66.0727"/>
<polygon fill="#000000" stroke="#000000" points="12305.4722,-62.6307 12294.8788,-62.8076 12303.2704,-69.2754 12305.4722,-62.6307"/>
</g>
<!-- leaf_181 -->
<g id="node182" class="node">
<title>leaf_181</title>
<polygon fill="none" stroke="#c0c0c0" points="12502,-53.1 12448,-53.1 12448,-17.1 12502,-17.1 12502,-53.1"/>
</g>
<!-- prespace_177&#45;&gt;leaf_181 -->
<g id="edge181" class="edge">
<title>prespace_177&#45;&gt;leaf_181</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12507.9452,-603.5019C12503.0624,-519.2592 12482.6389,-166.8931 12476.6545,-63.6454"/>
<polygon fill="#000000" stroke="#000000" points="12480.1322,-63.1571 12476.0593,-53.3764 12473.1439,-63.5622 12480.1322,-63.1571"/>
</g>
<!-- leaf_182 -->
<g id="node183" class="node">
<title>leaf_182</title>
<polygon fill="none" stroke="#c0c0c0" points="12620,-53.1 12520,-53.1 12520,-17.1 12620,-17.1 12620,-53.1"/>
<text text-anchor="middle" x="12570" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">modeselektor</text>
</g>
<!-- literal_178&#45;&gt;leaf_182 -->
<g id="edge182" class="edge">
<title>literal_178&#45;&gt;leaf_182</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12603.9141,-603.5019C12598.8877,-519.2592 12577.8635,-166.8931 12571.7032,-63.6454"/>
<polygon fill="#000000" stroke="#000000" points="12575.18,-63.1502 12571.0905,-53.3764 12568.1924,-63.5672 12575.18,-63.1502"/>
</g>
<!-- leaf_183 -->
<g id="node184" class="node">
<title>leaf_183</title>
<polygon fill="none" stroke="#c0c0c0" points="12878,-53.1 12638,-53.1 12638,-17.1 12878,-17.1 12878,-53.1"/>
<text text-anchor="middle" x="12758" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> it might be time for a new one.</text>
</g>
<!-- raw_179&#45;&gt;leaf_183 -->
<g id="edge183" class="edge">
<title>raw_179&#45;&gt;leaf_183</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12679.3682,-603.362C12673.9356,-535.5504 12659.8761,-293.2498 12717,-106.2001 12721.8017,-90.4771 12730.6031,-74.4848 12738.8236,-61.6595"/>
<polygon fill="#000000" stroke="#000000" points="12741.7409,-63.5932 12744.3657,-53.3286 12735.9127,-59.716 12741.7409,-63.5932"/>
</g>
<!-- leaf_185 -->
<g id="node186" class="node">
<title>leaf_185</title>
<polygon fill="none" stroke="#c0c0c0" points="13283.5,-55.0021 12896.5,-55.0021 12896.5,-15.198 13283.5,-15.198 13283.5,-55.0021"/>
<text text-anchor="middle" x="13090" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;d like to stop buffering blank lines at some point.</text>
</g>
<!-- raw_184&#45;&gt;leaf_185 -->
<g id="edge185" class="edge">
<title>raw_184&#45;&gt;leaf_185</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12751.5393,-603.6927C12745.2678,-521.5308 12723.7953,-182.945 12789,-106.2001 12801.1902,-91.8524 12890.3678,-71.8852 12968.5178,-56.7623"/>
<polygon fill="#000000" stroke="#000000" points="12969.3175,-60.1727 12978.4778,-54.8492 12967.9971,-53.2984 12969.3175,-60.1727"/>
</g>
<!-- leaf_193 -->
<g id="node194" class="node">
<title>leaf_193</title>
<polygon fill="none" stroke="#c0c0c0" points="13415,-639.701 13245,-639.701 13245,-603.701 13415,-603.701 13415,-639.701"/>
<text text-anchor="middle" x="13330" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:append()</text>
</g>
<!-- header_187&#45;&gt;leaf_193 -->
<g id="edge193" class="edge">
<title>header_187&#45;&gt;leaf_193</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13330,-1468.0481C13330,-1358.7484 13330,-785.744 13330,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="13333.5001,-650.0203 13330,-640.0203 13326.5001,-650.0203 13333.5001,-650.0203"/>
</g>
<!-- raw_194 -->
<g id="node195" class="node">
<title>raw_194</title>
<ellipse fill="none" stroke="#000000" cx="13467" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="13467" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_188&#45;&gt;raw_194 -->
<g id="edge194" class="edge">
<title>prose_188&#45;&gt;raw_194</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13474.8329,-1468.0481C13473.8213,-1358.7484 13468.5182,-785.744 13467.2654,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="13470.762,-649.9875 13467.1695,-640.0203 13463.7623,-650.0523 13470.762,-649.9875"/>
</g>
<!-- raw_196 -->
<g id="node197" class="node">
<title>raw_196</title>
<ellipse fill="none" stroke="#000000" cx="13539" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="13539" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_189&#45;&gt;raw_196 -->
<g id="edge196" class="edge">
<title>prose_189&#45;&gt;raw_196</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13556.624,-1468.0481C13554.348,-1358.7484 13542.416,-785.744 13539.5972,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="13543.089,-649.9452 13539.3815,-640.0203 13536.0905,-650.091 13543.089,-649.9452"/>
</g>
<!-- leaf_198 -->
<g id="node199" class="node">
<title>leaf_198</title>
<polygon fill="none" stroke="#c0c0c0" points="14041.5,-725.9015 13584.5,-725.9015 13584.5,-517.5004 14041.5,-517.5004 14041.5,-725.9015"/>
<text text-anchor="middle" x="13813" y="-710.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.append(historian, linebuf, results, success)</text>
<text text-anchor="middle" x="13813" y="-695.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if tostring(historian[#historian]) == tostring(linebuf) then</text>
<text text-anchor="middle" x="13813" y="-679.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; don&#39;t bother</text>
<text text-anchor="middle" x="13813" y="-664.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="13813" y="-649.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13813" y="-633.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian[#historian + 1] = linebuf</text>
<text text-anchor="middle" x="13813" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if success then</text>
<text text-anchor="middle" x="13813" y="-602.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian:persist(linebuf, results)</text>
<text text-anchor="middle" x="13813" y="-587.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="13813" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian:persist(linebuf)</text>
<text text-anchor="middle" x="13813" y="-556.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13813" y="-541.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return true</text>
<text text-anchor="middle" x="13813" y="-525.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_190&#45;&gt;leaf_198 -->
<g id="edge198" class="edge">
<title>codeblock_190&#45;&gt;leaf_198</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13755.2323,-1468.0481C13761.5902,-1374.8996 13790.9356,-944.9639 13805.1884,-736.1478"/>
<polygon fill="#000000" stroke="#000000" points="13808.6872,-736.2839 13805.8763,-726.0688 13801.7034,-735.8072 13808.6872,-736.2839"/>
</g>
<!-- leaf_199 -->
<g id="node200" class="node">
<title>leaf_199</title>
<polygon fill="none" stroke="#c0c0c0" points="14328,-672.1019 14060,-672.1019 14060,-571.3 14328,-571.3 14328,-672.1019"/>
<text text-anchor="middle" x="14194" y="-656.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new()</text>
<text text-anchor="middle" x="14194" y="-641.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local historian = meta(Historian)</text>
<text text-anchor="middle" x="14194" y="-625.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian:load()</text>
<text text-anchor="middle" x="14194" y="-610.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return historian</text>
<text text-anchor="middle" x="14194" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="14194" y="-579.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.idEst = new</text>
</g>
<!-- codeblock_191&#45;&gt;leaf_199 -->
<g id="edge199" class="edge">
<title>codeblock_191&#45;&gt;leaf_199</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14072.5899,-1468.0481C14087.2442,-1365.8931 14160.0056,-858.6752 14185.3094,-682.2831"/>
<polygon fill="#000000" stroke="#000000" points="14188.8087,-682.5371 14186.7642,-672.1414 14181.8796,-681.543 14188.8087,-682.5371"/>
</g>
<!-- leaf_200 -->
<g id="node201" class="node">
<title>leaf_200</title>
<polygon fill="none" stroke="#c0c0c0" points="14432,-639.701 14346,-639.701 14346,-603.701 14432,-603.701 14432,-639.701"/>
<text text-anchor="middle" x="14389" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_192&#45;&gt;leaf_200 -->
<g id="edge200" class="edge">
<title>codeblock_192&#45;&gt;leaf_200</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14327.3158,-1468.0481C14335.2819,-1358.7484 14377.0441,-785.744 14386.9099,-650.379"/>
<polygon fill="#000000" stroke="#000000" points="14390.4286,-650.2483 14387.6648,-640.0203 14383.4471,-649.7394 14390.4286,-650.2483"/>
</g>
<!-- leaf_195 -->
<g id="node196" class="node">
<title>leaf_195</title>
<polygon fill="none" stroke="#c0c0c0" points="13632.5,-63.0015 13301.5,-63.0015 13301.5,-7.1986 13632.5,-7.1986 13632.5,-63.0015"/>
<text text-anchor="middle" x="13467" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Appends a linebuf to history and persists it.</text>
</g>
<!-- raw_194&#45;&gt;leaf_195 -->
<g id="edge195" class="edge">
<title>raw_194&#45;&gt;leaf_195</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13467,-603.5019C13467,-521.7282 13467,-187.3174 13467,-73.3524"/>
<polygon fill="#000000" stroke="#000000" points="13470.5001,-73.0276 13467,-63.0276 13463.5001,-73.0276 13470.5001,-73.0276"/>
</g>
<!-- leaf_197 -->
<g id="node198" class="node">
<title>leaf_197</title>
<polygon fill="none" stroke="#c0c0c0" points="13849,-55.0021 13651,-55.0021 13651,-15.198 13849,-15.198 13849,-55.0021"/>
<text text-anchor="middle" x="13750" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Doesn&#39;t adjust the cursor.</text>
</g>
<!-- raw_196&#45;&gt;leaf_197 -->
<g id="edge197" class="edge">
<title>raw_196&#45;&gt;leaf_197</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13534.1863,-603.9507C13516.0888,-533.062 13458.8866,-266.3586 13575,-106.2001 13581.9556,-96.606 13636.8454,-75.1797 13683.3231,-58.3411"/>
<polygon fill="#000000" stroke="#000000" points="13684.5682,-61.6128 13692.7909,-54.9316 13682.1965,-55.0268 13684.5682,-61.6128"/>
</g>
</g>
</svg>
