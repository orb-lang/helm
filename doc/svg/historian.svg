<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="14441pt" height="2376pt"
 viewBox="0.00 0.00 14441.00 2375.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2371.6036)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2371.6036 14437,-2371.6036 14437,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1806" cy="-2349.6036" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1806" y="-2345.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 382</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1806" cy="-2277.6036" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1806" y="-2273.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;296</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1806,-2331.4349C1806,-2323.7345 1806,-2314.5779 1806,-2306.0202"/>
<polygon fill="#000000" stroke="#000000" points="1809.5001,-2306.0168 1806,-2296.0168 1802.5001,-2306.0169 1809.5001,-2306.0168"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1383" cy="-2205.6036" rx="57.0821" ry="18"/>
<text text-anchor="middle" x="1383" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Historian</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1745.7149,-2270.2463C1675.1794,-2261.2079 1555.0436,-2244.4741 1453,-2223.6036 1447.6215,-2222.5035 1442.037,-2221.2538 1436.4738,-2219.9376"/>
<polygon fill="#000000" stroke="#000000" points="1437.0769,-2216.4822 1426.5325,-2217.5147 1435.4193,-2223.2831 1437.0769,-2216.4822"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1494" cy="-2205.6036" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1494" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1747.191,-2269.4471C1691.8997,-2260.9365 1607.2172,-2245.7229 1536,-2223.6036 1533.5472,-2222.8418 1531.0431,-2221.9848 1528.5399,-2221.0688"/>
<polygon fill="#000000" stroke="#000000" points="1529.5872,-2217.7199 1518.9998,-2217.3207 1527.0274,-2224.2351 1529.5872,-2217.7199"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1577" cy="-2205.6036" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1577" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1757.4359,-2265.3488C1719.3795,-2255.3224 1665.3029,-2240.1394 1619,-2223.6036 1616.5813,-2222.7398 1614.1026,-2221.8066 1611.6178,-2220.8354"/>
<polygon fill="#000000" stroke="#000000" points="1612.6994,-2217.4968 1602.1178,-2216.9673 1610.0596,-2223.98 1612.6994,-2217.4968"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1660" cy="-2205.6036" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1660" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1773.9597,-2261.8029C1750.0983,-2250.0356 1717.6044,-2234.0112 1693.4189,-2222.0841"/>
<polygon fill="#000000" stroke="#000000" points="1694.7832,-2218.8545 1684.2664,-2217.5706 1691.6871,-2225.1326 1694.7832,-2218.8545"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1742" cy="-2205.6036" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1742" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1790.1798,-2259.8058C1782.1184,-2250.7367 1772.1979,-2239.5762 1763.4584,-2229.7442"/>
<polygon fill="#000000" stroke="#000000" points="1766.0204,-2227.3582 1756.7607,-2222.2094 1760.7885,-2232.0088 1766.0204,-2227.3582"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1870" cy="-2205.6036" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1870" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 16&#45;25</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1821.8202,-2259.8058C1829.5126,-2251.1518 1838.8978,-2240.5935 1847.3344,-2231.1024"/>
<polygon fill="#000000" stroke="#000000" points="1850.1122,-2233.2455 1854.14,-2223.4461 1844.8803,-2228.5949 1850.1122,-2233.2455"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="2087" cy="-2205.6036" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2087" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 27&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1853.9863,-2265.3081C1901.2571,-2253.196 1973.679,-2234.6395 2025.2255,-2221.4319"/>
<polygon fill="#000000" stroke="#000000" points="2026.1011,-2224.8207 2034.9194,-2218.948 2024.3636,-2218.0397 2026.1011,-2224.8207"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="5348" cy="-2205.6036" rx="70.655" ry="18"/>
<text text-anchor="middle" x="5348" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 32&#45;200</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1871.6531,-2276.269C2307.9483,-2267.4002 4785.7308,-2217.0331 5267.0109,-2207.2499"/>
<polygon fill="#000000" stroke="#000000" points="5267.4095,-2210.7426 5277.3363,-2207.04 5267.2672,-2203.744 5267.4095,-2210.7426"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="11087" cy="-2205.6036" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="11087" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 251&#45;296</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1871.8099,-2277.093C2651.6775,-2271.043 10116.2234,-2213.1346 11001.3647,-2206.2679"/>
<polygon fill="#000000" stroke="#000000" points="11001.5013,-2209.767 11011.4738,-2206.1895 11001.4469,-2202.7673 11001.5013,-2209.767"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="12119" cy="-2205.6036" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="12119" y="-2201.4036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 297&#45;348</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1872.0358,-2277.5578C2487.4224,-2277.0622 7283.3761,-2271.7176 11171,-2223.6036 11489.2174,-2219.6652 11867.4571,-2211.4098 12033.5826,-2207.6037"/>
<polygon fill="#000000" stroke="#000000" points="12033.8188,-2211.0993 12043.7358,-2207.3705 12033.658,-2204.1011 12033.8188,-2211.0993"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="1428.5,-2104.0034 1335.5,-2104.0034 1335.5,-2068.0034 1428.5,-2068.0034 1428.5,-2104.0034"/>
<text text-anchor="middle" x="1382" y="-2082.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">* Historian</text>
</g>
<!-- header_2&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>header_2&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1382.8481,-2187.4389C1382.6859,-2168.0328 1382.4265,-2137.0135 1382.2373,-2114.3814"/>
<polygon fill="#000000" stroke="#000000" points="1385.7369,-2114.3094 1382.1533,-2104.3391 1378.7371,-2114.368 1385.7369,-2114.3094"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="1474" cy="-2086.0034" rx="27" ry="18"/>
<text text-anchor="middle" x="1474" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_3&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.9624,-2187.4389C1487.6984,-2167.92 1482.4697,-2136.6525 1478.6796,-2113.9875"/>
<polygon fill="#000000" stroke="#000000" points="1482.1021,-2113.2329 1477.0006,-2103.9472 1475.198,-2114.3875 1482.1021,-2113.2329"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="1546" cy="-2086.0034" rx="27" ry="18"/>
<text text-anchor="middle" x="1546" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1572.359,-2187.6982C1567.291,-2168.1457 1559.1105,-2136.5848 1553.2061,-2113.805"/>
<polygon fill="#000000" stroke="#000000" points="1556.5699,-2112.8331 1550.6727,-2104.0312 1549.7938,-2114.5895 1556.5699,-2112.8331"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="1618" cy="-2086.0034" rx="27" ry="18"/>
<text text-anchor="middle" x="1618" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_5&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1653.7122,-2187.6982C1646.7751,-2167.9441 1635.5337,-2135.9327 1627.5166,-2113.1032"/>
<polygon fill="#000000" stroke="#000000" points="1630.8094,-2111.9162 1624.1937,-2103.6408 1624.2048,-2114.2356 1630.8094,-2111.9162"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1690" cy="-2086.0034" rx="27" ry="18"/>
<text text-anchor="middle" x="1690" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_6&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1734.3272,-2187.9561C1725.6753,-2168.0566 1711.5143,-2135.4863 1701.5301,-2112.5228"/>
<polygon fill="#000000" stroke="#000000" points="1704.7323,-2111.1095 1697.5352,-2103.3344 1698.3128,-2113.9007 1704.7323,-2111.1095"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2017,-2151.7038 1735,-2151.7038 1735,-2020.303 2017,-2020.303 2017,-2151.7038"/>
<text text-anchor="middle" x="1876" y="-2136.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">local Txtbuf = require &quot;txtbuf&quot;</text>
<text text-anchor="middle" x="1876" y="-2121.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">local sql &#160;&#160;&#160;&#160;= require &quot;sqlayer&quot;</text>
<text text-anchor="middle" x="1876" y="-2105.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">local color &#160;&#160;= require &quot;color&quot;</text>
<text text-anchor="middle" x="1876" y="-2090.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">local L &#160;&#160;&#160;&#160;&#160;&#160;= require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1876" y="-2074.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">local format &#160;= assert (string.format)</text>
<text text-anchor="middle" x="1876" y="-2059.4034" font-family="Inconsolata" font-size="14.00" fill="#000000">local sub &#160;&#160;&#160;&#160;= assert (string.sub)</text>
<text text-anchor="middle" x="1876" y="-2044.0034" font-family="Inconsolata" font-size="14.00" fill="#000000">local reverse = assert (table.reverse)</text>
<text text-anchor="middle" x="1876" y="-2028.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">assert(meta)</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_7&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1870.9113,-2187.4389C1871.2762,-2180.1639 1871.7231,-2171.2568 1872.1989,-2161.7714"/>
<polygon fill="#000000" stroke="#000000" points="1875.6976,-2161.8842 1872.7031,-2151.7214 1868.7064,-2161.5334 1875.6976,-2161.8842"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2226.5,-2104.0034 2035.5,-2104.0034 2035.5,-2068.0034 2226.5,-2068.0034 2226.5,-2104.0034"/>
<text text-anchor="middle" x="2131" y="-2082.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Historian = meta {}</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_8&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2093.6827,-2187.4389C2100.8866,-2167.8572 2112.4407,-2136.4512 2120.7853,-2113.769"/>
<polygon fill="#000000" stroke="#000000" points="2124.0865,-2114.9326 2124.2545,-2104.3391 2117.5169,-2112.5156 2124.0865,-2114.9326"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="2313" cy="-2086.0034" rx="68.6997" ry="18"/>
<text text-anchor="middle" x="2313" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Persistence</text>
</g>
<!-- section_9&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_9&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5277.4595,-2204.9646C4835.1791,-2200.8795 2460.7483,-2177.7584 2391,-2151.6036 2368.9909,-2143.3504 2348.82,-2125.998 2334.5062,-2111.2123"/>
<polygon fill="#000000" stroke="#000000" points="2336.9543,-2108.7056 2327.5761,-2103.7761 2331.8334,-2113.478 2336.9543,-2108.7056"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2432" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2432" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_9&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5277.1794,-2204.9516C4885.6401,-2201.2387 2994.2571,-2181.8538 2736,-2151.6036 2639.3758,-2140.2857 2528.1701,-2112.4025 2470.7747,-2096.8791"/>
<polygon fill="#000000" stroke="#000000" points="2471.6018,-2093.4769 2461.0332,-2094.2229 2469.7602,-2100.2303 2471.6018,-2093.4769"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="2777" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2777" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5278.2495,-2202.6167C5091.7891,-2194.6098 4566.2427,-2171.8958 4129,-2151.6036 3613.3183,-2127.671 2987.1079,-2096.507 2819.7866,-2088.1452"/>
<polygon fill="#000000" stroke="#000000" points="2819.5974,-2084.6315 2809.4351,-2087.6277 2819.2478,-2091.6228 2819.5974,-2084.6315"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="4170" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4170" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_9&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5282.1414,-2198.9171C5066.9241,-2177.0665 4388.1126,-2108.148 4212.0469,-2090.2724"/>
<polygon fill="#000000" stroke="#000000" points="4212.1968,-2086.7697 4201.8943,-2089.2416 4211.4896,-2093.7339 4212.1968,-2086.7697"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="5159" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5159" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_9&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5321.3218,-2188.7214C5286.5204,-2166.6989 5225.7819,-2128.2633 5189.2874,-2105.1694"/>
<polygon fill="#000000" stroke="#000000" points="5190.8838,-2102.0378 5180.562,-2099.648 5187.1407,-2107.9529 5190.8838,-2102.0378"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="5770" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5770" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_9&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5395.5885,-2192.1164C5479.8588,-2168.2331 5653.7326,-2118.9551 5731.2404,-2096.9884"/>
<polygon fill="#000000" stroke="#000000" points="5732.4139,-2100.2937 5741.0806,-2094.1996 5730.5051,-2093.559 5732.4139,-2100.2937"/>
</g>
<!-- prose_29 -->
<g id="node30" class="node">
<title>prose_29</title>
<ellipse fill="none" stroke="#000000" cx="6240" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6240" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_29 -->
<g id="edge29" class="edge">
<title>section_9&#45;&gt;prose_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5413.2666,-2198.7327C5502.9949,-2189.1176 5669.4432,-2170.6753 5811,-2151.6036 5953.6318,-2132.3869 6122.2573,-2105.3248 6198.676,-2092.8239"/>
<polygon fill="#000000" stroke="#000000" points="6199.5325,-2096.2303 6208.8347,-2091.1589 6198.4003,-2089.3224 6199.5325,-2096.2303"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="7397" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7397" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_9&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5417.0583,-2201.6279C5571.7497,-2192.7179 5957.86,-2170.4522 6281,-2151.6036 6699.6359,-2127.1847 7206.5832,-2097.2554 7354.5613,-2088.5119"/>
<polygon fill="#000000" stroke="#000000" points="7354.8132,-2092.0032 7364.5892,-2087.9193 7354.4002,-2085.0154 7354.8132,-2092.0032"/>
</g>
<!-- section_31 -->
<g id="node32" class="node">
<title>section_31</title>
<ellipse fill="none" stroke="#000000" cx="8001" cy="-2086.0034" rx="70.655" ry="18"/>
<text text-anchor="middle" x="8001" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 59&#45;142</text>
</g>
<!-- section_9&#45;&gt;section_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;section_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5418.5311,-2204.6372C5735.7448,-2200.1593 7032.3841,-2180.4156 7438,-2151.6036 7615.3421,-2139.0065 7822.7864,-2111.5159 7929.5127,-2096.4284"/>
<polygon fill="#000000" stroke="#000000" points="7930.1132,-2099.8783 7939.5222,-2095.0079 7929.1296,-2092.9477 7930.1132,-2099.8783"/>
</g>
<!-- section_32 -->
<g id="node33" class="node">
<title>section_32</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-2086.0034" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8865" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 143&#45;200</text>
</g>
<!-- section_9&#45;&gt;section_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;section_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5418.618,-2204.8191C5792.0883,-2200.5777 7540.2644,-2179.5398 8081,-2151.6036 8339.1648,-2138.2659 8644.1209,-2108.7938 8785.5736,-2094.3341"/>
<polygon fill="#000000" stroke="#000000" points="8786.2918,-2097.7789 8795.8827,-2093.2773 8785.5779,-2090.8154 8786.2918,-2097.7789"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="10128" cy="-2086.0034" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10128" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 201&#45;250</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5418.6114,-2204.9366C5858.184,-2200.7257 8224.5592,-2177.1789 8949,-2151.6036 9360.8592,-2137.0634 9852.902,-2104.9072 10045.2276,-2091.7676"/>
<polygon fill="#000000" stroke="#000000" points="10045.5236,-2095.2556 10055.2612,-2091.0808 10045.0455,-2088.272 10045.5236,-2095.2556"/>
</g>
<!-- header_155 -->
<g id="node156" class="node">
<title>header_155</title>
<ellipse fill="none" stroke="#000000" cx="11008" cy="-2086.0034" rx="107.339" ry="18"/>
<text text-anchor="middle" x="11008" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Historian:search(frag)</text>
</g>
<!-- section_10&#45;&gt;header_155 -->
<g id="edge155" class="edge">
<title>section_10&#45;&gt;header_155</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11075.1729,-2187.6982C11062.0251,-2167.7934 11040.6569,-2135.4436 11025.5563,-2112.5823"/>
<polygon fill="#000000" stroke="#000000" points="11028.3399,-2110.4462 11019.908,-2104.0312 11022.4991,-2114.3043 11028.3399,-2110.4462"/>
</g>
<!-- prose_156 -->
<g id="node157" class="node">
<title>prose_156</title>
<ellipse fill="none" stroke="#000000" cx="11166" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11166" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_156 -->
<g id="edge156" class="edge">
<title>section_10&#45;&gt;prose_156</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11099.4746,-2187.6987C11106.7161,-2177.2305 11115.9661,-2163.7305 11124,-2151.6036 11132.6297,-2138.5772 11142.0256,-2123.9457 11149.738,-2111.8118"/>
<polygon fill="#000000" stroke="#000000" points="11152.8701,-2113.4079 11155.2669,-2103.0877 11146.9575,-2109.6607 11152.8701,-2113.4079"/>
</g>
<!-- codeblock_157 -->
<g id="node158" class="node">
<title>codeblock_157</title>
<ellipse fill="none" stroke="#000000" cx="11393" cy="-2086.0034" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11393" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 253&#45;294</text>
</g>
<!-- section_10&#45;&gt;codeblock_157 -->
<g id="edge157" class="edge">
<title>section_10&#45;&gt;codeblock_157</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11126.3777,-2190.2128C11181.5371,-2168.6537 11281.8341,-2129.4526 11342.4467,-2105.7622"/>
<polygon fill="#000000" stroke="#000000" points="11343.7811,-2108.9985 11351.8209,-2102.0983 11341.2329,-2102.4788 11343.7811,-2108.9985"/>
</g>
<!-- header_162 -->
<g id="node163" class="node">
<title>header_162</title>
<ellipse fill="none" stroke="#000000" cx="11865" cy="-2086.0034" rx="82.6821" ry="18"/>
<text text-anchor="middle" x="11865" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Historian:prev()</text>
</g>
<!-- section_11&#45;&gt;header_162 -->
<g id="edge162" class="edge">
<title>section_11&#45;&gt;header_162</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12082.8916,-2189.7203C12058.9965,-2179.1197 12027.0197,-2164.7623 11999,-2151.6036 11968.2005,-2137.1393 11933.725,-2120.2456 11907.4566,-2107.2246"/>
<polygon fill="#000000" stroke="#000000" points="11908.6853,-2103.927 11898.172,-2102.6143 11905.572,-2110.1966 11908.6853,-2103.927"/>
</g>
<!-- prose_163 -->
<g id="node164" class="node">
<title>prose_163</title>
<ellipse fill="none" stroke="#000000" cx="12040" cy="-2086.0034" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12040" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_163 -->
<g id="edge163" class="edge">
<title>section_11&#45;&gt;prose_163</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12107.1729,-2187.6982C12093.8731,-2167.5633 12072.1618,-2134.694 12057.0351,-2111.7933"/>
<polygon fill="#000000" stroke="#000000" points="12059.8263,-2109.6686 12051.3944,-2103.2536 12053.9855,-2113.5267 12059.8263,-2109.6686"/>
</g>
<!-- codeblock_164 -->
<g id="node165" class="node">
<title>codeblock_164</title>
<ellipse fill="none" stroke="#000000" cx="12189" cy="-2086.0034" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12189" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 299&#45;312</text>
</g>
<!-- section_11&#45;&gt;codeblock_164 -->
<g id="edge164" class="edge">
<title>section_11&#45;&gt;codeblock_164</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12129.4797,-2187.6982C12141.0781,-2167.8815 12159.8961,-2135.7296 12173.2659,-2112.8864"/>
<polygon fill="#000000" stroke="#000000" points="12176.418,-2114.4296 12178.4487,-2104.0312 12170.3767,-2110.8937 12176.418,-2114.4296"/>
</g>
<!-- section_165 -->
<g id="node166" class="node">
<title>section_165</title>
<ellipse fill="none" stroke="#000000" cx="12633" cy="-2086.0034" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="12633" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 315&#45;348</text>
</g>
<!-- section_11&#45;&gt;section_165 -->
<g id="edge165" class="edge">
<title>section_11&#45;&gt;section_165</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12173.0355,-2193.0303C12268.5721,-2170.8004 12466.8455,-2124.6651 12569.0355,-2100.887"/>
<polygon fill="#000000" stroke="#000000" points="12569.9706,-2104.263 12578.9172,-2098.5877 12568.3842,-2097.4451 12569.9706,-2104.263"/>
</g>
<!-- section_166 -->
<g id="node167" class="node">
<title>section_166</title>
<ellipse fill="none" stroke="#000000" cx="13566" cy="-2086.0034" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="13566" y="-2081.8034" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 349&#45;382</text>
</g>
<!-- section_11&#45;&gt;section_166 -->
<g id="edge166" class="edge">
<title>section_11&#45;&gt;section_166</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12190.757,-2199.6726C12434.1441,-2179.5557 13227.3794,-2113.9917 13484.644,-2092.7278"/>
<polygon fill="#000000" stroke="#000000" points="13484.9877,-2096.2114 13494.6654,-2091.8995 13484.411,-2089.2352 13484.9877,-2096.2114"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="324,-1707.4039 0,-1707.4039 0,-1635.6016 324,-1635.6016 324,-1707.4039"/>
<text text-anchor="middle" x="162" y="-1644.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">This module is responsible for REPL history.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1469.2603,-2068.0307C1464.1116,-2052.4601 1454.2199,-2030.841 1437,-2020.4033 1332.0438,-1956.7849 437.5278,-2048.7232 333,-1984.4033 235.8874,-1924.6462 189.9966,-1788.8979 171.8927,-1717.4442"/>
<polygon fill="#000000" stroke="#000000" points="175.206,-1716.2608 169.4204,-1707.3851 168.4083,-1717.9315 175.206,-1716.2608"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="897.5,-1698.8032 342.5,-1698.8032 342.5,-1644.2023 897.5,-1644.2023 897.5,-1698.8032"/>
<text text-anchor="middle" x="620" y="-1667.7028" font-family="Inconsolata" font-size="14.00" fill="#000000">Eventually this will include persisting and restoring from a SQLite database,</text>
<text text-anchor="middle" x="620" y="-1652.3027" font-family="Inconsolata" font-size="14.00" fill="#000000">fuzzy searching, and variable cacheing.</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1541.4601,-2068.1553C1536.4988,-2052.6685 1526.9051,-2031.1025 1510,-2020.4033 1396.5705,-1948.6137 1028.2178,-2042.0769 907,-1984.4033 778.3195,-1923.1791 680.3217,-1775.9872 640.0477,-1707.5797"/>
<polygon fill="#000000" stroke="#000000" points="643.0277,-1705.7417 634.9746,-1698.857 636.9766,-1709.261 643.0277,-1705.7417"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1464,-1698.8032 916,-1698.8032 916,-1644.2023 1464,-1644.2023 1464,-1698.8032"/>
<text text-anchor="middle" x="1190" y="-1667.7028" font-family="Inconsolata" font-size="14.00" fill="#000000">Currently does the basic job of retaining history and not letting subsequent</text>
<text text-anchor="middle" x="1190" y="-1652.3027" font-family="Inconsolata" font-size="14.00" fill="#000000">edits munge it.</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1612.4099,-2068.2808C1606.8952,-2053.5185 1597.0799,-2032.9496 1582,-2020.4033 1542.7807,-1987.7734 1515.7512,-2012.2457 1473,-1984.4033 1356.0536,-1908.2401 1256.4186,-1772.1153 1213.11,-1707.4784"/>
<polygon fill="#000000" stroke="#000000" points="1215.8249,-1705.2398 1207.3768,-1698.846 1209.9937,-1709.1126 1215.8249,-1705.2398"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="2030,-1706.8031 1482,-1706.8031 1482,-1636.2024 2030,-1636.2024 2030,-1706.8031"/>
<text text-anchor="middle" x="1756" y="-1675.7028" font-family="Inconsolata" font-size="14.00" fill="#000000">Next step: now that we clone a new txtbuf each time, we have an immutable</text>
<text text-anchor="middle" x="1756" y="-1660.3027" font-family="Inconsolata" font-size="14.00" fill="#000000">record. &#160;We should store the line as a string, to facilitate fuzzy matching.</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1692.8784,-2067.9263C1702.5897,-2006.9363 1734.3431,-1807.5147 1748.7614,-1716.9631"/>
<polygon fill="#000000" stroke="#000000" points="1752.2329,-1717.4189 1750.349,-1706.9929 1745.32,-1716.3181 1752.2329,-1717.4189"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2162,-1689.5027 2048,-1689.5027 2048,-1653.5027 2162,-1653.5027 2162,-1689.5027"/>
<text text-anchor="middle" x="2105" y="-1668.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">** Persistence</text>
</g>
<!-- header_23&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>header_23&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2294.2485,-2068.5083C2278.9263,-2054.6463 2256.3814,-2035.2147 2235,-2020.4033 2208.1724,-2001.8192 2190.31,-2010.7132 2171,-1984.4033 2106.3679,-1896.3417 2102.0982,-1758.8128 2103.5836,-1699.8727"/>
<polygon fill="#000000" stroke="#000000" points="2107.0838,-1699.9213 2103.9147,-1689.8115 2100.0876,-1699.691 2107.0838,-1699.9213"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2207" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="2207" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_24&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2425.3924,-2068.2374C2418.9012,-2053.24 2407.5503,-2032.3542 2391,-2020.4033 2336.1172,-1980.7725 2287.8087,-2035.1467 2243,-1984.4033 2171.1264,-1903.0103 2189.0952,-1759.6174 2200.7726,-1699.3843"/>
<polygon fill="#000000" stroke="#000000" points="2204.2266,-1699.9622 2202.7871,-1689.4656 2197.3666,-1698.5689 2204.2266,-1699.9622"/>
</g>
<!-- prespace_36 -->
<g id="node37" class="node">
<title>prespace_36</title>
<ellipse fill="none" stroke="#000000" cx="2298" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2298" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_24&#45;&gt;prespace_36 -->
<g id="edge36" class="edge">
<title>prose_24&#45;&gt;prespace_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2422.6152,-2068.5295C2414.9161,-2054.8552 2403.312,-2035.6644 2391,-2020.4033 2376.5937,-2002.5462 2364.7594,-2004.6679 2354,-1984.4033 2303.4303,-1889.1585 2297.4333,-1757.0085 2297.4275,-1699.7862"/>
<polygon fill="#000000" stroke="#000000" points="2300.928,-1699.7078 2297.4907,-1689.686 2293.9281,-1699.6639 2300.928,-1699.7078"/>
</g>
<!-- literal_37 -->
<g id="node38" class="node">
<title>literal_37</title>
<ellipse fill="none" stroke="#000000" cx="2394" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2394" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_24&#45;&gt;literal_37 -->
<g id="edge37" class="edge">
<title>prose_24&#45;&gt;literal_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2430.3428,-2067.9263C2424.367,-2002.7433 2403.8954,-1779.4405 2396.6044,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="2400.0644,-1699.3137 2395.666,-1689.675 2393.0936,-1699.9528 2400.0644,-1699.3137"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="2470" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="2470" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_24&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2433.6572,-2067.9263C2439.633,-2002.7433 2460.1046,-1779.4405 2467.3956,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="2470.9064,-1699.9528 2468.334,-1689.675 2463.9356,-1699.3137 2470.9064,-1699.9528"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="2542" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="2542" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_25&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2746.4474,-2079.8941C2701.3914,-2069.1398 2618.1392,-2042.2461 2578,-1984.4033 2516.5159,-1895.8015 2528.4005,-1758.0032 2537.0987,-1699.399"/>
<polygon fill="#000000" stroke="#000000" points="2540.5739,-1699.8295 2538.6673,-1689.4076 2533.6586,-1698.7437 2540.5739,-1699.8295"/>
</g>
<!-- link_44 -->
<g id="node45" class="node">
<title>link_44</title>
<ellipse fill="none" stroke="#000000" cx="2614" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="2614" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">link</text>
</g>
<!-- prose_25&#45;&gt;link_44 -->
<g id="edge44" class="edge">
<title>prose_25&#45;&gt;link_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2752.546,-2074.0917C2722.7579,-2058.1556 2673.5094,-2026.8999 2650,-1984.4033 2598.1522,-1890.681 2604.5703,-1757.1957 2610.4448,-1699.6647"/>
<polygon fill="#000000" stroke="#000000" points="2613.9464,-1699.8408 2611.5581,-1689.5187 2606.9882,-1699.0772 2613.9464,-1699.8408"/>
</g>
<!-- raw_45 -->
<g id="node46" class="node">
<title>raw_45</title>
<ellipse fill="none" stroke="#000000" cx="2686" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="2686" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_45 -->
<g id="edge45" class="edge">
<title>prose_25&#45;&gt;raw_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2765.0979,-2068.9352C2752.1641,-2049.4512 2732.0098,-2016.1586 2722,-1984.4033 2690.0978,-1883.1963 2685.8755,-1755.6223 2685.6999,-1699.8153"/>
<polygon fill="#000000" stroke="#000000" points="2689.2,-1699.6439 2685.7117,-1689.6398 2682.2,-1699.6357 2689.2,-1699.6439"/>
</g>
<!-- prespace_46 -->
<g id="node47" class="node">
<title>prespace_46</title>
<ellipse fill="none" stroke="#000000" cx="2777" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2777" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_25&#45;&gt;prespace_46 -->
<g id="edge46" class="edge">
<title>prose_25&#45;&gt;prespace_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2777,-2067.9263C2777,-2002.7433 2777,-1779.4405 2777,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="2780.5001,-1699.675 2777,-1689.675 2773.5001,-1699.675 2780.5001,-1699.675"/>
</g>
<!-- literal_47 -->
<g id="node48" class="node">
<title>literal_47</title>
<ellipse fill="none" stroke="#000000" cx="2873" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2873" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_25&#45;&gt;literal_47 -->
<g id="edge47" class="edge">
<title>prose_25&#45;&gt;literal_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2788.8096,-2068.9056C2801.6604,-2049.3951 2821.7405,-2016.0789 2832,-1984.4033 2864.7612,-1883.2548 2871.4133,-1755.6506 2872.7145,-1699.8255"/>
<polygon fill="#000000" stroke="#000000" points="2876.2172,-1699.7119 2872.9095,-1689.6467 2869.2185,-1699.5778 2876.2172,-1699.7119"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="3060" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="3060" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_25&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2800.1998,-2073.4953C2829.7012,-2056.6107 2880.6808,-2024.0291 2913,-1984.4033 2987.6381,-1892.8914 3034.3799,-1757.2158 3052.0172,-1699.3183"/>
<polygon fill="#000000" stroke="#000000" points="3055.4591,-1700.0246 3054.9719,-1689.4409 3048.7527,-1698.0184 3055.4591,-1700.0246"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="3866" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="3866" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_26&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4145.1238,-2074.4475C4112.547,-2058.2647 4055.3214,-2026.0959 4019,-1984.4033 3940.6615,-1894.48 3892.2183,-1757.3964 3874.1034,-1699.19"/>
<polygon fill="#000000" stroke="#000000" points="3877.3417,-1697.8103 3871.0735,-1689.2687 3870.647,-1699.8549 3877.3417,-1697.8103"/>
</g>
<!-- prespace_59 -->
<g id="node60" class="node">
<title>prespace_59</title>
<ellipse fill="none" stroke="#000000" cx="4074" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="4074" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_26&#45;&gt;prespace_59 -->
<g id="edge59" class="edge">
<title>prose_26&#45;&gt;prespace_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4161.8251,-2068.3869C4152.8501,-2048.4114 4138.5778,-2014.6798 4130,-1984.4033 4100.8777,-1881.6121 4083.7764,-1755.3469 4077.1692,-1699.8949"/>
<polygon fill="#000000" stroke="#000000" points="4080.624,-1699.303 4075.9873,-1689.7766 4073.6712,-1700.1152 4080.624,-1699.303"/>
</g>
<!-- literal_60 -->
<g id="node61" class="node">
<title>literal_60</title>
<ellipse fill="none" stroke="#000000" cx="4170" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="4170" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_26&#45;&gt;literal_60 -->
<g id="edge60" class="edge">
<title>prose_26&#45;&gt;literal_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4170,-2067.9263C4170,-2002.7433 4170,-1779.4405 4170,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="4173.5001,-1699.675 4170,-1689.675 4166.5001,-1699.675 4173.5001,-1699.675"/>
</g>
<!-- raw_61 -->
<g id="node62" class="node">
<title>raw_61</title>
<ellipse fill="none" stroke="#000000" cx="4268" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="4268" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_61 -->
<g id="edge61" class="edge">
<title>prose_26&#45;&gt;raw_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4178.1402,-2068.377C4187.0841,-2048.3926 4201.3286,-2014.6531 4210,-1984.4033 4239.4733,-1881.5869 4257.5385,-1755.3346 4264.5948,-1699.8904"/>
<polygon fill="#000000" stroke="#000000" points="4268.0919,-1700.1305 4265.8593,-1689.7736 4261.1459,-1699.2622 4268.0919,-1700.1305"/>
</g>
<!-- raw_66 -->
<g id="node67" class="node">
<title>raw_66</title>
<ellipse fill="none" stroke="#000000" cx="4948" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="4948" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_66 -->
<g id="edge66" class="edge">
<title>prose_27&#45;&gt;raw_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5150.0684,-2068.4576C5116.9708,-2003.4389 5001.1845,-1775.9815 4961.4809,-1697.9855"/>
<polygon fill="#000000" stroke="#000000" points="4964.4722,-1696.1465 4956.8165,-1688.8225 4958.234,-1699.3221 4964.4722,-1696.1465"/>
</g>
<!-- raw_68 -->
<g id="node69" class="node">
<title>raw_68</title>
<ellipse fill="none" stroke="#000000" cx="5221" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="5221" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_68 -->
<g id="edge68" class="edge">
<title>prose_28&#45;&gt;raw_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5738.1338,-2082.9586C5645.7132,-2073.5127 5380.1902,-2041.8357 5318,-1984.4033 5234.8334,-1907.5992 5222.3543,-1761.0636 5220.9179,-1699.6665"/>
<polygon fill="#000000" stroke="#000000" points="5224.416,-1699.5078 5220.7657,-1689.5617 5217.4168,-1699.6133 5224.416,-1699.5078"/>
</g>
<!-- prespace_69 -->
<g id="node70" class="node">
<title>prespace_69</title>
<ellipse fill="none" stroke="#000000" cx="5373" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5373" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_69 -->
<g id="edge69" class="edge">
<title>prose_28&#45;&gt;prespace_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5738.9825,-2080.994C5663.0622,-2068.0989 5471.0306,-2031.4487 5429,-1984.4033 5356.1618,-1902.8745 5362.52,-1760.1494 5369.1211,-1699.7644"/>
<polygon fill="#000000" stroke="#000000" points="5372.5997,-1700.1504 5370.2956,-1689.8092 5365.6479,-1699.3302 5372.5997,-1700.1504"/>
</g>
<!-- literal_70 -->
<g id="node71" class="node">
<title>literal_70</title>
<ellipse fill="none" stroke="#000000" cx="5469" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5469" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_70 -->
<g id="edge70" class="edge">
<title>prose_28&#45;&gt;literal_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5737.8004,-2083.6951C5681.4919,-2077.7941 5565.739,-2057.0059 5509,-1984.4033 5442.3321,-1899.0959 5454.7778,-1758.9421 5463.905,-1699.5263"/>
<polygon fill="#000000" stroke="#000000" points="5467.4007,-1699.8351 5465.5508,-1689.403 5460.4914,-1698.7118 5467.4007,-1699.8351"/>
</g>
<!-- raw_71 -->
<g id="node72" class="node">
<title>raw_71</title>
<ellipse fill="none" stroke="#000000" cx="5545" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="5545" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_71 -->
<g id="edge71" class="edge">
<title>prose_28&#45;&gt;raw_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5739.871,-2079.1291C5696.7895,-2067.5815 5618.6434,-2039.8958 5581,-1984.4033 5520.6027,-1895.368 5531.7793,-1758.3621 5540.1874,-1699.7163"/>
<polygon fill="#000000" stroke="#000000" points="5543.6663,-1700.1191 5541.7073,-1689.7069 5536.7456,-1699.0682 5543.6663,-1700.1191"/>
</g>
<!-- prespace_72 -->
<g id="node73" class="node">
<title>prespace_72</title>
<ellipse fill="none" stroke="#000000" cx="5636" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5636" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_72 -->
<g id="edge72" class="edge">
<title>prose_28&#45;&gt;prespace_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5754.0369,-2070.3552C5735.9691,-2051.6535 5707.0942,-2018.5773 5692,-1984.4033 5648.6255,-1886.2015 5638.8345,-1756.5664 5636.6333,-1699.9742"/>
<polygon fill="#000000" stroke="#000000" points="5640.1207,-1699.5373 5636.2865,-1689.6606 5633.1246,-1699.7726 5640.1207,-1699.5373"/>
</g>
<!-- literal_73 -->
<g id="node74" class="node">
<title>literal_73</title>
<ellipse fill="none" stroke="#000000" cx="5732" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5732" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_73 -->
<g id="edge73" class="edge">
<title>prose_28&#45;&gt;literal_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5768.3428,-2067.9263C5762.367,-2002.7433 5741.8954,-1779.4405 5734.6044,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="5738.0644,-1699.3137 5733.666,-1689.675 5731.0936,-1699.9528 5738.0644,-1699.3137"/>
</g>
<!-- raw_74 -->
<g id="node75" class="node">
<title>raw_74</title>
<ellipse fill="none" stroke="#000000" cx="5808" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="5808" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_74 -->
<g id="edge74" class="edge">
<title>prose_28&#45;&gt;raw_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5771.6572,-2067.9263C5777.633,-2002.7433 5798.1046,-1779.4405 5805.3956,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="5808.9064,-1699.9528 5806.334,-1689.675 5801.9356,-1699.3137 5808.9064,-1699.9528"/>
</g>
<!-- prespace_75 -->
<g id="node76" class="node">
<title>prespace_75</title>
<ellipse fill="none" stroke="#000000" cx="5899" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5899" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_75 -->
<g id="edge75" class="edge">
<title>prose_28&#45;&gt;prespace_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5785.4462,-2069.8637C5802.601,-2050.9606 5829.7502,-2017.9438 5844,-1984.4033 5885.9554,-1885.6509 5895.9066,-1756.302 5898.2666,-1699.879"/>
<polygon fill="#000000" stroke="#000000" points="5901.7747,-1699.7192 5898.6446,-1689.5974 5894.7794,-1699.462 5901.7747,-1699.7192"/>
</g>
<!-- literal_76 -->
<g id="node77" class="node">
<title>literal_76</title>
<ellipse fill="none" stroke="#000000" cx="5995" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5995" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_76 -->
<g id="edge76" class="edge">
<title>prose_28&#45;&gt;literal_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5799.5894,-2078.7071C5841.4891,-2066.7015 5917.108,-2038.5269 5954,-1984.4033 6014.7139,-1895.3311 6006.3207,-1758.345 5999.184,-1699.7103"/>
<polygon fill="#000000" stroke="#000000" points="6002.6431,-1699.1683 5997.883,-1689.703 5995.7015,-1700.0708 6002.6431,-1699.1683"/>
</g>
<!-- raw_77 -->
<g id="node78" class="node">
<title>raw_77</title>
<ellipse fill="none" stroke="#000000" cx="6101" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="6101" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_77 -->
<g id="edge77" class="edge">
<title>prose_28&#45;&gt;raw_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5802.0877,-2083.3778C5858.311,-2076.9796 5974.4011,-2055.4382 6035,-1984.4033 6106.2336,-1900.9024 6106.8074,-1759.7649 6103.3738,-1699.8074"/>
<polygon fill="#000000" stroke="#000000" points="6106.8506,-1699.3378 6102.7022,-1689.5889 6099.8657,-1699.797 6106.8506,-1699.3378"/>
</g>
<!-- prespace_78 -->
<g id="node79" class="node">
<title>prespace_78</title>
<ellipse fill="none" stroke="#000000" cx="6209" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="6209" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_78 -->
<g id="edge78" class="edge">
<title>prose_28&#45;&gt;prespace_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5801.4342,-2081.476C5881.475,-2069.3218 6089.9752,-2033.5395 6137,-1984.4033 6213.5341,-1904.4328 6214.6567,-1760.2556 6211.3095,-1699.599"/>
<polygon fill="#000000" stroke="#000000" points="6214.8019,-1699.366 6210.6737,-1689.6085 6207.816,-1699.8107 6214.8019,-1699.366"/>
</g>
<!-- literal_79 -->
<g id="node80" class="node">
<title>literal_79</title>
<ellipse fill="none" stroke="#000000" cx="6322" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="6322" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_79 -->
<g id="edge79" class="edge">
<title>prose_28&#45;&gt;literal_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5802.3009,-2083.9533C5901.483,-2076.9823 6198.8633,-2050.8266 6264,-1984.4033 6340.8148,-1906.0713 6333.3589,-1760.9906 6326.1491,-1699.8463"/>
<polygon fill="#000000" stroke="#000000" points="6329.602,-1699.2532 6324.8714,-1689.7731 6322.6577,-1700.1341 6329.602,-1699.2532"/>
</g>
<!-- raw_80 -->
<g id="node81" class="node">
<title>raw_80</title>
<ellipse fill="none" stroke="#000000" cx="6459" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="6459" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_80 -->
<g id="edge80" class="edge">
<title>prose_28&#45;&gt;raw_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5801.36,-2081.5469C5920.6445,-2064.4772 6340.4908,-2003.2712 6362,-1984.4033 6447.1031,-1909.7505 6458.5073,-1762.0208 6459.3696,-1699.9859"/>
<polygon fill="#000000" stroke="#000000" points="6462.8706,-1699.7918 6459.4245,-1689.7731 6455.8707,-1699.7541 6462.8706,-1699.7918"/>
</g>
<!-- raw_94 -->
<g id="node95" class="node">
<title>raw_94</title>
<ellipse fill="none" stroke="#000000" cx="6665" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="6665" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_29&#45;&gt;raw_94 -->
<g id="edge94" class="edge">
<title>prose_29&#45;&gt;raw_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6271.0661,-2080.7352C6323.0149,-2070.5125 6428.3639,-2043.5745 6495,-1984.4033 6586.7981,-1902.8889 6638.4708,-1759.563 6657.0332,-1699.366"/>
<polygon fill="#000000" stroke="#000000" points="6660.4861,-1700.038 6660.0202,-1689.4535 6653.7838,-1698.0184 6660.4861,-1700.038"/>
</g>
<!-- raw_96 -->
<g id="node97" class="node">
<title>raw_96</title>
<ellipse fill="none" stroke="#000000" cx="7079" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="7079" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_96 -->
<g id="edge96" class="edge">
<title>prose_30&#45;&gt;raw_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7365.1652,-2082.6909C7311.174,-2075.3001 7201.9765,-2052.3622 7145,-1984.4033 7074.4842,-1900.2954 7073.5195,-1759.4885 7076.7379,-1699.7129"/>
<polygon fill="#000000" stroke="#000000" points="7080.2438,-1699.7245 7077.3716,-1689.5265 7073.2573,-1699.2898 7080.2438,-1699.7245"/>
</g>
<!-- prespace_97 -->
<g id="node98" class="node">
<title>prespace_97</title>
<ellipse fill="none" stroke="#000000" cx="7200" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="7200" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_30&#45;&gt;prespace_97 -->
<g id="edge97" class="edge">
<title>prose_30&#45;&gt;prespace_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7376.3246,-2071.9674C7351.907,-2054.3271 7311.7443,-2021.7916 7289,-1984.4033 7231.6435,-1890.1176 7209.9935,-1757.4625 7202.958,-1699.9474"/>
<polygon fill="#000000" stroke="#000000" points="7206.4088,-1699.3211 7201.7742,-1689.7937 7199.4559,-1700.1318 7206.4088,-1699.3211"/>
</g>
<!-- literal_98 -->
<g id="node99" class="node">
<title>literal_98</title>
<ellipse fill="none" stroke="#000000" cx="7329" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="7329" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_30&#45;&gt;literal_98 -->
<g id="edge98" class="edge">
<title>prose_30&#45;&gt;literal_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7394.0344,-2067.9263C7383.3409,-2002.7433 7346.7075,-1779.4405 7333.6605,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="7337.054,-1698.9765 7331.9812,-1689.675 7330.1463,-1700.1097 7337.054,-1698.9765"/>
</g>
<!-- raw_99 -->
<g id="node100" class="node">
<title>raw_99</title>
<ellipse fill="none" stroke="#000000" cx="7466" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="7466" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_99 -->
<g id="edge99" class="edge">
<title>prose_30&#45;&gt;raw_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7400.0092,-2067.9263C7410.8599,-2002.7433 7448.0321,-1779.4405 7461.271,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="7464.7853,-1700.114 7462.9749,-1689.675 7457.8803,-1698.9645 7464.7853,-1700.114"/>
</g>
<!-- prespace_100 -->
<g id="node101" class="node">
<title>prespace_100</title>
<ellipse fill="none" stroke="#000000" cx="7613" cy="-1671.5027" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="7613" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_30&#45;&gt;prespace_100 -->
<g id="edge100" class="edge">
<title>prose_30&#45;&gt;prespace_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7416.6922,-2071.5897C7440.0291,-2053.5775 7478.68,-2020.6759 7502,-1984.4033 7562.9101,-1889.662 7595.5067,-1757.2469 7607.5251,-1699.8708"/>
<polygon fill="#000000" stroke="#000000" points="7611.0217,-1700.2408 7609.5945,-1689.7426 7604.1634,-1698.8395 7611.0217,-1700.2408"/>
</g>
<!-- literal_101 -->
<g id="node102" class="node">
<title>literal_101</title>
<ellipse fill="none" stroke="#000000" cx="7723" cy="-1671.5027" rx="31.481" ry="18"/>
<text text-anchor="middle" x="7723" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_30&#45;&gt;literal_101 -->
<g id="edge101" class="edge">
<title>prose_30&#45;&gt;literal_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7429.1338,-2083.9152C7486.6414,-2078.3453 7606.846,-2058.0403 7668,-1984.4033 7737.6646,-1900.5185 7732.5327,-1759.5901 7726.5815,-1699.7476"/>
<polygon fill="#000000" stroke="#000000" points="7730.0336,-1699.1151 7725.4786,-1689.5494 7723.0742,-1699.8678 7730.0336,-1699.1151"/>
</g>
<!-- raw_102 -->
<g id="node103" class="node">
<title>raw_102</title>
<ellipse fill="none" stroke="#000000" cx="7813" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="7813" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_102 -->
<g id="edge102" class="edge">
<title>prose_30&#45;&gt;raw_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7428.5444,-2081.6438C7508.8365,-2069.8916 7717.7979,-2034.9907 7763,-1984.4033 7835.7878,-1902.9437 7825.7387,-1759.5875 7817.5682,-1699.3742"/>
<polygon fill="#000000" stroke="#000000" points="7821.0297,-1698.8554 7816.1352,-1689.459 7814.1017,-1699.8568 7821.0297,-1698.8554"/>
</g>
<!-- header_110 -->
<g id="node111" class="node">
<title>header_110</title>
<ellipse fill="none" stroke="#000000" cx="7937" cy="-1671.5027" rx="78.8488" ry="18"/>
<text text-anchor="middle" x="7937" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : SQLite battery</text>
</g>
<!-- section_31&#45;&gt;header_110 -->
<g id="edge110" class="edge">
<title>section_31&#45;&gt;header_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7998.2088,-2067.9263C7988.1444,-2002.7433 7953.6659,-1779.4405 7941.3864,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="7944.7909,-1699.0238 7939.8058,-1689.675 7937.8729,-1700.092 7944.7909,-1699.0238"/>
</g>
<!-- prose_111 -->
<g id="node112" class="node">
<title>prose_111</title>
<ellipse fill="none" stroke="#000000" cx="8066" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8066" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_31&#45;&gt;prose_111 -->
<g id="edge111" class="edge">
<title>section_31&#45;&gt;prose_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8005.8997,-2067.7673C8011.2,-2047.523 8019.6129,-2013.8193 8025,-1984.4033 8044.1065,-1880.0735 8057.7623,-1754.5967 8063.2848,-1699.6206"/>
<polygon fill="#000000" stroke="#000000" points="8066.7752,-1699.8893 8064.28,-1689.5925 8059.8094,-1699.198 8066.7752,-1699.8893"/>
</g>
<!-- codeblock_112 -->
<g id="node113" class="node">
<title>codeblock_112</title>
<ellipse fill="none" stroke="#000000" cx="8286" cy="-1671.5027" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="8286" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 61&#45;140</text>
</g>
<!-- section_31&#45;&gt;codeblock_112 -->
<g id="edge112" class="edge">
<title>section_31&#45;&gt;codeblock_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8022.2595,-2068.8346C8045.0012,-2049.78 8081.2659,-2017.3494 8107,-1984.4033 8182.5926,-1887.6258 8247.4657,-1755.378 8273.6419,-1698.8904"/>
<polygon fill="#000000" stroke="#000000" points="8276.9348,-1700.1067 8277.9323,-1689.559 8270.5748,-1697.1825 8276.9348,-1700.1067"/>
</g>
<!-- header_117 -->
<g id="node118" class="node">
<title>header_117</title>
<ellipse fill="none" stroke="#000000" cx="8732" cy="-1671.5027" rx="82.2147" ry="18"/>
<text text-anchor="middle" x="8732" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:load()</text>
</g>
<!-- section_32&#45;&gt;header_117 -->
<g id="edge117" class="edge">
<title>section_32&#45;&gt;header_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8857.0498,-2067.8531C8848.3629,-2047.684 8834.3112,-2014.0457 8824,-1984.4033 8787.9109,-1880.6551 8753.6864,-1754.4608 8739.2251,-1699.4185"/>
<polygon fill="#000000" stroke="#000000" points="8742.5966,-1698.4769 8736.6801,-1689.6879 8735.8244,-1700.2481 8742.5966,-1698.4769"/>
</g>
<!-- prose_118 -->
<g id="node119" class="node">
<title>prose_118</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8865" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_32&#45;&gt;prose_118 -->
<g id="edge118" class="edge">
<title>section_32&#45;&gt;prose_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8865,-2067.9263C8865,-2002.7433 8865,-1779.4405 8865,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="8868.5001,-1699.675 8865,-1689.675 8861.5001,-1699.675 8868.5001,-1699.675"/>
</g>
<!-- prose_119 -->
<g id="node120" class="node">
<title>prose_119</title>
<ellipse fill="none" stroke="#000000" cx="8947" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8947" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_32&#45;&gt;prose_119 -->
<g id="edge119" class="edge">
<title>section_32&#45;&gt;prose_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8873.8358,-2068.1231C8883.298,-2048.1902 8898.025,-2014.7578 8906,-1984.4033 8932.9517,-1881.8198 8942.5873,-1755.4482 8945.6834,-1699.9319"/>
<polygon fill="#000000" stroke="#000000" points="8949.1861,-1699.9722 8946.2186,-1689.8015 8942.1958,-1699.6028 8949.1861,-1699.9722"/>
</g>
<!-- codeblock_120 -->
<g id="node121" class="node">
<title>codeblock_120</title>
<ellipse fill="none" stroke="#000000" cx="9153" cy="-1671.5027" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9153" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 150&#45;198</text>
</g>
<!-- section_32&#45;&gt;codeblock_120 -->
<g id="edge120" class="edge">
<title>section_32&#45;&gt;codeblock_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8891.1207,-2069.0476C8917.9527,-2050.6523 8959.6879,-2019.2125 8988,-1984.4033 9064.2197,-1890.6926 9120.7194,-1756.2708 9142.8079,-1699.0156"/>
<polygon fill="#000000" stroke="#000000" points="9146.1197,-1700.1534 9146.4112,-1689.5626 9139.5788,-1697.6601 9146.1197,-1700.1534"/>
</g>
<!-- header_127 -->
<g id="node128" class="node">
<title>header_127</title>
<ellipse fill="none" stroke="#000000" cx="9882" cy="-1671.5027" rx="113.1277" ry="18"/>
<text text-anchor="middle" x="9882" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:persist(txtbuf)</text>
</g>
<!-- section_33&#45;&gt;header_127 -->
<g id="edge127" class="edge">
<title>section_33&#45;&gt;header_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10100.3155,-2069.1592C10072.8197,-2051.1884 10031.0987,-2020.3895 10005,-1984.4033 9937.7369,-1891.6573 9901.3104,-1757.1868 9887.9761,-1699.498"/>
<polygon fill="#000000" stroke="#000000" points="9891.3686,-1698.6312 9885.7528,-1689.6472 9884.5404,-1700.1724 9891.3686,-1698.6312"/>
</g>
<!-- prose_128 -->
<g id="node129" class="node">
<title>prose_128</title>
<ellipse fill="none" stroke="#000000" cx="10046" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10046" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_128 -->
<g id="edge128" class="edge">
<title>section_33&#45;&gt;prose_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10119.1642,-2068.1231C10109.702,-2048.1902 10094.975,-2014.7578 10087,-1984.4033 10060.0483,-1881.8198 10050.4127,-1755.4482 10047.3166,-1699.9319"/>
<polygon fill="#000000" stroke="#000000" points="10050.8042,-1699.6028 10046.7814,-1689.8015 10043.8139,-1699.9722 10050.8042,-1699.6028"/>
</g>
<!-- prose_129 -->
<g id="node130" class="node">
<title>prose_129</title>
<ellipse fill="none" stroke="#000000" cx="10128" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10128" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_129 -->
<g id="edge129" class="edge">
<title>section_33&#45;&gt;prose_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10128,-2067.9263C10128,-2002.7433 10128,-1779.4405 10128,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="10131.5001,-1699.675 10128,-1689.675 10124.5001,-1699.675 10131.5001,-1699.675"/>
</g>
<!-- prose_130 -->
<g id="node131" class="node">
<title>prose_130</title>
<ellipse fill="none" stroke="#000000" cx="10592" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10592" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_130 -->
<g id="edge130" class="edge">
<title>section_33&#45;&gt;prose_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10147.6411,-2068.4576C10221.7591,-2002.2465 10484.4447,-1767.5841 10566.9873,-1693.8471"/>
<polygon fill="#000000" stroke="#000000" points="10569.4944,-1696.3006 10574.6204,-1687.0283 10564.831,-1691.0802 10569.4944,-1696.3006"/>
</g>
<!-- prose_131 -->
<g id="node132" class="node">
<title>prose_131</title>
<ellipse fill="none" stroke="#000000" cx="10674" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10674" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_131 -->
<g id="edge131" class="edge">
<title>section_33&#45;&gt;prose_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10201.3143,-2081.497C10326.8947,-2072.1789 10575.2385,-2046.2478 10633,-1984.4033 10707.2604,-1904.8936 10690.984,-1760.4623 10679.9458,-1699.6686"/>
<polygon fill="#000000" stroke="#000000" points="10683.3474,-1698.8215 10678.035,-1689.6548 10676.4715,-1700.1337 10683.3474,-1698.8215"/>
</g>
<!-- codeblock_132 -->
<g id="node133" class="node">
<title>codeblock_132</title>
<ellipse fill="none" stroke="#000000" cx="10812" cy="-1671.5027" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10812" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 216&#45;248</text>
</g>
<!-- section_33&#45;&gt;codeblock_132 -->
<g id="edge132" class="edge">
<title>section_33&#45;&gt;codeblock_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10202.1652,-2082.617C10342.5422,-2074.7271 10639.775,-2050.4856 10715,-1984.4033 10800.05,-1909.6901 10811.4837,-1761.994 10812.3617,-1699.977"/>
<polygon fill="#000000" stroke="#000000" points="10815.8627,-1699.7868 10812.4193,-1689.7672 10808.8628,-1699.7472 10815.8627,-1699.7868"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="1722.5,-742.3026 1503.5,-742.3026 1503.5,-686.4996 1722.5,-686.4996 1722.5,-742.3026"/>
<text text-anchor="middle" x="1613" y="-694.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">This is where we practice for</text>
</g>
<!-- raw_35&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_35&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2211.6482,-1653.7164C2224.4641,-1600.1371 2254.1049,-1439.0308 2171,-1358.6022 2100.663,-1290.5302 1804.9595,-1387.8555 1732,-1322.6022 1563.9693,-1172.3194 1591.2745,-860.6254 1606.7275,-752.4021"/>
<polygon fill="#000000" stroke="#000000" points="1610.2236,-752.6855 1608.2242,-742.281 1603.2989,-751.6614 1610.2236,-752.6855"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="1795,-732.4011 1741,-732.4011 1741,-696.4011 1795,-696.4011 1795,-732.4011"/>
<text text-anchor="middle" x="1768" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_36&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>prespace_36&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2301.406,-1653.5506C2310.5088,-1599.5011 2329.2,-1437.2015 2243,-1358.6022 2170.671,-1292.6507 1872.4238,-1392.597 1804,-1322.6022 1722.7744,-1239.5116 1754.4523,-851.0747 1765.0675,-742.6006"/>
<polygon fill="#000000" stroke="#000000" points="1768.5712,-742.7369 1766.0813,-732.4388 1761.6058,-742.042 1768.5712,-742.7369"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="1867,-732.4011 1813,-732.4011 1813,-696.4011 1867,-696.4011 1867,-732.4011"/>
<text text-anchor="middle" x="1840" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">codex</text>
</g>
<!-- literal_37&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>literal_37&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2398.3428,-1653.6462C2410.2425,-1599.8677 2437.1566,-1438.2561 2353,-1358.6022 2275.7966,-1285.5294 1950.5549,-1398.3753 1876,-1322.6022 1794.5051,-1239.7757 1826.3759,-851.1496 1837.0513,-742.6165"/>
<polygon fill="#000000" stroke="#000000" points="1840.5555,-742.7485 1838.0707,-732.4492 1833.5904,-742.0501 1840.5555,-742.7485"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="1939,-732.4011 1885,-732.4011 1885,-696.4011 1939,-696.4011 1939,-732.4011"/>
<text text-anchor="middle" x="1912" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_38&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_38&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2474.6768,-1653.6867C2487.5741,-1600.023 2517.4212,-1438.7026 2434,-1358.6022 2355.8842,-1283.596 2024.0073,-1399.7441 1948,-1322.6022 1866.4476,-1239.8323 1898.3596,-851.1657 1909.0478,-742.62"/>
<polygon fill="#000000" stroke="#000000" points="1912.5522,-742.751 1910.0685,-732.4514 1905.5872,-742.0518 1912.5522,-742.751"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="2449,-734.3032 1957,-734.3032 1957,-694.499 2449,-694.499 2449,-734.3032"/>
<text text-anchor="middle" x="2203" y="-702.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">Note: I&#39;m not happy with how the existing SQLite binding is handling</text>
</g>
<!-- raw_43&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_43&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2544.6021,-1653.3965C2550.9362,-1602.8566 2562.7408,-1457.4905 2506,-1358.6022 2492.7285,-1335.4725 2474.3951,-1343.6334 2458,-1322.6022 2308.2033,-1130.446 2231.2451,-837.4996 2209.537,-744.0998"/>
<polygon fill="#000000" stroke="#000000" points="2212.9157,-743.1742 2207.2723,-734.2074 2206.0922,-744.7363 2212.9157,-743.1742"/>
</g>
<!-- anchortext_50 -->
<g id="node51" class="node">
<title>anchortext_50</title>
<ellipse fill="none" stroke="#000000" cx="2518" cy="-714.4011" rx="51.3018" ry="18"/>
<text text-anchor="middle" x="2518" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">anchortext</text>
</g>
<!-- link_44&#45;&gt;anchortext_50 -->
<g id="edge50" class="edge">
<title>link_44&#45;&gt;anchortext_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2612.0974,-1653.3446C2606.6868,-1601.6468 2590.7786,-1449.2287 2578,-1322.6022 2555.4473,-1099.1216 2529.1644,-829.3469 2520.7427,-742.6642"/>
<polygon fill="#000000" stroke="#000000" points="2524.2122,-742.1795 2519.7619,-732.5647 2517.245,-742.8562 2524.2122,-742.1795"/>
</g>
<!-- url_51 -->
<g id="node52" class="node">
<title>url_51</title>
<ellipse fill="none" stroke="#000000" cx="2614" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="2614" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">url</text>
</g>
<!-- link_44&#45;&gt;url_51 -->
<g id="edge51" class="edge">
<title>link_44&#45;&gt;url_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2614,-1653.238C2614,-1535.7387 2614,-886.606 2614,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="2617.5001,-742.47 2614,-732.4701 2610.5001,-742.4701 2617.5001,-742.47"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="2731,-732.4011 2659,-732.4011 2659,-696.4011 2731,-696.4011 2731,-732.4011"/>
<text text-anchor="middle" x="2695" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">. &#160;Lua&#39;s</text>
</g>
<!-- raw_45&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_45&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2686.1718,-1653.238C2687.2766,-1535.7387 2693.3807,-886.606 2694.7342,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="2698.2358,-742.5026 2694.8301,-732.4701 2691.2361,-742.4367 2698.2358,-742.5026"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="2803,-732.4011 2749,-732.4011 2749,-696.4011 2803,-696.4011 2803,-732.4011"/>
<text text-anchor="middle" x="2776" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_46&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>prespace_46&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2776.9809,-1653.238C2776.8582,-1535.7387 2776.1799,-886.606 2776.0295,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="2779.5294,-742.4664 2776.0189,-732.4701 2772.5294,-742.4737 2779.5294,-742.4664"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="2875,-732.4011 2821,-732.4011 2821,-696.4011 2875,-696.4011 2875,-732.4011"/>
<text text-anchor="middle" x="2848" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">nil</text>
</g>
<!-- literal_47&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>literal_47&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2872.5229,-1653.238C2869.4538,-1535.7387 2852.4981,-886.606 2848.7385,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="2852.232,-742.3752 2848.472,-732.4701 2845.2344,-742.5581 2852.232,-742.3752"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3448.5,-741.6016 2893.5,-741.6016 2893.5,-687.2007 3448.5,-687.2007 3448.5,-741.6016"/>
<text text-anchor="middle" x="3171" y="-726.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> is a frequent source of</text>
<text text-anchor="middle" x="3171" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">annoyance, true, but every union type system has a bottom value, and Lua&#39;s is</text>
<text text-anchor="middle" x="3171" y="-695.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">implemented cleanly.</text>
</g>
<!-- raw_48&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>raw_48&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3062.1183,-1653.238C3075.4639,-1538.1644 3147.9464,-913.1817 3166.6135,-752.2236"/>
<polygon fill="#000000" stroke="#000000" points="3170.1383,-752.212 3167.8137,-741.8754 3163.1849,-751.4055 3170.1383,-752.212"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="2576,-53.1 2434,-53.1 2434,-17.1 2576,-17.1 2576,-53.1"/>
<text text-anchor="middle" x="2505" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">three&#45;valued logic</text>
</g>
<!-- anchortext_50&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>anchortext_50&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2517.6523,-696.2315C2515.8666,-602.9235 2507.7265,-177.5691 2505.5413,-63.3832"/>
<polygon fill="#000000" stroke="#000000" points="2509.0396,-63.2571 2505.3488,-53.3259 2502.0409,-63.3911 2509.0396,-63.2571"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="2659.5,-53.1 2594.5,-53.1 2594.5,-17.1 2659.5,-17.1 2659.5,-53.1"/>
<text text-anchor="middle" x="2627" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">httk://</text>
</g>
<!-- url_51&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>url_51&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2614.3477,-696.2315C2616.1334,-602.9235 2624.2735,-177.5691 2626.4587,-63.3832"/>
<polygon fill="#000000" stroke="#000000" points="2629.9591,-63.3911 2626.6512,-53.3259 2622.9604,-63.2571 2629.9591,-63.3911"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4029,-757.0022 3467,-757.0022 3467,-671.8001 4029,-671.8001 4029,-757.0022"/>
<text text-anchor="middle" x="3748" y="-726.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">But this is not the semantics of SQLite&#39;s NULL, which cleanly represents &quot;no</text>
<text text-anchor="middle" x="3748" y="-710.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">answer available for constraint&quot;. &#160;Our bindings would appear to represent</text>
<text text-anchor="middle" x="3748" y="-695.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">nulls on the right side of a left join as missing values, which breaks some of</text>
<text text-anchor="middle" x="3748" y="-679.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">the conventions of Lua, such as</text>
</g>
<!-- raw_58&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>raw_58&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3863.7482,-1653.238C3849.9723,-1541.5014 3776.9235,-949.0003 3754.5309,-767.3732"/>
<polygon fill="#000000" stroke="#000000" points="3757.9823,-766.7632 3753.2848,-757.2667 3751.0349,-767.6198 3757.9823,-766.7632"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="4101,-732.4011 4047,-732.4011 4047,-696.4011 4101,-696.4011 4101,-732.4011"/>
<text text-anchor="middle" x="4074" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_59&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prespace_59&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4074,-1653.238C4074,-1535.7387 4074,-886.606 4074,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="4077.5001,-742.47 4074,-732.4701 4070.5001,-742.4701 4077.5001,-742.47"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="4173,-732.4011 4119,-732.4011 4119,-696.4011 4173,-696.4011 4173,-732.4011"/>
<text text-anchor="middle" x="4146" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">#</text>
</g>
<!-- literal_60&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>literal_60&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4169.542,-1653.238C4166.5956,-1535.7387 4150.3182,-886.606 4146.7089,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="4150.2028,-742.3791 4146.4531,-732.4701 4143.205,-742.5547 4150.2028,-742.3791"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="4389,-732.4011 4191,-732.4011 4191,-696.4011 4389,-696.4011 4389,-732.4011"/>
<text text-anchor="middle" x="4290" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">, to no plausible benefit.</text>
</g>
<!-- raw_61&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>raw_61&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4268.4198,-1653.238C4271.1207,-1535.7387 4286.0417,-886.606 4289.3502,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="4292.8538,-742.5479 4289.5847,-732.4701 4285.8557,-742.3869 4292.8538,-742.5479"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="4962.5,-741.7015 4407.5,-741.7015 4407.5,-687.1007 4962.5,-687.1007 4962.5,-741.7015"/>
<text text-anchor="middle" x="4685" y="-710.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">It&#39;s also quite possible I&#39;m trying to unwrap a data structure which is meant</text>
<text text-anchor="middle" x="4685" y="-695.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">to be handled through method calls.</text>
</g>
<!-- raw_66&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>raw_66&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4943.0965,-1653.658C4911.7543,-1539.5984 4739.3875,-912.3266 4695.2819,-751.8187"/>
<polygon fill="#000000" stroke="#000000" points="4698.5897,-750.6469 4692.5651,-741.9317 4691.8399,-752.5017 4698.5897,-750.6469"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="5339.5,-734.3032 4980.5,-734.3032 4980.5,-694.499 5339.5,-694.499 5339.5,-734.3032"/>
<text text-anchor="middle" x="5160" y="-702.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">Looks like there&#39;s a magic &quot;hik&quot; string where the</text>
</g>
<!-- raw_68&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>raw_68&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5219.8359,-1653.238C5212.3799,-1536.2512 5171.3356,-892.2595 5161.9237,-744.5848"/>
<polygon fill="#000000" stroke="#000000" points="5165.4066,-744.2038 5161.2776,-734.4467 5158.4208,-744.6491 5165.4066,-744.2038"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="5412,-732.4011 5358,-732.4011 5358,-696.4011 5412,-696.4011 5412,-732.4011"/>
<text text-anchor="middle" x="5385" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_69&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>prespace_69&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5373.229,-1653.238C5374.7022,-1535.7387 5382.8409,-886.606 5384.6455,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="5388.1477,-742.5132 5384.7735,-732.4701 5381.1483,-742.4254 5388.1477,-742.5132"/>
</g>
<!-- leaf_83 -->
<g id="node84" class="node">
<title>leaf_83</title>
<polygon fill="none" stroke="#c0c0c0" points="5484,-732.4011 5430,-732.4011 5430,-696.4011 5484,-696.4011 5484,-732.4011"/>
<text text-anchor="middle" x="5457" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">i</text>
</g>
<!-- literal_70&#45;&gt;leaf_83 -->
<g id="edge83" class="edge">
<title>literal_70&#45;&gt;leaf_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5468.771,-1653.238C5467.2978,-1535.7387 5459.1591,-886.606 5457.3545,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="5460.8517,-742.4254 5457.2265,-732.4701 5453.8523,-742.5132 5460.8517,-742.4254"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="5588,-732.4011 5502,-732.4011 5502,-696.4011 5588,-696.4011 5588,-732.4011"/>
<text text-anchor="middle" x="5545" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> is index,</text>
</g>
<!-- raw_71&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>raw_71&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5545,-1653.238C5545,-1535.7387 5545,-886.606 5545,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="5548.5001,-742.47 5545,-732.4701 5541.5001,-742.4701 5548.5001,-742.47"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="5660,-732.4011 5606,-732.4011 5606,-696.4011 5660,-696.4011 5660,-732.4011"/>
<text text-anchor="middle" x="5633" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_72&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>prespace_72&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5635.9427,-1653.238C5635.5745,-1535.7387 5633.5398,-886.606 5633.0886,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="5636.5881,-742.459 5633.0566,-732.4701 5629.5881,-742.481 5636.5881,-742.459"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="5732,-732.4011 5678,-732.4011 5678,-696.4011 5732,-696.4011 5732,-732.4011"/>
<text text-anchor="middle" x="5705" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">k</text>
</g>
<!-- literal_73&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>literal_73&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.4847,-1653.238C5728.1701,-1535.7387 5709.8579,-886.606 5705.7975,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="5709.2904,-742.3673 5705.5097,-732.4701 5702.2932,-742.5648 5709.2904,-742.3673"/>
</g>
<!-- leaf_87 -->
<g id="node88" class="node">
<title>leaf_87</title>
<polygon fill="none" stroke="#c0c0c0" points="5864,-733.7017 5750,-733.7017 5750,-695.1005 5864,-695.1005 5864,-733.7017"/>
<text text-anchor="middle" x="5807" y="-718.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> is key/value,</text>
<text text-anchor="middle" x="5807" y="-703.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">and</text>
</g>
<!-- raw_74&#45;&gt;leaf_87 -->
<g id="edge87" class="edge">
<title>raw_74&#45;&gt;leaf_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5807.9809,-1653.238C5807.8586,-1536.1252 5807.1844,-890.8709 5807.031,-744.1092"/>
<polygon fill="#000000" stroke="#000000" points="5810.5311,-744.04 5807.0205,-734.0437 5803.5311,-744.0473 5810.5311,-744.04"/>
</g>
<!-- leaf_88 -->
<g id="node89" class="node">
<title>leaf_88</title>
<polygon fill="none" stroke="#c0c0c0" points="5936,-732.4011 5882,-732.4011 5882,-696.4011 5936,-696.4011 5936,-732.4011"/>
<text text-anchor="middle" x="5909" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_75&#45;&gt;leaf_88 -->
<g id="edge88" class="edge">
<title>prespace_75&#45;&gt;leaf_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5899.1908,-1653.238C5900.4185,-1535.7387 5907.2008,-886.606 5908.7046,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="5912.2064,-742.5061 5908.8112,-732.4701 5905.2068,-742.4329 5912.2064,-742.5061"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="6008,-732.4011 5954,-732.4011 5954,-696.4011 6008,-696.4011 6008,-732.4011"/>
<text text-anchor="middle" x="5981" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">h</text>
</g>
<!-- literal_76&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>literal_76&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5994.7328,-1653.238C5993.0141,-1535.7387 5983.5189,-886.606 5981.4135,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="5984.9103,-742.4178 5981.2643,-732.4701 5977.911,-742.5202 5984.9103,-742.4178"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="6238,-732.4011 6026,-732.4011 6026,-696.4011 6238,-696.4011 6238,-732.4011"/>
<text text-anchor="middle" x="6132" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> is some weird object on the</text>
</g>
<!-- raw_77&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>raw_77&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6101.5916,-1653.238C6105.3973,-1535.7387 6126.4224,-886.606 6131.0843,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="6134.5891,-742.5781 6131.4148,-732.4701 6127.5928,-742.3515 6134.5891,-742.5781"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6310,-732.4011 6256,-732.4011 6256,-696.4011 6310,-696.4011 6310,-732.4011"/>
<text text-anchor="middle" x="6283" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_78&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>prespace_78&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6211.2943,-1653.3722C6217.7582,-1601.7469 6236.3404,-1449.5015 6247,-1322.6022 6265.7436,-1099.4662 6278.1053,-829.4662 6281.8227,-742.6952"/>
<polygon fill="#000000" stroke="#000000" points="6285.3245,-742.7247 6282.252,-732.5851 6278.3308,-742.4276 6285.3245,-742.7247"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="6382,-732.4011 6328,-732.4011 6328,-696.4011 6382,-696.4011 6382,-732.4011"/>
<text text-anchor="middle" x="6355" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">[0]</text>
</g>
<!-- literal_79&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>literal_79&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6322.6298,-1653.238C6326.681,-1535.7387 6349.0625,-886.606 6354.0252,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="6357.5302,-742.5848 6354.377,-732.4701 6350.5344,-742.3435 6357.5302,-742.5848"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="6640,-733.7017 6400,-733.7017 6400,-695.1005 6640,-695.1005 6640,-733.7017"/>
<text text-anchor="middle" x="6520" y="-718.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> index which has column&#45;centered</text>
<text text-anchor="middle" x="6520" y="-703.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">values.</text>
</g>
<!-- raw_80&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>raw_80&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6460.1641,-1653.238C6467.6282,-1536.1252 6508.7529,-890.8709 6518.1066,-744.1092"/>
<polygon fill="#000000" stroke="#000000" points="6521.6049,-744.2461 6518.7481,-734.0437 6514.619,-743.8008 6521.6049,-744.2461"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="6940,-734.3032 6658,-734.3032 6658,-694.499 6940,-694.499 6940,-734.3032"/>
<text text-anchor="middle" x="6799" y="-702.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ve been getting back all three. Hmm.</text>
</g>
<!-- raw_94&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>raw_94&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6667.5572,-1653.238C6683.936,-1536.2512 6774.0988,-892.2595 6794.7741,-744.5848"/>
<polygon fill="#000000" stroke="#000000" points="6798.2731,-744.8354 6796.1935,-734.4467 6791.3407,-743.8647 6798.2731,-744.8354"/>
</g>
<!-- leaf_103 -->
<g id="node104" class="node">
<title>leaf_103</title>
<polygon fill="none" stroke="#c0c0c0" points="7149.5,-734.3032 6958.5,-734.3032 6958.5,-694.499 7149.5,-694.499 7149.5,-734.3032"/>
<text text-anchor="middle" x="7054" y="-702.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">Also the return format is</text>
</g>
<!-- raw_96&#45;&gt;leaf_103 -->
<g id="edge103" class="edge">
<title>raw_96&#45;&gt;leaf_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7078.5229,-1653.238C7075.4672,-1536.2512 7058.6458,-892.2595 7054.7884,-744.5848"/>
<polygon fill="#000000" stroke="#000000" points="7058.2836,-744.3518 7054.5236,-734.4467 7051.286,-744.5347 7058.2836,-744.3518"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="7222,-732.4011 7168,-732.4011 7168,-696.4011 7222,-696.4011 7222,-732.4011"/>
<text text-anchor="middle" x="7195" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_97&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>prespace_97&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7199.9046,-1653.238C7199.2908,-1535.7387 7195.8996,-886.606 7195.1477,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="7198.6467,-742.4516 7195.0944,-732.4701 7191.6468,-742.4882 7198.6467,-742.4516"/>
</g>
<!-- leaf_105 -->
<g id="node106" class="node">
<title>leaf_105</title>
<polygon fill="none" stroke="#c0c0c0" points="7361.5,-732.4011 7240.5,-732.4011 7240.5,-696.4011 7361.5,-696.4011 7361.5,-732.4011"/>
<text text-anchor="middle" x="7301" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">resultset, nrow</text>
</g>
<!-- literal_98&#45;&gt;leaf_105 -->
<g id="edge105" class="edge">
<title>literal_98&#45;&gt;leaf_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7328.4657,-1653.238C7325.0282,-1535.7387 7306.0379,-886.606 7301.8271,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="7305.3196,-742.3634 7301.5286,-732.4701 7298.3226,-742.5682 7305.3196,-742.3634"/>
</g>
<!-- leaf_106 -->
<g id="node107" class="node">
<title>leaf_106</title>
<polygon fill="none" stroke="#c0c0c0" points="7620,-732.4011 7380,-732.4011 7380,-696.4011 7620,-696.4011 7620,-732.4011"/>
<text text-anchor="middle" x="7500" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> which mitigates the damage from</text>
</g>
<!-- raw_99&#45;&gt;leaf_106 -->
<g id="edge106" class="edge">
<title>raw_99&#45;&gt;leaf_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7466.6488,-1653.238C7470.8229,-1535.7387 7493.8826,-886.606 7498.9957,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="7502.5008,-742.588 7499.3581,-732.4701 7495.5052,-742.3395 7502.5008,-742.588"/>
</g>
<!-- leaf_107 -->
<g id="node108" class="node">
<title>leaf_107</title>
<polygon fill="none" stroke="#c0c0c0" points="7692,-732.4011 7638,-732.4011 7638,-696.4011 7692,-696.4011 7692,-732.4011"/>
</g>
<!-- prespace_100&#45;&gt;leaf_107 -->
<g id="edge107" class="edge">
<title>prespace_100&#45;&gt;leaf_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7613.9923,-1653.238C7620.3762,-1535.7387 7655.644,-886.606 7663.464,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="7666.9705,-742.6452 7664.0183,-732.4701 7659.9809,-742.2654 7666.9705,-742.6452"/>
</g>
<!-- leaf_108 -->
<g id="node109" class="node">
<title>leaf_108</title>
<polygon fill="none" stroke="#c0c0c0" points="7764,-732.4011 7710,-732.4011 7710,-696.4011 7764,-696.4011 7764,-732.4011"/>
<text text-anchor="middle" x="7737" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">NULL</text>
</g>
<!-- literal_101&#45;&gt;leaf_108 -->
<g id="edge108" class="edge">
<title>literal_101&#45;&gt;leaf_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7723.2672,-1653.238C7724.9859,-1535.7387 7734.4811,-886.606 7736.5865,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="7740.089,-742.5202 7736.7357,-732.4701 7733.0897,-742.4178 7740.089,-742.5202"/>
</g>
<!-- leaf_109 -->
<g id="node110" class="node">
<title>leaf_109</title>
<polygon fill="none" stroke="#c0c0c0" points="7847.5,-734.3032 7782.5,-734.3032 7782.5,-694.499 7847.5,-694.499 7847.5,-734.3032"/>
<text text-anchor="middle" x="7815" y="-718.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> holes.</text>
</g>
<!-- raw_102&#45;&gt;leaf_109 -->
<g id="edge109" class="edge">
<title>raw_102&#45;&gt;leaf_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7813.0382,-1653.238C7813.2826,-1536.2512 7814.6283,-892.2595 7814.9369,-744.5848"/>
<polygon fill="#000000" stroke="#000000" points="7818.4371,-744.454 7814.9581,-734.4467 7811.4371,-744.4393 7818.4371,-744.454"/>
</g>
<!-- leaf_113 -->
<g id="node114" class="node">
<title>leaf_113</title>
<polygon fill="none" stroke="#c0c0c0" points="8008,-732.4011 7866,-732.4011 7866,-696.4011 8008,-696.4011 8008,-732.4011"/>
<text text-anchor="middle" x="7937" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">*** SQLite battery</text>
</g>
<!-- header_110&#45;&gt;leaf_113 -->
<g id="edge113" class="edge">
<title>header_110&#45;&gt;leaf_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7937,-1653.238C7937,-1535.7387 7937,-886.606 7937,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="7940.5001,-742.47 7937,-732.4701 7933.5001,-742.4701 7940.5001,-742.47"/>
</g>
<!-- raw_114 -->
<g id="node115" class="node">
<title>raw_114</title>
<ellipse fill="none" stroke="#000000" cx="8053" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="8053" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_111&#45;&gt;raw_114 -->
<g id="edge114" class="edge">
<title>prose_111&#45;&gt;raw_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8065.7519,-1653.238C8064.156,-1535.7387 8055.339,-886.606 8053.384,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="8056.881,-742.4216 8053.2454,-732.4701 8049.8817,-742.5167 8056.881,-742.4216"/>
</g>
<!-- leaf_116 -->
<g id="node117" class="node">
<title>leaf_116</title>
<polygon fill="none" stroke="#c0c0c0" points="8646,-1322.8032 8098,-1322.8032 8098,-105.999 8646,-105.999 8646,-1322.8032"/>
<text text-anchor="middle" x="8372" y="-1307.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.HISTORY_LIMIT = 1000</text>
<text text-anchor="middle" x="8372" y="-1276.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_repl_table = [[</text>
<text text-anchor="middle" x="8372" y="-1260.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS repl (</text>
<text text-anchor="middle" x="8372" y="-1245.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">line_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-1229.802" font-family="Inconsolata" font-size="14.00" fill="#000000">project TEXT,</text>
<text text-anchor="middle" x="8372" y="-1214.402" font-family="Inconsolata" font-size="14.00" fill="#000000">line TEXT,</text>
<text text-anchor="middle" x="8372" y="-1199.002" font-family="Inconsolata" font-size="14.00" fill="#000000">time DATETIME DEFAULT CURRENT_TIMESTAMP);</text>
<text text-anchor="middle" x="8372" y="-1183.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-1152.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_result_table = [[</text>
<text text-anchor="middle" x="8372" y="-1136.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS results (</text>
<text text-anchor="middle" x="8372" y="-1121.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">result_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-1106.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">line_id INTEGER,</text>
<text text-anchor="middle" x="8372" y="-1090.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">repr text NOT NULL,</text>
<text text-anchor="middle" x="8372" y="-1075.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">value blob,</text>
<text text-anchor="middle" x="8372" y="-1059.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">FOREIGN KEY (line_id)</text>
<text text-anchor="middle" x="8372" y="-1044.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;REFERENCES repl (line_id)</text>
<text text-anchor="middle" x="8372" y="-1029.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ON DELETE CASCADE);</text>
<text text-anchor="middle" x="8372" y="-1013.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-982.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_session_table = [[</text>
<text text-anchor="middle" x="8372" y="-966.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS sessions (</text>
<text text-anchor="middle" x="8372" y="-951.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">session_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-936.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">name TEXT,</text>
<text text-anchor="middle" x="8372" y="-920.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; These two are line_ids</text>
<text text-anchor="middle" x="8372" y="-905.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">start INTEGER NOT NULL,</text>
<text text-anchor="middle" x="8372" y="-889.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">end INTEGER,</text>
<text text-anchor="middle" x="8372" y="-874.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">test BOOLEAN,</text>
<text text-anchor="middle" x="8372" y="-859.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">commit TEXT;</text>
<text text-anchor="middle" x="8372" y="-843.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">)</text>
<text text-anchor="middle" x="8372" y="-828.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-796.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert_line_stmt = [[</text>
<text text-anchor="middle" x="8372" y="-781.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">INSERT INTO repl (project, line) VALUES (:project, :line);</text>
<text text-anchor="middle" x="8372" y="-766.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-734.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert_result_stmt = [[</text>
<text text-anchor="middle" x="8372" y="-719.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">INSERT INTO results (line_id, repr) VALUES (:line_id, :repr);</text>
<text text-anchor="middle" x="8372" y="-703.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-672.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_tables = [[</text>
<text text-anchor="middle" x="8372" y="-657.001" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT name FROM sqlite_master WHERE type=&#39;table&#39;;</text>
<text text-anchor="middle" x="8372" y="-641.601" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_recent = [[</text>
<text text-anchor="middle" x="8372" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT CAST (line_id AS REAL), line FROM repl</text>
<text text-anchor="middle" x="8372" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;WHERE project = %s</text>
<text text-anchor="middle" x="8372" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ORDER BY time</text>
<text text-anchor="middle" x="8372" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;DESC LIMIT %d;</text>
<text text-anchor="middle" x="8372" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-501.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_reprs = [[</text>
<text text-anchor="middle" x="8372" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT CAST (repl.line_id AS REAL), results.repr</text>
<text text-anchor="middle" x="8372" y="-471.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">FROM repl</text>
<text text-anchor="middle" x="8372" y="-455.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">LEFT OUTER JOIN results</text>
<text text-anchor="middle" x="8372" y="-440.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">ON repl.line_id = results.line_id</text>
<text text-anchor="middle" x="8372" y="-424.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">WHERE repl.project = &#39;%s&#39;</text>
<text text-anchor="middle" x="8372" y="-409.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">ORDER BY repl.time</text>
<text text-anchor="middle" x="8372" y="-394.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">DESC LIMIT %d;</text>
<text text-anchor="middle" x="8372" y="-378.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local home_dir = io.popen(&quot;echo $HOME&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local bridge_home = io.popen(&quot;echo $BRIDGE_HOME&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.bridge_home = bridge_home ~= &quot;&quot; and bridge_home</text>
<text text-anchor="middle" x="8372" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or home_dir .. &quot;/.bridge&quot;</text>
<text text-anchor="middle" x="8372" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.project = io.popen(&quot;pwd&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-222.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function has(table, name)</text>
<text text-anchor="middle" x="8372" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _,v in ipairs(table) do</text>
<text text-anchor="middle" x="8372" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if name == v then</text>
<text text-anchor="middle" x="8372" y="-176.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="8372" y="-160.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8372" y="-145.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="8372" y="-129.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return false</text>
<text text-anchor="middle" x="8372" y="-114.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_112&#45;&gt;leaf_116 -->
<g id="edge116" class="edge">
<title>codeblock_112&#45;&gt;leaf_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8287.6412,-1653.238C8291.7754,-1607.2275 8303.2345,-1479.6987 8316.4244,-1332.9064"/>
<polygon fill="#000000" stroke="#000000" points="8319.9272,-1333.0313 8317.3363,-1322.7581 8312.9553,-1332.4047 8319.9272,-1333.0313"/>
</g>
<!-- leaf_115 -->
<g id="node116" class="node">
<title>leaf_115</title>
<polygon fill="none" stroke="#c0c0c0" points="8009,-53.1 7955,-53.1 7955,-17.1 8009,-17.1 8009,-53.1"/>
</g>
<!-- raw_114&#45;&gt;leaf_115 -->
<g id="edge115" class="edge">
<title>raw_114&#45;&gt;leaf_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8054.4943,-696.331C8060.1179,-621.9182 8076.7751,-332.4653 8017,-106.2001 8012.9563,-90.8935 8005.4763,-74.982 7998.4661,-62.1019"/>
<polygon fill="#000000" stroke="#000000" points="8001.4663,-60.2967 7993.5006,-53.3111 7995.3714,-63.7394 8001.4663,-60.2967"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="8820,-732.4011 8664,-732.4011 8664,-696.4011 8820,-696.4011 8820,-732.4011"/>
<text text-anchor="middle" x="8742" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:load()</text>
</g>
<!-- header_117&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>header_117&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8732.1908,-1653.238C8733.4185,-1535.7387 8740.2008,-886.606 8741.7046,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="8745.2064,-742.5061 8741.8112,-732.4701 8738.2068,-742.4329 8745.2064,-742.5061"/>
</g>
<!-- raw_122 -->
<g id="node123" class="node">
<title>raw_122</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="8865" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_118&#45;&gt;raw_122 -->
<g id="edge122" class="edge">
<title>prose_118&#45;&gt;raw_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8865,-1653.238C8865,-1535.7387 8865,-886.606 8865,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="8868.5001,-742.47 8865,-732.4701 8861.5001,-742.4701 8868.5001,-742.47"/>
</g>
<!-- raw_124 -->
<g id="node125" class="node">
<title>raw_124</title>
<ellipse fill="none" stroke="#000000" cx="8937" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="8937" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_119&#45;&gt;raw_124 -->
<g id="edge124" class="edge">
<title>prose_119&#45;&gt;raw_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8946.8092,-1653.238C8945.5815,-1535.7387 8938.7992,-886.606 8937.2954,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="8940.7932,-742.4329 8937.1888,-732.4701 8933.7936,-742.5061 8940.7932,-742.4329"/>
</g>
<!-- leaf_126 -->
<g id="node127" class="node">
<title>leaf_126</title>
<polygon fill="none" stroke="#c0c0c0" points="9460,-1080.2026 8982,-1080.2026 8982,-348.5996 9460,-348.5996 9460,-1080.2026"/>
<text text-anchor="middle" x="9221" y="-1065.1019" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.load(historian)</text>
<text text-anchor="middle" x="9221" y="-1049.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local conn = sql.open(historian.bridge_home)</text>
<text text-anchor="middle" x="9221" y="-1034.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.conn = conn</text>
<text text-anchor="middle" x="9221" y="-1018.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Set up bridge tables</text>
<text text-anchor="middle" x="9221" y="-1003.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn.pragma.foreign_keys(true)</text>
<text text-anchor="middle" x="9221" y="-988.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn:exec(create_result_table)</text>
<text text-anchor="middle" x="9221" y="-972.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn:exec(create_repl_table)</text>
<text text-anchor="middle" x="9221" y="-957.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Create insert prepared statements</text>
<text text-anchor="middle" x="9221" y="-941.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.insert_line_stmt = conn:prepare(insert_line_stmt)</text>
<text text-anchor="middle" x="9221" y="-926.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.insert_result_stmt = conn:prepare(insert_result_stmt)</text>
<text text-anchor="middle" x="9221" y="-911.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Retrieve history</text>
<text text-anchor="middle" x="9221" y="-895.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local pop_str = sql.format(get_recent, historian.project,</text>
<text text-anchor="middle" x="9221" y="-880.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.HISTORY_LIMIT)</text>
<text text-anchor="middle" x="9221" y="-864.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local repl_val, repl_row = sql.pexec(conn, pop_str, &quot;i&quot;)</text>
<text text-anchor="middle" x="9221" y="-849.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local res_str = sql.format(get_reprs, historian.project,</text>
<text text-anchor="middle" x="9221" y="-834.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.HISTORY_LIMIT * 2)</text>
<text text-anchor="middle" x="9221" y="-818.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local res_val, res_row = sql.pexec(conn, res_str, &quot;i&quot;)</text>
<text text-anchor="middle" x="9221" y="-803.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if repl_val and res_val then</text>
<text text-anchor="middle" x="9221" y="-787.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local lines = reverse(repl_val[2])</text>
<text text-anchor="middle" x="9221" y="-772.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local line_ids = reverse(repl_val[1])</text>
<text text-anchor="middle" x="9221" y="-757.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local repl_map = {}</text>
<text text-anchor="middle" x="9221" y="-741.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i, v in ipairs(lines) do</text>
<text text-anchor="middle" x="9221" y="-726.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local buf = Txtbuf(v)</text>
<text text-anchor="middle" x="9221" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian[i] = buf</text>
<text text-anchor="middle" x="9221" y="-695.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repl_map[line_ids[i]] = buf</text>
<text text-anchor="middle" x="9221" y="-680.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9221" y="-664.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.cursor = #historian</text>
<text text-anchor="middle" x="9221" y="-649.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; reuse line_id var for foreign keys</text>
<text text-anchor="middle" x="9221" y="-633.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;line_ids = res_val[1]</text>
<text text-anchor="middle" x="9221" y="-618.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local reprs = res_val[2]</text>
<text text-anchor="middle" x="9221" y="-603.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; This is keyed by txtbuf with a string value.</text>
<text text-anchor="middle" x="9221" y="-587.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local result_map = {}</text>
<text text-anchor="middle" x="9221" y="-572.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, #reprs do</text>
<text text-anchor="middle" x="9221" y="-556.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local buf = repl_map[line_ids[i]]</text>
<text text-anchor="middle" x="9221" y="-541.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if buf then</text>
<text text-anchor="middle" x="9221" y="-526.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local result = result_map[buf] or {frozen = true}</text>
<text text-anchor="middle" x="9221" y="-510.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result[#result + 1] = reprs[i]</text>
<text text-anchor="middle" x="9221" y="-495.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result.n = #result &#45;&#45; for compat with nil in live use</text>
<text text-anchor="middle" x="9221" y="-479.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result_map[buf] = result</text>
<text text-anchor="middle" x="9221" y="-464.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9221" y="-449.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9221" y="-433.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.results = result_map</text>
<text text-anchor="middle" x="9221" y="-418.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="9221" y="-402.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.results = {}</text>
<text text-anchor="middle" x="9221" y="-387.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.cursor = 0</text>
<text text-anchor="middle" x="9221" y="-372.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="9221" y="-356.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_120&#45;&gt;leaf_126 -->
<g id="edge126" class="edge">
<title>codeblock_120&#45;&gt;leaf_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9154.2977,-1653.238C9159.3138,-1582.6362 9177.9671,-1320.0909 9194.2766,-1090.5336"/>
<polygon fill="#000000" stroke="#000000" points="9197.7848,-1090.5412 9195.0024,-1080.3183 9190.8024,-1090.0451 9197.7848,-1090.5412"/>
</g>
<!-- leaf_123 -->
<g id="node124" class="node">
<title>leaf_123</title>
<polygon fill="none" stroke="#c0c0c0" points="8540.5,-63.0015 8027.5,-63.0015 8027.5,-7.1986 8540.5,-7.1986 8540.5,-63.0015"/>
<text text-anchor="middle" x="8284" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Brings up the project history and (eventually) results and user config.</text>
</g>
<!-- raw_122&#45;&gt;leaf_123 -->
<g id="edge123" class="edge">
<title>raw_122&#45;&gt;leaf_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8866.843,-696.4357C8875.7893,-605.1975 8911.0142,-194.0557 8829,-106.2001 8786.1908,-60.3419 8611.2068,-78.3188 8549,-70.2001 8533.9946,-68.2417 8518.5124,-66.2128 8502.9183,-64.163"/>
<polygon fill="#000000" stroke="#000000" points="8503.0296,-60.6476 8492.6586,-62.8135 8502.1167,-67.5878 8503.0296,-60.6476"/>
</g>
<!-- leaf_125 -->
<g id="node126" class="node">
<title>leaf_125</title>
<polygon fill="none" stroke="#c0c0c0" points="9057.5,-62.4005 8558.5,-62.4005 8558.5,-7.7996 9057.5,-7.7996 9057.5,-62.4005"/>
<text text-anchor="middle" x="8808" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">Most of the complexity serves to make a simple key/value relationship</text>
<text text-anchor="middle" x="8808" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">between the regenerated txtbufs and their associated result history.</text>
</g>
<!-- raw_124&#45;&gt;leaf_125 -->
<g id="edge125" class="edge">
<title>raw_124&#45;&gt;leaf_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8940.9871,-696.5579C8957.1067,-620.0268 9011.47,-314.0125 8901,-106.2001 8893.1789,-91.4874 8880.8291,-78.9061 8867.6533,-68.6"/>
<polygon fill="#000000" stroke="#000000" points="8869.4972,-65.6105 8859.3759,-62.4783 8865.3349,-71.2386 8869.4972,-65.6105"/>
</g>
<!-- leaf_133 -->
<g id="node134" class="node">
<title>leaf_133</title>
<polygon fill="none" stroke="#c0c0c0" points="9991.5,-732.4011 9772.5,-732.4011 9772.5,-696.4011 9991.5,-696.4011 9991.5,-732.4011"/>
<text text-anchor="middle" x="9882" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:persist(txtbuf)</text>
</g>
<!-- header_127&#45;&gt;leaf_133 -->
<g id="edge133" class="edge">
<title>header_127&#45;&gt;leaf_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9882,-1653.238C9882,-1535.7387 9882,-886.606 9882,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="9885.5001,-742.47 9882,-732.4701 9878.5001,-742.4701 9885.5001,-742.47"/>
</g>
<!-- raw_134 -->
<g id="node135" class="node">
<title>raw_134</title>
<ellipse fill="none" stroke="#000000" cx="10041" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="10041" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_128&#45;&gt;raw_134 -->
<g id="edge134" class="edge">
<title>prose_128&#45;&gt;raw_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10045.9046,-1653.238C10045.2908,-1535.7387 10041.8996,-886.606 10041.1477,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="10044.6467,-742.4516 10041.0944,-732.4701 10037.6468,-742.4882 10044.6467,-742.4516"/>
</g>
<!-- raw_136 -->
<g id="node137" class="node">
<title>raw_136</title>
<ellipse fill="none" stroke="#000000" cx="10120" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="10120" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_129&#45;&gt;raw_136 -->
<g id="edge136" class="edge">
<title>prose_129&#45;&gt;raw_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10127.8473,-1653.238C10126.8652,-1535.7387 10121.4394,-886.606 10120.2363,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="10123.7346,-742.4404 10120.151,-732.4701 10116.7348,-742.499 10123.7346,-742.4404"/>
</g>
<!-- raw_138 -->
<g id="node139" class="node">
<title>raw_138</title>
<ellipse fill="none" stroke="#000000" cx="10334" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="10334" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_138 -->
<g id="edge138" class="edge">
<title>prose_130&#45;&gt;raw_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10582.6059,-1653.9015C10556.1914,-1603.669 10480.6172,-1454.736 10441,-1322.6022 10375.6695,-1104.7078 10345.1311,-830.2105 10336.5899,-742.6136"/>
<polygon fill="#000000" stroke="#000000" points="10340.051,-742.0397 10335.6137,-732.4188 10333.0829,-742.707 10340.051,-742.0397"/>
</g>
<!-- prespace_139 -->
<g id="node140" class="node">
<title>prespace_139</title>
<ellipse fill="none" stroke="#000000" cx="10496" cy="-714.4011" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10496" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_139 -->
<g id="edge139" class="edge">
<title>prose_130&#45;&gt;prespace_139</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10589.7749,-1653.3573C10583.4707,-1601.6927 10565.0995,-1449.3539 10552,-1322.6022 10528.9239,-1099.3153 10505.7186,-829.414 10498.3778,-742.6816"/>
<polygon fill="#000000" stroke="#000000" points="10501.8535,-742.2461 10497.5242,-732.5762 10494.8784,-742.8353 10501.8535,-742.2461"/>
</g>
<!-- literal_140 -->
<g id="node141" class="node">
<title>literal_140</title>
<ellipse fill="none" stroke="#000000" cx="10592" cy="-714.4011" rx="31.481" ry="18"/>
<text text-anchor="middle" x="10592" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_140 -->
<g id="edge140" class="edge">
<title>prose_130&#45;&gt;literal_140</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10592,-1653.238C10592,-1535.7387 10592,-886.606 10592,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="10595.5001,-742.47 10592,-732.4701 10588.5001,-742.4701 10595.5001,-742.47"/>
</g>
<!-- raw_141 -->
<g id="node142" class="node">
<title>raw_141</title>
<ellipse fill="none" stroke="#000000" cx="10668" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="10668" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_141 -->
<g id="edge141" class="edge">
<title>prose_130&#45;&gt;raw_141</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10594.4348,-1653.3772C10601.2907,-1601.7651 10620.9742,-1449.5511 10632,-1322.6022 10651.3751,-1099.5202 10663.3239,-829.4849 10666.8794,-742.7"/>
<polygon fill="#000000" stroke="#000000" points="10670.3813,-742.722 10667.2895,-732.5883 10663.3871,-742.4383 10670.3813,-742.722"/>
</g>
<!-- prespace_142 -->
<g id="node143" class="node">
<title>prespace_142</title>
<ellipse fill="none" stroke="#000000" cx="10759" cy="-714.4011" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10759" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_142 -->
<g id="edge142" class="edge">
<title>prose_130&#45;&gt;prespace_142</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10589.0036,-1653.5555C10581.4532,-1602.1907 10566.6916,-1452.2907 10633,-1358.6022 10653.4392,-1329.7232 10684.144,-1351.8851 10704,-1322.6022 10831.6341,-1134.3716 10783.9904,-834.5631 10765.1929,-742.3205"/>
<polygon fill="#000000" stroke="#000000" points="10768.5826,-741.4308 10763.1084,-732.3598 10761.731,-742.8647 10768.5826,-741.4308"/>
</g>
<!-- literal_143 -->
<g id="node144" class="node">
<title>literal_143</title>
<ellipse fill="none" stroke="#000000" cx="10855" cy="-714.4011" rx="31.481" ry="18"/>
<text text-anchor="middle" x="10855" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_143 -->
<g id="edge143" class="edge">
<title>prose_130&#45;&gt;literal_143</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10587.9562,-1653.3424C10577.2639,-1600.09 10554.188,-1442.7989 10633,-1358.6022 10689.0506,-1298.7219 10759.8625,-1384.2174 10814,-1322.6022 10890.651,-1235.3637 10866.0116,-850.7189 10857.417,-742.7006"/>
<polygon fill="#000000" stroke="#000000" points="10860.8926,-742.2567 10856.593,-732.5735 10853.9156,-742.8244 10860.8926,-742.2567"/>
</g>
<!-- raw_144 -->
<g id="node145" class="node">
<title>raw_144</title>
<ellipse fill="none" stroke="#000000" cx="10931" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="10931" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_144 -->
<g id="edge144" class="edge">
<title>prose_130&#45;&gt;raw_144</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10587.8017,-1653.4977C10576.4997,-1599.9944 10551.5137,-1440.6001 10633,-1358.6022 10715.8518,-1275.2301 10815.1668,-1408.869 10895,-1322.6022 10973.8349,-1237.4141 10943.9604,-851.3042 10933.8269,-742.8259"/>
<polygon fill="#000000" stroke="#000000" points="10937.2907,-742.2781 10932.858,-732.6551 10930.3223,-742.942 10937.2907,-742.2781"/>
</g>
<!-- raw_152 -->
<g id="node153" class="node">
<title>raw_152</title>
<ellipse fill="none" stroke="#000000" cx="11003" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="11003" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_131&#45;&gt;raw_152 -->
<g id="edge152" class="edge">
<title>prose_131&#45;&gt;raw_152</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10669.8909,-1653.5113C10658.8483,-1600.046 10634.5933,-1440.7469 10716,-1358.6022 10795.3285,-1278.5545 10890.6997,-1405.5413 10967,-1322.6022 11045.5831,-1237.1817 11015.8885,-851.2379 11005.8116,-742.8117"/>
<polygon fill="#000000" stroke="#000000" points="11009.2761,-742.2709 11004.8479,-732.6459 11002.3073,-742.9316 11009.2761,-742.2709"/>
</g>
<!-- leaf_154 -->
<g id="node155" class="node">
<title>leaf_154</title>
<polygon fill="none" stroke="#c0c0c0" points="11554,-957.4021 11048,-957.4021 11048,-471.4002 11554,-471.4002 11554,-957.4021"/>
<text text-anchor="middle" x="11301" y="-942.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.persist(historian, txtbuf, results)</text>
<text text-anchor="middle" x="11301" y="-926.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local lb = tostring(txtbuf)</text>
<text text-anchor="middle" x="11301" y="-911.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if lb ~= &quot;&quot; then</text>
<text text-anchor="middle" x="11301" y="-896.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.insert_line_stmt:bindkv { project = historian.project,</text>
<text text-anchor="middle" x="11301" y="-880.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;line &#160;&#160;&#160;= lb }</text>
<text text-anchor="middle" x="11301" y="-865.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local err = historian.insert_line_stmt:step()</text>
<text text-anchor="middle" x="11301" y="-849.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not err then</text>
<text text-anchor="middle" x="11301" y="-834.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_line_stmt:clearbind():reset()</text>
<text text-anchor="middle" x="11301" y="-819.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="11301" y="-803.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error(err)</text>
<text text-anchor="middle" x="11301" y="-788.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11301" y="-772.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local line_id = sql.lastRowId(historian.conn)</text>
<text text-anchor="middle" x="11301" y="-757.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if results and type(results) == &quot;table&quot; then</text>
<text text-anchor="middle" x="11301" y="-742.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _,v in ipairs(results) do</text>
<text text-anchor="middle" x="11301" y="-726.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; insert result repr</text>
<text text-anchor="middle" x="11301" y="-711.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; tostring() just for compactness</text>
<text text-anchor="middle" x="11301" y="-695.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_result_stmt:bindkv { line_id = line_id,</text>
<text text-anchor="middle" x="11301" y="-680.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repr = color.ts(v) }</text>
<text text-anchor="middle" x="11301" y="-665.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;err = historian.insert_result_stmt:step()</text>
<text text-anchor="middle" x="11301" y="-649.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not err then</text>
<text text-anchor="middle" x="11301" y="-634.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_result_stmt:clearbind():reset()</text>
<text text-anchor="middle" x="11301" y="-618.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11301" y="-603.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11301" y="-588.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11301" y="-556.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return true</text>
<text text-anchor="middle" x="11301" y="-541.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="11301" y="-525.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; A blank line can have no results and is uninteresting.</text>
<text text-anchor="middle" x="11301" y="-510.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="11301" y="-495.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11301" y="-479.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_132&#45;&gt;leaf_154 -->
<g id="edge154" class="edge">
<title>codeblock_132&#45;&gt;leaf_154</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10811.8871,-1653.2594C10812.5875,-1599.7787 10822.1841,-1441.9231 10908,-1358.6022 10951.3207,-1316.541 10993.4511,-1362.2396 11039,-1322.6022 11143.9199,-1231.299 11208.1856,-1090.4721 11246.7904,-967.3152"/>
<polygon fill="#000000" stroke="#000000" points="11250.1448,-968.3145 11249.7556,-957.7268 11243.4573,-966.2463 11250.1448,-968.3145"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="9350.5,-63.0015 9075.5,-63.0015 9075.5,-7.1986 9350.5,-7.1986 9350.5,-63.0015"/>
<text text-anchor="middle" x="9213" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Persists a line and results to store.</text>
</g>
<!-- raw_134&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>raw_134&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10042.7999,-696.3109C10051.5124,-604.4562 10085.5006,-190.7553 10000,-106.2001 9949.3581,-56.1182 9430.4731,-80.5117 9360,-70.2001 9349.9662,-68.7319 9339.6115,-66.9071 9329.2616,-64.8667"/>
<polygon fill="#000000" stroke="#000000" points="9329.8478,-61.4143 9319.3506,-62.849 9328.4514,-68.2736 9329.8478,-61.4143"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="9931,-70.3004 9369,-70.3004 9369,.1003 9931,.1003 9931,-70.3004"/>
<text text-anchor="middle" x="9650" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">The hooks are in place to persist the results. I&#39;m starting with a string</text>
<text text-anchor="middle" x="9650" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">representation; the goal is to provide the sense of persistence across</text>
<text text-anchor="middle" x="9650" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">sessions, and supplement that over time with better and better approximations.</text>
</g>
<!-- raw_136&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>raw_136&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10125.5512,-696.7584C10149.6193,-616.4473 10236.7435,-281.7853 10077,-106.2001 10070.2356,-98.7649 9994.5282,-85.1239 9908.6923,-71.7636"/>
<polygon fill="#000000" stroke="#000000" points="9909.1441,-68.292 9898.7263,-70.2206 9908.0729,-75.2095 9909.1441,-68.292"/>
</g>
<!-- leaf_145 -->
<g id="node146" class="node">
<title>leaf_145</title>
<polygon fill="none" stroke="#c0c0c0" points="10469,-62.4005 9949,-62.4005 9949,-7.7996 10469,-7.7996 10469,-62.4005"/>
<text text-anchor="middle" x="10209" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">To really nail it down will require semantic analysis and hence thorough</text>
<text text-anchor="middle" x="10209" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">parsing. &#160;General&#45;purpose persistence tools belong in</text>
</g>
<!-- raw_138&#45;&gt;leaf_145 -->
<g id="edge145" class="edge">
<title>raw_138&#45;&gt;leaf_145</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10330.6566,-696.2315C10313.9084,-605.2151 10239.0239,-198.2624 10215.8545,-72.35"/>
<polygon fill="#000000" stroke="#000000" points="10219.2775,-71.6119 10214.0255,-62.4105 10212.3931,-72.8788 10219.2775,-71.6119"/>
</g>
<!-- leaf_146 -->
<g id="node147" class="node">
<title>leaf_146</title>
<polygon fill="none" stroke="#c0c0c0" points="10541,-53.1 10487,-53.1 10487,-17.1 10541,-17.1 10541,-53.1"/>
<text text-anchor="middle" x="10514" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_139&#45;&gt;leaf_146 -->
<g id="edge146" class="edge">
<title>prespace_139&#45;&gt;leaf_146</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10496.4815,-696.2315C10498.9539,-602.9235 10510.2249,-177.5691 10513.2506,-63.3832"/>
<polygon fill="#000000" stroke="#000000" points="10516.7508,-63.4152 10513.5171,-53.3259 10509.7533,-63.2297 10516.7508,-63.4152"/>
</g>
<!-- leaf_147 -->
<g id="node148" class="node">
<title>leaf_147</title>
<polygon fill="none" stroke="#c0c0c0" points="10624.5,-53.1 10559.5,-53.1 10559.5,-17.1 10624.5,-17.1 10624.5,-53.1"/>
<text text-anchor="middle" x="10592" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlayer</text>
</g>
<!-- literal_140&#45;&gt;leaf_147 -->
<g id="edge147" class="edge">
<title>literal_140&#45;&gt;leaf_147</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10592,-696.2315C10592,-602.9235 10592,-177.5691 10592,-63.3832"/>
<polygon fill="#000000" stroke="#000000" points="10595.5001,-63.3259 10592,-53.3259 10588.5001,-63.326 10595.5001,-63.3259"/>
</g>
<!-- leaf_148 -->
<g id="node149" class="node">
<title>leaf_148</title>
<polygon fill="none" stroke="#c0c0c0" points="10911,-54.4006 10643,-54.4006 10643,-15.7995 10911,-15.7995 10911,-54.4006"/>
<text text-anchor="middle" x="10777" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">, which will</text>
<text text-anchor="middle" x="10777" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">merge with our increasingly&#45;modified</text>
</g>
<!-- raw_141&#45;&gt;leaf_148 -->
<g id="edge148" class="edge">
<title>raw_141&#45;&gt;leaf_148</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10664.5692,-696.3672C10650.9905,-620.3018 10606.355,-319.7566 10704,-106.2001 10711.9946,-88.7154 10726.3563,-73.263 10740.2389,-61.2682"/>
<polygon fill="#000000" stroke="#000000" points="10742.8173,-63.6786 10748.3057,-54.6162 10738.3638,-58.278 10742.8173,-63.6786"/>
</g>
<!-- leaf_149 -->
<g id="node150" class="node">
<title>leaf_149</title>
<polygon fill="none" stroke="#c0c0c0" points="10983,-53.1 10929,-53.1 10929,-17.1 10983,-17.1 10983,-53.1"/>
<text text-anchor="middle" x="10956" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_142&#45;&gt;leaf_149 -->
<g id="edge149" class="edge">
<title>prespace_142&#45;&gt;leaf_149</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10754.3324,-696.2244C10734.9818,-616.3605 10668.7094,-292.316 10815,-106.2001 10845.4865,-67.4141 10877.9813,-96.0499 10920,-70.2001 10924.5306,-67.4129 10928.9441,-63.9638 10933.0395,-60.3258"/>
<polygon fill="#000000" stroke="#000000" points="10935.661,-62.6618 10940.4704,-53.2215 10930.8236,-57.6021 10935.661,-62.6618"/>
</g>
<!-- leaf_150 -->
<g id="node151" class="node">
<title>leaf_150</title>
<polygon fill="none" stroke="#c0c0c0" points="11059,-53.1 11001,-53.1 11001,-17.1 11059,-17.1 11059,-53.1"/>
<text text-anchor="middle" x="11030" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlite</text>
</g>
<!-- literal_143&#45;&gt;leaf_150 -->
<g id="edge150" class="edge">
<title>literal_143&#45;&gt;leaf_150</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10853.6392,-696.1628C10847.2341,-605.3385 10823.3008,-202.3898 10895,-106.2001 10922.4818,-69.3312 10952.8107,-94.2576 10992,-70.2001 10996.5708,-67.3942 11001.0769,-63.9873 11005.2999,-60.4126"/>
<polygon fill="#000000" stroke="#000000" points="11007.9389,-62.7453 11013.0142,-53.4451 11003.247,-57.5504 11007.9389,-62.7453"/>
</g>
<!-- leaf_151 -->
<g id="node152" class="node">
<title>leaf_151</title>
<polygon fill="none" stroke="#c0c0c0" points="11163,-53.1 11077,-53.1 11077,-17.1 11163,-17.1 11163,-53.1"/>
<text text-anchor="middle" x="11120" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> bindings.</text>
</g>
<!-- raw_144&#45;&gt;leaf_151 -->
<g id="edge151" class="edge">
<title>raw_144&#45;&gt;leaf_151</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10929.4835,-696.1523C10922.3084,-605.2768 10895.0215,-202.1196 10967,-106.2001 10995.603,-68.0834 11025.4707,-91.7006 11068,-70.2001 11074.5491,-66.8892 11081.2528,-62.8899 11087.5761,-58.7937"/>
<polygon fill="#000000" stroke="#000000" points="11089.5563,-61.68 11095.9127,-53.2037 11085.6578,-55.866 11089.5563,-61.68"/>
</g>
<!-- leaf_153 -->
<g id="node154" class="node">
<title>leaf_153</title>
<polygon fill="none" stroke="#c0c0c0" points="11715,-62.4005 11181,-62.4005 11181,-7.7996 11715,-7.7996 11715,-62.4005"/>
<text text-anchor="middle" x="11448" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">Medium&#45;term goal is to hash any Lua object in a way that will resolve to a</text>
<text text-anchor="middle" x="11448" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">common value for any identical semantics.</text>
</g>
<!-- raw_152&#45;&gt;leaf_153 -->
<g id="edge153" class="edge">
<title>raw_152&#45;&gt;leaf_153</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11001.2029,-696.2024C10992.5778,-604.699 10959.0375,-195.75 11039,-106.2001 11052.1311,-91.4946 11128.7542,-76.3711 11212.196,-63.8733"/>
<polygon fill="#000000" stroke="#000000" points="11212.7565,-67.3285 11222.1359,-62.4013 11211.731,-60.404 11212.7565,-67.3285"/>
</g>
<!-- leaf_158 -->
<g id="node159" class="node">
<title>leaf_158</title>
<polygon fill="none" stroke="#c0c0c0" points="11108.5,-1689.5027 10917.5,-1689.5027 10917.5,-1653.5027 11108.5,-1653.5027 11108.5,-1689.5027"/>
<text text-anchor="middle" x="11013" y="-1668.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">** Historian:search(frag)</text>
</g>
<!-- header_155&#45;&gt;leaf_158 -->
<g id="edge158" class="edge">
<title>header_155&#45;&gt;leaf_158</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11008.2181,-2067.9263C11009.0043,-2002.7433 11011.698,-1779.4405 11012.6573,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="11016.1598,-1699.7165 11012.7808,-1689.675 11009.1603,-1699.632 11016.1598,-1699.7165"/>
</g>
<!-- raw_159 -->
<g id="node160" class="node">
<title>raw_159</title>
<ellipse fill="none" stroke="#000000" cx="11162" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="11162" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_156&#45;&gt;raw_159 -->
<g id="edge159" class="edge">
<title>prose_156&#45;&gt;raw_159</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11165.8256,-2067.9263C11165.1965,-2002.7433 11163.0416,-1779.4405 11162.2741,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="11165.7718,-1699.6407 11162.1754,-1689.675 11158.7721,-1699.7083 11165.7718,-1699.6407"/>
</g>
<!-- leaf_161 -->
<g id="node162" class="node">
<title>leaf_161</title>
<polygon fill="none" stroke="#c0c0c0" points="11762.5,-1984.3039 11207.5,-1984.3039 11207.5,-1358.7015 11762.5,-1358.7015 11762.5,-1984.3039"/>
<text text-anchor="middle" x="11485" y="-1969.2033" font-family="Inconsolata" font-size="14.00" fill="#000000">local P, match = L.P, L.match</text>
<text text-anchor="middle" x="11485" y="-1937.8033" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; second_best is broke and I don&#39;t know why</text>
<text text-anchor="middle" x="11485" y="-1922.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; also this fails on a single key search &gt;.&lt;</text>
<text text-anchor="middle" x="11485" y="-1907.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">local function fuzz_patt(frag)</text>
<text text-anchor="middle" x="11485" y="-1891.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;frag = type(frag) == &quot;string&quot; and codepoints(frag) or frag</text>
<text text-anchor="middle" x="11485" y="-1876.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt = &#160;&#160;&#160;&#160;&#160;&#160;&#160;(P(1) &#45; P(frag[1]))^0</text>
<text text-anchor="middle" x="11485" y="-1860.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = 1 , #frag &#45; 1 do</text>
<text text-anchor="middle" x="11485" y="-1845.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local v = frag[i]</text>
<text text-anchor="middle" x="11485" y="-1830.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;patt = patt * (P(v) * (P(1) &#45; P(frag[i + 1]))^0)</text>
<text text-anchor="middle" x="11485" y="-1814.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11485" y="-1799.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;patt = patt * P(frag[#frag])</text>
<text text-anchor="middle" x="11485" y="-1783.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return patt</text>
<text text-anchor="middle" x="11485" y="-1768.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="11485" y="-1737.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.search(historian, frag)</text>
<text text-anchor="middle" x="11485" y="-1721.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local collection = {}</text>
<text text-anchor="middle" x="11485" y="-1706.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local best = true</text>
<text text-anchor="middle" x="11485" y="-1690.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt = fuzz_patt(frag)</text>
<text text-anchor="middle" x="11485" y="-1675.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = #historian, 1, &#45;1 do</text>
<text text-anchor="middle" x="11485" y="-1660.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local score = match(patt, tostring(historian[i]))</text>
<text text-anchor="middle" x="11485" y="-1644.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if score then</text>
<text text-anchor="middle" x="11485" y="-1629.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collection[#collection + 1] = tostring(historian[i])</text>
<text text-anchor="middle" x="11485" y="-1613.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11485" y="-1598.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11485" y="-1583.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if #collection == 0 then</text>
<text text-anchor="middle" x="11485" y="-1567.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; try the transpose</text>
<text text-anchor="middle" x="11485" y="-1552.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;best = false</text>
<text text-anchor="middle" x="11485" y="-1536.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local slip = sub(frag, 1, &#45;3) .. sub(frag, &#45;1, &#45;1) .. sub(frag, &#45;2, &#45;2)</text>
<text text-anchor="middle" x="11485" y="-1521.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local second = fuzz_patt(slip)</text>
<text text-anchor="middle" x="11485" y="-1506.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = #historian, 1, &#45;1 do</text>
<text text-anchor="middle" x="11485" y="-1490.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local score = match(second, tostring(historian[i]))</text>
<text text-anchor="middle" x="11485" y="-1475.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if score then</text>
<text text-anchor="middle" x="11485" y="-1459.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collection[#collection + 1] = tostring(historian[i])</text>
<text text-anchor="middle" x="11485" y="-1444.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11485" y="-1429.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11485" y="-1413.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11485" y="-1382.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return collection, best</text>
<text text-anchor="middle" x="11485" y="-1366.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_157&#45;&gt;leaf_161 -->
<g id="edge161" class="edge">
<title>codeblock_157&#45;&gt;leaf_161</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11397.0123,-2067.9263C11400.6167,-2051.687 11406.3993,-2025.6336 11413.3241,-1994.4343"/>
<polygon fill="#000000" stroke="#000000" points="11416.7587,-1995.1125 11415.5087,-1984.5917 11409.925,-1993.5957 11416.7587,-1995.1125"/>
</g>
<!-- leaf_160 -->
<g id="node161" class="node">
<title>leaf_160</title>
<polygon fill="none" stroke="#c0c0c0" points="11626,-732.4011 11572,-732.4011 11572,-696.4011 11626,-696.4011 11626,-732.4011"/>
</g>
<!-- raw_159&#45;&gt;leaf_160 -->
<g id="edge160" class="edge">
<title>raw_159&#45;&gt;leaf_160</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11157.3222,-1653.3978C11144.63,-1599.6152 11115.756,-1439.5215 11198,-1358.6022 11256.0985,-1301.4394 11506.5078,-1381.3528 11563,-1322.6022 11721.451,-1157.8164 11638.0198,-837.7794 11608.1847,-742.0783"/>
<polygon fill="#000000" stroke="#000000" points="11611.5146,-741 11605.1512,-732.529 11604.8431,-743.1193 11611.5146,-741"/>
</g>
<!-- leaf_167 -->
<g id="node168" class="node">
<title>leaf_167</title>
<polygon fill="none" stroke="#c0c0c0" points="11929.5,-1689.5027 11780.5,-1689.5027 11780.5,-1653.5027 11929.5,-1653.5027 11929.5,-1689.5027"/>
<text text-anchor="middle" x="11855" y="-1668.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">** Historian:prev()</text>
</g>
<!-- header_162&#45;&gt;leaf_167 -->
<g id="edge167" class="edge">
<title>header_162&#45;&gt;leaf_167</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11864.5639,-2067.9263C11862.9913,-2002.7433 11857.604,-1779.4405 11855.6854,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="11859.1787,-1699.5877 11855.4384,-1689.675 11852.1807,-1699.7565 11859.1787,-1699.5877"/>
</g>
<!-- raw_168 -->
<g id="node169" class="node">
<title>raw_168</title>
<ellipse fill="none" stroke="#000000" cx="11975" cy="-1671.5027" rx="27" ry="18"/>
<text text-anchor="middle" x="11975" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_163&#45;&gt;raw_168 -->
<g id="edge168" class="edge">
<title>prose_163&#45;&gt;raw_168</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12033.9694,-2068.2344C12027.3694,-2048.1222 12016.9388,-2014.2686 12011,-1984.4033 11990.3535,-1880.5765 11980.3463,-1754.842 11976.6942,-1699.7103"/>
<polygon fill="#000000" stroke="#000000" points="11980.182,-1699.4074 11976.0472,-1689.6527 11973.1965,-1699.8568 11980.182,-1699.4074"/>
</g>
<!-- leaf_170 -->
<g id="node171" class="node">
<title>leaf_170</title>
<polygon fill="none" stroke="#c0c0c0" points="12400,-1772.8831 12020,-1772.8831 12020,-1570.1224 12400,-1570.1224 12400,-1772.8831"/>
<text text-anchor="middle" x="12210" y="-1757.7429" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.prev(historian)</text>
<text text-anchor="middle" x="12210" y="-1742.3428" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if historian.cursor == 0 or #historian == 0 then</text>
<text text-anchor="middle" x="12210" y="-1726.9428" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Txtbuf()</text>
<text text-anchor="middle" x="12210" y="-1711.5428" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12210" y="-1696.1428" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local Δ = historian.cursor &gt; 1 and 1 or 0</text>
<text text-anchor="middle" x="12210" y="-1677.3827" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local txtbuf = historian[historian.cursor &#45; Δ]</text>
<text text-anchor="middle" x="12210" y="-1658.6227" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = 1</text>
<text text-anchor="middle" x="12210" y="-1643.2227" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local result = historian.results[txtbuf]</text>
<text text-anchor="middle" x="12210" y="-1627.8227" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = historian.cursor &#45; Δ</text>
<text text-anchor="middle" x="12210" y="-1609.0627" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = #txtbuf.lines[txtbuf.cur_row] + 1</text>
<text text-anchor="middle" x="12210" y="-1593.6626" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return txtbuf:clone(), result</text>
<text text-anchor="middle" x="12210" y="-1578.2626" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_164&#45;&gt;leaf_170 -->
<g id="edge170" class="edge">
<title>codeblock_164&#45;&gt;leaf_170</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12189.9158,-2067.9263C12192.3811,-2019.2678 12199.3103,-1882.4971 12204.3412,-1783.1964"/>
<polygon fill="#000000" stroke="#000000" points="12207.842,-1783.2674 12204.8526,-1773.1031 12200.851,-1782.9132 12207.842,-1783.2674"/>
</g>
<!-- header_171 -->
<g id="node172" class="node">
<title>header_171</title>
<ellipse fill="none" stroke="#000000" cx="12500" cy="-1671.5027" rx="82.2061" ry="18"/>
<text text-anchor="middle" x="12500" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:next()</text>
</g>
<!-- section_165&#45;&gt;header_171 -->
<g id="edge171" class="edge">
<title>section_165&#45;&gt;header_171</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12625.0498,-2067.8531C12616.3629,-2047.684 12602.3112,-2014.0457 12592,-1984.4033 12555.9109,-1880.6551 12521.6864,-1754.4608 12507.2251,-1699.4185"/>
<polygon fill="#000000" stroke="#000000" points="12510.5966,-1698.4769 12504.6801,-1689.6879 12503.8244,-1700.2481 12510.5966,-1698.4769"/>
</g>
<!-- prose_172 -->
<g id="node173" class="node">
<title>prose_172</title>
<ellipse fill="none" stroke="#000000" cx="12633" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12633" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_165&#45;&gt;prose_172 -->
<g id="edge172" class="edge">
<title>section_165&#45;&gt;prose_172</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12633,-2067.9263C12633,-2002.7433 12633,-1779.4405 12633,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="12636.5001,-1699.675 12633,-1689.675 12629.5001,-1699.675 12636.5001,-1699.675"/>
</g>
<!-- prose_173 -->
<g id="node174" class="node">
<title>prose_173</title>
<ellipse fill="none" stroke="#000000" cx="12748" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12748" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_165&#45;&gt;prose_173 -->
<g id="edge173" class="edge">
<title>section_165&#45;&gt;prose_173</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12641.2535,-2067.9541C12650.2059,-2047.8733 12664.4888,-2014.312 12674,-1984.4033 12706.7499,-1881.4183 12732.2861,-1755.2524 12742.79,-1699.8603"/>
<polygon fill="#000000" stroke="#000000" points="12746.2822,-1700.2276 12744.6881,-1689.7534 12739.4024,-1698.9356 12746.2822,-1700.2276"/>
</g>
<!-- codeblock_174 -->
<g id="node175" class="node">
<title>codeblock_174</title>
<ellipse fill="none" stroke="#000000" cx="12936" cy="-1671.5027" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12936" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 322&#45;346</text>
</g>
<!-- section_165&#45;&gt;codeblock_174 -->
<g id="edge174" class="edge">
<title>section_165&#45;&gt;codeblock_174</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12668.6838,-2069.991C12703.2495,-2052.9681 12755.2551,-2023.1619 12789,-1984.4033 12866.7038,-1895.1547 12911.9117,-1757.7803 12928.5878,-1699.3477"/>
<polygon fill="#000000" stroke="#000000" points="12931.9622,-1700.277 12931.2839,-1689.7039 12925.2207,-1698.3923 12931.9622,-1700.277"/>
</g>
<!-- header_187 -->
<g id="node188" class="node">
<title>header_187</title>
<ellipse fill="none" stroke="#000000" cx="13339" cy="-1671.5027" rx="95.2951" ry="18"/>
<text text-anchor="middle" x="13339" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:append()</text>
</g>
<!-- section_166&#45;&gt;header_187 -->
<g id="edge187" class="edge">
<title>section_166&#45;&gt;header_187</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13537.6482,-2069.2799C13509.8312,-2051.5102 13468.0457,-2020.9624 13443,-1984.4033 13379.6279,-1891.8995 13352.3472,-1757.768 13343.0284,-1699.8663"/>
<polygon fill="#000000" stroke="#000000" points="13346.4358,-1698.9987 13341.4456,-1689.6526 13339.5184,-1700.0707 13346.4358,-1698.9987"/>
</g>
<!-- prose_188 -->
<g id="node189" class="node">
<title>prose_188</title>
<ellipse fill="none" stroke="#000000" cx="13484" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="13484" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_166&#45;&gt;prose_188 -->
<g id="edge188" class="edge">
<title>section_166&#45;&gt;prose_188</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13557.1642,-2068.1231C13547.702,-2048.1902 13532.975,-2014.7578 13525,-1984.4033 13498.0483,-1881.8198 13488.4127,-1755.4482 13485.3166,-1699.9319"/>
<polygon fill="#000000" stroke="#000000" points="13488.8042,-1699.6028 13484.7814,-1689.8015 13481.8139,-1699.9722 13488.8042,-1699.6028"/>
</g>
<!-- prose_189 -->
<g id="node190" class="node">
<title>prose_189</title>
<ellipse fill="none" stroke="#000000" cx="13566" cy="-1671.5027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="13566" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_166&#45;&gt;prose_189 -->
<g id="edge189" class="edge">
<title>section_166&#45;&gt;prose_189</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13566,-2067.9263C13566,-2002.7433 13566,-1779.4405 13566,-1699.9113"/>
<polygon fill="#000000" stroke="#000000" points="13569.5001,-1699.675 13566,-1689.675 13562.5001,-1699.675 13569.5001,-1699.675"/>
</g>
<!-- codeblock_190 -->
<g id="node191" class="node">
<title>codeblock_190</title>
<ellipse fill="none" stroke="#000000" cx="13761" cy="-1671.5027" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="13761" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 355&#45;369</text>
</g>
<!-- section_166&#45;&gt;codeblock_190 -->
<g id="edge190" class="edge">
<title>section_166&#45;&gt;codeblock_190</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13574.5043,-2067.9263C13605.2948,-2002.4767 13711.0817,-1777.6113 13748.091,-1698.9427"/>
<polygon fill="#000000" stroke="#000000" points="13751.361,-1700.2136 13752.4509,-1689.675 13745.0269,-1697.2338 13751.361,-1700.2136"/>
</g>
<!-- codeblock_191 -->
<g id="node192" class="node">
<title>codeblock_191</title>
<ellipse fill="none" stroke="#000000" cx="14074" cy="-1671.5027" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="14074" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 371&#45;378</text>
</g>
<!-- section_166&#45;&gt;codeblock_191 -->
<g id="edge191" class="edge">
<title>section_166&#45;&gt;codeblock_191</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13628.7346,-2075.8403C13691.611,-2063.1279 13788.6366,-2036.3923 13857,-1984.4033 13961.9253,-1904.6098 14035.0492,-1759.2852 14062.2549,-1698.9243"/>
<polygon fill="#000000" stroke="#000000" points="14065.5093,-1700.2193 14066.3691,-1689.6594 14059.1118,-1697.3783 14065.5093,-1700.2193"/>
</g>
<!-- codeblock_192 -->
<g id="node193" class="node">
<title>codeblock_192</title>
<ellipse fill="none" stroke="#000000" cx="14328" cy="-1671.5027" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="14328" y="-1667.3027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 380&#45;382</text>
</g>
<!-- section_166&#45;&gt;codeblock_192 -->
<g id="edge192" class="edge">
<title>section_166&#45;&gt;codeblock_192</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13639.6857,-2081.8311C13781.7347,-2072.4861 14086.7962,-2045.698 14170,-1984.4033 14267.9595,-1912.2382 14309.2796,-1761.9411 14322.68,-1699.5695"/>
<polygon fill="#000000" stroke="#000000" points="14326.1316,-1700.1615 14324.7309,-1689.6597 14319.2768,-1698.7428 14326.1316,-1700.1615"/>
</g>
<!-- leaf_169 -->
<g id="node170" class="node">
<title>leaf_169</title>
<polygon fill="none" stroke="#c0c0c0" points="12002,-732.4011 11948,-732.4011 11948,-696.4011 12002,-696.4011 12002,-732.4011"/>
</g>
<!-- raw_168&#45;&gt;leaf_169 -->
<g id="edge169" class="edge">
<title>raw_168&#45;&gt;leaf_169</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11975,-1653.238C11975,-1535.7387 11975,-886.606 11975,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="11978.5001,-742.47 11975,-732.4701 11971.5001,-742.4701 11978.5001,-742.47"/>
</g>
<!-- leaf_175 -->
<g id="node176" class="node">
<title>leaf_175</title>
<polygon fill="none" stroke="#c0c0c0" points="12384,-732.4011 12228,-732.4011 12228,-696.4011 12384,-696.4011 12384,-732.4011"/>
<text text-anchor="middle" x="12306" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:next()</text>
</g>
<!-- header_171&#45;&gt;leaf_175 -->
<g id="edge175" class="edge">
<title>header_171&#45;&gt;leaf_175</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12495.6097,-1653.237C12483.7288,-1604.6265 12449.1272,-1468.3192 12409,-1358.6022 12402.9859,-1342.1583 12397.8413,-1339.4286 12393,-1322.6022 12330.4227,-1105.1082 12311.8122,-830.3476 12307.2743,-742.6488"/>
<polygon fill="#000000" stroke="#000000" points="12310.7591,-742.2558 12306.7669,-732.4419 12303.7678,-742.6034 12310.7591,-742.2558"/>
</g>
<!-- raw_176 -->
<g id="node177" class="node">
<title>raw_176</title>
<ellipse fill="none" stroke="#000000" cx="12429" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="12429" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_172&#45;&gt;raw_176 -->
<g id="edge176" class="edge">
<title>prose_172&#45;&gt;raw_176</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12636.7115,-1653.2584C12646.318,-1600.4462 12666.2854,-1445.668 12591,-1358.6022 12552.9059,-1314.5472 12501.4314,-1368.0417 12465,-1322.6022 12392.3956,-1232.0452 12417.8181,-849.7717 12426.5538,-742.4978"/>
<polygon fill="#000000" stroke="#000000" points="12430.0492,-742.697 12427.3901,-732.4413 12423.0733,-742.1168 12430.0492,-742.697"/>
</g>
<!-- prespace_177 -->
<g id="node178" class="node">
<title>prespace_177</title>
<ellipse fill="none" stroke="#000000" cx="12520" cy="-714.4011" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="12520" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_172&#45;&gt;prespace_177 -->
<g id="edge177" class="edge">
<title>prose_172&#45;&gt;prespace_177</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12632.2104,-1653.1856C12629.7543,-1604.4492 12620.5466,-1467.8606 12591,-1358.6022 12586.4751,-1341.8699 12580.1758,-1339.425 12576,-1322.6022 12521.8602,-1104.4907 12518.9812,-830.6713 12519.5942,-742.8701"/>
<polygon fill="#000000" stroke="#000000" points="12523.096,-742.6759 12519.6882,-732.6441 12516.0963,-742.6115 12523.096,-742.6759"/>
</g>
<!-- literal_178 -->
<g id="node179" class="node">
<title>literal_178</title>
<ellipse fill="none" stroke="#000000" cx="12616" cy="-714.4011" rx="31.481" ry="18"/>
<text text-anchor="middle" x="12616" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_172&#45;&gt;literal_178 -->
<g id="edge178" class="edge">
<title>prose_172&#45;&gt;literal_178</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12632.6756,-1653.238C12630.5886,-1535.7387 12619.0587,-886.606 12616.5022,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="12619.9981,-742.4063 12616.3209,-732.4701 12612.9992,-742.5307 12619.9981,-742.4063"/>
</g>
<!-- raw_179 -->
<g id="node180" class="node">
<title>raw_179</title>
<ellipse fill="none" stroke="#000000" cx="12692" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="12692" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_172&#45;&gt;raw_179 -->
<g id="edge179" class="edge">
<title>prose_172&#45;&gt;raw_179</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12634.2401,-1653.3444C12637.7615,-1601.6461 12648.0789,-1449.227 12656,-1322.6022 12669.9802,-1099.1172 12685.4566,-829.3454 12690.3947,-742.6638"/>
<polygon fill="#000000" stroke="#000000" points="12693.8955,-742.7472 12690.9695,-732.5644 12686.9068,-742.3493 12693.8955,-742.7472"/>
</g>
<!-- raw_184 -->
<g id="node185" class="node">
<title>raw_184</title>
<ellipse fill="none" stroke="#000000" cx="12764" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="12764" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_173&#45;&gt;raw_184 -->
<g id="edge184" class="edge">
<title>prose_173&#45;&gt;raw_184</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12748.3053,-1653.238C12750.2696,-1535.7387 12761.1212,-886.606 12763.5274,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="12767.0302,-742.5272 12763.6979,-732.4701 12760.0312,-742.4101 12767.0302,-742.5272"/>
</g>
<!-- leaf_186 -->
<g id="node187" class="node">
<title>leaf_186</title>
<polygon fill="none" stroke="#c0c0c0" points="13197.4016,-902.0419 12808.5984,-902.0419 12808.5984,-526.7603 13197.4016,-526.7603 13197.4016,-902.0419"/>
<text text-anchor="middle" x="13003" y="-887.0214" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.next(historian)</text>
<text text-anchor="middle" x="13003" y="-871.6214" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local Δ = historian.cursor &lt; #historian and 1 or 0</text>
<text text-anchor="middle" x="13003" y="-852.8614" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if historian.cursor == 0 or #historian == 0 then</text>
<text text-anchor="middle" x="13003" y="-837.4614" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Txtbuf()</text>
<text text-anchor="middle" x="13003" y="-822.0613" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13003" y="-806.6613" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local txtbuf = historian[historian.cursor + Δ]</text>
<text text-anchor="middle" x="13003" y="-787.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not txtbuf then</text>
<text text-anchor="middle" x="13003" y="-772.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Txtbuf()</text>
<text text-anchor="middle" x="13003" y="-757.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13003" y="-741.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = #txtbuf.lines</text>
<text text-anchor="middle" x="13003" y="-726.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local result = historian.results[txtbuf]</text>
<text text-anchor="middle" x="13003" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not txtbuf then</text>
<text text-anchor="middle" x="13003" y="-695.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Txtbuf()</text>
<text text-anchor="middle" x="13003" y="-680.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13003" y="-664.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = historian.cursor + Δ</text>
<text text-anchor="middle" x="13003" y="-645.941" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = #txtbuf.lines[txtbuf.cur_row] + 1</text>
<text text-anchor="middle" x="13003" y="-630.541" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not (Δ &gt; 0) and #txtbuf.lines &gt; 0 then</text>
<text text-anchor="middle" x="13003" y="-611.781" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.cursor = #historian + 1</text>
<text text-anchor="middle" x="13003" y="-596.381" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return txtbuf:clone(), nil, true</text>
<text text-anchor="middle" x="13003" y="-580.9809" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="13003" y="-565.5809" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return txtbuf:clone(), result, false</text>
<text text-anchor="middle" x="13003" y="-550.1809" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13003" y="-534.7809" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_174&#45;&gt;leaf_186 -->
<g id="edge186" class="edge">
<title>codeblock_174&#45;&gt;leaf_186</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12937.2786,-1653.238C12943.5887,-1563.098 12971.8012,-1160.0789 12989.1466,-912.2985"/>
<polygon fill="#000000" stroke="#000000" points="12992.6546,-912.3055 12989.8615,-902.0854 12985.6717,-911.8166 12992.6546,-912.3055"/>
</g>
<!-- leaf_180 -->
<g id="node181" class="node">
<title>leaf_180</title>
<polygon fill="none" stroke="#c0c0c0" points="12441.5,-63.0015 11970.5,-63.0015 11970.5,-7.1986 12441.5,-7.1986 12441.5,-63.0015"/>
<text text-anchor="middle" x="12206" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Returns the next txtbuf in history, and a second flag to tell the</text>
</g>
<!-- raw_176&#45;&gt;leaf_180 -->
<g id="edge180" class="edge">
<title>raw_176&#45;&gt;leaf_180</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12430.477,-696.1816C12437.4613,-605.4477 12463.9705,-202.8678 12393,-106.2001 12382.5959,-92.0288 12351.1786,-77.9472 12316.9939,-66.1004"/>
<polygon fill="#000000" stroke="#000000" points="12317.888,-62.7081 12307.2938,-62.82 12315.6455,-69.3392 12317.888,-62.7081"/>
</g>
<!-- leaf_181 -->
<g id="node182" class="node">
<title>leaf_181</title>
<polygon fill="none" stroke="#c0c0c0" points="12514,-53.1 12460,-53.1 12460,-17.1 12514,-17.1 12514,-53.1"/>
</g>
<!-- prespace_177&#45;&gt;leaf_181 -->
<g id="edge181" class="edge">
<title>prespace_177&#45;&gt;leaf_181</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12519.1173,-696.2315C12514.5845,-602.9235 12493.9211,-177.5691 12488.374,-63.3832"/>
<polygon fill="#000000" stroke="#000000" points="12491.8666,-63.1443 12487.8854,-53.3259 12484.8748,-63.484 12491.8666,-63.1443"/>
</g>
<!-- leaf_182 -->
<g id="node183" class="node">
<title>leaf_182</title>
<polygon fill="none" stroke="#c0c0c0" points="12632,-53.1 12532,-53.1 12532,-17.1 12632,-17.1 12632,-53.1"/>
<text text-anchor="middle" x="12582" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">modeselektor</text>
</g>
<!-- literal_178&#45;&gt;leaf_182 -->
<g id="edge182" class="edge">
<title>literal_178&#45;&gt;leaf_182</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12615.0906,-696.2315C12610.4204,-602.9235 12589.1308,-177.5691 12583.4156,-63.3832"/>
<polygon fill="#000000" stroke="#000000" points="12586.9078,-63.1384 12582.9122,-53.3259 12579.9166,-63.4884 12586.9078,-63.1384"/>
</g>
<!-- leaf_183 -->
<g id="node184" class="node">
<title>leaf_183</title>
<polygon fill="none" stroke="#c0c0c0" points="12890,-53.1 12650,-53.1 12650,-17.1 12890,-17.1 12890,-53.1"/>
<text text-anchor="middle" x="12770" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> it might be time for a new one.</text>
</g>
<!-- raw_179&#45;&gt;leaf_183 -->
<g id="edge183" class="edge">
<title>raw_179&#45;&gt;leaf_183</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12690.0321,-696.1962C12682.5563,-621.2562 12659.6579,-330.0267 12728,-106.2001 12732.8303,-90.3803 12741.8376,-74.3784 12750.2758,-61.5718"/>
<polygon fill="#000000" stroke="#000000" points="12753.2067,-63.4863 12755.9683,-53.2577 12747.4308,-59.5316 12753.2067,-63.4863"/>
</g>
<!-- leaf_185 -->
<g id="node186" class="node">
<title>leaf_185</title>
<polygon fill="none" stroke="#c0c0c0" points="13295.5,-55.0021 12908.5,-55.0021 12908.5,-15.198 13295.5,-15.198 13295.5,-55.0021"/>
<text text-anchor="middle" x="13102" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;d like to stop buffering blank lines at some point.</text>
</g>
<!-- raw_184&#45;&gt;leaf_185 -->
<g id="edge185" class="edge">
<title>raw_184&#45;&gt;leaf_185</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12762.3061,-696.2919C12754.1851,-605.2255 12722.7183,-198.0735 12800,-106.2001 12812.1367,-91.7719 12901.3327,-71.8582 12979.667,-56.7751"/>
<polygon fill="#000000" stroke="#000000" points="12980.4863,-60.182 12989.6516,-54.8672 12979.1723,-53.3064 12980.4863,-60.182"/>
</g>
<!-- leaf_193 -->
<g id="node194" class="node">
<title>leaf_193</title>
<polygon fill="none" stroke="#c0c0c0" points="13424,-732.4011 13254,-732.4011 13254,-696.4011 13424,-696.4011 13424,-732.4011"/>
<text text-anchor="middle" x="13339" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:append()</text>
</g>
<!-- header_187&#45;&gt;leaf_193 -->
<g id="edge193" class="edge">
<title>header_187&#45;&gt;leaf_193</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13339,-1653.238C13339,-1535.7387 13339,-886.606 13339,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="13342.5001,-742.47 13339,-732.4701 13335.5001,-742.4701 13342.5001,-742.47"/>
</g>
<!-- raw_194 -->
<g id="node195" class="node">
<title>raw_194</title>
<ellipse fill="none" stroke="#000000" cx="13476" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="13476" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_188&#45;&gt;raw_194 -->
<g id="edge194" class="edge">
<title>prose_188&#45;&gt;raw_194</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13483.8473,-1653.238C13482.8652,-1535.7387 13477.4394,-886.606 13476.2363,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="13479.7346,-742.4404 13476.151,-732.4701 13472.7348,-742.499 13479.7346,-742.4404"/>
</g>
<!-- raw_196 -->
<g id="node197" class="node">
<title>raw_196</title>
<ellipse fill="none" stroke="#000000" cx="13548" cy="-714.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="13548" y="-710.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_189&#45;&gt;raw_196 -->
<g id="edge196" class="edge">
<title>prose_189&#45;&gt;raw_196</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13565.6565,-1653.238C13563.4467,-1535.7387 13551.2386,-886.606 13548.5317,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="13552.0273,-742.4024 13548.3398,-732.4701 13545.0286,-742.5341 13552.0273,-742.4024"/>
</g>
<!-- leaf_198 -->
<g id="node199" class="node">
<title>leaf_198</title>
<polygon fill="none" stroke="#c0c0c0" points="14043,-818.6016 13593,-818.6016 13593,-610.2006 14043,-610.2006 14043,-818.6016"/>
<text text-anchor="middle" x="13818" y="-803.3013" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.append(historian, txtbuf, results, success)</text>
<text text-anchor="middle" x="13818" y="-787.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if tostring(historian[#historian]) == tostring(txtbuf) then</text>
<text text-anchor="middle" x="13818" y="-772.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; don&#39;t bother</text>
<text text-anchor="middle" x="13818" y="-757.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="13818" y="-741.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13818" y="-726.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian[#historian + 1] = txtbuf</text>
<text text-anchor="middle" x="13818" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if success then</text>
<text text-anchor="middle" x="13818" y="-695.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian:persist(txtbuf, results)</text>
<text text-anchor="middle" x="13818" y="-680.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="13818" y="-664.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian:persist(txtbuf)</text>
<text text-anchor="middle" x="13818" y="-649.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13818" y="-633.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return true</text>
<text text-anchor="middle" x="13818" y="-618.501" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_190&#45;&gt;leaf_198 -->
<g id="edge198" class="edge">
<title>codeblock_190&#45;&gt;leaf_198</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13762.0878,-1653.238C13768.1131,-1552.0646 13797.6127,-1056.73 13811.1663,-829.1475"/>
<polygon fill="#000000" stroke="#000000" points="13814.679,-829.0366 13811.7798,-818.8462 13807.6914,-828.6204 13814.679,-829.0366"/>
</g>
<!-- leaf_199 -->
<g id="node200" class="node">
<title>leaf_199</title>
<polygon fill="none" stroke="#c0c0c0" points="14329,-764.8021 14061,-764.8021 14061,-664.0001 14329,-664.0001 14329,-764.8021"/>
<text text-anchor="middle" x="14195" y="-749.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new()</text>
<text text-anchor="middle" x="14195" y="-734.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local historian = meta(Historian)</text>
<text text-anchor="middle" x="14195" y="-718.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian:load()</text>
<text text-anchor="middle" x="14195" y="-703.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return historian</text>
<text text-anchor="middle" x="14195" y="-687.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="14195" y="-672.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.idEst = new</text>
</g>
<!-- codeblock_191&#45;&gt;leaf_199 -->
<g id="edge199" class="edge">
<title>codeblock_191&#45;&gt;leaf_199</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14076.3091,-1653.238C14090.2488,-1542.9762 14163.3744,-964.5574 14187.367,-774.7778"/>
<polygon fill="#000000" stroke="#000000" points="14190.8587,-775.0627 14188.6407,-764.7027 14183.914,-774.1847 14190.8587,-775.0627"/>
</g>
<!-- leaf_200 -->
<g id="node201" class="node">
<title>leaf_200</title>
<polygon fill="none" stroke="#c0c0c0" points="14433,-732.4011 14347,-732.4011 14347,-696.4011 14433,-696.4011 14433,-732.4011"/>
<text text-anchor="middle" x="14390" y="-710.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_192&#45;&gt;leaf_200 -->
<g id="edge200" class="edge">
<title>codeblock_192&#45;&gt;leaf_200</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14329.1832,-1653.238C14336.7946,-1535.7387 14378.8448,-886.606 14388.1686,-742.6724"/>
<polygon fill="#000000" stroke="#000000" points="14391.6757,-742.6754 14388.8295,-732.4701 14384.6903,-742.2229 14391.6757,-742.6754"/>
</g>
<!-- leaf_195 -->
<g id="node196" class="node">
<title>leaf_195</title>
<polygon fill="none" stroke="#c0c0c0" points="13638,-63.0015 13314,-63.0015 13314,-7.1986 13638,-7.1986 13638,-63.0015"/>
<text text-anchor="middle" x="13476" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Appends a txtbuf to history and persists it.</text>
</g>
<!-- raw_194&#45;&gt;leaf_195 -->
<g id="edge195" class="edge">
<title>raw_194&#45;&gt;leaf_195</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13476,-696.2315C13476,-605.4203 13476,-200.0959 13476,-73.206"/>
<polygon fill="#000000" stroke="#000000" points="13479.5001,-73.1777 13476,-63.1778 13472.5001,-73.1778 13479.5001,-73.1777"/>
</g>
<!-- leaf_197 -->
<g id="node198" class="node">
<title>leaf_197</title>
<polygon fill="none" stroke="#c0c0c0" points="13854,-55.0021 13656,-55.0021 13656,-15.198 13854,-15.198 13854,-55.0021"/>
<text text-anchor="middle" x="13755" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Doesn&#39;t adjust the cursor.</text>
</g>
<!-- raw_196&#45;&gt;leaf_197 -->
<g id="edge197" class="edge">
<title>raw_196&#45;&gt;leaf_197</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13546.5815,-696.2238C13539.8798,-605.6942 13514.5222,-203.9461 13584,-106.2001 13590.7387,-96.7197 13644.4972,-75.2391 13689.9654,-58.3541"/>
<polygon fill="#000000" stroke="#000000" points="13691.3526,-61.5729 13699.5221,-54.8267 13688.9287,-55.006 13691.3526,-61.5729"/>
</g>
</g>
</svg>
