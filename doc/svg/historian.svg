<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="6061pt" height="1244pt"
 viewBox="0.00 0.00 6061.30 1244.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1240.2017)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1240.2017 6057.2972,-1240.2017 6057.2972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1346" cy="-1218.2017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1346" y="-1214.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 174</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1346" cy="-1146.2017" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1346" y="-1142.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;112</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1346,-1200.033C1346,-1192.3326 1346,-1183.176 1346,-1174.6183"/>
<polygon fill="#000000" stroke="#000000" points="1349.5001,-1174.6149 1346,-1164.6149 1342.5001,-1174.615 1349.5001,-1174.6149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="992" cy="-1074.2017" rx="57.0821" ry="18"/>
<text text-anchor="middle" x="992" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Historian</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1289.9138,-1136.9559C1231.8708,-1127.0821 1138.7084,-1110.3795 1059,-1092.2017 1054.3285,-1091.1363 1049.491,-1089.9674 1044.6518,-1088.7528"/>
<polygon fill="#000000" stroke="#000000" points="1045.3256,-1085.3123 1034.7692,-1086.2142 1043.5839,-1092.0922 1045.3256,-1085.3123"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1100" cy="-1074.2017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1100" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1294.7889,-1135.0573C1252.9119,-1125.3872 1192.4312,-1110.1421 1141,-1092.2017 1138.7705,-1091.4239 1136.4928,-1090.5774 1134.2098,-1089.6892"/>
<polygon fill="#000000" stroke="#000000" points="1135.4846,-1086.4292 1124.9043,-1085.874 1132.8291,-1092.906 1135.4846,-1086.4292"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1182" cy="-1074.2017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1182" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1311.2198,-1130.9323C1283.38,-1118.71 1244.5246,-1101.6515 1216.7047,-1089.4379"/>
<polygon fill="#000000" stroke="#000000" points="1217.9243,-1086.1509 1207.3609,-1085.3357 1215.1103,-1092.5604 1217.9243,-1086.1509"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1264" cy="-1074.2017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1264" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1326.1501,-1128.7725C1315.0588,-1119.0338 1301.1239,-1106.7982 1289.2613,-1096.3823"/>
<polygon fill="#000000" stroke="#000000" points="1291.264,-1093.483 1281.4403,-1089.5151 1286.6454,-1098.7431 1291.264,-1093.483"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1346" cy="-1074.2017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1346" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1346,-1128.033C1346,-1120.3326 1346,-1111.176 1346,-1102.6183"/>
<polygon fill="#000000" stroke="#000000" points="1349.5001,-1102.6149 1346,-1092.6149 1342.5001,-1102.615 1349.5001,-1102.6149"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1503" cy="-1074.2017" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1503" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 16&#45;20</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1379.6804,-1130.7558C1402.69,-1120.2037 1433.4257,-1106.1083 1458.456,-1094.6295"/>
<polygon fill="#000000" stroke="#000000" points="1460.111,-1097.7211 1467.7417,-1090.3711 1457.1929,-1091.3583 1460.111,-1097.7211"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1727" cy="-1074.2017" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1727" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 22&#45;24</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1399.7799,-1136.0385C1467.0744,-1123.3214 1582.4777,-1101.513 1656.7079,-1087.4852"/>
<polygon fill="#000000" stroke="#000000" points="1657.7234,-1090.8553 1666.8996,-1085.5592 1656.4235,-1083.9771 1657.7234,-1090.8553"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2387" cy="-1074.2017" rx="69.851" ry="18"/>
<text text-anchor="middle" x="2387" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 27&#45;112</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1409.163,-1141.833C1590.2581,-1129.3077 2110.9527,-1093.2943 2309.1424,-1079.5866"/>
<polygon fill="#000000" stroke="#000000" points="2309.4496,-1083.0738 2319.1842,-1078.8921 2308.9665,-1076.0905 2309.4496,-1083.0738"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="3916" cy="-1074.2017" rx="74.6878" ry="18"/>
<text text-anchor="middle" x="3916" y="-1070.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 113&#45;151</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1410.8138,-1144.3859C1761.8121,-1134.5524 3433.7772,-1087.7114 3831.1311,-1076.5793"/>
<polygon fill="#000000" stroke="#000000" points="3831.5006,-1080.0704 3841.3986,-1076.2917 3831.3045,-1073.0732 3831.5006,-1080.0704"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="1038.5,-1011.1016 945.5,-1011.1016 945.5,-975.1016 1038.5,-975.1016 1038.5,-1011.1016"/>
<text text-anchor="middle" x="992" y="-989.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">* Historian</text>
</g>
<!-- header_2&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>header_2&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M992,-1055.7988C992,-1045.6699 992,-1032.8815 992,-1021.5003"/>
<polygon fill="#000000" stroke="#000000" points="995.5001,-1021.1522 992,-1011.1523 988.5001,-1021.1523 995.5001,-1021.1522"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="1092" cy="-993.1016" rx="27" ry="18"/>
<text text-anchor="middle" x="1092" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_3&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1098.2245,-1056.2029C1097.2166,-1045.9846 1095.9323,-1032.965 1094.7924,-1021.4091"/>
<polygon fill="#000000" stroke="#000000" points="1098.263,-1020.9385 1093.7982,-1011.3305 1091.2968,-1021.6258 1098.263,-1020.9385"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="1173" cy="-993.1016" rx="27" ry="18"/>
<text text-anchor="middle" x="1173" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_4&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1180.0026,-1056.2029C1178.8686,-1045.9846 1177.4238,-1032.965 1176.1414,-1021.4091"/>
<polygon fill="#000000" stroke="#000000" points="1179.6046,-1020.8834 1175.0229,-1011.3305 1172.6473,-1021.6555 1179.6046,-1020.8834"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1254" cy="-993.1016" rx="27" ry="18"/>
<text text-anchor="middle" x="1254" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_5&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1261.7807,-1056.2029C1260.5119,-1045.9132 1258.8929,-1032.7828 1257.4606,-1021.1669"/>
<polygon fill="#000000" stroke="#000000" points="1260.9107,-1020.5465 1256.2131,-1011.05 1253.9633,-1021.4032 1260.9107,-1020.5465"/>
</g>
<!-- raw_18 -->
<g id="node19" class="node">
<title>raw_18</title>
<ellipse fill="none" stroke="#000000" cx="1336" cy="-993.1016" rx="27" ry="18"/>
<text text-anchor="middle" x="1336" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_18 -->
<g id="edge18" class="edge">
<title>prose_6&#45;&gt;raw_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1343.7807,-1056.2029C1342.5119,-1045.9132 1340.8929,-1032.7828 1339.4606,-1021.1669"/>
<polygon fill="#000000" stroke="#000000" points="1342.9107,-1020.5465 1338.2131,-1011.05 1335.9633,-1021.4032 1342.9107,-1020.5465"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1663,-1020.3021 1381,-1020.3021 1381,-965.9011 1663,-965.9011 1663,-1020.3021"/>
<text text-anchor="middle" x="1522" y="-1005.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Linebuf = require &quot;linebuf&quot;</text>
<text text-anchor="middle" x="1522" y="-989.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local sql &#160;&#160;&#160;&#160;= require &quot;sqlayer&quot;</text>
<text text-anchor="middle" x="1522" y="-974.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local format &#160;= assert (string.format)</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>codeblock_7&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1507.2167,-1056.2029C1509.0119,-1048.5403 1511.1762,-1039.3024 1513.2881,-1030.2877"/>
<polygon fill="#000000" stroke="#000000" points="1516.7545,-1030.8354 1515.6279,-1020.3006 1509.939,-1029.2386 1516.7545,-1030.8354"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1872.5,-1011.1016 1681.5,-1011.1016 1681.5,-975.1016 1872.5,-975.1016 1872.5,-1011.1016"/>
<text text-anchor="middle" x="1777" y="-989.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local Historian = meta {}</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_8&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1738.0966,-1056.2029C1744.6536,-1045.5676 1753.0814,-1031.8975 1760.4155,-1020.0017"/>
<polygon fill="#000000" stroke="#000000" points="1763.4928,-1021.6796 1765.7615,-1011.3305 1757.5342,-1018.0059 1763.4928,-1021.6796"/>
</g>
<!-- header_22 -->
<g id="node23" class="node">
<title>header_22</title>
<ellipse fill="none" stroke="#000000" cx="2167" cy="-993.1016" rx="82.2147" ry="18"/>
<text text-anchor="middle" x="2167" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Historian:load()</text>
</g>
<!-- section_9&#45;&gt;header_22 -->
<g id="edge22" class="edge">
<title>section_9&#45;&gt;header_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2346.9044,-1059.421C2310.9144,-1046.1537 2257.8774,-1026.6023 2218.7078,-1012.163"/>
<polygon fill="#000000" stroke="#000000" points="2219.6604,-1008.784 2209.067,-1008.6091 2217.2392,-1015.3519 2219.6604,-1008.784"/>
</g>
<!-- prose_23 -->
<g id="node24" class="node">
<title>prose_23</title>
<ellipse fill="none" stroke="#000000" cx="2387" cy="-993.1016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2387" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_23 -->
<g id="edge23" class="edge">
<title>section_9&#45;&gt;prose_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2387,-1055.7988C2387,-1045.6699 2387,-1032.8815 2387,-1021.5003"/>
<polygon fill="#000000" stroke="#000000" points="2390.5001,-1021.1522 2387,-1011.1523 2383.5001,-1021.1523 2390.5001,-1021.1522"/>
</g>
<!-- codeblock_24 -->
<g id="node25" class="node">
<title>codeblock_24</title>
<ellipse fill="none" stroke="#000000" cx="2681" cy="-993.1016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2681" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;69</text>
</g>
<!-- section_9&#45;&gt;codeblock_24 -->
<g id="edge24" class="edge">
<title>section_9&#45;&gt;codeblock_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2434.8905,-1060.991C2485.5924,-1047.0049 2565.7383,-1024.8966 2620.7087,-1009.733"/>
<polygon fill="#000000" stroke="#000000" points="2621.958,-1013.0192 2630.6672,-1006.9859 2620.0965,-1006.2712 2621.958,-1013.0192"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="3081" cy="-993.1016" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="3081" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 72&#45;110</text>
</g>
<!-- section_9&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2450.7365,-1066.7535C2576.922,-1052.0076 2858.4364,-1019.1101 2998.5293,-1002.739"/>
<polygon fill="#000000" stroke="#000000" points="2999.2503,-1006.1787 3008.7765,-1001.5416 2998.4378,-999.226 2999.2503,-1006.1787"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="3640" cy="-993.1016" rx="82.6821" ry="18"/>
<text text-anchor="middle" x="3640" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Historian:prev()</text>
</g>
<!-- section_10&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_10&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3868.5539,-1060.2601C3821.7382,-1046.5037 3750.0287,-1025.4325 3699.4397,-1010.5674"/>
<polygon fill="#000000" stroke="#000000" points="3700.1983,-1007.1424 3689.6172,-1007.6812 3698.2248,-1013.8585 3700.1983,-1007.1424"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="3833" cy="-993.1016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3833" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_10&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3897.9902,-1056.6042C3885.7944,-1044.6875 3869.563,-1028.8276 3856.3724,-1015.939"/>
<polygon fill="#000000" stroke="#000000" points="3858.6095,-1013.2314 3849.0109,-1008.746 3853.7173,-1018.2381 3858.6095,-1013.2314"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="3985" cy="-993.1016" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="3985" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 115&#45;126</text>
</g>
<!-- section_10&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_10&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3931.3133,-1056.2029C3940.6932,-1045.1782 3952.8475,-1030.8925 3963.2187,-1018.7026"/>
<polygon fill="#000000" stroke="#000000" points="3965.9152,-1020.9344 3969.7295,-1011.05 3960.5837,-1016.3984 3965.9152,-1020.9344"/>
</g>
<!-- section_40 -->
<g id="node41" class="node">
<title>section_40</title>
<ellipse fill="none" stroke="#000000" cx="4406" cy="-993.1016" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4406" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 129&#45;151</text>
</g>
<!-- section_10&#45;&gt;section_40 -->
<g id="edge40" class="edge">
<title>section_10&#45;&gt;section_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3978.0588,-1063.9303C4068.8422,-1048.9047 4237.4847,-1020.9926 4333.7332,-1005.0625"/>
<polygon fill="#000000" stroke="#000000" points="4334.3788,-1008.5034 4343.6731,-1003.4174 4333.2357,-1001.5973 4334.3788,-1008.5034"/>
</g>
<!-- section_41 -->
<g id="node42" class="node">
<title>section_41</title>
<ellipse fill="none" stroke="#000000" cx="5398" cy="-993.1016" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5398" y="-988.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 152&#45;174</text>
</g>
<!-- section_10&#45;&gt;section_41 -->
<g id="edge41" class="edge">
<title>section_10&#45;&gt;section_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3988.9871,-1070.2076C4237.3511,-1056.6162 5048.9479,-1012.2029 5313.6701,-997.7164"/>
<polygon fill="#000000" stroke="#000000" points="5314.1907,-1001.1933 5323.9845,-997.152 5313.8081,-994.2037 5314.1907,-1001.1933"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="324,-676.4022 0,-676.4022 0,-604.5999 324,-604.5999 324,-676.4022"/>
<text text-anchor="middle" x="162" y="-613.001" font-family="Inconsolata" font-size="14.00" fill="#000000">This module is responsible for REPL history.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1074.1476,-979.5696C1066.2526,-974.3452 1056.5949,-968.9299 1047,-966.0016 895.0508,-919.6276 468.9496,-1012.2014 333,-930.0016 242.4871,-875.2743 194.4362,-752.983 174.0835,-686.1899"/>
<polygon fill="#000000" stroke="#000000" points="177.3665,-684.9499 171.1661,-676.3588 170.6558,-686.9414 177.3665,-684.9499"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="897.5,-667.8014 342.5,-667.8014 342.5,-613.2006 897.5,-613.2006 897.5,-667.8014"/>
<text text-anchor="middle" x="620" y="-636.701" font-family="Inconsolata" font-size="14.00" fill="#000000">Eventually this will include persisting and restoring from a SQLite database,</text>
<text text-anchor="middle" x="620" y="-621.301" font-family="Inconsolata" font-size="14.00" fill="#000000">fuzzy searching, and variable cacheing.</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1154.5406,-979.8044C1146.7,-974.7487 1137.2463,-969.3952 1128,-966.0016 1034.577,-931.7125 995.472,-975.5681 907,-930.0016 787.718,-868.5666 687.7081,-739.3541 643.8435,-676.4431"/>
<polygon fill="#000000" stroke="#000000" points="646.5911,-674.2624 638.0305,-668.0201 640.8299,-678.2384 646.5911,-674.2624"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1464,-667.8014 916,-667.8014 916,-613.2006 1464,-613.2006 1464,-667.8014"/>
<text text-anchor="middle" x="1190" y="-636.701" font-family="Inconsolata" font-size="14.00" fill="#000000">Currently does the basic job of retaining history and not letting subsequent</text>
<text text-anchor="middle" x="1190" y="-621.301" font-family="Inconsolata" font-size="14.00" fill="#000000">edits munge it.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1250.7382,-975.1313C1240.7515,-920.1104 1210.4448,-753.1393 1196.7937,-677.9298"/>
<polygon fill="#000000" stroke="#000000" points="1200.2115,-677.1618 1194.9818,-667.9477 1193.3241,-678.412 1200.2115,-677.1618"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="2030,-675.8014 1482,-675.8014 1482,-605.2007 2030,-605.2007 2030,-675.8014"/>
<text text-anchor="middle" x="1756" y="-644.701" font-family="Inconsolata" font-size="14.00" fill="#000000">Next step: now that we clone a new linebuf each time, we have an immutable</text>
<text text-anchor="middle" x="1756" y="-629.301" font-family="Inconsolata" font-size="14.00" fill="#000000">record. &#160;We should store the line as a string, to facilitate fuzzy matching.</text>
</g>
<!-- raw_18&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>raw_18&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1352.8601,-978.7478C1358.6716,-974.2623 1365.3873,-969.5614 1372,-966.0016 1413.9613,-943.4126 1432.8682,-955.7007 1473,-930.0016 1579.4951,-861.8054 1676.086,-746.468 1724.0905,-683.9389"/>
<polygon fill="#000000" stroke="#000000" points="1726.9812,-685.92 1730.2591,-675.845 1721.4137,-681.6769 1726.9812,-685.92"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2197.5,-658.501 2048.5,-658.501 2048.5,-622.501 2197.5,-622.501 2197.5,-658.501"/>
<text text-anchor="middle" x="2123" y="-637.001" font-family="Inconsolata" font-size="14.00" fill="#000000">** Historian:load()</text>
</g>
<!-- header_22&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>header_22&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2164.6963,-974.6407C2157.479,-916.804 2135.2701,-738.829 2126.5587,-669.0195"/>
<polygon fill="#000000" stroke="#000000" points="2129.9923,-668.2688 2125.2809,-658.7792 2123.0462,-669.1356 2129.9923,-668.2688"/>
</g>
<!-- raw_27 -->
<g id="node28" class="node">
<title>raw_27</title>
<ellipse fill="none" stroke="#000000" cx="2243" cy="-640.501" rx="27" ry="18"/>
<text text-anchor="middle" x="2243" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_23&#45;&gt;raw_27 -->
<g id="edge27" class="edge">
<title>prose_23&#45;&gt;raw_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2358.484,-984.5086C2333.2109,-975.3075 2297.527,-958.1032 2279,-930.0016 2224.8997,-847.9424 2232.1342,-723.9328 2238.8017,-668.7296"/>
<polygon fill="#000000" stroke="#000000" points="2242.2951,-669.0061 2240.1093,-658.6392 2235.3531,-668.1065 2242.2951,-669.0061"/>
</g>
<!-- prespace_28 -->
<g id="node29" class="node">
<title>prespace_28</title>
<ellipse fill="none" stroke="#000000" cx="2334" cy="-640.501" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2334" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_23&#45;&gt;prespace_28 -->
<g id="edge28" class="edge">
<title>prose_23&#45;&gt;prespace_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2384.2989,-975.1313C2375.6889,-917.8503 2348.8406,-739.2332 2338.3048,-669.1404"/>
<polygon fill="#000000" stroke="#000000" points="2341.7069,-668.2266 2336.7593,-658.8579 2334.7846,-669.2671 2341.7069,-668.2266"/>
</g>
<!-- literal_29 -->
<g id="node30" class="node">
<title>literal_29</title>
<ellipse fill="none" stroke="#000000" cx="2430" cy="-640.501" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2430" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_23&#45;&gt;literal_29 -->
<g id="edge29" class="edge">
<title>prose_23&#45;&gt;literal_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2389.1915,-975.1313C2396.177,-917.8503 2417.9595,-739.2332 2426.5074,-669.1404"/>
<polygon fill="#000000" stroke="#000000" points="2430.025,-669.2081 2427.7614,-658.8579 2423.0765,-668.3607 2430.025,-669.2081"/>
</g>
<!-- raw_30 -->
<g id="node31" class="node">
<title>raw_30</title>
<ellipse fill="none" stroke="#000000" cx="2506" cy="-640.501" rx="27" ry="18"/>
<text text-anchor="middle" x="2506" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_23&#45;&gt;raw_30 -->
<g id="edge30" class="edge">
<title>prose_23&#45;&gt;raw_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2411.7174,-981.2832C2430.9837,-970.6821 2456.6366,-953.2202 2470,-930.0016 2518.9103,-845.0209 2514.4337,-723.0106 2509.3447,-668.5747"/>
<polygon fill="#000000" stroke="#000000" points="2512.8262,-668.2149 2508.3343,-658.6195 2505.862,-668.9218 2512.8262,-668.2149"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3057,-923.502 2551,-923.502 2551,-357.5001 3057,-357.5001 3057,-923.502"/>
<text text-anchor="middle" x="2804" y="-908.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.HISTORY_LIMIT = 50</text>
<text text-anchor="middle" x="2804" y="-876.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_repl_table = [[</text>
<text text-anchor="middle" x="2804" y="-861.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE repl (</text>
<text text-anchor="middle" x="2804" y="-846.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">line_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="2804" y="-830.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">project TEXT,</text>
<text text-anchor="middle" x="2804" y="-815.3013" font-family="Inconsolata" font-size="14.00" fill="#000000">line TEXT,</text>
<text text-anchor="middle" x="2804" y="-799.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">time DATETIME DEFAULT CURRENT_TIMESTAMP);</text>
<text text-anchor="middle" x="2804" y="-784.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="2804" y="-753.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert_line_stmt = [[</text>
<text text-anchor="middle" x="2804" y="-737.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">INSERT INTO repl (project, line) VALUES(?, ?);</text>
<text text-anchor="middle" x="2804" y="-722.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="2804" y="-690.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_tables = [[</text>
<text text-anchor="middle" x="2804" y="-675.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT name FROM sqlite_master WHERE type=&#39;table&#39;;</text>
<text text-anchor="middle" x="2804" y="-660.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="2804" y="-628.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_recent = [[</text>
<text text-anchor="middle" x="2804" y="-613.301" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT line FROM repl</text>
<text text-anchor="middle" x="2804" y="-597.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;WHERE project = %s</text>
<text text-anchor="middle" x="2804" y="-582.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ORDER BY time</text>
<text text-anchor="middle" x="2804" y="-567.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;DESC LIMIT %d;</text>
<text text-anchor="middle" x="2804" y="-551.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="2804" y="-520.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.home_dir = io.popen(&quot;echo $HOME&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="2804" y="-504.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.project = io.popen(&quot;pwd&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="2804" y="-473.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function has(table, name)</text>
<text text-anchor="middle" x="2804" y="-458.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _,v in ipairs(table) do</text>
<text text-anchor="middle" x="2804" y="-442.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if name == v then</text>
<text text-anchor="middle" x="2804" y="-427.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2804" y="-411.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2804" y="-396.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2804" y="-381.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return false</text>
<text text-anchor="middle" x="2804" y="-365.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_24&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>codeblock_24&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2687.2687,-975.1313C2690.883,-964.7704 2695.882,-950.4398 2701.7914,-933.4996"/>
<polygon fill="#000000" stroke="#000000" points="2705.1759,-934.4234 2705.165,-923.8286 2698.5665,-932.1178 2705.1759,-934.4234"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3532.5,-930.0021 3075.5,-930.0021 3075.5,-350.9999 3532.5,-350.9999 3532.5,-930.0021"/>
<text text-anchor="middle" x="3304" y="-914.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">local reverse = assert(table.reverse)</text>
<text text-anchor="middle" x="3304" y="-883.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.load(historian)</text>
<text text-anchor="middle" x="3304" y="-868.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local conn = sql.open(historian.home_dir .. &quot;/.bridge&quot;)</text>
<text text-anchor="middle" x="3304" y="-852.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.conn = conn</text>
<text text-anchor="middle" x="3304" y="-837.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local table_names = conn:exec(get_tables)</text>
<text text-anchor="middle" x="3304" y="-821.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not table_names or not has(table_names.name, &quot;repl&quot;) then</text>
<text text-anchor="middle" x="3304" y="-806.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local success, err = sql.pexec(conn, create_repl_table)</text>
<text text-anchor="middle" x="3304" y="-791.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; success is nil for creation, false for error</text>
<text text-anchor="middle" x="3304" y="-775.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if success == false then</text>
<text text-anchor="middle" x="3304" y="-760.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error(err)</text>
<text text-anchor="middle" x="3304" y="-744.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3304" y="-729.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3304" y="-714.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.insert_stmt = conn:prepare(insert_line_stmt)</text>
<text text-anchor="middle" x="3304" y="-698.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local pop_stmt = sql.format(get_recent, historian.project,</text>
<text text-anchor="middle" x="3304" y="-683.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.HISTORY_LIMIT)</text>
<text text-anchor="middle" x="3304" y="-667.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local values, err = sql.pexec(conn, pop_stmt)</text>
<text text-anchor="middle" x="3304" y="-652.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if values then</text>
<text text-anchor="middle" x="3304" y="-637.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i,v in ipairs(reverse(values[1])) do</text>
<text text-anchor="middle" x="3304" y="-621.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian[i] = Linebuf(v)</text>
<text text-anchor="middle" x="3304" y="-606.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3304" y="-590.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.cursor = #historian</text>
<text text-anchor="middle" x="3304" y="-575.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.up = false</text>
<text text-anchor="middle" x="3304" y="-560.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3304" y="-544.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3304" y="-513.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.persist(historian, linebuf)</text>
<text text-anchor="middle" x="3304" y="-497.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local lb = tostring(linebuf)</text>
<text text-anchor="middle" x="3304" y="-482.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.insert_stmt:bind(historian.project, lb)</text>
<text text-anchor="middle" x="3304" y="-467.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local err = historian.insert_stmt:step()</text>
<text text-anchor="middle" x="3304" y="-451.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not err then</text>
<text text-anchor="middle" x="3304" y="-436.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.insert_stmt:clearbind():reset()</text>
<text text-anchor="middle" x="3304" y="-420.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="3304" y="-405.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;error(error)</text>
<text text-anchor="middle" x="3304" y="-390.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3304" y="-374.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return true</text>
<text text-anchor="middle" x="3304" y="-359.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_25&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3092.3652,-975.1313C3098.1894,-965.9222 3105.9972,-953.5768 3115.1843,-939.0504"/>
<polygon fill="#000000" stroke="#000000" points="3118.3613,-940.5751 3120.7484,-930.2527 3112.4452,-936.8335 3118.3613,-940.5751"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2292,-231.1017 1926,-231.1017 1926,-175.2988 2292,-175.2988 2292,-231.1017"/>
<text text-anchor="middle" x="2109" y="-183.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">This is where we either create query or create our</text>
</g>
<!-- raw_27&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>raw_27&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2243.4664,-622.2106C2244.0711,-575.4639 2242.0028,-448.4336 2206,-351.0005 2190.605,-309.3375 2161.6185,-267.5477 2139.3263,-239.088"/>
<polygon fill="#000000" stroke="#000000" points="2141.9055,-236.7082 2132.94,-231.0627 2136.4281,-241.0669 2141.9055,-236.7082"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2364,-221.2002 2310,-221.2002 2310,-185.2002 2364,-185.2002 2364,-221.2002"/>
<text text-anchor="middle" x="2337" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_28&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>prespace_28&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2334.1251,-622.2675C2334.5921,-554.1996 2336.2356,-314.6301 2336.8045,-231.7042"/>
<polygon fill="#000000" stroke="#000000" points="2340.3056,-231.5354 2336.8744,-221.5116 2333.3058,-231.4873 2340.3056,-231.5354"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2466.5,-221.2002 2387.5,-221.2002 2387.5,-185.2002 2466.5,-185.2002 2466.5,-221.2002"/>
<text text-anchor="middle" x="2427" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">~/.bridge</text>
</g>
<!-- literal_29&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>literal_29&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2429.8749,-622.2675C2429.4079,-554.1996 2427.7644,-314.6301 2427.1955,-231.7042"/>
<polygon fill="#000000" stroke="#000000" points="2430.6942,-231.4873 2427.1256,-221.5116 2423.6944,-231.5354 2430.6942,-231.4873"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2571,-223.1023 2485,-223.1023 2485,-183.2982 2571,-183.2982 2571,-223.1023"/>
<text text-anchor="middle" x="2528" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> database.</text>
</g>
<!-- raw_30&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>raw_30&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2506.9173,-622.2675C2510.3218,-554.5947 2522.2545,-317.4056 2526.4926,-233.1641"/>
<polygon fill="#000000" stroke="#000000" points="2529.9972,-233.1584 2527.0041,-222.9952 2523.006,-232.8067 2529.9972,-233.1584"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3699.5,-658.501 3550.5,-658.501 3550.5,-622.501 3699.5,-622.501 3699.5,-658.501"/>
<text text-anchor="middle" x="3625" y="-637.001" font-family="Inconsolata" font-size="14.00" fill="#000000">** Historian:prev()</text>
</g>
<!-- header_37&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>header_37&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3639.2147,-974.6407C3636.7542,-916.804 3629.183,-738.829 3626.2132,-669.0195"/>
<polygon fill="#000000" stroke="#000000" points="3629.6995,-668.6213 3625.7776,-658.7792 3622.7059,-668.9189 3629.6995,-668.6213"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="3745" cy="-640.501" rx="27" ry="18"/>
<text text-anchor="middle" x="3745" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_38&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3815.99,-977.7219C3804.0975,-965.906 3788.97,-948.5165 3781,-930.0016 3742.5004,-840.5634 3741.523,-722.1839 3743.4234,-668.7753"/>
<polygon fill="#000000" stroke="#000000" points="3746.9241,-668.8304 3743.8458,-658.6926 3739.9302,-668.5373 3746.9241,-668.8304"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="4240,-721.5013 3790,-721.5013 3790,-559.5007 4240,-559.5007 4240,-721.5013"/>
<text text-anchor="middle" x="4015" y="-706.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.prev(historian)</text>
<text text-anchor="middle" x="4015" y="-690.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if historian.cursor == 0 then</text>
<text text-anchor="middle" x="4015" y="-675.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Linebuf()</text>
<text text-anchor="middle" x="4015" y="-660.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4015" y="-644.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local delta = historian.cursor &gt; 1 and 1 or 0</text>
<text text-anchor="middle" x="4015" y="-629.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local linebuf = historian[historian.cursor &#45; delta]:clone()</text>
<text text-anchor="middle" x="4015" y="-613.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = historian.cursor &#45; delta</text>
<text text-anchor="middle" x="4015" y="-598.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;linebuf.cursor = #linebuf.line + 1</text>
<text text-anchor="middle" x="4015" y="-583.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return linebuf</text>
<text text-anchor="middle" x="4015" y="-567.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>codeblock_39&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3986.5707,-974.6407C3990.3552,-930.1602 4000.1855,-814.6213 4007.2256,-731.8758"/>
<polygon fill="#000000" stroke="#000000" points="4010.7309,-731.9615 4008.0914,-721.7007 4003.7561,-731.368 4010.7309,-731.9615"/>
</g>
<!-- header_46 -->
<g id="node47" class="node">
<title>header_46</title>
<ellipse fill="none" stroke="#000000" cx="4340" cy="-640.501" rx="82.2061" ry="18"/>
<text text-anchor="middle" x="4340" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:next()</text>
</g>
<!-- section_40&#45;&gt;header_46 -->
<g id="edge46" class="edge">
<title>section_40&#45;&gt;header_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4402.5445,-974.6407C4391.7186,-916.804 4358.4051,-738.829 4345.3381,-669.0195"/>
<polygon fill="#000000" stroke="#000000" points="4348.7015,-667.9645 4343.4213,-658.7792 4341.821,-669.2524 4348.7015,-667.9645"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="4473" cy="-640.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4473" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_40&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_40&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4414.487,-974.9848C4419.9725,-962.5741 4426.8398,-945.5995 4431,-930.0016 4455.9877,-836.3147 4467.0646,-721.3505 4471.0817,-668.9531"/>
<polygon fill="#000000" stroke="#000000" points="4474.589,-668.9823 4471.8342,-658.7519 4467.6079,-668.4672 4474.589,-668.9823"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="4713" cy="-640.501" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4713" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 134&#45;149</text>
</g>
<!-- section_40&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_40&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4441.9325,-977.139C4464.3042,-966.0463 4492.7618,-949.7344 4514,-930.0016 4601.4607,-848.7398 4671.5193,-722.4873 4699.6528,-667.5586"/>
<polygon fill="#000000" stroke="#000000" points="4702.8645,-668.9634 4704.2615,-658.4611 4696.6201,-665.8 4702.8645,-668.9634"/>
</g>
<!-- header_59 -->
<g id="node60" class="node">
<title>header_59</title>
<ellipse fill="none" stroke="#000000" cx="5148" cy="-640.501" rx="95.2951" ry="18"/>
<text text-anchor="middle" x="5148" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:append()</text>
</g>
<!-- section_41&#45;&gt;header_59 -->
<g id="edge59" class="edge">
<title>section_41&#45;&gt;header_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5355.5058,-978.0735C5331.1464,-967.6907 5301.4464,-951.7992 5281,-930.0016 5207.2355,-851.3622 5168.6916,-724.6227 5154.5008,-668.6348"/>
<polygon fill="#000000" stroke="#000000" points="5157.8493,-667.5948 5152.0576,-658.7231 5151.0528,-669.2702 5157.8493,-667.5948"/>
</g>
<!-- prose_60 -->
<g id="node61" class="node">
<title>prose_60</title>
<ellipse fill="none" stroke="#000000" cx="5322" cy="-640.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5322" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_41&#45;&gt;prose_60 -->
<g id="edge60" class="edge">
<title>section_41&#45;&gt;prose_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5391.6606,-975.0379C5387.4148,-962.5067 5381.9083,-945.3714 5378,-930.0016 5353.9136,-835.2799 5334.607,-720.8244 5326.3474,-668.7524"/>
<polygon fill="#000000" stroke="#000000" points="5329.7647,-667.9527 5324.7548,-658.6173 5322.8496,-669.0394 5329.7647,-667.9527"/>
</g>
<!-- codeblock_61 -->
<g id="node62" class="node">
<title>codeblock_61</title>
<ellipse fill="none" stroke="#000000" cx="5474" cy="-640.501" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5474" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 154&#45;161</text>
</g>
<!-- section_41&#45;&gt;codeblock_61 -->
<g id="edge61" class="edge">
<title>section_41&#45;&gt;codeblock_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5401.9791,-974.6407C5414.4709,-916.685 5452.9642,-738.0961 5467.9457,-668.5899"/>
<polygon fill="#000000" stroke="#000000" points="5471.3746,-669.2921 5470.0603,-658.7792 5464.5318,-667.8172 5471.3746,-669.2921"/>
</g>
<!-- codeblock_62 -->
<g id="node63" class="node">
<title>codeblock_62</title>
<ellipse fill="none" stroke="#000000" cx="5737" cy="-640.501" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5737" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 163&#45;170</text>
</g>
<!-- section_41&#45;&gt;codeblock_62 -->
<g id="edge62" class="edge">
<title>section_41&#45;&gt;codeblock_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5457.767,-981.955C5493.4897,-972.8469 5537.9984,-956.9338 5570,-930.0016 5657.1379,-856.667 5708.8285,-725.5976 5728.2026,-668.4392"/>
<polygon fill="#000000" stroke="#000000" points="5731.6209,-669.2506 5731.4453,-658.6572 5724.9764,-667.0479 5731.6209,-669.2506"/>
</g>
<!-- codeblock_63 -->
<g id="node64" class="node">
<title>codeblock_63</title>
<ellipse fill="none" stroke="#000000" cx="5966" cy="-640.501" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5966" y="-636.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 172&#45;174</text>
</g>
<!-- section_41&#45;&gt;codeblock_63 -->
<g id="edge63" class="edge">
<title>section_41&#45;&gt;codeblock_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5472.9876,-990.7173C5582.0638,-985.8583 5777.5398,-971.4753 5833,-930.0016 5920.3609,-864.6722 5952.054,-728.1764 5962.002,-668.9435"/>
<polygon fill="#000000" stroke="#000000" points="5965.4983,-669.2432 5963.615,-658.8171 5958.5854,-668.142 5965.4983,-669.2432"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="3772,-221.2002 3718,-221.2002 3718,-185.2002 3772,-185.2002 3772,-221.2002"/>
</g>
<!-- raw_43&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>raw_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3745,-622.2675C3745,-554.1996 3745,-314.6301 3745,-231.7042"/>
<polygon fill="#000000" stroke="#000000" points="3748.5001,-231.5116 3745,-221.5116 3741.5001,-231.5116 3748.5001,-231.5116"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="4241,-221.2002 4085,-221.2002 4085,-185.2002 4241,-185.2002 4241,-221.2002"/>
<text text-anchor="middle" x="4163" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:next()</text>
</g>
<!-- header_46&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>header_46&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4335.798,-622.3737C4324.7345,-576.0097 4292.6221,-449.8036 4249,-351.0005 4229.5248,-306.8895 4200.1436,-259.2563 4181.2659,-230.3268"/>
<polygon fill="#000000" stroke="#000000" points="4183.9549,-228.0462 4175.5318,-221.6195 4178.1087,-231.8962 4183.9549,-228.0462"/>
</g>
<!-- raw_50 -->
<g id="node51" class="node">
<title>raw_50</title>
<ellipse fill="none" stroke="#000000" cx="4286" cy="-203.2002" rx="27" ry="18"/>
<text text-anchor="middle" x="4286" y="-199.0002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_47&#45;&gt;raw_50 -->
<g id="edge50" class="edge">
<title>prose_47&#45;&gt;raw_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4476.2839,-622.3206C4484.1838,-572.4668 4498.8859,-431.9358 4431,-351.0005 4398.2137,-311.9118 4357.9402,-351.2104 4322,-315.0005 4299.7526,-292.5861 4291.2476,-256.3732 4287.9999,-231.2612"/>
<polygon fill="#000000" stroke="#000000" points="4291.4716,-230.8113 4286.9051,-221.2511 4284.5131,-231.5724 4291.4716,-230.8113"/>
</g>
<!-- prespace_51 -->
<g id="node52" class="node">
<title>prespace_51</title>
<ellipse fill="none" stroke="#000000" cx="4377" cy="-203.2002" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="4377" y="-199.0002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_47&#45;&gt;prespace_51 -->
<g id="edge51" class="edge">
<title>prose_47&#45;&gt;prespace_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4471.6698,-622.2928C4468.0254,-576.2553 4456.4113,-451.7025 4431,-351.0005 4420.1179,-307.8761 4401.2371,-259.8258 4388.9324,-230.5562"/>
<polygon fill="#000000" stroke="#000000" points="4392.0133,-228.8573 4384.8783,-221.0252 4385.5719,-231.5973 4392.0133,-228.8573"/>
</g>
<!-- literal_52 -->
<g id="node53" class="node">
<title>literal_52</title>
<ellipse fill="none" stroke="#000000" cx="4473" cy="-203.2002" rx="31.481" ry="18"/>
<text text-anchor="middle" x="4473" y="-199.0002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_47&#45;&gt;literal_52 -->
<g id="edge52" class="edge">
<title>prose_47&#45;&gt;literal_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4473,-622.2675C4473,-554.1996 4473,-314.6301 4473,-231.7042"/>
<polygon fill="#000000" stroke="#000000" points="4476.5001,-231.5116 4473,-221.5116 4469.5001,-231.5116 4476.5001,-231.5116"/>
</g>
<!-- raw_53 -->
<g id="node54" class="node">
<title>raw_53</title>
<ellipse fill="none" stroke="#000000" cx="4549" cy="-203.2002" rx="27" ry="18"/>
<text text-anchor="middle" x="4549" y="-199.0002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_47&#45;&gt;raw_53 -->
<g id="edge53" class="edge">
<title>prose_47&#45;&gt;raw_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4476.121,-622.543C4487.895,-554.7958 4529.6798,-314.3677 4544.0799,-231.5102"/>
<polygon fill="#000000" stroke="#000000" points="4547.5468,-232.0022 4545.8108,-221.5506 4540.6502,-230.8036 4547.5468,-232.0022"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5037.5,-314.801 4594.5,-314.801 4594.5,-91.5995 5037.5,-91.5995 5037.5,-314.801"/>
<text text-anchor="middle" x="4816" y="-299.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.next(historian)</text>
<text text-anchor="middle" x="4816" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local delta = historian.cursor &lt; #historian and 1 or 0</text>
<text text-anchor="middle" x="4816" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if historian.cursor == 0 then</text>
<text text-anchor="middle" x="4816" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Linebuf()</text>
<text text-anchor="middle" x="4816" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4816" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local linebuf= historian[historian.cursor + delta]:clone()</text>
<text text-anchor="middle" x="4816" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = historian.cursor + delta</text>
<text text-anchor="middle" x="4816" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;linebuf.cursor = #linebuf.line + 1</text>
<text text-anchor="middle" x="4816" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not (delta &gt; 0) and #linebuf.line &gt; 0 then</text>
<text text-anchor="middle" x="4816" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return linebuf, true</text>
<text text-anchor="middle" x="4816" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="4816" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return linebuf, false</text>
<text text-anchor="middle" x="4816" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4816" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>codeblock_48&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4717.2946,-622.2675C4729.0605,-572.314 4762.582,-429.9938 4787.3104,-325.006"/>
<polygon fill="#000000" stroke="#000000" points="4790.7891,-325.5029 4789.675,-314.9668 4783.9755,-323.898 4790.7891,-325.5029"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="4333,-55.6015 3855,-55.6015 3855,.2015 4333,.2015 4333,-55.6015"/>
<text text-anchor="middle" x="4094" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">Returns the next linebuf in history, and a second flag to tell the</text>
</g>
<!-- raw_50&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_50&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4284.7967,-184.9823C4282.261,-160.696 4274.3926,-117.7247 4250,-91.4 4238.1989,-78.6642 4223.4846,-68.4098 4207.8423,-60.1709"/>
<polygon fill="#000000" stroke="#000000" points="4209.0531,-56.8643 4198.5402,-55.5493 4205.9385,-63.1332 4209.0531,-56.8643"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="4405,-45.7 4351,-45.7 4351,-9.7 4405,-9.7 4405,-45.7"/>
</g>
<!-- prespace_51&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>prespace_51&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4377.1033,-185.0797C4377.2774,-154.5231 4377.6306,-92.5279 4377.838,-56.1322"/>
<polygon fill="#000000" stroke="#000000" points="4381.3402,-55.7418 4377.8973,-45.722 4374.3403,-55.7019 4381.3402,-55.7418"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="4523,-45.7 4423,-45.7 4423,-9.7 4523,-9.7 4523,-45.7"/>
<text text-anchor="middle" x="4473" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">modeselektor</text>
</g>
<!-- literal_52&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>literal_52&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4473,-185.0797C4473,-154.5231 4473,-92.5279 4473,-56.1322"/>
<polygon fill="#000000" stroke="#000000" points="4476.5001,-55.722 4473,-45.722 4469.5001,-55.7221 4476.5001,-55.722"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4781,-45.7 4541,-45.7 4541,-9.7 4781,-9.7 4781,-45.7"/>
<text text-anchor="middle" x="4661" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> it might be time for a new one.</text>
</g>
<!-- raw_53&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>raw_53&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4551.6171,-185.1968C4555.6782,-161.9061 4565.1902,-120.8356 4585,-91.4 4595.2851,-76.1174 4610.2495,-62.4818 4624.1849,-51.7863"/>
<polygon fill="#000000" stroke="#000000" points="4626.2685,-54.5985 4632.2278,-45.8385 4622.1064,-48.9703 4626.2685,-54.5985"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="5226,-221.2002 5056,-221.2002 5056,-185.2002 5226,-185.2002 5226,-221.2002"/>
<text text-anchor="middle" x="5141" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:append()</text>
</g>
<!-- header_59&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>header_59&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5147.7081,-622.2675C5146.6185,-554.1996 5142.7837,-314.6301 5141.4563,-231.7042"/>
<polygon fill="#000000" stroke="#000000" points="5144.9528,-231.4543 5141.2931,-221.5116 5137.9537,-231.5664 5144.9528,-231.4543"/>
</g>
<!-- raw_65 -->
<g id="node66" class="node">
<title>raw_65</title>
<ellipse fill="none" stroke="#000000" cx="5271" cy="-203.2002" rx="27" ry="18"/>
<text text-anchor="middle" x="5271" y="-199.0002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_60&#45;&gt;raw_65 -->
<g id="edge65" class="edge">
<title>prose_60&#45;&gt;raw_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5319.8735,-622.2675C5311.927,-554.1301 5283.9384,-314.141 5274.2947,-231.4509"/>
<polygon fill="#000000" stroke="#000000" points="5277.7705,-231.0388 5273.1356,-221.5116 5270.8176,-231.8498 5277.7705,-231.0388"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="5647.5,-253.6012 5316.5,-253.6012 5316.5,-152.7993 5647.5,-152.7993 5647.5,-253.6012"/>
<text text-anchor="middle" x="5482" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.append(historian, linebuf)</text>
<text text-anchor="middle" x="5482" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian[#historian + 1] = linebuf</text>
<text text-anchor="middle" x="5482" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = #historian</text>
<text text-anchor="middle" x="5482" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian:persist(linebuf)</text>
<text text-anchor="middle" x="5482" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return true</text>
<text text-anchor="middle" x="5482" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_61&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>codeblock_61&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5474.3336,-622.2675C5475.4443,-561.5533 5479.0511,-364.3925 5480.8941,-263.6522"/>
<polygon fill="#000000" stroke="#000000" points="5484.394,-263.6859 5481.0776,-253.6235 5477.3951,-263.5578 5484.394,-263.6859"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="5934,-253.6012 5666,-253.6012 5666,-152.7993 5934,-152.7993 5934,-253.6012"/>
<text text-anchor="middle" x="5800" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new()</text>
<text text-anchor="middle" x="5800" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local historian = meta(Historian)</text>
<text text-anchor="middle" x="5800" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian:load()</text>
<text text-anchor="middle" x="5800" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return historian</text>
<text text-anchor="middle" x="5800" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5800" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.idEst = new</text>
</g>
<!-- codeblock_62&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>codeblock_62&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5739.6268,-622.2675C5748.3736,-561.5533 5776.7777,-364.3925 5791.2909,-263.6522"/>
<polygon fill="#000000" stroke="#000000" points="5794.774,-264.0204 5792.7357,-253.6235 5787.8455,-263.0222 5794.774,-264.0204"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="6038,-221.2002 5952,-221.2002 5952,-185.2002 6038,-185.2002 6038,-221.2002"/>
<text text-anchor="middle" x="5995" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_63&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>codeblock_63&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5967.2092,-622.2675C5971.7232,-554.1996 5987.6104,-314.6301 5993.1097,-231.7042"/>
<polygon fill="#000000" stroke="#000000" points="5996.6162,-231.7213 5993.7857,-221.5116 5989.6315,-231.2581 5996.6162,-231.7213"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="5298,-45.7 5244,-45.7 5244,-9.7 5298,-9.7 5298,-45.7"/>
</g>
<!-- raw_65&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>raw_65&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5271,-185.0797C5271,-154.5231 5271,-92.5279 5271,-56.1322"/>
<polygon fill="#000000" stroke="#000000" points="5274.5001,-55.722 5271,-45.722 5267.5001,-55.7221 5274.5001,-55.722"/>
</g>
</g>
</svg>
