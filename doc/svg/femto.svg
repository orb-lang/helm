<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="1840pt" height="2905pt"
 viewBox="0.00 0.00 1840.00 2905.43" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2901.4299)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2901.4299 1836,-2901.4299 1836,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="512.5" cy="-2879.4299" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="512.5" y="-2875.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 179</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="512.5" cy="-2807.4299" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="512.5" y="-2803.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;8</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M512.5,-2861.2613C512.5,-2853.5609 512.5,-2844.4043 512.5,-2835.8466"/>
<polygon fill="#000000" stroke="#000000" points="516.0001,-2835.8432 512.5,-2825.8432 509.0001,-2835.8432 516.0001,-2835.8432"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="373.5" cy="-2735.4299" rx="47.4168" ry="18"/>
<text text-anchor="middle" x="373.5" y="-2731.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Femto</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M482.681,-2791.9841C461.6476,-2781.0891 433.3222,-2766.417 410.7936,-2754.7475"/>
<polygon fill="#000000" stroke="#000000" points="412.3354,-2751.6045 401.8461,-2750.1128 409.1157,-2757.8201 412.3354,-2751.6045"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="471.5" cy="-2735.4299" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="471.5" y="-2731.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M502.3652,-2789.6322C497.5632,-2781.1995 491.7315,-2770.9585 486.4358,-2761.6587"/>
<polygon fill="#000000" stroke="#000000" points="489.3667,-2759.7324 481.3768,-2752.7745 483.2838,-2763.1963 489.3667,-2759.7324"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="553.5" cy="-2735.4299" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="553.5" y="-2731.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M522.6348,-2789.6322C527.4368,-2781.1995 533.2685,-2770.9585 538.5642,-2761.6587"/>
<polygon fill="#000000" stroke="#000000" points="541.7162,-2763.1963 543.6232,-2752.7745 535.6333,-2759.7324 541.7162,-2763.1963"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="818.5" cy="-2735.4299" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="818.5" y="-2731.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 9&#45;31</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M557.6514,-2796.8061C611.6346,-2784.1042 702.0633,-2762.8268 760.9962,-2748.9603"/>
<polygon fill="#000000" stroke="#000000" points="761.9623,-2752.3286 770.8948,-2746.6312 760.359,-2745.5147 761.9623,-2752.3286"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="409.5,-2681.4299 337.5,-2681.4299 337.5,-2645.4299 409.5,-2645.4299 409.5,-2681.4299"/>
<text text-anchor="middle" x="373.5" y="-2659.93" font-family="Inconsolata" font-size="14.00" fill="#000000">* &#160;Femto</text>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M373.5,-2717.2613C373.5,-2709.5609 373.5,-2700.4043 373.5,-2691.8466"/>
<polygon fill="#000000" stroke="#000000" points="377.0001,-2691.8432 373.5,-2681.8432 370.0001,-2691.8432 377.0001,-2691.8432"/>
</g>
<!-- raw_7 -->
<g id="node8" class="node">
<title>raw_7</title>
<ellipse fill="none" stroke="#000000" cx="462.5" cy="-2663.4299" rx="27" ry="18"/>
<text text-anchor="middle" x="462.5" y="-2659.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;raw_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M469.2289,-2717.2613C468.2664,-2709.5609 467.1218,-2700.4043 466.0521,-2691.8466"/>
<polygon fill="#000000" stroke="#000000" points="469.5151,-2691.3318 464.8017,-2681.8432 462.5691,-2692.2001 469.5151,-2691.3318"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="553.5" cy="-2663.4299" rx="27" ry="18"/>
<text text-anchor="middle" x="553.5" y="-2659.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_4&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M553.5,-2717.2613C553.5,-2709.5609 553.5,-2700.4043 553.5,-2691.8466"/>
<polygon fill="#000000" stroke="#000000" points="557.0001,-2691.8432 553.5,-2681.8432 550.0001,-2691.8432 557.0001,-2691.8432"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="713.5" cy="-2663.4299" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="713.5" y="-2659.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : includes</text>
</g>
<!-- section_5&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M794.147,-2718.7307C779.7322,-2708.8463 761.2981,-2696.2058 745.6936,-2685.5055"/>
<polygon fill="#000000" stroke="#000000" points="747.5856,-2682.5591 737.3589,-2679.7904 743.6269,-2688.3322 747.5856,-2682.5591"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="818.5" cy="-2663.4299" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="818.5" y="-2659.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M818.5,-2717.2613C818.5,-2709.5609 818.5,-2700.4043 818.5,-2691.8466"/>
<polygon fill="#000000" stroke="#000000" points="822.0001,-2691.8432 818.5,-2681.8432 815.0001,-2691.8432 822.0001,-2691.8432"/>
</g>
<!-- codeblock_13 -->
<g id="node14" class="node">
<title>codeblock_13</title>
<ellipse fill="none" stroke="#000000" cx="947.5" cy="-2663.4299" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="947.5" y="-2659.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 14&#45;29</text>
</g>
<!-- section_5&#45;&gt;codeblock_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;codeblock_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M847.1293,-2719.4508C865.2814,-2709.3194 888.9911,-2696.086 908.8085,-2685.0252"/>
<polygon fill="#000000" stroke="#000000" points="910.5797,-2688.0449 917.6059,-2680.115 907.1681,-2681.9325 910.5797,-2688.0449"/>
</g>
<!-- section_14 -->
<g id="node15" class="node">
<title>section_14</title>
<ellipse fill="none" stroke="#000000" cx="1128.5" cy="-2663.4299" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1128.5" y="-2659.2299" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 32&#45;179</text>
</g>
<!-- section_5&#45;&gt;section_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;section_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M866.5974,-2724.2589C920.2927,-2711.7878 1007.36,-2691.5657 1066.2211,-2677.8947"/>
<polygon fill="#000000" stroke="#000000" points="1067.1926,-2681.2623 1076.1415,-2675.5906 1065.6089,-2674.4438 1067.1926,-2681.2623"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="443,-2531.731 0,-2531.731 0,-2459.9287 443,-2459.9287 443,-2531.731"/>
<text text-anchor="middle" x="221.5" y="-2468.3298" font-family="Inconsolata" font-size="14.00" fill="#000000">I just got orb stood up in the pylon bootloader distribution.</text>
</g>
<!-- raw_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>raw_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M443.5891,-2650.2786C409.1466,-2626.326 334.8413,-2574.6515 281.6646,-2537.6704"/>
<polygon fill="#000000" stroke="#000000" points="283.529,-2534.7039 273.3208,-2531.8679 279.5324,-2540.4508 283.529,-2534.7039"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="645.5,-2523.7313 461.5,-2523.7313 461.5,-2467.9283 645.5,-2467.9283 645.5,-2523.7313"/>
<text text-anchor="middle" x="553.5" y="-2492.3298" font-family="Inconsolata" font-size="14.00" fill="#000000">I am excited about this.</text>
</g>
<!-- raw_9&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>raw_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M553.5,-2645.1747C553.5,-2618.6489 553.5,-2568.8284 553.5,-2534.0549"/>
<polygon fill="#000000" stroke="#000000" points="557.0001,-2533.7887 553.5,-2523.7887 550.0001,-2533.7887 557.0001,-2533.7887"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="763.5,-2513.8298 663.5,-2513.8298 663.5,-2477.8298 763.5,-2477.8298 763.5,-2513.8298"/>
<text text-anchor="middle" x="713.5" y="-2492.3298" font-family="Inconsolata" font-size="14.00" fill="#000000">** &#160;includes</text>
</g>
<!-- header_11&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>header_11&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M713.5,-2645.1747C713.5,-2616.0838 713.5,-2558.9752 713.5,-2524.4238"/>
<polygon fill="#000000" stroke="#000000" points="717.0001,-2524.0625 713.5,-2514.0625 710.0001,-2524.0625 717.0001,-2524.0625"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="808.5" cy="-2495.8298" rx="27" ry="18"/>
<text text-anchor="middle" x="808.5" y="-2491.6298" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_12&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M817.4108,-2645.1747C815.6751,-2616.0838 812.2676,-2558.9752 810.2061,-2524.4238"/>
<polygon fill="#000000" stroke="#000000" points="813.6773,-2523.8363 809.5879,-2514.0625 806.6898,-2524.2532 813.6773,-2523.8363"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1045,-2609.5302 854,-2609.5302 854,-2382.1295 1045,-2382.1295 1045,-2609.5302"/>
<text text-anchor="middle" x="949.5" y="-2594.2299" font-family="Inconsolata" font-size="14.00" fill="#000000">sql = require &quot;sqlite&quot;</text>
<text text-anchor="middle" x="949.5" y="-2562.8299" font-family="Inconsolata" font-size="14.00" fill="#000000">lfs = require &quot;lfs&quot;</text>
<text text-anchor="middle" x="949.5" y="-2547.4299" font-family="Inconsolata" font-size="14.00" fill="#000000">ffi = require &quot;ffi&quot;</text>
<text text-anchor="middle" x="949.5" y="-2516.0298" font-family="Inconsolata" font-size="14.00" fill="#000000">uv = require &quot;luv&quot;</text>
<text text-anchor="middle" x="949.5" y="-2484.6298" font-family="Inconsolata" font-size="14.00" fill="#000000">L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="949.5" y="-2453.2298" font-family="Inconsolata" font-size="14.00" fill="#000000">a = require &quot;anterm&quot;</text>
<text text-anchor="middle" x="949.5" y="-2421.8298" font-family="Inconsolata" font-size="14.00" fill="#000000">c = require &quot;color&quot;</text>
<text text-anchor="middle" x="949.5" y="-2390.4297" font-family="Inconsolata" font-size="14.00" fill="#000000">watch = require &quot;watcher&quot;</text>
</g>
<!-- codeblock_13&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_13&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M947.7178,-2645.1747C947.8029,-2638.0482 947.908,-2629.2401 948.0243,-2619.4942"/>
<polygon fill="#000000" stroke="#000000" points="951.5243,-2619.5043 948.144,-2609.4632 944.5248,-2619.4207 951.5243,-2619.5043"/>
</g>
<!-- header_19 -->
<g id="node20" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1115.5" cy="-2495.8298" rx="38.2457" ry="18"/>
<text text-anchor="middle" x="1115.5" y="-2491.6298" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : utils</text>
</g>
<!-- section_14&#45;&gt;header_19 -->
<g id="edge19" class="edge">
<title>section_14&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1127.084,-2645.1747C1124.8276,-2616.0838 1120.3979,-2558.9752 1117.7179,-2524.4238"/>
<polygon fill="#000000" stroke="#000000" points="1121.1772,-2523.7619 1116.9142,-2514.0625 1114.1981,-2524.3033 1121.1772,-2523.7619"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1203.5" cy="-2495.8298" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1203.5" y="-2491.6298" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_14&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1141.161,-2645.5015C1148.0442,-2635.2514 1156.3763,-2621.974 1162.5,-2609.4299 1176.3617,-2581.035 1188.1113,-2546.7045 1195.4319,-2523.2664"/>
<polygon fill="#000000" stroke="#000000" points="1198.8009,-2524.2178 1198.3834,-2513.6312 1192.1079,-2522.1675 1198.8009,-2524.2178"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1438.5" cy="-2495.8298" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="1438.5" y="-2491.6298" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 34&#45;179</text>
</g>
<!-- section_14&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_14&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1164.2024,-2647.8568C1187.3597,-2637.5004 1218.0359,-2623.2988 1244.5,-2609.4299 1300.8283,-2579.9104 1364.0429,-2541.9484 1402.5593,-2518.249"/>
<polygon fill="#000000" stroke="#000000" points="1404.6587,-2521.0663 1411.3303,-2512.8359 1400.9823,-2515.1095 1404.6587,-2521.0663"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1054.5,-1244.4152 506.5,-1244.4152 506.5,-1173.8145 1054.5,-1173.8145 1054.5,-1244.4152"/>
<text text-anchor="middle" x="780.5" y="-1197.3149" font-family="Inconsolata" font-size="14.00" fill="#000000">This all goes into global space for now. &#160;Our more sophisticated loader will</text>
<text text-anchor="middle" x="780.5" y="-1181.9148" font-family="Inconsolata" font-size="14.00" fill="#000000">handle namespace isolation. Meanwhile we&#39;re building a repl, so.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M808.1042,-2477.6404C805.1137,-2340.2142 786.0643,-1464.8152 781.4876,-1254.5003"/>
<polygon fill="#000000" stroke="#000000" points="784.9852,-1254.3456 781.2684,-1244.4242 777.9868,-1254.498 784.9852,-1254.3456"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1158.5,-1227.1148 1072.5,-1227.1148 1072.5,-1191.1148 1158.5,-1191.1148 1158.5,-1227.1148"/>
<text text-anchor="middle" x="1115.5" y="-1205.6149" font-family="Inconsolata" font-size="14.00" fill="#000000">**** utils</text>
</g>
<!-- header_19&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>header_19&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1115.5,-2477.6404C1115.5,-2336.1932 1115.5,-1412.9557 1115.5,-1237.7824"/>
<polygon fill="#000000" stroke="#000000" points="1119.0001,-1237.5592 1115.5,-1227.5592 1112.0001,-1237.5592 1119.0001,-1237.5592"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1203.5" cy="-1209.1148" rx="27" ry="18"/>
<text text-anchor="middle" x="1203.5" y="-1204.9148" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_20&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1203.5,-2477.6404C1203.5,-2336.1932 1203.5,-1412.9557 1203.5,-1237.7824"/>
<polygon fill="#000000" stroke="#000000" points="1207.0001,-1237.5592 1203.5,-1227.5592 1200.0001,-1237.5592 1207.0001,-1237.5592"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1832,-2346.3446 1249,-2346.3446 1249,-71.8851 1832,-71.8851 1832,-2346.3446"/>
<text text-anchor="middle" x="1540.5" y="-2315.0297" font-family="Inconsolata" font-size="14.00" fill="#000000">local usecolors</text>
<text text-anchor="middle" x="1540.5" y="-2299.6297" font-family="Inconsolata" font-size="14.00" fill="#000000">stdout = &quot;&quot;</text>
<text text-anchor="middle" x="1540.5" y="-2268.2296" font-family="Inconsolata" font-size="14.00" fill="#000000">if uv.guess_handle(1) == &quot;tty&quot; then</text>
<text text-anchor="middle" x="1540.5" y="-2252.8296" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;stdout = uv.new_tty(1, false)</text>
<text text-anchor="middle" x="1540.5" y="-2237.4296" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;usecolors = true</text>
<text text-anchor="middle" x="1540.5" y="-2222.0295" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="1540.5" y="-2206.6295" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;stdout = uv.new_pipe(false)</text>
<text text-anchor="middle" x="1540.5" y="-2191.2295" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;uv.pipe_open(utils.stdout, 1)</text>
<text text-anchor="middle" x="1540.5" y="-2175.8294" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;usecolors = false</text>
<text text-anchor="middle" x="1540.5" y="-2160.4294" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-2129.0294" font-family="Inconsolata" font-size="14.00" fill="#000000">if not usecolors then</text>
<text text-anchor="middle" x="1540.5" y="-2113.6294" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;c.ts = tostring</text>
<text text-anchor="middle" x="1540.5" y="-2098.2293" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; #todo make this properly black and white ts</text>
<text text-anchor="middle" x="1540.5" y="-2082.8293" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-2051.4293" font-family="Inconsolata" font-size="14.00" fill="#000000">function print(...)</text>
<text text-anchor="middle" x="1540.5" y="-2036.0292" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local n = select(&#39;#&#39;, ...)</text>
<text text-anchor="middle" x="1540.5" y="-2020.6292" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local arguments = {...}</text>
<text text-anchor="middle" x="1540.5" y="-2005.2292" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, n do</text>
<text text-anchor="middle" x="1540.5" y="-1989.8291" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;arguments[i] = tostring(arguments[i])</text>
<text text-anchor="middle" x="1540.5" y="-1974.4291" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1540.5" y="-1959.0291" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;uv.write(stdout, table.concat(arguments, &quot;\t&quot;) .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="1540.5" y="-1943.629" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-1912.229" font-family="Inconsolata" font-size="14.00" fill="#000000">function write(str)</text>
<text text-anchor="middle" x="1540.5" y="-1896.829" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;uv.write(stdout, str)</text>
<text text-anchor="middle" x="1540.5" y="-1881.4289" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-1834.0289" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; &#160;*** tty setup</text>
<text text-anchor="middle" x="1540.5" y="-1802.6289" font-family="Inconsolata" font-size="14.00" fill="#000000">if uv.guess_handle(0) ~= &quot;tty&quot; or</text>
<text text-anchor="middle" x="1540.5" y="-1787.2289" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;uv.guess_handle(1) ~= &quot;tty&quot; then</text>
<text text-anchor="middle" x="1540.5" y="-1771.8288" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; Entry point for other consumers!</text>
<text text-anchor="middle" x="1540.5" y="-1756.4288" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error &quot;stdio must be a tty&quot;</text>
<text text-anchor="middle" x="1540.5" y="-1741.0288" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-1709.6287" font-family="Inconsolata" font-size="14.00" fill="#000000">local stdin = uv.new_tty(0, true)</text>
<text text-anchor="middle" x="1540.5" y="-1662.2287" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;[[</text>
<text text-anchor="middle" x="1540.5" y="-1630.8287" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ll keep this around for a bit, it looks nice</text>
<text text-anchor="middle" x="1540.5" y="-1583.4286" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
<text text-anchor="middle" x="1540.5" y="-1552.0286" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; &#160;*** utilities</text>
<text text-anchor="middle" x="1540.5" y="-1520.6286" font-family="Inconsolata" font-size="14.00" fill="#000000">local function gatherResults(success, ...)</text>
<text text-anchor="middle" x="1540.5" y="-1505.2285" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local n = select(&#39;#&#39;, ...)</text>
<text text-anchor="middle" x="1540.5" y="-1489.8285" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return success, { n = n, ... }</text>
<text text-anchor="middle" x="1540.5" y="-1474.4285" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-1443.0284" font-family="Inconsolata" font-size="14.00" fill="#000000">local function printResults(results)</text>
<text text-anchor="middle" x="1540.5" y="-1427.6284" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, results.n do</text>
<text text-anchor="middle" x="1540.5" y="-1412.2284" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;results[i] = c.ts(results[i])</text>
<text text-anchor="middle" x="1540.5" y="-1396.8284" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1540.5" y="-1381.4283" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;print(table.concat(results, &#39;\t&#39;))</text>
<text text-anchor="middle" x="1540.5" y="-1366.0283" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-1334.6283" font-family="Inconsolata" font-size="14.00" fill="#000000">local buffer = &#39;&#39;</text>
<text text-anchor="middle" x="1540.5" y="-1303.2282" font-family="Inconsolata" font-size="14.00" fill="#000000">local function evaluateLine(line)</text>
<text text-anchor="middle" x="1540.5" y="-1287.8282" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if line == &quot;&lt;3\n&quot; then</text>
<text text-anchor="middle" x="1540.5" y="-1272.4282" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;print(&quot;I &quot; .. a.red(&quot;â™¥&quot;) .. &quot; you too!&quot;)</text>
<text text-anchor="middle" x="1540.5" y="-1255.288" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &#39;&gt;&#39;</text>
<text text-anchor="middle" x="1540.5" y="-1239.888" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1540.5" y="-1224.488" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local chunk &#160;= buffer .. line</text>
<text text-anchor="middle" x="1540.5" y="-1209.0879" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f, err = loadstring(&#39;return &#39; .. chunk, &#39;REPL&#39;) &#45;&#45; first we prefix return</text>
<text text-anchor="middle" x="1540.5" y="-1177.6879" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not f then</text>
<text text-anchor="middle" x="1540.5" y="-1162.2879" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;f, err = loadstring(chunk, &#39;REPL&#39;) &#45;&#45; try again without return</text>
<text text-anchor="middle" x="1540.5" y="-1146.8878" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1540.5" y="-1115.4878" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if f then</text>
<text text-anchor="middle" x="1540.5" y="-1100.0878" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;buffer = &#39;&#39;</text>
<text text-anchor="middle" x="1540.5" y="-1084.6878" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local success, results = gatherResults(xpcall(f, debug.traceback))</text>
<text text-anchor="middle" x="1540.5" y="-1053.2877" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="1540.5" y="-1037.8877" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; successful call</text>
<text text-anchor="middle" x="1540.5" y="-1022.4877" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if results.n &gt; 0 then</text>
<text text-anchor="middle" x="1540.5" y="-1007.0876" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;printResults(results)</text>
<text text-anchor="middle" x="1540.5" y="-991.6876" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1540.5" y="-976.2876" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1540.5" y="-960.8875" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; error</text>
<text text-anchor="middle" x="1540.5" y="-945.4875" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;print(results[1])</text>
<text text-anchor="middle" x="1540.5" y="-930.0875" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1540.5" y="-914.6874" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="1540.5" y="-883.2874" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if err:match &quot;&#39;&lt;eof&gt;&#39;$&quot; then</text>
<text text-anchor="middle" x="1540.5" y="-867.8874" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Lua expects some more input; stow it away for next time</text>
<text text-anchor="middle" x="1540.5" y="-852.4873" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;buffer = chunk .. &#39;\n&#39;</text>
<text text-anchor="middle" x="1540.5" y="-837.0873" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return &#39;...&#39;</text>
<text text-anchor="middle" x="1540.5" y="-821.6873" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1540.5" y="-806.2873" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;print(err)</text>
<text text-anchor="middle" x="1540.5" y="-790.8872" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;buffer = &#39;&#39;</text>
<text text-anchor="middle" x="1540.5" y="-775.4872" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1540.5" y="-760.0872" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1540.5" y="-728.6871" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#39;ðŸ‘‰ &#39;</text>
<text text-anchor="middle" x="1540.5" y="-704.4584" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-673.0583" font-family="Inconsolata" font-size="14.00" fill="#000000">local function displayPrompt(prompt)</text>
<text text-anchor="middle" x="1540.5" y="-657.6583" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;uv.write(stdout, prompt)</text>
<text text-anchor="middle" x="1540.5" y="-642.2583" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-610.8583" font-family="Inconsolata" font-size="14.00" fill="#000000">local function onread(err, line)</text>
<text text-anchor="middle" x="1540.5" y="-595.4582" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if err then error(err) end</text>
<text text-anchor="middle" x="1540.5" y="-580.0582" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if line then</text>
<text text-anchor="middle" x="1540.5" y="-564.6582" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local prompt = evaluateLine(line)</text>
<text text-anchor="middle" x="1540.5" y="-549.2581" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;displayPrompt(prompt)</text>
<text text-anchor="middle" x="1540.5" y="-533.8581" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="1540.5" y="-518.4581" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;uv.close(stdin)</text>
<text text-anchor="middle" x="1540.5" y="-503.058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1540.5" y="-487.658" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1540.5" y="-456.258" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; Alternate screen</text>
<text text-anchor="middle" x="1540.5" y="-424.8579" font-family="Inconsolata" font-size="14.00" fill="#000000">coroutine.wrap(function()</text>
<text text-anchor="middle" x="1540.5" y="-409.4579" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Get names for as many values as possible</text>
<text text-anchor="middle" x="1540.5" y="-394.0579" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; into the colorizer</text>
<text text-anchor="middle" x="1540.5" y="-378.6578" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;c.allNames()</text>
<text text-anchor="middle" x="1540.5" y="-363.2578" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; This switches screens and does a wipe,</text>
<text text-anchor="middle" x="1540.5" y="-347.8578" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; then puts the cursor at 1,1.</text>
<text text-anchor="middle" x="1540.5" y="-332.4578" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;write &#39;\27[?47h\27[2J\27[H&#39;</text>
<text text-anchor="middle" x="1540.5" y="-317.0577" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;print &quot;an repl, plz reply uwu ðŸ‘€&quot;</text>
<text text-anchor="middle" x="1540.5" y="-292.829" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;displayPrompt &#39;ðŸ‘‰ &#39;</text>
<text text-anchor="middle" x="1540.5" y="-268.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;uv.read_start(stdin, onread)</text>
<text text-anchor="middle" x="1540.5" y="-253.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end)()</text>
<text text-anchor="middle" x="1540.5" y="-189.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">uv.run(&#39;default&#39;)</text>
<text text-anchor="middle" x="1540.5" y="-158.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; Restore</text>
<text text-anchor="middle" x="1540.5" y="-127.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">print &#39;\27[?47l&#39;</text>
<text text-anchor="middle" x="1540.5" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">print(&quot;kthxbye&quot;)</text>
<text text-anchor="middle" x="1540.5" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return 0</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_21&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1439.9419,-2477.6404C1441.7293,-2455.0923 1445.0916,-2412.6776 1449.5375,-2356.5937"/>
<polygon fill="#000000" stroke="#000000" points="1453.0486,-2356.5904 1450.3499,-2346.3451 1446.0705,-2356.0372 1453.0486,-2356.5904"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1230.5,-36 1176.5,-36 1176.5,0 1230.5,0 1230.5,-36"/>
</g>
<!-- raw_23&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1203.5,-1190.8819C1203.5,-1055.9784 1203.5,-213.4724 1203.5,-46.6754"/>
<polygon fill="#000000" stroke="#000000" points="1207.0001,-46.2648 1203.5,-36.2649 1200.0001,-46.2649 1207.0001,-46.2648"/>
</g>
</g>
</svg>
