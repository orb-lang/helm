<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="1868pt" height="2968pt"
 viewBox="0.00 0.00 1868.00 2968.23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2964.23)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2964.23 1864,-2964.23 1864,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="512.5" cy="-2942.23" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="512.5" y="-2938.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 183</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="512.5" cy="-2870.23" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="512.5" y="-2866.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;8</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M512.5,-2924.0614C512.5,-2916.361 512.5,-2907.2044 512.5,-2898.6466"/>
<polygon fill="#000000" stroke="#000000" points="516.0001,-2898.6432 512.5,-2888.6433 509.0001,-2898.6433 516.0001,-2898.6432"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="373.5" cy="-2798.23" rx="47.4168" ry="18"/>
<text text-anchor="middle" x="373.5" y="-2794.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Femto</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M482.681,-2854.7842C461.6476,-2843.8892 433.3222,-2829.2171 410.7936,-2817.5475"/>
<polygon fill="#000000" stroke="#000000" points="412.3354,-2814.4045 401.8461,-2812.9129 409.1157,-2820.6202 412.3354,-2814.4045"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="471.5" cy="-2798.23" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="471.5" y="-2794.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M502.3652,-2852.4322C497.5632,-2843.9995 491.7315,-2833.7586 486.4358,-2824.4588"/>
<polygon fill="#000000" stroke="#000000" points="489.3667,-2822.5325 481.3768,-2815.5746 483.2838,-2825.9964 489.3667,-2822.5325"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="553.5" cy="-2798.23" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="553.5" y="-2794.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M522.6348,-2852.4322C527.4368,-2843.9995 533.2685,-2833.7586 538.5642,-2824.4588"/>
<polygon fill="#000000" stroke="#000000" points="541.7162,-2825.9964 543.6232,-2815.5746 535.6333,-2822.5325 541.7162,-2825.9964"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="818.5" cy="-2798.23" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="818.5" y="-2794.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 9&#45;35</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M557.6514,-2859.6062C611.6346,-2846.9042 702.0633,-2825.6269 760.9962,-2811.7603"/>
<polygon fill="#000000" stroke="#000000" points="761.9623,-2815.1287 770.8948,-2809.4312 760.359,-2808.3147 761.9623,-2815.1287"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="409.5,-2744.23 337.5,-2744.23 337.5,-2708.23 409.5,-2708.23 409.5,-2744.23"/>
<text text-anchor="middle" x="373.5" y="-2722.73" font-family="Inconsolata" font-size="14.00" fill="#000000">* &#160;Femto</text>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M373.5,-2780.0614C373.5,-2772.361 373.5,-2763.2044 373.5,-2754.6466"/>
<polygon fill="#000000" stroke="#000000" points="377.0001,-2754.6432 373.5,-2744.6433 370.0001,-2754.6433 377.0001,-2754.6432"/>
</g>
<!-- raw_7 -->
<g id="node8" class="node">
<title>raw_7</title>
<ellipse fill="none" stroke="#000000" cx="462.5" cy="-2726.23" rx="27" ry="18"/>
<text text-anchor="middle" x="462.5" y="-2722.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;raw_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M469.2289,-2780.0614C468.2664,-2772.361 467.1218,-2763.2044 466.0521,-2754.6466"/>
<polygon fill="#000000" stroke="#000000" points="469.5151,-2754.1319 464.8017,-2744.6433 462.5691,-2755.0002 469.5151,-2754.1319"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="553.5" cy="-2726.23" rx="27" ry="18"/>
<text text-anchor="middle" x="553.5" y="-2722.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_4&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M553.5,-2780.0614C553.5,-2772.361 553.5,-2763.2044 553.5,-2754.6466"/>
<polygon fill="#000000" stroke="#000000" points="557.0001,-2754.6432 553.5,-2744.6433 550.0001,-2754.6433 557.0001,-2754.6432"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="713.5" cy="-2726.23" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="713.5" y="-2722.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : includes</text>
</g>
<!-- section_5&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M794.147,-2781.5308C779.7322,-2771.6464 761.2981,-2759.0059 745.6936,-2748.3056"/>
<polygon fill="#000000" stroke="#000000" points="747.5856,-2745.3592 737.3589,-2742.5904 743.6269,-2751.1323 747.5856,-2745.3592"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="818.5" cy="-2726.23" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="818.5" y="-2722.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M818.5,-2780.0614C818.5,-2772.361 818.5,-2763.2044 818.5,-2754.6466"/>
<polygon fill="#000000" stroke="#000000" points="822.0001,-2754.6432 818.5,-2744.6433 815.0001,-2754.6433 822.0001,-2754.6432"/>
</g>
<!-- codeblock_13 -->
<g id="node14" class="node">
<title>codeblock_13</title>
<ellipse fill="none" stroke="#000000" cx="958.5" cy="-2726.23" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="958.5" y="-2722.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 14&#45;33</text>
</g>
<!-- section_5&#45;&gt;codeblock_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;codeblock_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M848.8779,-2782.6071C868.8623,-2772.3294 895.2711,-2758.7477 917.1604,-2747.4904"/>
<polygon fill="#000000" stroke="#000000" points="918.9407,-2750.5106 926.2329,-2742.8245 915.7392,-2744.2856 918.9407,-2750.5106"/>
</g>
<!-- section_14 -->
<g id="node15" class="node">
<title>section_14</title>
<ellipse fill="none" stroke="#000000" cx="1187.5" cy="-2726.23" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1187.5" y="-2722.03" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 36&#45;183</text>
</g>
<!-- section_5&#45;&gt;section_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;section_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M869.4205,-2788.2943C935.0376,-2775.491 1049.2402,-2753.2075 1121.4681,-2739.1143"/>
<polygon fill="#000000" stroke="#000000" points="1122.2272,-2742.5322 1131.3718,-2737.1818 1120.8866,-2735.6618 1122.2272,-2742.5322"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="443,-2563.131 0,-2563.131 0,-2491.3287 443,-2491.3287 443,-2563.131"/>
<text text-anchor="middle" x="221.5" y="-2499.7299" font-family="Inconsolata" font-size="14.00" fill="#000000">I just got orb stood up in the pylon bootloader distribution.</text>
</g>
<!-- raw_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>raw_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M445.1679,-2711.9184C409.5753,-2682.5286 327.0402,-2614.3773 272.8007,-2569.5902"/>
<polygon fill="#000000" stroke="#000000" points="274.952,-2566.8276 265.0124,-2563.1592 270.4949,-2572.2253 274.952,-2566.8276"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="645.5,-2555.1313 461.5,-2555.1313 461.5,-2499.3284 645.5,-2499.3284 645.5,-2555.1313"/>
<text text-anchor="middle" x="553.5" y="-2523.7299" font-family="Inconsolata" font-size="14.00" fill="#000000">I am excited about this.</text>
</g>
<!-- raw_9&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>raw_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M553.5,-2708.2191C553.5,-2676.0461 553.5,-2608.062 553.5,-2565.1855"/>
<polygon fill="#000000" stroke="#000000" points="557.0001,-2565.1259 553.5,-2555.1259 550.0001,-2565.1259 557.0001,-2565.1259"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="763.5,-2545.2298 663.5,-2545.2298 663.5,-2509.2298 763.5,-2509.2298 763.5,-2545.2298"/>
<text text-anchor="middle" x="713.5" y="-2523.7299" font-family="Inconsolata" font-size="14.00" fill="#000000">** &#160;includes</text>
</g>
<!-- header_11&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>header_11&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M713.5,-2708.2191C713.5,-2673.5275 713.5,-2597.1987 713.5,-2555.6069"/>
<polygon fill="#000000" stroke="#000000" points="717.0001,-2555.3434 713.5,-2545.3434 710.0001,-2555.3435 717.0001,-2555.3434"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="808.5" cy="-2527.2298" rx="27" ry="18"/>
<text text-anchor="middle" x="808.5" y="-2523.0298" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_12&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M817.5949,-2708.2191C815.8479,-2673.4537 811.9997,-2596.8737 809.9127,-2555.3419"/>
<polygon fill="#000000" stroke="#000000" points="813.4078,-2555.1552 809.4102,-2545.3434 806.4166,-2555.5065 813.4078,-2555.1552"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1087,-2672.2302 854,-2672.2302 854,-2382.2295 1087,-2382.2295 1087,-2672.2302"/>
<text text-anchor="middle" x="970.5" y="-2657.03" font-family="Inconsolata" font-size="14.00" fill="#000000">sql = require &quot;sqlite&quot;</text>
<text text-anchor="middle" x="970.5" y="-2625.63" font-family="Inconsolata" font-size="14.00" fill="#000000">lfs = require &quot;lfs&quot;</text>
<text text-anchor="middle" x="970.5" y="-2610.2299" font-family="Inconsolata" font-size="14.00" fill="#000000">ffi = require &quot;ffi&quot;</text>
<text text-anchor="middle" x="970.5" y="-2578.8299" font-family="Inconsolata" font-size="14.00" fill="#000000">ffi.reflect = require &quot;reflect&quot;</text>
<text text-anchor="middle" x="970.5" y="-2547.4299" font-family="Inconsolata" font-size="14.00" fill="#000000">uv = require &quot;luv&quot;</text>
<text text-anchor="middle" x="970.5" y="-2516.0298" font-family="Inconsolata" font-size="14.00" fill="#000000">L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="970.5" y="-2484.6298" font-family="Inconsolata" font-size="14.00" fill="#000000">a = require &quot;anterm&quot;</text>
<text text-anchor="middle" x="970.5" y="-2453.2298" font-family="Inconsolata" font-size="14.00" fill="#000000">c = require &quot;color&quot;</text>
<text text-anchor="middle" x="970.5" y="-2421.8298" font-family="Inconsolata" font-size="14.00" fill="#000000">core = require &quot;core&quot;</text>
<text text-anchor="middle" x="970.5" y="-2390.4297" font-family="Inconsolata" font-size="14.00" fill="#000000">watch = require &quot;watcher&quot;</text>
</g>
<!-- codeblock_13&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_13&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M959.5861,-2708.2191C960.0101,-2701.187 960.5373,-2692.444 961.1294,-2682.6263"/>
<polygon fill="#000000" stroke="#000000" points="964.6332,-2682.6666 961.7416,-2672.474 957.6459,-2682.2452 964.6332,-2682.6666"/>
</g>
<!-- header_19 -->
<g id="node20" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1143.5" cy="-2527.2298" rx="38.2457" ry="18"/>
<text text-anchor="middle" x="1143.5" y="-2523.0298" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : utils</text>
</g>
<!-- section_14&#45;&gt;header_19 -->
<g id="edge19" class="edge">
<title>section_14&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1183.5177,-2708.2191C1175.8309,-2673.4537 1158.8986,-2596.8737 1149.7157,-2555.3419"/>
<polygon fill="#000000" stroke="#000000" points="1153.0815,-2554.352 1147.505,-2545.3434 1146.2465,-2555.8633 1153.0815,-2554.352"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1231.5" cy="-2527.2298" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1231.5" y="-2523.0298" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_14&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1191.4823,-2708.2191C1199.1691,-2673.4537 1216.1014,-2596.8737 1225.2843,-2555.3419"/>
<polygon fill="#000000" stroke="#000000" points="1228.7535,-2555.8633 1227.495,-2545.3434 1221.9185,-2554.352 1228.7535,-2555.8633"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1466.5" cy="-2527.2298" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="1466.5" y="-2523.0298" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;183</text>
</g>
<!-- section_14&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_14&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1215.0223,-2709.4815C1231.8322,-2699.0711 1253.6482,-2685.2357 1272.5,-2672.23 1331.7068,-2631.3838 1398.4107,-2580.3817 1436.1561,-2551.0345"/>
<polygon fill="#000000" stroke="#000000" points="1438.4704,-2553.6684 1444.2075,-2544.7613 1434.1681,-2548.1466 1438.4704,-2553.6684"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1082.5,-1244.4152 534.5,-1244.4152 534.5,-1173.8145 1082.5,-1173.8145 1082.5,-1244.4152"/>
<text text-anchor="middle" x="808.5" y="-1197.3149" font-family="Inconsolata" font-size="14.00" fill="#000000">This all goes into global space for now. &#160;Our more sophisticated loader will</text>
<text text-anchor="middle" x="808.5" y="-1181.9148" font-family="Inconsolata" font-size="14.00" fill="#000000">handle namespace isolation. Meanwhile we&#39;re building a repl, so.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M808.5,-2509.0982C808.5,-2369.8298 808.5,-1469.6083 808.5,-1254.9963"/>
<polygon fill="#000000" stroke="#000000" points="812.0001,-1254.7203 808.5,-1244.7203 805.0001,-1254.7203 812.0001,-1254.7203"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1186.5,-1227.1148 1100.5,-1227.1148 1100.5,-1191.1148 1186.5,-1191.1148 1186.5,-1227.1148"/>
<text text-anchor="middle" x="1143.5" y="-1205.6149" font-family="Inconsolata" font-size="14.00" fill="#000000">**** utils</text>
</g>
<!-- header_19&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>header_19&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1143.5,-2509.0982C1143.5,-2365.6885 1143.5,-1415.3971 1143.5,-1237.7078"/>
<polygon fill="#000000" stroke="#000000" points="1147.0001,-1237.5774 1143.5,-1227.5774 1140.0001,-1237.5775 1147.0001,-1237.5774"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1231.5" cy="-1209.1148" rx="27" ry="18"/>
<text text-anchor="middle" x="1231.5" y="-1204.9148" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_20&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1231.5,-2509.0982C1231.5,-2365.6885 1231.5,-1415.3971 1231.5,-1237.7078"/>
<polygon fill="#000000" stroke="#000000" points="1235.0001,-1237.5774 1231.5,-1227.5774 1228.0001,-1237.5775 1235.0001,-1237.5774"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1860,-2346.3446 1277,-2346.3446 1277,-71.8851 1860,-71.8851 1860,-2346.3446"/>
<text text-anchor="middle" x="1568.5" y="-2315.0297" font-family="Inconsolata" font-size="14.00" fill="#000000">local usecolors</text>
<text text-anchor="middle" x="1568.5" y="-2299.6297" font-family="Inconsolata" font-size="14.00" fill="#000000">stdout = &quot;&quot;</text>
<text text-anchor="middle" x="1568.5" y="-2268.2296" font-family="Inconsolata" font-size="14.00" fill="#000000">if uv.guess_handle(1) == &quot;tty&quot; then</text>
<text text-anchor="middle" x="1568.5" y="-2252.8296" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;stdout = uv.new_tty(1, false)</text>
<text text-anchor="middle" x="1568.5" y="-2237.4296" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;usecolors = true</text>
<text text-anchor="middle" x="1568.5" y="-2222.0295" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="1568.5" y="-2206.6295" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;stdout = uv.new_pipe(false)</text>
<text text-anchor="middle" x="1568.5" y="-2191.2295" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;uv.pipe_open(utils.stdout, 1)</text>
<text text-anchor="middle" x="1568.5" y="-2175.8294" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;usecolors = false</text>
<text text-anchor="middle" x="1568.5" y="-2160.4294" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-2129.0294" font-family="Inconsolata" font-size="14.00" fill="#000000">if not usecolors then</text>
<text text-anchor="middle" x="1568.5" y="-2113.6294" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;c.ts = tostring</text>
<text text-anchor="middle" x="1568.5" y="-2098.2293" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; #todo make this properly black and white ts</text>
<text text-anchor="middle" x="1568.5" y="-2082.8293" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-2051.4293" font-family="Inconsolata" font-size="14.00" fill="#000000">function print(...)</text>
<text text-anchor="middle" x="1568.5" y="-2036.0292" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local n = select(&#39;#&#39;, ...)</text>
<text text-anchor="middle" x="1568.5" y="-2020.6292" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local arguments = {...}</text>
<text text-anchor="middle" x="1568.5" y="-2005.2292" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, n do</text>
<text text-anchor="middle" x="1568.5" y="-1989.8291" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;arguments[i] = tostring(arguments[i])</text>
<text text-anchor="middle" x="1568.5" y="-1974.4291" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1568.5" y="-1959.0291" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;uv.write(stdout, table.concat(arguments, &quot;\t&quot;) .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="1568.5" y="-1943.629" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-1912.229" font-family="Inconsolata" font-size="14.00" fill="#000000">function write(str)</text>
<text text-anchor="middle" x="1568.5" y="-1896.829" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;uv.write(stdout, str)</text>
<text text-anchor="middle" x="1568.5" y="-1881.4289" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-1834.0289" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; &#160;*** tty setup</text>
<text text-anchor="middle" x="1568.5" y="-1802.6289" font-family="Inconsolata" font-size="14.00" fill="#000000">if uv.guess_handle(0) ~= &quot;tty&quot; or</text>
<text text-anchor="middle" x="1568.5" y="-1787.2289" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;uv.guess_handle(1) ~= &quot;tty&quot; then</text>
<text text-anchor="middle" x="1568.5" y="-1771.8288" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; Entry point for other consumers!</text>
<text text-anchor="middle" x="1568.5" y="-1756.4288" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error &quot;stdio must be a tty&quot;</text>
<text text-anchor="middle" x="1568.5" y="-1741.0288" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-1709.6287" font-family="Inconsolata" font-size="14.00" fill="#000000">local stdin = uv.new_tty(0, true)</text>
<text text-anchor="middle" x="1568.5" y="-1662.2287" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;[[</text>
<text text-anchor="middle" x="1568.5" y="-1630.8287" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ll keep this around for a bit, it looks nice</text>
<text text-anchor="middle" x="1568.5" y="-1583.4286" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
<text text-anchor="middle" x="1568.5" y="-1552.0286" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; &#160;*** utilities</text>
<text text-anchor="middle" x="1568.5" y="-1520.6286" font-family="Inconsolata" font-size="14.00" fill="#000000">local function gatherResults(success, ...)</text>
<text text-anchor="middle" x="1568.5" y="-1505.2285" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local n = select(&#39;#&#39;, ...)</text>
<text text-anchor="middle" x="1568.5" y="-1489.8285" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return success, { n = n, ... }</text>
<text text-anchor="middle" x="1568.5" y="-1474.4285" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-1443.0284" font-family="Inconsolata" font-size="14.00" fill="#000000">local function printResults(results)</text>
<text text-anchor="middle" x="1568.5" y="-1427.6284" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, results.n do</text>
<text text-anchor="middle" x="1568.5" y="-1412.2284" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;results[i] = c.ts(results[i])</text>
<text text-anchor="middle" x="1568.5" y="-1396.8284" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1568.5" y="-1381.4283" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;print(table.concat(results, &#39;\t&#39;))</text>
<text text-anchor="middle" x="1568.5" y="-1366.0283" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-1334.6283" font-family="Inconsolata" font-size="14.00" fill="#000000">local buffer = &#39;&#39;</text>
<text text-anchor="middle" x="1568.5" y="-1303.2282" font-family="Inconsolata" font-size="14.00" fill="#000000">local function evaluateLine(line)</text>
<text text-anchor="middle" x="1568.5" y="-1287.8282" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if line == &quot;&lt;3\n&quot; then</text>
<text text-anchor="middle" x="1568.5" y="-1272.4282" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;print(&quot;I &quot; .. a.red(&quot;â™¥&quot;) .. &quot; you too!&quot;)</text>
<text text-anchor="middle" x="1568.5" y="-1255.288" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &#39;&gt;&#39;</text>
<text text-anchor="middle" x="1568.5" y="-1239.888" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1568.5" y="-1224.488" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local chunk &#160;= buffer .. line</text>
<text text-anchor="middle" x="1568.5" y="-1209.0879" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f, err = loadstring(&#39;return &#39; .. chunk, &#39;REPL&#39;) &#45;&#45; first we prefix return</text>
<text text-anchor="middle" x="1568.5" y="-1177.6879" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not f then</text>
<text text-anchor="middle" x="1568.5" y="-1162.2879" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;f, err = loadstring(chunk, &#39;REPL&#39;) &#45;&#45; try again without return</text>
<text text-anchor="middle" x="1568.5" y="-1146.8878" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1568.5" y="-1115.4878" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if f then</text>
<text text-anchor="middle" x="1568.5" y="-1100.0878" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;buffer = &#39;&#39;</text>
<text text-anchor="middle" x="1568.5" y="-1084.6878" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local success, results = gatherResults(xpcall(f, debug.traceback))</text>
<text text-anchor="middle" x="1568.5" y="-1053.2877" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="1568.5" y="-1037.8877" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; successful call</text>
<text text-anchor="middle" x="1568.5" y="-1022.4877" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if results.n &gt; 0 then</text>
<text text-anchor="middle" x="1568.5" y="-1007.0876" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;printResults(results)</text>
<text text-anchor="middle" x="1568.5" y="-991.6876" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1568.5" y="-976.2876" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1568.5" y="-960.8875" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; error</text>
<text text-anchor="middle" x="1568.5" y="-945.4875" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;print(results[1])</text>
<text text-anchor="middle" x="1568.5" y="-930.0875" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1568.5" y="-914.6874" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="1568.5" y="-883.2874" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if err:match &quot;&#39;&lt;eof&gt;&#39;$&quot; then</text>
<text text-anchor="middle" x="1568.5" y="-867.8874" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Lua expects some more input; stow it away for next time</text>
<text text-anchor="middle" x="1568.5" y="-852.4873" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;buffer = chunk .. &#39;\n&#39;</text>
<text text-anchor="middle" x="1568.5" y="-837.0873" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return &#39;...&#39;</text>
<text text-anchor="middle" x="1568.5" y="-821.6873" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1568.5" y="-806.2873" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;print(err)</text>
<text text-anchor="middle" x="1568.5" y="-790.8872" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;buffer = &#39;&#39;</text>
<text text-anchor="middle" x="1568.5" y="-775.4872" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1568.5" y="-760.0872" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1568.5" y="-728.6871" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#39;ðŸ‘‰ &#39;</text>
<text text-anchor="middle" x="1568.5" y="-704.4584" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-673.0583" font-family="Inconsolata" font-size="14.00" fill="#000000">local function displayPrompt(prompt)</text>
<text text-anchor="middle" x="1568.5" y="-657.6583" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;uv.write(stdout, prompt)</text>
<text text-anchor="middle" x="1568.5" y="-642.2583" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-610.8583" font-family="Inconsolata" font-size="14.00" fill="#000000">local function onread(err, line)</text>
<text text-anchor="middle" x="1568.5" y="-595.4582" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if err then error(err) end</text>
<text text-anchor="middle" x="1568.5" y="-580.0582" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if line then</text>
<text text-anchor="middle" x="1568.5" y="-564.6582" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local prompt = evaluateLine(line)</text>
<text text-anchor="middle" x="1568.5" y="-549.2581" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;displayPrompt(prompt)</text>
<text text-anchor="middle" x="1568.5" y="-533.8581" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="1568.5" y="-518.4581" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;uv.close(stdin)</text>
<text text-anchor="middle" x="1568.5" y="-503.058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1568.5" y="-487.658" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1568.5" y="-456.258" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; Alternate screen</text>
<text text-anchor="middle" x="1568.5" y="-424.8579" font-family="Inconsolata" font-size="14.00" fill="#000000">coroutine.wrap(function()</text>
<text text-anchor="middle" x="1568.5" y="-409.4579" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Get names for as many values as possible</text>
<text text-anchor="middle" x="1568.5" y="-394.0579" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; into the colorizer</text>
<text text-anchor="middle" x="1568.5" y="-378.6578" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;c.allNames()</text>
<text text-anchor="middle" x="1568.5" y="-363.2578" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; This switches screens and does a wipe,</text>
<text text-anchor="middle" x="1568.5" y="-347.8578" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; then puts the cursor at 1,1.</text>
<text text-anchor="middle" x="1568.5" y="-332.4578" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;write &#39;\27[?47h\27[2J\27[H&#39;</text>
<text text-anchor="middle" x="1568.5" y="-317.0577" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;print &quot;an repl, plz reply uwu ðŸ‘€&quot;</text>
<text text-anchor="middle" x="1568.5" y="-292.829" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;displayPrompt &#39;ðŸ‘‰ &#39;</text>
<text text-anchor="middle" x="1568.5" y="-268.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;uv.read_start(stdin, onread)</text>
<text text-anchor="middle" x="1568.5" y="-253.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end)()</text>
<text text-anchor="middle" x="1568.5" y="-189.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">uv.run(&#39;default&#39;)</text>
<text text-anchor="middle" x="1568.5" y="-158.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; Restore</text>
<text text-anchor="middle" x="1568.5" y="-127.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">print &#39;\27[?47l&#39;</text>
<text text-anchor="middle" x="1568.5" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">print(&quot;kthxbye&quot;)</text>
<text text-anchor="middle" x="1568.5" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return 0</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_21&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1467.9031,-2509.0982C1469.957,-2482.5561 1474.1497,-2428.3749 1479.7064,-2356.5681"/>
<polygon fill="#000000" stroke="#000000" points="1483.2173,-2356.5602 1480.4994,-2346.3199 1476.2382,-2356.0201 1483.2173,-2356.5602"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1258.5,-36 1204.5,-36 1204.5,0 1258.5,0 1258.5,-36"/>
</g>
<!-- raw_23&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1231.5,-1190.8819C1231.5,-1055.9784 1231.5,-213.4724 1231.5,-46.6754"/>
<polygon fill="#000000" stroke="#000000" points="1235.0001,-46.2648 1231.5,-36.2649 1228.0001,-46.2649 1235.0001,-46.2648"/>
</g>
</g>
</svg>
