<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="12965pt" height="1084pt"
 viewBox="0.00 0.00 12964.50 1084.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1080.201)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1080.201 12960.5,-1080.201 12960.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1434.5" cy="-1058.201" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1434.5" y="-1054.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 357</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1434.5" cy="-986.201" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1434.5" y="-982.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;40</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1434.5,-1040.0324C1434.5,-1032.332 1434.5,-1023.1754 1434.5,-1014.6177"/>
<polygon fill="#000000" stroke="#000000" points="1438.0001,-1014.6143 1434.5,-1004.6143 1431.0001,-1014.6143 1438.0001,-1014.6143"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1173.5" cy="-914.201" rx="46.6307" ry="18"/>
<text text-anchor="middle" x="1173.5" y="-910.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Txtbuf</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1387.4873,-974.5775C1345.8088,-964.0922 1283.3739,-947.9427 1229.5,-932.201 1226.1136,-931.2116 1222.6214,-930.1613 1219.1136,-929.0848"/>
<polygon fill="#000000" stroke="#000000" points="1219.85,-925.6482 1209.2613,-926.0097 1217.7643,-932.3302 1219.85,-925.6482"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1270.5" cy="-914.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1270.5" y="-910.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1400.1202,-971.1075C1372.3097,-958.898 1333.3158,-941.7787 1305.3739,-929.5115"/>
<polygon fill="#000000" stroke="#000000" points="1306.5513,-926.206 1295.9879,-925.3908 1303.7374,-932.6156 1306.5513,-926.206"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1352.5" cy="-914.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1352.5" y="-910.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1415.0671,-969.138C1403.8006,-959.2454 1389.4965,-946.6858 1377.4098,-936.0731"/>
<polygon fill="#000000" stroke="#000000" points="1379.6653,-933.3957 1369.8415,-929.4277 1375.0466,-938.6558 1379.6653,-933.3957"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1434.5" cy="-914.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1434.5" y="-910.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1434.5,-968.0324C1434.5,-960.332 1434.5,-951.1754 1434.5,-942.6177"/>
<polygon fill="#000000" stroke="#000000" points="1438.0001,-942.6143 1434.5,-932.6143 1431.0001,-942.6143 1438.0001,-942.6143"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1683.5" cy="-914.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1683.5" y="-910.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1478.1574,-973.5772C1525.3573,-959.9291 1599.8685,-938.3836 1644.9687,-925.3426"/>
<polygon fill="#000000" stroke="#000000" points="1646.0381,-928.6768 1654.6723,-922.5367 1644.0936,-921.9523 1646.0381,-928.6768"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="2034.5" cy="-914.201" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2034.5" y="-910.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 15&#45;16</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.9465,-979.4274C1600.9292,-966.2295 1843.6618,-937.1016 1964.0093,-922.6599"/>
<polygon fill="#000000" stroke="#000000" points="1964.7022,-926.102 1974.2139,-921.4354 1963.8681,-919.1518 1964.7022,-926.102"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="6039.5" cy="-914.201" rx="70.655" ry="18"/>
<text text-anchor="middle" x="6039.5" y="-910.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 41&#45;326</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1495.2591,-985.2511C1992.6291,-977.4746 5389.953,-924.3568 5958.7843,-915.463"/>
<polygon fill="#000000" stroke="#000000" points="5958.9985,-918.9602 5968.9426,-915.3042 5958.889,-911.9611 5958.9985,-918.9602"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="1209.5,-860.201 1137.5,-860.201 1137.5,-824.201 1209.5,-824.201 1209.5,-860.201"/>
<text text-anchor="middle" x="1173.5" y="-838.701" font-family="Inconsolata" font-size="14.00" fill="#000000">* Txtbuf</text>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1173.5,-896.0324C1173.5,-888.332 1173.5,-879.1754 1173.5,-870.6177"/>
<polygon fill="#000000" stroke="#000000" points="1177.0001,-870.6143 1173.5,-860.6143 1170.0001,-870.6143 1177.0001,-870.6143"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="1262.5" cy="-842.201" rx="27" ry="18"/>
<text text-anchor="middle" x="1262.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1268.4813,-896.0324C1267.6257,-888.332 1266.6083,-879.1754 1265.6574,-870.6177"/>
<polygon fill="#000000" stroke="#000000" points="1269.1289,-870.1666 1264.5459,-860.6143 1262.1717,-870.9397 1269.1289,-870.1666"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="1343.5" cy="-842.201" rx="27" ry="18"/>
<text text-anchor="middle" x="1343.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_4&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1350.2289,-896.0324C1349.2664,-888.332 1348.1218,-879.1754 1347.0521,-870.6177"/>
<polygon fill="#000000" stroke="#000000" points="1350.5151,-870.1029 1345.8017,-860.6143 1343.5691,-870.9712 1350.5151,-870.1029"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="1425.5" cy="-842.201" rx="27" ry="18"/>
<text text-anchor="middle" x="1425.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_5&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1432.2289,-896.0324C1431.2664,-888.332 1430.1218,-879.1754 1429.0521,-870.6177"/>
<polygon fill="#000000" stroke="#000000" points="1432.5151,-870.1029 1427.8017,-860.6143 1425.5691,-870.9712 1432.5151,-870.1029"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1722.5" cy="-842.201" rx="27" ry="18"/>
<text text-anchor="middle" x="1722.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_6&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1692.9408,-896.7718C1697.5396,-888.2817 1703.1664,-877.8939 1708.2718,-868.4684"/>
<polygon fill="#000000" stroke="#000000" points="1711.4608,-869.9297 1713.1461,-859.4697 1705.3057,-866.5956 1711.4608,-869.9297"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1980.5" cy="-842.201" rx="56.6148" ry="18"/>
<text text-anchor="middle" x="1980.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Interface</text>
</g>
<!-- section_7&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_7&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2021.1517,-896.4033C2014.7432,-887.8586 2006.9423,-877.4574 1999.8943,-868.06"/>
<polygon fill="#000000" stroke="#000000" points="2002.4948,-865.6941 1993.6948,-859.7941 1996.8948,-869.8941 2002.4948,-865.6941"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="2087.5" cy="-842.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2087.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_7&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2047.6011,-896.4033C2053.9848,-887.7311 2061.7762,-877.1465 2068.7741,-867.6399"/>
<polygon fill="#000000" stroke="#000000" points="2071.805,-869.4265 2074.9145,-859.2983 2066.1676,-865.2768 2071.805,-869.4265"/>
</g>
<!-- section_20 -->
<g id="node21" class="node">
<title>section_20</title>
<ellipse fill="none" stroke="#000000" cx="2416.5" cy="-842.201" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2416.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 17&#45;30</text>
</g>
<!-- section_7&#45;&gt;section_20 -->
<g id="edge20" class="edge">
<title>section_7&#45;&gt;section_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2088.8256,-903.9616C2158.2713,-890.8724 2278.3386,-868.2419 2352.2491,-854.3111"/>
<polygon fill="#000000" stroke="#000000" points="2353.1831,-857.6968 2362.3618,-852.4051 2351.8865,-850.8179 2353.1831,-857.6968"/>
</g>
<!-- header_46 -->
<g id="node47" class="node">
<title>header_46</title>
<ellipse fill="none" stroke="#000000" cx="3679.5" cy="-842.201" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="3679.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Methods</text>
</g>
<!-- section_8&#45;&gt;header_46 -->
<g id="edge46" class="edge">
<title>section_8&#45;&gt;header_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5968.7611,-913.7326C5700.3874,-911.6737 4719.4796,-901.5879 3912.5,-860.201 3855.4993,-857.2777 3790.7847,-852.1317 3744.047,-848.0886"/>
<polygon fill="#000000" stroke="#000000" points="3744.3256,-844.5997 3734.0594,-847.2177 3743.7175,-851.5732 3744.3256,-844.5997"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="3953.5" cy="-842.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3953.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_8&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5968.7698,-914.0395C5659.3266,-913.0643 4422.9772,-906.3023 4037.5,-860.201 4022.7235,-858.4338 4006.7046,-855.3097 3992.6565,-852.1548"/>
<polygon fill="#000000" stroke="#000000" points="3993.3542,-848.7238 3982.8216,-849.8711 3991.7708,-855.5423 3993.3542,-848.7238"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="4123.5" cy="-842.201" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4123.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 43&#45;45</text>
</g>
<!-- section_8&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_8&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5969.0183,-913.1054C5681.1925,-908.4712 4594.0095,-889.3676 4251.5,-860.201 4233.93,-858.7048 4215.0864,-856.4313 4197.4065,-853.9985"/>
<polygon fill="#000000" stroke="#000000" points="4197.5405,-850.4829 4187.1498,-852.5524 4196.5632,-857.4143 4197.5405,-850.4829"/>
</g>
<!-- section_49 -->
<g id="node50" class="node">
<title>section_49</title>
<ellipse fill="none" stroke="#000000" cx="4326.5" cy="-842.201" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="4326.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 47&#45;78</text>
</g>
<!-- section_8&#45;&gt;section_49 -->
<g id="edge49" class="edge">
<title>section_8&#45;&gt;section_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5969.6917,-911.2669C5694.5265,-899.7013 4686.1482,-857.3176 4401.6724,-845.3606"/>
<polygon fill="#000000" stroke="#000000" points="4401.5985,-841.8545 4391.4603,-844.9314 4401.3044,-848.8484 4401.5985,-841.8545"/>
</g>
<!-- section_50 -->
<g id="node51" class="node">
<title>section_50</title>
<ellipse fill="none" stroke="#000000" cx="5136.5" cy="-842.201" rx="69.851" ry="18"/>
<text text-anchor="middle" x="5136.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 79&#45;113</text>
</g>
<!-- section_8&#45;&gt;section_50 -->
<g id="edge50" class="edge">
<title>section_8&#45;&gt;section_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5971.9975,-908.8188C5807.6026,-895.7109 5387.2552,-862.1948 5213.4765,-848.3387"/>
<polygon fill="#000000" stroke="#000000" points="5213.6354,-844.8403 5203.3888,-847.5344 5213.0789,-851.8182 5213.6354,-844.8403"/>
</g>
<!-- section_51 -->
<g id="node52" class="node">
<title>section_51</title>
<ellipse fill="none" stroke="#000000" cx="5847.5" cy="-842.201" rx="74.6878" ry="18"/>
<text text-anchor="middle" x="5847.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 114&#45;126</text>
</g>
<!-- section_8&#45;&gt;section_51 -->
<g id="edge51" class="edge">
<title>section_8&#45;&gt;section_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5999.7175,-899.2826C5970.1534,-888.1961 5929.6065,-872.991 5897.7943,-861.0614"/>
<polygon fill="#000000" stroke="#000000" points="5898.816,-857.7066 5888.2238,-857.4724 5896.3581,-864.2609 5898.816,-857.7066"/>
</g>
<!-- section_52 -->
<g id="node53" class="node">
<title>section_52</title>
<ellipse fill="none" stroke="#000000" cx="6218.5" cy="-842.201" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="6218.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 127&#45;156</text>
</g>
<!-- section_8&#45;&gt;section_52 -->
<g id="edge52" class="edge">
<title>section_8&#45;&gt;section_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6077.4613,-898.9317C6104.5686,-888.0282 6141.2444,-873.2759 6170.4013,-861.548"/>
<polygon fill="#000000" stroke="#000000" points="6172.0049,-864.6756 6179.9763,-857.6966 6169.3926,-858.1813 6172.0049,-864.6756"/>
</g>
<!-- section_53 -->
<g id="node54" class="node">
<title>section_53</title>
<ellipse fill="none" stroke="#000000" cx="6877.5" cy="-842.201" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="6877.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 157&#45;177</text>
</g>
<!-- section_8&#45;&gt;section_53 -->
<g id="edge53" class="edge">
<title>section_8&#45;&gt;section_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6106.6605,-908.4307C6259.1147,-895.332 6630.885,-863.3899 6796.0799,-849.1966"/>
<polygon fill="#000000" stroke="#000000" points="6796.5168,-852.672 6806.1805,-848.3287 6795.9175,-845.6977 6796.5168,-852.672"/>
</g>
<!-- section_54 -->
<g id="node55" class="node">
<title>section_54</title>
<ellipse fill="none" stroke="#000000" cx="7643.5" cy="-842.201" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7643.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 178&#45;201</text>
</g>
<!-- section_8&#45;&gt;section_54 -->
<g id="edge54" class="edge">
<title>section_8&#45;&gt;section_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6109.1948,-911.0726C6368.3761,-899.4385 7276.1502,-858.6905 7558.8156,-846.0023"/>
<polygon fill="#000000" stroke="#000000" points="7559.1733,-849.4899 7569.0063,-845.5449 7558.8593,-842.4969 7559.1733,-849.4899"/>
</g>
<!-- section_55 -->
<g id="node56" class="node">
<title>section_55</title>
<ellipse fill="none" stroke="#000000" cx="8758.5" cy="-842.201" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8758.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 202&#45;220</text>
</g>
<!-- section_8&#45;&gt;section_55 -->
<g id="edge55" class="edge">
<title>section_8&#45;&gt;section_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6109.7891,-912.3398C6486.2293,-902.3715 8262.0576,-855.347 8673.3215,-844.4566"/>
<polygon fill="#000000" stroke="#000000" points="8673.4564,-847.9543 8683.3602,-844.1908 8673.271,-840.9568 8673.4564,-847.9543"/>
</g>
<!-- section_56 -->
<g id="node57" class="node">
<title>section_56</title>
<ellipse fill="none" stroke="#000000" cx="9497.5" cy="-842.201" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="9497.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 221&#45;252</text>
</g>
<!-- section_8&#45;&gt;section_56 -->
<g id="edge56" class="edge">
<title>section_8&#45;&gt;section_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6110.1743,-913.0532C6427.6696,-907.8515 7754.0604,-885.6407 8842.5,-860.201 9046.8657,-855.4245 9287.0611,-848.4846 9412.0884,-844.772"/>
<polygon fill="#000000" stroke="#000000" points="9412.4649,-848.2624 9422.3564,-844.4666 9412.2568,-841.2655 9412.4649,-848.2624"/>
</g>
<!-- section_57 -->
<g id="node58" class="node">
<title>section_57</title>
<ellipse fill="none" stroke="#000000" cx="10910.5" cy="-842.201" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10910.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 253&#45;326</text>
</g>
<!-- section_8&#45;&gt;section_57 -->
<g id="edge57" class="edge">
<title>section_8&#45;&gt;section_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6110.2356,-913.1555C6658.483,-905.0516 10224.337,-852.3435 10824.7422,-843.4686"/>
<polygon fill="#000000" stroke="#000000" points="10825.1009,-846.9638 10835.0481,-843.3163 10824.9974,-839.9646 10825.1009,-846.9638"/>
</g>
<!-- section_58 -->
<g id="node59" class="node">
<title>section_58</title>
<ellipse fill="none" stroke="#000000" cx="12424.5" cy="-842.201" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="12424.5" y="-838.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 327&#45;357</text>
</g>
<!-- section_8&#45;&gt;section_58 -->
<g id="edge58" class="edge">
<title>section_8&#45;&gt;section_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6110.0769,-913.4768C6553.4483,-908.9175 8999.8305,-883.6239 10994.5,-860.201 11504.353,-854.214 12116.4485,-846.249 12338.6374,-843.3324"/>
<polygon fill="#000000" stroke="#000000" points="12338.968,-846.8284 12348.9212,-843.1973 12338.876,-839.829 12338.968,-846.8284"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-788.1013 0,-788.1013 0,-717.5007 513,-717.5007 513,-788.1013"/>
<text text-anchor="middle" x="256.5" y="-741.001" font-family="Inconsolata" font-size="14.00" fill="#000000">This is not much more than an ordinary array of lines that has a bit of</text>
<text text-anchor="middle" x="256.5" y="-725.601" font-family="Inconsolata" font-size="14.00" fill="#000000">awareness, mostly about which lines have cursors and which don&#39;t.</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1240.5869,-831.5441C1233.6769,-828.6485 1225.9102,-825.8578 1218.5,-824.201 919.0349,-757.247 832.2332,-815.4811 523.2799,-788.3251"/>
<polygon fill="#000000" stroke="#000000" points="523.4103,-784.8228 513.1362,-787.41 522.7812,-791.7944 523.4103,-784.8228"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1086,-780.1014 531,-780.1014 531,-725.5006 1086,-725.5006 1086,-780.1014"/>
<text text-anchor="middle" x="808.5" y="-749.001" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ll circle back for quipu but I want a basic editor as soon as possible. The</text>
<text text-anchor="middle" x="808.5" y="-733.601" font-family="Inconsolata" font-size="14.00" fill="#000000">interaction dynamics need to be worked out right away, plus I want to use it!</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1320.9623,-831.9784C1313.8901,-829.1005 1305.9758,-826.2106 1298.5,-824.201 1249.8409,-811.121 1143.0055,-795.0492 1041.4736,-781.4679"/>
<polygon fill="#000000" stroke="#000000" points="1041.7252,-777.9706 1031.3506,-780.1197 1040.801,-784.9094 1041.7252,-777.9706"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1666.5,-780.1014 1104.5,-780.1014 1104.5,-725.5006 1666.5,-725.5006 1666.5,-780.1014"/>
<text text-anchor="middle" x="1385.5" y="-749.001" font-family="Inconsolata" font-size="14.00" fill="#000000">Plan: A line that has a cursor on it, and there can be many, gets &#39;opened&#39;</text>
<text text-anchor="middle" x="1385.5" y="-733.601" font-family="Inconsolata" font-size="14.00" fill="#000000">into a grid of characters. &#160;These in turn get &#39;closed&#39; when the cursor leaves.</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1417.5973,-824.5385C1413.1419,-814.5806 1407.4035,-801.7553 1402.0136,-789.709"/>
<polygon fill="#000000" stroke="#000000" points="1405.076,-787.9834 1397.797,-780.2848 1398.6864,-790.8423 1405.076,-787.9834"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1918,-780.7025 1685,-780.7025 1685,-724.8995 1918,-724.8995 1918,-780.7025"/>
<text text-anchor="middle" x="1801.5" y="-749.301" font-family="Inconsolata" font-size="14.00" fill="#000000">A closed line is just a string.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1736.2607,-826.6287C1745.5732,-816.0903 1758.2665,-801.726 1769.9821,-788.4681"/>
<polygon fill="#000000" stroke="#000000" points="1772.7351,-790.6383 1776.7342,-780.8271 1767.4897,-786.003 1772.7351,-790.6383"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2036.5,-770.801 1936.5,-770.801 1936.5,-734.801 2036.5,-734.801 2036.5,-770.801"/>
<text text-anchor="middle" x="1986.5" y="-749.301" font-family="Inconsolata" font-size="14.00" fill="#000000">** Interface</text>
</g>
<!-- header_18&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>header_18&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1981.7142,-824.1096C1982.5437,-811.7497 1983.6596,-795.1223 1984.6053,-781.0326"/>
<polygon fill="#000000" stroke="#000000" points="1988.11,-781.0775 1985.2876,-770.8655 1981.1257,-780.6087 1988.11,-781.0775"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="2081.5" cy="-752.801" rx="27" ry="18"/>
<text text-anchor="middle" x="2081.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_19&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2086.2858,-824.1096C2085.4563,-811.7497 2084.3404,-795.1223 2083.3947,-781.0326"/>
<polygon fill="#000000" stroke="#000000" points="2086.8743,-780.6087 2082.7124,-770.8655 2079.89,-781.0775 2086.8743,-780.6087"/>
</g>
<!-- header_24 -->
<g id="node25" class="node">
<title>header_24</title>
<ellipse fill="none" stroke="#000000" cx="2205.5" cy="-752.801" rx="78.8574" ry="18"/>
<text text-anchor="middle" x="2205.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Instance fields</text>
</g>
<!-- section_20&#45;&gt;header_24 -->
<g id="edge24" class="edge">
<title>section_20&#45;&gt;header_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2380.7067,-827.0355C2345.4797,-812.1099 2291.4847,-789.2324 2252.7495,-772.8205"/>
<polygon fill="#000000" stroke="#000000" points="2253.8242,-769.4746 2243.2511,-768.796 2251.0933,-775.92 2253.8242,-769.4746"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="2334.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2334.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_20&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2400.2994,-824.5385C2387.6601,-810.7585 2369.9843,-791.4875 2356.1352,-776.3886"/>
<polygon fill="#000000" stroke="#000000" points="2358.6276,-773.928 2349.2887,-768.9243 2353.4689,-778.6597 2358.6276,-773.928"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2416.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2416.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_20&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2416.5,-824.1096C2416.5,-811.7497 2416.5,-795.1223 2416.5,-781.0326"/>
<polygon fill="#000000" stroke="#000000" points="2420.0001,-780.8655 2416.5,-770.8655 2413.0001,-780.8656 2420.0001,-780.8655"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="2498.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2498.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_20&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2432.7006,-824.5385C2445.3399,-810.7585 2463.0157,-791.4875 2476.8648,-776.3886"/>
<polygon fill="#000000" stroke="#000000" points="2479.5311,-778.6597 2483.7113,-768.9243 2474.3724,-773.928 2479.5311,-778.6597"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2746.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2746.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_20&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2463.4305,-829.4871C2528.8651,-811.7603 2646.3243,-779.9395 2707.3249,-763.4139"/>
<polygon fill="#000000" stroke="#000000" points="2708.587,-766.6982 2717.3239,-760.7051 2706.7566,-759.9418 2708.587,-766.6982"/>
</g>
<!-- section_29 -->
<g id="node30" class="node">
<title>section_29</title>
<ellipse fill="none" stroke="#000000" cx="3224.5" cy="-752.801" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3224.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 31&#45;40</text>
</g>
<!-- section_20&#45;&gt;section_29 -->
<g id="edge29" class="edge">
<title>section_20&#45;&gt;section_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2477.5625,-835.4449C2624.4294,-819.195 2996.8233,-777.992 3153.4102,-760.6666"/>
<polygon fill="#000000" stroke="#000000" points="3153.8531,-764.1391 3163.4075,-759.5605 3153.0832,-757.1815 3153.8531,-764.1391"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="2108.5,-464.1005 2054.5,-464.1005 2054.5,-428.1005 2108.5,-428.1005 2108.5,-464.1005"/>
</g>
<!-- raw_22&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_22&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2081.5,-734.534C2081.5,-683.0741 2081.5,-536.6248 2081.5,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="2085.0001,-474.2718 2081.5,-464.2718 2078.0001,-474.2719 2085.0001,-474.2718"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2280,-464.1005 2131,-464.1005 2131,-428.1005 2280,-428.1005 2280,-464.1005"/>
<text text-anchor="middle" x="2205.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Instance fields</text>
</g>
<!-- header_24&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>header_24&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2205.5,-734.534C2205.5,-683.0741 2205.5,-536.6248 2205.5,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="2209.0001,-474.2718 2205.5,-464.2718 2202.0001,-474.2719 2209.0001,-474.2718"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="2329.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="2329.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_25&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2334.2022,-734.534C2333.3633,-683.0741 2330.9758,-536.6248 2329.9631,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="2333.4589,-474.2134 2329.7962,-464.2718 2326.4598,-474.3276 2333.4589,-474.2134"/>
</g>
<!-- raw_33 -->
<g id="node34" class="node">
<title>raw_33</title>
<ellipse fill="none" stroke="#000000" cx="2408.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="2408.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_33 -->
<g id="edge33" class="edge">
<title>prose_26&#45;&gt;raw_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2416.0235,-734.534C2414.6812,-683.0741 2410.8612,-536.6248 2409.241,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="2412.7336,-474.1771 2408.974,-464.2718 2405.736,-474.3597 2412.7336,-474.1771"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2489.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="2489.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_27&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2497.964,-734.534C2496.4539,-683.0741 2492.1564,-536.6248 2490.3336,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="2493.8251,-474.1648 2490.0332,-464.2718 2486.8281,-474.3702 2493.8251,-474.1648"/>
</g>
<!-- raw_37 -->
<g id="node38" class="node">
<title>raw_37</title>
<ellipse fill="none" stroke="#000000" cx="2787.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="2787.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_37 -->
<g id="edge37" class="edge">
<title>prose_28&#45;&gt;raw_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2748.942,-734.534C2755.8212,-683.0741 2775.3986,-536.6248 2783.7023,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="2787.2149,-474.6474 2785.0708,-464.2718 2780.2766,-473.7199 2787.2149,-474.6474"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="3160.5" cy="-446.1005" rx="77.4383" ry="18"/>
<text text-anchor="middle" x="3160.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : dependencies</text>
</g>
<!-- section_29&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_29&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3220.6882,-734.534C3209.9277,-682.9676 3179.2633,-536.018 3166.3479,-474.1247"/>
<polygon fill="#000000" stroke="#000000" points="3169.7609,-473.346 3164.2919,-464.2718 3162.9085,-474.7759 3169.7609,-473.346"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3288.5" cy="-446.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3288.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_29&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_29&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3230.7244,-734.7761C3235.5112,-720.4409 3242.0396,-699.8058 3246.5,-681.401 3264.4229,-607.4457 3278.2197,-518.7042 3284.605,-474.3084"/>
<polygon fill="#000000" stroke="#000000" points="3288.0905,-474.6572 3286.0315,-464.2643 3281.1601,-473.6728 3288.0905,-474.6572"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="3416.5" cy="-446.1005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3416.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 33&#45;38</text>
</g>
<!-- section_29&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_29&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3257.9251,-737.0791C3280.8635,-724.7832 3310.4832,-705.7082 3329.5,-681.401 3379.6686,-617.2754 3402.9595,-521.3324 3411.8748,-474.2338"/>
<polygon fill="#000000" stroke="#000000" points="3415.3619,-474.6189 3413.7024,-464.1548 3408.4742,-473.3699 3415.3619,-474.6189"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1789,-151.3015 1276,-151.3015 1276,-95.4985 1789,-95.4985 1789,-151.3015"/>
<text text-anchor="middle" x="1532.5" y="-103.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;An array of arrays containing codepoints (string fragments).</text>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2332.874,-427.947C2340.0099,-383.2836 2351.2064,-267.5767 2288.5,-210.8001 2248.0323,-174.1591 1852.6155,-181.9911 1798.5,-174.8001 1756.4146,-169.2076 1710.9377,-161.1688 1669.693,-153.1039"/>
<polygon fill="#000000" stroke="#000000" points="1670.3471,-149.6656 1659.8589,-151.165 1668.993,-156.5334 1670.3471,-149.6656"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2243.5,-143.3021 1807.5,-143.3021 1807.5,-103.4979 2243.5,-103.4979 2243.5,-143.3021"/>
<text text-anchor="middle" x="2025.5" y="-111.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; cursor : &#160;Number of fragments to skip before an insertion.</text>
</g>
<!-- raw_33&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>raw_33&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2411.1226,-427.9518C2416.3306,-384.2977 2422.9604,-272.4836 2365.5,-210.8001 2356.9654,-201.6382 2219.2478,-168.2157 2121.7394,-145.4603"/>
<polygon fill="#000000" stroke="#000000" points="2122.3756,-142.0149 2111.8423,-143.155 2120.7875,-148.8324 2122.3756,-142.0149"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2551,-143.3021 2262,-143.3021 2262,-103.4979 2551,-103.4979 2551,-143.3021"/>
<text text-anchor="middle" x="2406.5" y="-111.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; cur_row : &#160;Row containing the cursor.</text>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2487.4331,-428.061C2482.5678,-388.1992 2468.9232,-289.8809 2444.5,-210.8001 2438.3371,-190.8449 2429.0131,-169.3197 2421.1437,-152.6242"/>
<polygon fill="#000000" stroke="#000000" points="2424.198,-150.8993 2416.7133,-143.4007 2417.8882,-153.9302 2424.198,-150.8993"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="3089.5,-174.7003 2569.5,-174.7003 2569.5,-72.0998 3089.5,-72.0998 3089.5,-174.7003"/>
<text text-anchor="middle" x="2829.5" y="-143.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; disp : &#160;Array of numbers, representing the furthest&#45;right column which</text>
<text text-anchor="middle" x="2829.5" y="-128.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;may be reached by printing the corresponding row.</text>
</g>
<!-- raw_37&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>raw_37&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2789.8784,-427.8261C2795.8532,-381.9197 2811.7099,-260.0877 2821.4559,-185.2055"/>
<polygon fill="#000000" stroke="#000000" points="2824.9689,-185.3318 2822.7889,-174.9637 2818.0275,-184.4283 2824.9689,-185.3318"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3243,-141.4 3108,-141.4 3108,-105.4 3243,-105.4 3243,-141.4"/>
<text text-anchor="middle" x="3175.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000">**** dependencies</text>
</g>
<!-- header_39&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>header_39&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3161.3494,-427.8261C3163.8452,-374.1335 3171.1689,-216.5758 3174.182,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="3177.6917,-151.6257 3174.6599,-141.474 3170.6992,-151.3007 3177.6917,-151.6257"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="3288.5" cy="-123.4" rx="27" ry="18"/>
<text text-anchor="middle" x="3288.5" y="-119.2" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_40&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3288.5,-427.8261C3288.5,-374.1335 3288.5,-216.5758 3288.5,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="3292.0001,-151.474 3288.5,-141.474 3285.0001,-151.474 3292.0001,-151.474"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3657.5,-158.0013 3333.5,-158.0013 3333.5,-88.7988 3657.5,-88.7988 3657.5,-158.0013"/>
<text text-anchor="middle" x="3495.5" y="-143.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">assert(meta)</text>
<text text-anchor="middle" x="3495.5" y="-127.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">local collect = assert(table.collect)</text>
<text text-anchor="middle" x="3495.5" y="-112.2" font-family="Inconsolata" font-size="14.00" fill="#000000">local lines = assert(string.lines)</text>
<text text-anchor="middle" x="3495.5" y="-96.8" font-family="Inconsolata" font-size="14.00" fill="#000000">local codepoints = assert(string.codepoints)</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>codeblock_41&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3420.9737,-427.8261C3433.1068,-378.2647 3466.9048,-240.2062 3484.5144,-168.2744"/>
<polygon fill="#000000" stroke="#000000" points="3488.0122,-168.7051 3486.9905,-158.1597 3481.213,-167.0406 3488.0122,-168.7051"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="3315.5,-36 3261.5,-36 3261.5,0 3315.5,0 3315.5,-36"/>
</g>
<!-- raw_43&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>raw_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3288.5,-105.0407C3288.5,-88.7936 3288.5,-64.8334 3288.5,-46.1629"/>
<polygon fill="#000000" stroke="#000000" points="3292.0001,-46.1489 3288.5,-36.1489 3285.0001,-46.1489 3292.0001,-46.1489"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="3638.5,-770.801 3552.5,-770.801 3552.5,-734.801 3638.5,-734.801 3638.5,-770.801"/>
<text text-anchor="middle" x="3595.5" y="-749.301" font-family="Inconsolata" font-size="14.00" fill="#000000">** Methods</text>
</g>
<!-- header_46&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>header_46&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3662.9043,-824.5385C3650.5268,-811.3652 3633.4341,-793.1737 3619.5586,-778.4062"/>
<polygon fill="#000000" stroke="#000000" points="3622.0362,-775.9318 3612.6379,-771.0407 3616.9348,-780.7251 3622.0362,-775.9318"/>
</g>
<!-- raw_60 -->
<g id="node61" class="node">
<title>raw_60</title>
<ellipse fill="none" stroke="#000000" cx="3683.5" cy="-752.801" rx="27" ry="18"/>
<text text-anchor="middle" x="3683.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_47&#45;&gt;raw_60 -->
<g id="edge60" class="edge">
<title>prose_47&#45;&gt;raw_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3921.2702,-840.2951C3874.2497,-836.3347 3785.2914,-824.3053 3719.5,-788.201 3713.7511,-785.0462 3708.2878,-780.712 3703.4341,-776.1573"/>
<polygon fill="#000000" stroke="#000000" points="3705.8615,-773.6339 3696.3553,-768.956 3700.8695,-778.541 3705.8615,-773.6339"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="3898.5,-770.801 3728.5,-770.801 3728.5,-734.801 3898.5,-734.801 3898.5,-770.801"/>
<text text-anchor="middle" x="3813.5" y="-749.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local Txtbuf = meta {}</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_48&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4066.6105,-829.8648C4022.764,-819.904 3960.8178,-804.8447 3907.5,-788.201 3894.633,-784.1845 3880.9664,-779.3661 3868.156,-774.5963"/>
<polygon fill="#000000" stroke="#000000" points="3869.1459,-771.229 3858.5542,-770.9723 3866.6741,-777.778 3869.1459,-771.229"/>
</g>
<!-- header_63 -->
<g id="node64" class="node">
<title>header_63</title>
<ellipse fill="none" stroke="#000000" cx="4032.5" cy="-752.801" rx="115.7565" ry="18"/>
<text text-anchor="middle" x="4032.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf.__tostring(txtbuf)</text>
</g>
<!-- section_49&#45;&gt;header_63 -->
<g id="edge63" class="edge">
<title>section_49&#45;&gt;header_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4282.4852,-828.8169C4232.7685,-813.699 4151.4678,-788.9769 4095.1431,-771.8496"/>
<polygon fill="#000000" stroke="#000000" points="4095.8658,-768.4112 4085.2801,-768.8505 4093.8292,-775.1084 4095.8658,-768.4112"/>
</g>
<!-- prose_64 -->
<g id="node65" class="node">
<title>prose_64</title>
<ellipse fill="none" stroke="#000000" cx="4198.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4198.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_64 -->
<g id="edge64" class="edge">
<title>section_49&#45;&gt;prose_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4298.3542,-825.8889C4281.237,-815.638 4259.1546,-801.8169 4240.5,-788.201 4234.8072,-784.0459 4228.9009,-779.3395 4223.3788,-774.7464"/>
<polygon fill="#000000" stroke="#000000" points="4225.5228,-771.9754 4215.6329,-768.1755 4220.9945,-777.3135 4225.5228,-771.9754"/>
</g>
<!-- codeblock_65 -->
<g id="node66" class="node">
<title>codeblock_65</title>
<ellipse fill="none" stroke="#000000" cx="4326.5" cy="-752.801" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4326.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 49&#45;65</text>
</g>
<!-- section_49&#45;&gt;codeblock_65 -->
<g id="edge65" class="edge">
<title>section_49&#45;&gt;codeblock_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4326.5,-824.1096C4326.5,-811.7497 4326.5,-795.1223 4326.5,-781.0326"/>
<polygon fill="#000000" stroke="#000000" points="4330.0001,-780.8655 4326.5,-770.8655 4323.0001,-780.8656 4330.0001,-780.8655"/>
</g>
<!-- codeblock_66 -->
<g id="node67" class="node">
<title>codeblock_66</title>
<ellipse fill="none" stroke="#000000" cx="4499.5" cy="-752.801" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4499.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 67&#45;76</text>
</g>
<!-- section_49&#45;&gt;codeblock_66 -->
<g id="edge66" class="edge">
<title>section_49&#45;&gt;codeblock_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4357.4289,-826.2181C4385.6138,-811.6532 4427.4492,-790.0342 4458.4295,-774.0247"/>
<polygon fill="#000000" stroke="#000000" points="4460.3913,-776.9507 4467.6684,-769.2504 4457.1776,-770.732 4460.3913,-776.9507"/>
</g>
<!-- header_72 -->
<g id="node73" class="node">
<title>header_72</title>
<ellipse fill="none" stroke="#000000" cx="4821.5" cy="-752.801" rx="92.0509" ry="18"/>
<text text-anchor="middle" x="4821.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:insert(frag)</text>
</g>
<!-- section_50&#45;&gt;header_72 -->
<g id="edge72" class="edge">
<title>section_50&#45;&gt;header_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5089.3413,-828.8169C5034.6335,-813.2903 4944.2315,-787.6334 4883.7836,-770.4777"/>
<polygon fill="#000000" stroke="#000000" points="4884.5537,-767.0581 4873.978,-767.6948 4882.6425,-773.7921 4884.5537,-767.0581"/>
</g>
<!-- prose_73 -->
<g id="node74" class="node">
<title>prose_73</title>
<ellipse fill="none" stroke="#000000" cx="5049.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5049.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_50&#45;&gt;prose_73 -->
<g id="edge73" class="edge">
<title>section_50&#45;&gt;prose_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5119.3116,-824.5385C5105.8173,-810.6719 5086.9118,-791.2449 5072.1776,-776.1042"/>
<polygon fill="#000000" stroke="#000000" points="5074.3861,-773.3552 5064.9036,-768.6295 5069.3695,-778.2371 5074.3861,-773.3552"/>
</g>
<!-- codeblock_74 -->
<g id="node75" class="node">
<title>codeblock_74</title>
<ellipse fill="none" stroke="#000000" cx="5223.5" cy="-752.801" rx="81.1496" ry="18"/>
<text text-anchor="middle" x="5223.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 81&#45;111</text>
</g>
<!-- section_50&#45;&gt;codeblock_74 -->
<g id="edge74" class="edge">
<title>section_50&#45;&gt;codeblock_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5153.6884,-824.5385C5166.6767,-811.1919 5184.6779,-792.6941 5199.1477,-777.8251"/>
<polygon fill="#000000" stroke="#000000" points="5201.8814,-780.0345 5206.3473,-770.4269 5196.8647,-775.1525 5201.8814,-780.0345"/>
</g>
<!-- header_79 -->
<g id="node80" class="node">
<title>header_79</title>
<ellipse fill="none" stroke="#000000" cx="5617.5" cy="-752.801" rx="88.6939" ry="18"/>
<text text-anchor="middle" x="5617.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:advance()</text>
</g>
<!-- section_51&#45;&gt;header_79 -->
<g id="edge79" class="edge">
<title>section_51&#45;&gt;header_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5807.9616,-826.8326C5769.3549,-811.8263 5710.4333,-788.9238 5668.3562,-772.5686"/>
<polygon fill="#000000" stroke="#000000" points="5669.4363,-769.2334 5658.8476,-768.8726 5666.9003,-775.7578 5669.4363,-769.2334"/>
</g>
<!-- prose_80 -->
<g id="node81" class="node">
<title>prose_80</title>
<ellipse fill="none" stroke="#000000" cx="5774.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5774.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_51&#45;&gt;prose_80 -->
<g id="edge80" class="edge">
<title>section_51&#45;&gt;prose_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5832.7274,-824.1096C5821.6896,-810.5921 5806.4839,-791.9704 5794.3793,-777.1463"/>
<polygon fill="#000000" stroke="#000000" points="5797.0555,-774.89 5788.0197,-769.358 5791.6335,-779.3174 5797.0555,-774.89"/>
</g>
<!-- codeblock_81 -->
<g id="node82" class="node">
<title>codeblock_81</title>
<ellipse fill="none" stroke="#000000" cx="5916.5" cy="-752.801" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="5916.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 116&#45;124</text>
</g>
<!-- section_51&#45;&gt;codeblock_81 -->
<g id="edge81" class="edge">
<title>section_51&#45;&gt;codeblock_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5861.4632,-824.1096C5871.4703,-811.1438 5885.102,-793.4819 5896.295,-778.9797"/>
<polygon fill="#000000" stroke="#000000" points="5899.2183,-780.9204 5902.5576,-770.8655 5893.6769,-776.6434 5899.2183,-780.9204"/>
</g>
<!-- header_86 -->
<g id="node87" class="node">
<title>header_86</title>
<ellipse fill="none" stroke="#000000" cx="6151.5" cy="-752.801" rx="83.8576" ry="18"/>
<text text-anchor="middle" x="6151.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:d_back()</text>
</g>
<!-- section_52&#45;&gt;header_86 -->
<g id="edge86" class="edge">
<title>section_52&#45;&gt;header_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6204.9416,-824.1096C6195.2244,-811.1438 6181.9879,-793.4819 6171.1194,-778.9797"/>
<polygon fill="#000000" stroke="#000000" points="6173.8362,-776.7687 6165.0383,-770.8655 6168.2347,-780.9667 6173.8362,-776.7687"/>
</g>
<!-- prose_87 -->
<g id="node88" class="node">
<title>prose_87</title>
<ellipse fill="none" stroke="#000000" cx="6285.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6285.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_52&#45;&gt;prose_87 -->
<g id="edge87" class="edge">
<title>section_52&#45;&gt;prose_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6232.0584,-824.1096C6242.0313,-810.8026 6255.7112,-792.549 6266.7337,-777.8415"/>
<polygon fill="#000000" stroke="#000000" points="6269.6719,-779.757 6272.8683,-769.6558 6264.0704,-775.559 6269.6719,-779.757"/>
</g>
<!-- codeblock_88 -->
<g id="node89" class="node">
<title>codeblock_88</title>
<ellipse fill="none" stroke="#000000" cx="6475.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6475.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 132&#45;154</text>
</g>
<!-- section_52&#45;&gt;codeblock_88 -->
<g id="edge88" class="edge">
<title>section_52&#45;&gt;codeblock_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6261.2268,-827.3381C6305.1591,-812.0558 6373.708,-788.2104 6421.3994,-771.6204"/>
<polygon fill="#000000" stroke="#000000" points="6422.6495,-774.8914 6430.9444,-768.3001 6420.3496,-768.28 6422.6495,-774.8914"/>
</g>
<!-- header_93 -->
<g id="node94" class="node">
<title>header_93</title>
<ellipse fill="none" stroke="#000000" cx="6813.5" cy="-752.801" rx="78.5213" ry="18"/>
<text text-anchor="middle" x="6813.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:d_fwd()</text>
</g>
<!-- section_53&#45;&gt;header_93 -->
<g id="edge93" class="edge">
<title>section_53&#45;&gt;header_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6864.5486,-824.1096C6855.3534,-811.265 6842.8588,-793.8116 6832.5325,-779.3871"/>
<polygon fill="#000000" stroke="#000000" points="6835.099,-776.9594 6826.4321,-770.8655 6829.4072,-781.0341 6835.099,-776.9594"/>
</g>
<!-- prose_94 -->
<g id="node95" class="node">
<title>prose_94</title>
<ellipse fill="none" stroke="#000000" cx="6942.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6942.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_53&#45;&gt;prose_94 -->
<g id="edge94" class="edge">
<title>section_53&#45;&gt;prose_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6890.6537,-824.1096C6900.3288,-810.8026 6913.6004,-792.549 6924.2938,-777.8415"/>
<polygon fill="#000000" stroke="#000000" points="6927.1955,-779.8022 6930.2454,-769.6558 6921.5338,-775.6858 6927.1955,-779.8022"/>
</g>
<!-- codeblock_95 -->
<g id="node96" class="node">
<title>codeblock_95</title>
<ellipse fill="none" stroke="#000000" cx="7141.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7141.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 159&#45;175</text>
</g>
<!-- section_53&#45;&gt;codeblock_95 -->
<g id="edge95" class="edge">
<title>section_53&#45;&gt;codeblock_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6921.0942,-827.4384C6966.4028,-812.0953 7037.4298,-788.043 7086.5516,-771.4085"/>
<polygon fill="#000000" stroke="#000000" points="7087.7208,-774.7079 7096.0698,-768.1853 7085.4756,-768.0777 7087.7208,-774.7079"/>
</g>
<!-- header_100 -->
<g id="node101" class="node">
<title>header_100</title>
<ellipse fill="none" stroke="#000000" cx="7510.5" cy="-752.801" rx="83.3644" ry="18"/>
<text text-anchor="middle" x="7510.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:left(disp)</text>
</g>
<!-- section_54&#45;&gt;header_100 -->
<g id="edge100" class="edge">
<title>section_54&#45;&gt;header_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7618.1707,-825.1751C7597.3195,-811.1594 7567.5651,-791.1591 7544.6171,-775.7339"/>
<polygon fill="#000000" stroke="#000000" points="7546.4399,-772.7419 7536.1881,-770.068 7542.5349,-778.5515 7546.4399,-772.7419"/>
</g>
<!-- prose_101 -->
<g id="node102" class="node">
<title>prose_101</title>
<ellipse fill="none" stroke="#000000" cx="7643.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7643.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_101 -->
<g id="edge101" class="edge">
<title>section_54&#45;&gt;prose_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7643.5,-824.1096C7643.5,-811.7497 7643.5,-795.1223 7643.5,-781.0326"/>
<polygon fill="#000000" stroke="#000000" points="7647.0001,-780.8655 7643.5,-770.8655 7640.0001,-780.8656 7647.0001,-780.8655"/>
</g>
<!-- prose_102 -->
<g id="node103" class="node">
<title>prose_102</title>
<ellipse fill="none" stroke="#000000" cx="7934.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7934.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_102 -->
<g id="edge102" class="edge">
<title>section_54&#45;&gt;prose_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7689.9316,-827.9365C7747.065,-810.3841 7843.0094,-780.9084 7896.1555,-764.5811"/>
<polygon fill="#000000" stroke="#000000" points="7897.3447,-767.8772 7905.8759,-761.5948 7895.289,-761.1859 7897.3447,-767.8772"/>
</g>
<!-- codeblock_103 -->
<g id="node104" class="node">
<title>codeblock_103</title>
<ellipse fill="none" stroke="#000000" cx="8254.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8254.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 186&#45;199</text>
</g>
<!-- section_54&#45;&gt;codeblock_103 -->
<g id="edge103" class="edge">
<title>section_54&#45;&gt;codeblock_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7708.0208,-832.7605C7820.059,-816.3673 8050.3352,-782.6739 8173.1487,-764.7041"/>
<polygon fill="#000000" stroke="#000000" points="8173.8588,-768.1376 8183.2467,-763.2266 8172.8453,-761.2113 8173.8588,-768.1376"/>
</g>
<!-- header_122 -->
<g id="node123" class="node">
<title>header_122</title>
<ellipse fill="none" stroke="#000000" cx="8689.5" cy="-752.801" rx="88.6766" ry="18"/>
<text text-anchor="middle" x="8689.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:right(disp)</text>
</g>
<!-- section_55&#45;&gt;header_122 -->
<g id="edge122" class="edge">
<title>section_55&#45;&gt;header_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8744.5368,-824.1096C8734.5297,-811.1438 8720.898,-793.4819 8709.705,-778.9797"/>
<polygon fill="#000000" stroke="#000000" points="8712.3231,-776.6434 8703.4424,-770.8655 8706.7817,-780.9204 8712.3231,-776.6434"/>
</g>
<!-- prose_123 -->
<g id="node124" class="node">
<title>prose_123</title>
<ellipse fill="none" stroke="#000000" cx="8828.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8828.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_123 -->
<g id="edge123" class="edge">
<title>section_55&#45;&gt;prose_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8772.6655,-824.1096C8783.1517,-810.7173 8797.5608,-792.3148 8809.1145,-777.5591"/>
<polygon fill="#000000" stroke="#000000" points="8812.1267,-779.3893 8815.5359,-769.358 8806.6152,-775.0738 8812.1267,-779.3893"/>
</g>
<!-- codeblock_124 -->
<g id="node125" class="node">
<title>codeblock_124</title>
<ellipse fill="none" stroke="#000000" cx="8998.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8998.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 204&#45;218</text>
</g>
<!-- section_55&#45;&gt;codeblock_124 -->
<g id="edge124" class="edge">
<title>section_55&#45;&gt;codeblock_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8799.2127,-827.0355C8839.8305,-811.9054 8902.3847,-788.604 8946.5578,-772.1495"/>
<polygon fill="#000000" stroke="#000000" points="8947.8194,-775.4145 8955.9686,-768.644 8945.3759,-768.8549 8947.8194,-775.4145"/>
</g>
<!-- header_129 -->
<g id="node130" class="node">
<title>header_129</title>
<ellipse fill="none" stroke="#000000" cx="9323.5" cy="-752.801" rx="123.6395" ry="18"/>
<text text-anchor="middle" x="9323.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:up(), Txtbuf:down()</text>
</g>
<!-- section_56&#45;&gt;header_129 -->
<g id="edge129" class="edge">
<title>section_56&#45;&gt;header_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9465.5857,-825.8037C9437.7562,-811.5051 9397.1518,-790.6428 9366.4693,-774.8783"/>
<polygon fill="#000000" stroke="#000000" points="9367.785,-771.6194 9357.2908,-770.1625 9364.5859,-777.8457 9367.785,-771.6194"/>
</g>
<!-- prose_130 -->
<g id="node131" class="node">
<title>prose_130</title>
<ellipse fill="none" stroke="#000000" cx="9497.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9497.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_56&#45;&gt;prose_130 -->
<g id="edge130" class="edge">
<title>section_56&#45;&gt;prose_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9497.5,-824.1096C9497.5,-811.7497 9497.5,-795.1223 9497.5,-781.0326"/>
<polygon fill="#000000" stroke="#000000" points="9501.0001,-780.8655 9497.5,-770.8655 9494.0001,-780.8656 9501.0001,-780.8655"/>
</g>
<!-- codeblock_131 -->
<g id="node132" class="node">
<title>codeblock_131</title>
<ellipse fill="none" stroke="#000000" cx="9695.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9695.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 223&#45;236</text>
</g>
<!-- section_56&#45;&gt;codeblock_131 -->
<g id="edge131" class="edge">
<title>section_56&#45;&gt;codeblock_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9532.8984,-826.2181C9565.5734,-811.4648 9614.2782,-789.4739 9649.8636,-773.4065"/>
<polygon fill="#000000" stroke="#000000" points="9651.3947,-776.5555 9659.0684,-769.2504 9648.5141,-770.1757 9651.3947,-776.5555"/>
</g>
<!-- codeblock_132 -->
<g id="node133" class="node">
<title>codeblock_132</title>
<ellipse fill="none" stroke="#000000" cx="10059.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10059.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 238&#45;251</text>
</g>
<!-- section_56&#45;&gt;codeblock_132 -->
<g id="edge132" class="edge">
<title>section_56&#45;&gt;codeblock_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9560.3327,-832.2059C9663.2067,-815.8413 9867.3823,-783.3621 9980.1141,-765.4293"/>
<polygon fill="#000000" stroke="#000000" points="9980.74,-768.8738 9990.066,-763.8462 9979.6403,-761.9607 9980.74,-768.8738"/>
</g>
<!-- header_138 -->
<g id="node139" class="node">
<title>header_138</title>
<ellipse fill="none" stroke="#000000" cx="10568.5" cy="-752.801" rx="62.0899" ry="18"/>
<text text-anchor="middle" x="10568.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:nl()</text>
</g>
<!-- section_57&#45;&gt;header_138 -->
<g id="edge138" class="edge">
<title>section_57&#45;&gt;header_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10858.6807,-829.0347C10816.1543,-818.1913 10754.386,-802.3544 10700.5,-788.201 10675.3001,-781.5822 10647.4312,-774.128 10623.8198,-767.773"/>
<polygon fill="#000000" stroke="#000000" points="10624.5477,-764.3444 10613.9815,-765.1224 10622.7267,-771.1034 10624.5477,-764.3444"/>
</g>
<!-- prose_139 -->
<g id="node140" class="node">
<title>prose_139</title>
<ellipse fill="none" stroke="#000000" cx="10741.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10741.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_57&#45;&gt;prose_139 -->
<g id="edge139" class="edge">
<title>section_57&#45;&gt;prose_139</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10879.1085,-825.5951C10849.177,-809.7615 10804.2949,-786.0191 10774.0007,-769.9937"/>
<polygon fill="#000000" stroke="#000000" points="10775.5762,-766.8676 10765.1001,-765.2853 10772.3029,-773.0552 10775.5762,-766.8676"/>
</g>
<!-- codeblock_140 -->
<g id="node141" class="node">
<title>codeblock_140</title>
<ellipse fill="none" stroke="#000000" cx="10910.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10910.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 257&#45;288</text>
</g>
<!-- section_57&#45;&gt;codeblock_140 -->
<g id="edge140" class="edge">
<title>section_57&#45;&gt;codeblock_140</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10910.5,-824.1096C10910.5,-811.7497 10910.5,-795.1223 10910.5,-781.0326"/>
<polygon fill="#000000" stroke="#000000" points="10914.0001,-780.8655 10910.5,-770.8655 10907.0001,-780.8656 10914.0001,-780.8655"/>
</g>
<!-- codeblock_141 -->
<g id="node142" class="node">
<title>codeblock_141</title>
<ellipse fill="none" stroke="#000000" cx="11195.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11195.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 291&#45;299</text>
</g>
<!-- section_57&#45;&gt;codeblock_141 -->
<g id="edge141" class="edge">
<title>section_57&#45;&gt;codeblock_141</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10956.2902,-827.8374C11005.6174,-812.3642 11084.2174,-787.7086 11137.7516,-770.9158"/>
<polygon fill="#000000" stroke="#000000" points="11138.9492,-774.2083 11147.4432,-767.8757 11136.854,-767.5292 11138.9492,-774.2083"/>
</g>
<!-- codeblock_142 -->
<g id="node143" class="node">
<title>codeblock_142</title>
<ellipse fill="none" stroke="#000000" cx="11508.5" cy="-752.801" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="11508.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 301&#45;311</text>
</g>
<!-- section_57&#45;&gt;codeblock_142 -->
<g id="edge142" class="edge">
<title>section_57&#45;&gt;codeblock_142</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10976.2967,-833.301C11052.291,-822.9229 11181.0411,-805.0367 11291.5,-788.201 11337.8657,-781.1342 11389.7122,-772.6962 11431.0977,-765.8311"/>
<polygon fill="#000000" stroke="#000000" points="11431.8215,-769.2589 11441.1124,-764.1667 11430.6738,-762.3536 11431.8215,-769.2589"/>
</g>
<!-- codeblock_143 -->
<g id="node144" class="node">
<title>codeblock_143</title>
<ellipse fill="none" stroke="#000000" cx="11880.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11880.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 313&#45;324</text>
</g>
<!-- section_57&#45;&gt;codeblock_143 -->
<g id="edge143" class="edge">
<title>section_57&#45;&gt;codeblock_143</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10983.8002,-837.7048C11110.5136,-829.6625 11378.6467,-811.4573 11604.5,-788.201 11669.8709,-781.4698 11743.7008,-771.8965 11798.5415,-764.4023"/>
<polygon fill="#000000" stroke="#000000" points="11799.1228,-767.8554 11808.5541,-763.0283 11798.1711,-760.9204 11799.1228,-767.8554"/>
</g>
<!-- header_151 -->
<g id="node152" class="node">
<title>header_151</title>
<ellipse fill="none" stroke="#000000" cx="12335.5" cy="-752.801" rx="38.7388" ry="18"/>
<text text-anchor="middle" x="12335.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : new</text>
</g>
<!-- section_58&#45;&gt;header_151 -->
<g id="edge151" class="edge">
<title>section_58&#45;&gt;header_151</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12406.9165,-824.5385C12393.2845,-810.8452 12374.2545,-791.7297 12359.2662,-776.674"/>
<polygon fill="#000000" stroke="#000000" points="12361.3823,-773.8387 12351.8466,-769.2211 12356.4214,-778.7774 12361.3823,-773.8387"/>
</g>
<!-- prose_152 -->
<g id="node153" class="node">
<title>prose_152</title>
<ellipse fill="none" stroke="#000000" cx="12424.5" cy="-752.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12424.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_58&#45;&gt;prose_152 -->
<g id="edge152" class="edge">
<title>section_58&#45;&gt;prose_152</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12424.5,-824.1096C12424.5,-811.7497 12424.5,-795.1223 12424.5,-781.0326"/>
<polygon fill="#000000" stroke="#000000" points="12428.0001,-780.8655 12424.5,-770.8655 12421.0001,-780.8656 12428.0001,-780.8655"/>
</g>
<!-- codeblock_153 -->
<g id="node154" class="node">
<title>codeblock_153</title>
<ellipse fill="none" stroke="#000000" cx="12608.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12608.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 329&#45;353</text>
</g>
<!-- section_58&#45;&gt;codeblock_153 -->
<g id="edge153" class="edge">
<title>section_58&#45;&gt;codeblock_153</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12457.821,-826.0114C12487.7949,-811.4479 12532.0311,-789.9549 12564.8265,-774.0206"/>
<polygon fill="#000000" stroke="#000000" points="12566.7143,-776.9947 12574.1793,-769.4764 12563.6551,-770.6985 12566.7143,-776.9947"/>
</g>
<!-- codeblock_154 -->
<g id="node155" class="node">
<title>codeblock_154</title>
<ellipse fill="none" stroke="#000000" cx="12857.5" cy="-752.801" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12857.5" y="-748.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 355&#45;357</text>
</g>
<!-- section_58&#45;&gt;codeblock_154 -->
<g id="edge154" class="edge">
<title>section_58&#45;&gt;codeblock_154</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12484.7107,-831.2524C12541.5012,-820.7688 12628.949,-804.2208 12704.5,-788.201 12732.7616,-782.2084 12763.8404,-775.1117 12790.5622,-768.8516"/>
<polygon fill="#000000" stroke="#000000" points="12791.6419,-772.1933 12800.5754,-766.4974 12790.0397,-765.3791 12791.6419,-772.1933"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="3565.5,-464.1005 3511.5,-464.1005 3511.5,-428.1005 3565.5,-428.1005 3565.5,-464.1005"/>
</g>
<!-- raw_60&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>raw_60&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3669.7401,-737.1957C3663.3951,-730.5722 3655.5039,-723.0858 3647.5,-717.401 3618.0069,-696.4534 3595.8776,-710.5839 3574.5,-681.401 3528.7335,-618.9243 3530.6811,-521.825 3535.0109,-474.2736"/>
<polygon fill="#000000" stroke="#000000" points="3538.5154,-474.4059 3536.0447,-464.1032 3531.5513,-473.698 3538.5154,-474.4059"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="3803,-464.1005 3584,-464.1005 3584,-428.1005 3803,-428.1005 3803,-464.1005"/>
<text text-anchor="middle" x="3693.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf.__tostring(txtbuf)</text>
</g>
<!-- header_63&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>header_63&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3976.3807,-737.0231C3915.5134,-719.53 3825.2717,-692.3386 3812.5,-681.401 3746.742,-625.0861 3713.1965,-523.5581 3700.1574,-474.3553"/>
<polygon fill="#000000" stroke="#000000" points="3703.4822,-473.2293 3697.6138,-464.4082 3696.7004,-474.9636 3703.4822,-473.2293"/>
</g>
<!-- raw_68 -->
<g id="node69" class="node">
<title>raw_68</title>
<ellipse fill="none" stroke="#000000" cx="3848.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="3848.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_64&#45;&gt;raw_68 -->
<g id="edge68" class="edge">
<title>prose_64&#45;&gt;raw_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4184.0559,-736.6251C4176.8046,-729.5528 4167.4533,-721.8658 4157.5,-717.401 4101.6682,-692.356 3928.2148,-724.2199 3884.5,-681.401 3828.3902,-626.4412 3835.7506,-523.3978 3843.266,-473.957"/>
<polygon fill="#000000" stroke="#000000" points="3846.7377,-474.4136 3844.8978,-463.9797 3839.8295,-473.2837 3846.7377,-474.4136"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="4287.5,-566.301 3893.5,-566.301 3893.5,-325.9 4287.5,-325.9 4287.5,-566.301"/>
<text text-anchor="middle" x="4090.5" y="-551.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local concat = assert(table.concat)</text>
<text text-anchor="middle" x="4090.5" y="-519.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function cat(l)</text>
<text text-anchor="middle" x="4090.5" y="-504.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if type(l) == &quot;string&quot; then</text>
<text text-anchor="middle" x="4090.5" y="-488.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return l</text>
<text text-anchor="middle" x="4090.5" y="-473.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif type(l) == &quot;table&quot; then</text>
<text text-anchor="middle" x="4090.5" y="-458.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if l[1] ~= nil then</text>
<text text-anchor="middle" x="4090.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return concat(l)</text>
<text text-anchor="middle" x="4090.5" y="-427.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4090.5" y="-411.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="4090.5" y="-396.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4090.5" y="-381.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4090.5" y="-349.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;error(&quot;called private fn cat with type&quot; .. type(l))</text>
<text text-anchor="middle" x="4090.5" y="-334.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_65&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>codeblock_65&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4312.7916,-734.9858C4288.7367,-703.7246 4236.957,-636.4329 4189.4208,-574.6558"/>
<polygon fill="#000000" stroke="#000000" points="4191.9188,-572.1628 4183.0465,-566.372 4186.371,-576.4317 4191.9188,-572.1628"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="4693,-511.9009 4306,-511.9009 4306,-380.3001 4693,-380.3001 4693,-511.9009"/>
<text text-anchor="middle" x="4499.5" y="-496.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.__tostring(txtbuf)</text>
<text text-anchor="middle" x="4499.5" y="-481.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4499.5" y="-466.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = 1, #txtbuf.lines &#45; 1 do</text>
<text text-anchor="middle" x="4499.5" y="-450.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;phrase = phrase .. cat(txtbuf.lines[i]) .. &quot;\n&quot;</text>
<text text-anchor="middle" x="4499.5" y="-435.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4499.5" y="-403.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase .. cat(txtbuf.lines[#txtbuf.lines])</text>
<text text-anchor="middle" x="4499.5" y="-388.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_66&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>codeblock_66&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4499.5,-734.534C4499.5,-693.7266 4499.5,-593.1859 4499.5,-522.3348"/>
<polygon fill="#000000" stroke="#000000" points="4503.0001,-522.1073 4499.5,-512.1074 4496.0001,-522.1074 4503.0001,-522.1073"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="3875.5,-141.4 3821.5,-141.4 3821.5,-105.4 3875.5,-105.4 3875.5,-141.4"/>
</g>
<!-- raw_68&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>raw_68&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3848.5,-427.8261C3848.5,-374.1335 3848.5,-216.5758 3848.5,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="3852.0001,-151.474 3848.5,-141.474 3845.0001,-151.474 3852.0001,-151.474"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="4888,-464.1005 4711,-464.1005 4711,-428.1005 4888,-428.1005 4888,-464.1005"/>
<text text-anchor="middle" x="4799.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:insert(frag)</text>
</g>
<!-- header_72&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>header_72&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4820.1897,-734.534C4816.4984,-683.0741 4805.9934,-536.6248 4801.5378,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="4805.01,-473.9957 4800.8034,-464.2718 4798.028,-474.4966 4805.01,-473.9957"/>
</g>
<!-- raw_76 -->
<g id="node77" class="node">
<title>raw_76</title>
<ellipse fill="none" stroke="#000000" cx="4933.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="4933.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_73&#45;&gt;raw_76 -->
<g id="edge76" class="edge">
<title>prose_73&#45;&gt;raw_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5027.2978,-739.3392C5008.6645,-726.7818 4982.991,-706.2743 4969.5,-681.401 4932.9272,-613.9715 4930.464,-520.6196 4931.874,-474.3865"/>
<polygon fill="#000000" stroke="#000000" points="4935.3783,-474.3426 4932.2722,-464.2133 4928.3836,-474.0687 4935.3783,-474.3426"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="5512.5,-673.9014 4978.5,-673.9014 4978.5,-218.2996 5512.5,-218.2996 5512.5,-673.9014"/>
<text text-anchor="middle" x="5245.5" y="-658.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local t_insert, splice = assert(table.insert), assert(table.splice)</text>
<text text-anchor="middle" x="5245.5" y="-643.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local utf8, codepoints, gsub = string.utf8, string.codepoints, string.gsub</text>
<text text-anchor="middle" x="5245.5" y="-612.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.insert(txtbuf, frag)</text>
<text text-anchor="middle" x="5245.5" y="-596.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local line = txtbuf.lines[txtbuf.cur_row]</text>
<text text-anchor="middle" x="5245.5" y="-581.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if type(line) == &quot;string&quot; then</text>
<text text-anchor="middle" x="5245.5" y="-565.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;line = codepoints(line)</text>
<text text-anchor="middle" x="5245.5" y="-550.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.line = line</text>
<text text-anchor="middle" x="5245.5" y="-535.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-519.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local wide_frag = utf8(frag)</text>
<text text-anchor="middle" x="5245.5" y="-504.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if wide_frag &lt; #frag then &#45;&#45; a paste</text>
<text text-anchor="middle" x="5245.5" y="-488.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Normalize whitespace</text>
<text text-anchor="middle" x="5245.5" y="-473.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;frag = gsub(frag, &quot;\r\n&quot;, &quot;\n&quot;):gsub(&quot;\r&quot;, &quot;\n&quot;):gsub(&quot;\t&quot;, &quot; &#160;&#160;&quot;)</text>
<text text-anchor="middle" x="5245.5" y="-458.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;wide_frag = codepoints(frag)</text>
<text text-anchor="middle" x="5245.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="5245.5" y="-427.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;wide_frag = false</text>
<text text-anchor="middle" x="5245.5" y="-411.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-396.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not wide_frag then</text>
<text text-anchor="middle" x="5245.5" y="-381.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t_insert(line, txtbuf.cursor, frag)</text>
<text text-anchor="middle" x="5245.5" y="-365.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = txtbuf.cursor + 1</text>
<text text-anchor="middle" x="5245.5" y="-350.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="5245.5" y="-334.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="5245.5" y="-319.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;splice(line, txtbuf.cursor, wide_frag)</text>
<text text-anchor="middle" x="5245.5" y="-304.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = txtbuf.cursor + #wide_frag</text>
<text text-anchor="middle" x="5245.5" y="-288.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="5245.5" y="-273.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-241.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return false</text>
<text text-anchor="middle" x="5245.5" y="-226.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_74&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>codeblock_74&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5224.8103,-734.534C5225.6887,-722.2879 5226.953,-704.6625 5228.4298,-684.0744"/>
<polygon fill="#000000" stroke="#000000" points="5231.9223,-684.3043 5229.1468,-674.0794 5224.9402,-683.8034 5231.9223,-684.3043"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="4960.5,-141.4 4906.5,-141.4 4906.5,-105.4 4960.5,-105.4 4960.5,-141.4"/>
</g>
<!-- raw_76&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>raw_76&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4933.5,-427.8261C4933.5,-374.1335 4933.5,-216.5758 4933.5,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="4937.0001,-151.474 4933.5,-141.474 4930.0001,-151.474 4937.0001,-151.474"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="5686.5,-464.1005 5530.5,-464.1005 5530.5,-428.1005 5686.5,-428.1005 5686.5,-464.1005"/>
<text text-anchor="middle" x="5608.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:advance()</text>
</g>
<!-- header_79&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>header_79&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5616.964,-734.534C5615.4539,-683.0741 5611.1564,-536.6248 5609.3336,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="5612.8251,-474.1648 5609.0332,-464.2718 5605.8281,-474.3702 5612.8251,-474.1648"/>
</g>
<!-- raw_83 -->
<g id="node84" class="node">
<title>raw_83</title>
<ellipse fill="none" stroke="#000000" cx="5731.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="5731.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_80&#45;&gt;raw_83 -->
<g id="edge83" class="edge">
<title>prose_80&#45;&gt;raw_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5771.9389,-734.534C5764.7242,-683.0741 5744.1917,-536.6248 5735.483,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="5738.9023,-473.689 5734.0477,-464.2718 5731.9701,-474.6609 5738.9023,-473.689"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="6066,-504.5014 5777,-504.5014 5777,-387.6996 6066,-387.6996 6066,-504.5014"/>
<text text-anchor="middle" x="5921.5" y="-489.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">local ts_bw = (require &quot;color&quot;).ts_bw</text>
<text text-anchor="middle" x="5921.5" y="-457.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.advance(txtbuf)</text>
<text text-anchor="middle" x="5921.5" y="-442.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.lines[#txtbuf.lines + 1] = {}</text>
<text text-anchor="middle" x="5921.5" y="-426.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = #txtbuf.lines</text>
<text text-anchor="middle" x="5921.5" y="-411.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = 1</text>
<text text-anchor="middle" x="5921.5" y="-396.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_81&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>codeblock_81&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5916.7978,-734.534C5917.4871,-692.2516 5919.2219,-585.8399 5920.3805,-514.7727"/>
<polygon fill="#000000" stroke="#000000" points="5923.8835,-514.6114 5920.547,-504.5557 5916.8844,-514.4973 5923.8835,-514.6114"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="5758.5,-141.4 5704.5,-141.4 5704.5,-105.4 5758.5,-105.4 5758.5,-141.4"/>
</g>
<!-- raw_83&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>raw_83&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.5,-427.8261C5731.5,-374.1335 5731.5,-216.5758 5731.5,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="5735.0001,-151.474 5731.5,-141.474 5728.0001,-151.474 5735.0001,-151.474"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="6233,-464.1005 6084,-464.1005 6084,-428.1005 6233,-428.1005 6233,-464.1005"/>
<text text-anchor="middle" x="6158.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:d_back()</text>
</g>
<!-- header_86&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>header_86&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6151.9169,-734.534C6153.0914,-683.0741 6156.4339,-536.6248 6157.8516,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="6161.3561,-474.3491 6158.0853,-464.2718 6154.3579,-474.1893 6161.3561,-474.3491"/>
</g>
<!-- raw_90 -->
<g id="node91" class="node">
<title>raw_90</title>
<ellipse fill="none" stroke="#000000" cx="6278.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="6278.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_87&#45;&gt;raw_90 -->
<g id="edge90" class="edge">
<title>prose_87&#45;&gt;raw_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6285.0831,-734.534C6283.9086,-683.0741 6280.5661,-536.6248 6279.1484,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="6282.6421,-474.1893 6278.9147,-464.2718 6275.6439,-474.3491 6282.6421,-474.1893"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="6731.5,-612.1011 6323.5,-612.1011 6323.5,-280.0999 6731.5,-280.0999 6731.5,-612.1011"/>
<text text-anchor="middle" x="6527.5" y="-596.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">local remove = assert(table.remove)</text>
<text text-anchor="middle" x="6527.5" y="-565.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.d_back(txtbuf)</text>
<text text-anchor="middle" x="6527.5" y="-550.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cursor, cur_row = txtbuf.cursor, txtbuf.cur_row</text>
<text text-anchor="middle" x="6527.5" y="-534.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cursor &gt; 1 then</text>
<text text-anchor="middle" x="6527.5" y="-519.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines[cur_row], cursor &#45; 1)</text>
<text text-anchor="middle" x="6527.5" y="-503.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = cursor &#45; 1</text>
<text text-anchor="middle" x="6527.5" y="-488.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="6527.5" y="-473.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif cur_row == 1 then</text>
<text text-anchor="middle" x="6527.5" y="-457.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="6527.5" y="-442.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="6527.5" y="-426.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local new_line = concat(txtbuf.lines[cur_row &#45; 1])</text>
<text text-anchor="middle" x="6527.5" y="-411.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. concat(txtbuf.lines[cur_row])</text>
<text text-anchor="middle" x="6527.5" y="-396.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local new_cursor = #txtbuf.lines[cur_row &#45; 1] + 1</text>
<text text-anchor="middle" x="6527.5" y="-380.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.lines[cur_row &#45; 1] = codepoints(new_line)</text>
<text text-anchor="middle" x="6527.5" y="-365.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines, cur_row)</text>
<text text-anchor="middle" x="6527.5" y="-349.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cur_row = cur_row &#45; 1</text>
<text text-anchor="middle" x="6527.5" y="-334.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = new_cursor</text>
<text text-anchor="middle" x="6527.5" y="-319.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="6527.5" y="-303.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6527.5" y="-288.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_88&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>codeblock_88&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6478.5971,-734.534C6482.5591,-711.1661 6489.842,-668.2109 6497.5989,-622.4597"/>
<polygon fill="#000000" stroke="#000000" points="6501.092,-622.7945 6499.313,-612.3501 6494.1905,-621.6244 6501.092,-622.7945"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6524.5,-158.7004 6032.5,-158.7004 6032.5,-88.0997 6524.5,-88.0997 6524.5,-158.7004"/>
<text text-anchor="middle" x="6278.5" y="-111.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">The return value tells us if we have one less line, since we need to</text>
<text text-anchor="middle" x="6278.5" y="-96.2" font-family="Inconsolata" font-size="14.00" fill="#000000">clear it off the screen (true of d_fwd as well).</text>
</g>
<!-- raw_90&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>raw_90&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6278.5,-427.8261C6278.5,-378.4553 6278.5,-241.2669 6278.5,-169.1073"/>
<polygon fill="#000000" stroke="#000000" points="6282.0001,-168.9508 6278.5,-158.9508 6275.0001,-168.9509 6282.0001,-168.9508"/>
</g>
<!-- leaf_96 -->
<g id="node97" class="node">
<title>leaf_96</title>
<polygon fill="none" stroke="#c0c0c0" points="6891.5,-464.1005 6749.5,-464.1005 6749.5,-428.1005 6891.5,-428.1005 6891.5,-464.1005"/>
<text text-anchor="middle" x="6820.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:d_fwd()</text>
</g>
<!-- header_93&#45;&gt;leaf_96 -->
<g id="edge96" class="edge">
<title>header_93&#45;&gt;leaf_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6813.9169,-734.534C6815.0914,-683.0741 6818.4339,-536.6248 6819.8516,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="6823.3561,-474.3491 6820.0853,-464.2718 6816.3579,-474.1893 6823.3561,-474.3491"/>
</g>
<!-- raw_97 -->
<g id="node98" class="node">
<title>raw_97</title>
<ellipse fill="none" stroke="#000000" cx="6936.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="6936.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_94&#45;&gt;raw_97 -->
<g id="edge97" class="edge">
<title>prose_94&#45;&gt;raw_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6942.1426,-734.534C6941.1359,-683.0741 6938.2709,-536.6248 6937.0558,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="6940.5505,-474.2014 6936.8555,-464.2718 6933.5518,-474.3384 6940.5505,-474.2014"/>
</g>
<!-- leaf_99 -->
<g id="node100" class="node">
<title>leaf_99</title>
<polygon fill="none" stroke="#c0c0c0" points="7411,-565.601 6982,-565.601 6982,-326.6 7411,-326.6 7411,-565.601"/>
<text text-anchor="middle" x="7196.5" y="-550.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.d_fwd(txtbuf)</text>
<text text-anchor="middle" x="7196.5" y="-535.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cursor, cur_row = txtbuf.cursor, txtbuf.cur_row</text>
<text text-anchor="middle" x="7196.5" y="-519.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cursor &lt;= #txtbuf.lines[cur_row] then</text>
<text text-anchor="middle" x="7196.5" y="-504.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines[txtbuf.cur_row], txtbuf.cursor)</text>
<text text-anchor="middle" x="7196.5" y="-488.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="7196.5" y="-473.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif cur_row == #txtbuf.lines then</text>
<text text-anchor="middle" x="7196.5" y="-458.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="7196.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="7196.5" y="-427.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local new_line = concat(txtbuf.lines[cur_row])</text>
<text text-anchor="middle" x="7196.5" y="-411.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. concat(txtbuf.lines[cur_row + 1])</text>
<text text-anchor="middle" x="7196.5" y="-396.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.lines[cur_row] = codepoints(new_line)</text>
<text text-anchor="middle" x="7196.5" y="-381.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines, cur_row + 1)</text>
<text text-anchor="middle" x="7196.5" y="-365.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="7196.5" y="-350.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="7196.5" y="-334.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_95&#45;&gt;leaf_99 -->
<g id="edge99" class="edge">
<title>codeblock_95&#45;&gt;leaf_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7144.7758,-734.534C7150.3729,-703.3225 7162.2363,-637.1677 7173.1911,-576.0797"/>
<polygon fill="#000000" stroke="#000000" points="7176.6908,-576.3922 7175.011,-565.9314 7169.8007,-575.1566 7176.6908,-576.3922"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="6848.5,-141.4 6794.5,-141.4 6794.5,-105.4 6848.5,-105.4 6848.5,-141.4"/>
</g>
<!-- raw_97&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>raw_97&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6937.8896,-427.8983C6940.2091,-386.441 6941.1519,-283.0013 6900.5,-210.8001 6888.2716,-189.0814 6874.3501,-193.166 6857.5,-174.8001 6850.6848,-167.3718 6844.0931,-158.5982 6838.4536,-150.4223"/>
<polygon fill="#000000" stroke="#000000" points="6841.2091,-148.2463 6832.7425,-141.8771 6835.3893,-152.136 6841.2091,-148.2463"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="7592,-464.1005 7429,-464.1005 7429,-428.1005 7592,-428.1005 7592,-464.1005"/>
<text text-anchor="middle" x="7510.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:left(disp)</text>
</g>
<!-- header_100&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>header_100&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7510.5,-734.534C7510.5,-683.0741 7510.5,-536.6248 7510.5,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="7514.0001,-474.2718 7510.5,-464.2718 7507.0001,-474.2719 7514.0001,-474.2718"/>
</g>
<!-- raw_105 -->
<g id="node106" class="node">
<title>raw_105</title>
<ellipse fill="none" stroke="#000000" cx="7637.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="7637.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_101&#45;&gt;raw_105 -->
<g id="edge105" class="edge">
<title>prose_101&#45;&gt;raw_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7643.1426,-734.534C7642.1359,-683.0741 7639.2709,-536.6248 7638.0558,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="7641.5505,-474.2014 7637.8555,-464.2718 7634.5518,-474.3384 7641.5505,-474.2014"/>
</g>
<!-- raw_107 -->
<g id="node108" class="node">
<title>raw_107</title>
<ellipse fill="none" stroke="#000000" cx="7709.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="7709.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_102&#45;&gt;raw_107 -->
<g id="edge107" class="edge">
<title>prose_102&#45;&gt;raw_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7902.4119,-750.3398C7859.5393,-745.2222 7784.4618,-729.5122 7745.5,-681.401 7696.5364,-620.9394 7700.1191,-522.1517 7705.4432,-474.1059"/>
<polygon fill="#000000" stroke="#000000" points="7708.9254,-474.4636 7706.6591,-464.1141 7701.9767,-473.618 7708.9254,-474.4636"/>
</g>
<!-- prespace_108 -->
<g id="node109" class="node">
<title>prespace_108</title>
<ellipse fill="none" stroke="#000000" cx="7800.5" cy="-446.1005" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="7800.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_102&#45;&gt;prespace_108 -->
<g id="edge108" class="edge">
<title>prose_102&#45;&gt;prespace_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7913.3438,-738.9335C7895.4911,-726.1161 7870.6453,-705.4549 7856.5,-681.401 7816.989,-614.2127 7805.3338,-520.7522 7801.9116,-474.4412"/>
<polygon fill="#000000" stroke="#000000" points="7805.3899,-473.997 7801.2371,-464.25 7798.4052,-474.4594 7805.3899,-473.997"/>
</g>
<!-- literal_109 -->
<g id="node110" class="node">
<title>literal_109</title>
<ellipse fill="none" stroke="#000000" cx="7896.5" cy="-446.1005" rx="31.481" ry="18"/>
<text text-anchor="middle" x="7896.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_102&#45;&gt;literal_109 -->
<g id="edge109" class="edge">
<title>prose_102&#45;&gt;literal_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7932.2367,-734.534C7925.8609,-683.0741 7907.7159,-536.6248 7900.0198,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="7903.4545,-473.7656 7898.7514,-464.2718 7896.5076,-474.6263 7903.4545,-473.7656"/>
</g>
<!-- raw_110 -->
<g id="node111" class="node">
<title>raw_110</title>
<ellipse fill="none" stroke="#000000" cx="7972.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="7972.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_102&#45;&gt;raw_110 -->
<g id="edge110" class="edge">
<title>prose_102&#45;&gt;raw_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7936.7633,-734.534C7943.1391,-683.0741 7961.2841,-536.6248 7968.9802,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="7972.4924,-474.6263 7970.2486,-464.2718 7965.5455,-473.7656 7972.4924,-474.6263"/>
</g>
<!-- prespace_111 -->
<g id="node112" class="node">
<title>prespace_111</title>
<ellipse fill="none" stroke="#000000" cx="8063.5" cy="-446.1005" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="8063.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_102&#45;&gt;prespace_111 -->
<g id="edge111" class="edge">
<title>prose_102&#45;&gt;prespace_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7954.5814,-738.707C7971.525,-725.7445 7995.1005,-704.9975 8008.5,-681.401 8046.9522,-613.6863 8058.5583,-520.4627 8062.0336,-474.3218"/>
<polygon fill="#000000" stroke="#000000" points="8065.5373,-474.3838 8062.7222,-464.1698 8058.5534,-473.91 8065.5373,-474.3838"/>
</g>
<!-- literal_112 -->
<g id="node113" class="node">
<title>literal_112</title>
<ellipse fill="none" stroke="#000000" cx="8159.5" cy="-446.1005" rx="31.481" ry="18"/>
<text text-anchor="middle" x="8159.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_102&#45;&gt;literal_112 -->
<g id="edge112" class="edge">
<title>prose_102&#45;&gt;literal_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7966.332,-749.8577C8008.0511,-744.2076 8080.3806,-727.911 8118.5,-681.401 8167.9849,-621.0238 8166.8609,-522.1964 8162.8013,-474.1237"/>
<polygon fill="#000000" stroke="#000000" points="8166.2817,-473.7496 8161.8505,-464.126 8159.3131,-474.4124 8166.2817,-473.7496"/>
</g>
<!-- raw_113 -->
<g id="node114" class="node">
<title>raw_113</title>
<ellipse fill="none" stroke="#000000" cx="8235.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="8235.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_102&#45;&gt;raw_113 -->
<g id="edge113" class="edge">
<title>prose_102&#45;&gt;raw_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7966.2172,-748.6087C8029.57,-739.569 8168.3707,-716.2055 8199.5,-681.401 8251.4949,-623.2675 8246.3925,-522.9657 8240.1203,-474.2642"/>
<polygon fill="#000000" stroke="#000000" points="8243.5555,-473.5577 8238.7013,-464.1403 8236.6233,-474.5294 8243.5555,-473.5577"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="8590.5,-543.0013 8280.5,-543.0013 8280.5,-349.1998 8590.5,-349.1998 8590.5,-543.0013"/>
<text text-anchor="middle" x="8435.5" y="-527.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.left(txtbuf, disp)</text>
<text text-anchor="middle" x="8435.5" y="-512.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local disp = disp or 1</text>
<text text-anchor="middle" x="8435.5" y="-496.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local moved = false</text>
<text text-anchor="middle" x="8435.5" y="-481.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if txtbuf.cursor &#45; disp &gt;= 1 then</text>
<text text-anchor="middle" x="8435.5" y="-466.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = txtbuf.cursor &#45; disp</text>
<text text-anchor="middle" x="8435.5" y="-450.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;moved = true</text>
<text text-anchor="middle" x="8435.5" y="-435.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="8435.5" y="-419.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = 1</text>
<text text-anchor="middle" x="8435.5" y="-404.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="8435.5" y="-373.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return moved</text>
<text text-anchor="middle" x="8435.5" y="-357.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_103&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>codeblock_103&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8265.2803,-734.534C8286.184,-699.1131 8333.6473,-618.6877 8373.1578,-551.7379"/>
<polygon fill="#000000" stroke="#000000" points="8376.3602,-553.198 8378.4285,-542.807 8370.3317,-549.6402 8376.3602,-553.198"/>
</g>
<!-- leaf_106 -->
<g id="node107" class="node">
<title>leaf_106</title>
<polygon fill="none" stroke="#c0c0c0" points="7394,-158.7004 6867,-158.7004 6867,-88.0997 7394,-88.0997 7394,-158.7004"/>
<text text-anchor="middle" x="7130.5" y="-111.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">This method and the next inform the modeSelektor if the cursor has moved,</text>
<text text-anchor="middle" x="7130.5" y="-96.2" font-family="Inconsolata" font-size="14.00" fill="#000000">so as to wrap around otherwise.</text>
</g>
<!-- raw_105&#45;&gt;leaf_106 -->
<g id="edge106" class="edge">
<title>raw_105&#45;&gt;leaf_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7640.8841,-428.0716C7647.9824,-384.1935 7659.2633,-271.0377 7600.5,-210.8001 7538.3482,-147.0888 7491.0124,-191.0344 7403.5,-174.8001 7378.9057,-170.2376 7353.0714,-165.4141 7327.5089,-160.6225"/>
<polygon fill="#000000" stroke="#000000" points="7327.8209,-157.1201 7317.3471,-158.7168 7326.5306,-164.0002 7327.8209,-157.1201"/>
</g>
<!-- leaf_114 -->
<g id="node115" class="node">
<title>leaf_114</title>
<polygon fill="none" stroke="#c0c0c0" points="7792.5,-143.3021 7412.5,-143.3021 7412.5,-103.4979 7792.5,-103.4979 7792.5,-143.3021"/>
<text text-anchor="middle" x="7602.5" y="-111.9" font-family="Inconsolata" font-size="14.00" fill="#000000">Arguably this logic should be completely internal to</text>
</g>
<!-- raw_107&#45;&gt;leaf_114 -->
<g id="edge114" class="edge">
<title>raw_107&#45;&gt;leaf_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7709.8916,-428.0963C7710.1191,-387.4774 7706.9776,-286.3689 7673.5,-210.8001 7663.4969,-188.2202 7646.0769,-166.6423 7630.9959,-150.576"/>
<polygon fill="#000000" stroke="#000000" points="7633.2884,-147.9116 7623.8232,-143.1514 7628.254,-152.7753 7633.2884,-147.9116"/>
</g>
<!-- leaf_115 -->
<g id="node116" class="node">
<title>leaf_115</title>
<polygon fill="none" stroke="#c0c0c0" points="7864.5,-141.4 7810.5,-141.4 7810.5,-105.4 7864.5,-105.4 7864.5,-141.4"/>
<text text-anchor="middle" x="7837.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_108&#45;&gt;leaf_115 -->
<g id="edge115" class="edge">
<title>prespace_108&#45;&gt;leaf_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7802.5953,-427.8261C7808.7516,-374.1335 7826.8167,-216.5758 7834.2489,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="7837.7657,-151.8076 7835.4277,-141.474 7830.8113,-151.0102 7837.7657,-151.8076"/>
</g>
<!-- leaf_116 -->
<g id="node117" class="node">
<title>leaf_116</title>
<polygon fill="none" stroke="#c0c0c0" points="7936.5,-141.4 7882.5,-141.4 7882.5,-105.4 7936.5,-105.4 7936.5,-141.4"/>
<text text-anchor="middle" x="7909.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000">left</text>
</g>
<!-- literal_109&#45;&gt;leaf_116 -->
<g id="edge116" class="edge">
<title>literal_109&#45;&gt;leaf_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7897.2362,-427.8261C7899.3992,-374.1335 7905.7464,-216.5758 7908.3577,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="7911.8664,-151.6068 7908.7719,-141.474 7904.8721,-151.325 7911.8664,-151.6068"/>
</g>
<!-- leaf_117 -->
<g id="node118" class="node">
<title>leaf_117</title>
<polygon fill="none" stroke="#c0c0c0" points="8008.5,-141.4 7954.5,-141.4 7954.5,-105.4 8008.5,-105.4 8008.5,-141.4"/>
<text text-anchor="middle" x="7981.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> and</text>
</g>
<!-- raw_110&#45;&gt;leaf_117 -->
<g id="edge117" class="edge">
<title>raw_110&#45;&gt;leaf_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7973.0097,-427.8261C7974.5071,-374.1335 7978.9014,-216.5758 7980.7092,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="7984.2157,-151.5677 7980.9959,-141.474 7977.2184,-151.3725 7984.2157,-151.5677"/>
</g>
<!-- leaf_118 -->
<g id="node119" class="node">
<title>leaf_118</title>
<polygon fill="none" stroke="#c0c0c0" points="8090.5,-141.4 8036.5,-141.4 8036.5,-105.4 8090.5,-105.4 8090.5,-141.4"/>
<text text-anchor="middle" x="8063.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_111&#45;&gt;leaf_118 -->
<g id="edge118" class="edge">
<title>prespace_111&#45;&gt;leaf_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8063.5,-427.8261C8063.5,-374.1335 8063.5,-216.5758 8063.5,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="8067.0001,-151.474 8063.5,-141.474 8060.0001,-151.474 8067.0001,-151.474"/>
</g>
<!-- leaf_119 -->
<g id="node120" class="node">
<title>leaf_119</title>
<polygon fill="none" stroke="#c0c0c0" points="8178.5,-141.4 8124.5,-141.4 8124.5,-105.4 8178.5,-105.4 8178.5,-141.4"/>
<text text-anchor="middle" x="8151.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000">right</text>
</g>
<!-- literal_112&#45;&gt;leaf_119 -->
<g id="edge119" class="edge">
<title>literal_112&#45;&gt;leaf_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8159.047,-427.8261C8157.7159,-374.1335 8153.8099,-216.5758 8152.2029,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="8155.6949,-151.3841 8151.9481,-141.474 8148.6971,-151.5577 8155.6949,-151.3841"/>
</g>
<!-- leaf_120 -->
<g id="node121" class="node">
<title>leaf_120</title>
<polygon fill="none" stroke="#c0c0c0" points="8290,-143.3021 8197,-143.3021 8197,-103.4979 8290,-103.4979 8290,-143.3021"/>
<text text-anchor="middle" x="8243.5" y="-111.9" font-family="Inconsolata" font-size="14.00" fill="#000000">themselves.</text>
</g>
<!-- raw_113&#45;&gt;leaf_120 -->
<g id="edge120" class="edge">
<title>raw_113&#45;&gt;leaf_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8235.953,-427.8261C8237.2712,-374.6541 8241.1146,-219.6212 8242.7497,-153.6661"/>
<polygon fill="#000000" stroke="#000000" points="8246.2524,-153.5958 8243.0014,-143.5121 8239.2546,-153.4222 8246.2524,-153.5958"/>
</g>
<!-- leaf_125 -->
<g id="node126" class="node">
<title>leaf_125</title>
<polygon fill="none" stroke="#c0c0c0" points="8778.5,-464.1005 8608.5,-464.1005 8608.5,-428.1005 8778.5,-428.1005 8778.5,-464.1005"/>
<text text-anchor="middle" x="8693.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:right(disp)</text>
</g>
<!-- header_122&#45;&gt;leaf_125 -->
<g id="edge125" class="edge">
<title>header_122&#45;&gt;leaf_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8689.7382,-734.534C8690.4094,-683.0741 8692.3194,-536.6248 8693.1295,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="8696.6322,-474.3166 8693.263,-464.2718 8689.6328,-474.2253 8696.6322,-474.3166"/>
</g>
<!-- raw_126 -->
<g id="node127" class="node">
<title>raw_126</title>
<ellipse fill="none" stroke="#000000" cx="8823.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="8823.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_123&#45;&gt;raw_126 -->
<g id="edge126" class="edge">
<title>prose_123&#45;&gt;raw_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8828.2022,-734.534C8827.3633,-683.0741 8824.9758,-536.6248 8823.9631,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="8827.4589,-474.2134 8823.7962,-464.2718 8820.4598,-474.3276 8827.4589,-474.2134"/>
</g>
<!-- leaf_128 -->
<g id="node129" class="node">
<title>leaf_128</title>
<polygon fill="none" stroke="#c0c0c0" points="9192.5,-550.401 8868.5,-550.401 8868.5,-341.8 9192.5,-341.8 9192.5,-550.401"/>
<text text-anchor="middle" x="9030.5" y="-535.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.right(txtbuf, disp)</text>
<text text-anchor="middle" x="9030.5" y="-519.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;disp = disp or 1</text>
<text text-anchor="middle" x="9030.5" y="-504.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local moved = false</text>
<text text-anchor="middle" x="9030.5" y="-489.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local line = txtbuf.lines[txtbuf.cur_row]</text>
<text text-anchor="middle" x="9030.5" y="-473.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if txtbuf.cursor + disp &lt;= #line + 1 then</text>
<text text-anchor="middle" x="9030.5" y="-458.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = txtbuf.cursor + disp</text>
<text text-anchor="middle" x="9030.5" y="-442.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;moved = true</text>
<text text-anchor="middle" x="9030.5" y="-427.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="9030.5" y="-412.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = #line + 1</text>
<text text-anchor="middle" x="9030.5" y="-396.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="9030.5" y="-365.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return moved</text>
<text text-anchor="middle" x="9030.5" y="-349.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_124&#45;&gt;leaf_128 -->
<g id="edge128" class="edge">
<title>codeblock_124&#45;&gt;leaf_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9000.4059,-734.534C9003.9309,-700.7488 9011.7279,-626.0195 9018.5021,-561.0932"/>
<polygon fill="#000000" stroke="#000000" points="9022.023,-561.0741 9019.5797,-550.7648 9015.0608,-560.3476 9022.023,-561.0741"/>
</g>
<!-- leaf_127 -->
<g id="node128" class="node">
<title>leaf_127</title>
<polygon fill="none" stroke="#c0c0c0" points="8850.5,-141.4 8796.5,-141.4 8796.5,-105.4 8850.5,-105.4 8850.5,-141.4"/>
</g>
<!-- raw_126&#45;&gt;leaf_127 -->
<g id="edge127" class="edge">
<title>raw_126&#45;&gt;leaf_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8823.5,-427.8261C8823.5,-374.1335 8823.5,-216.5758 8823.5,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="8827.0001,-151.474 8823.5,-141.474 8820.0001,-151.474 8827.0001,-151.474"/>
</g>
<!-- leaf_133 -->
<g id="node134" class="node">
<title>leaf_133</title>
<polygon fill="none" stroke="#c0c0c0" points="9436.5,-464.1005 9210.5,-464.1005 9210.5,-428.1005 9436.5,-428.1005 9436.5,-464.1005"/>
<text text-anchor="middle" x="9323.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:up(), Txtbuf:down()</text>
</g>
<!-- header_129&#45;&gt;leaf_133 -->
<g id="edge133" class="edge">
<title>header_129&#45;&gt;leaf_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9323.5,-734.534C9323.5,-683.0741 9323.5,-536.6248 9323.5,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="9327.0001,-474.2718 9323.5,-464.2718 9320.0001,-474.2719 9327.0001,-474.2718"/>
</g>
<!-- raw_134 -->
<g id="node135" class="node">
<title>raw_134</title>
<ellipse fill="none" stroke="#000000" cx="9481.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="9481.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_134 -->
<g id="edge134" class="edge">
<title>prose_130&#45;&gt;raw_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9496.547,-734.534C9493.8625,-683.0741 9486.2225,-536.6248 9482.982,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="9486.4643,-474.0759 9482.448,-464.2718 9479.4738,-474.4406 9486.4643,-474.0759"/>
</g>
<!-- leaf_136 -->
<g id="node137" class="node">
<title>leaf_136</title>
<polygon fill="none" stroke="#c0c0c0" points="9984,-542.401 9527,-542.401 9527,-349.8 9984,-349.8 9984,-542.401"/>
<text text-anchor="middle" x="9755.5" y="-527.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.up(txtbuf)</text>
<text text-anchor="middle" x="9755.5" y="-511.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cur_row = txtbuf.cur_row</text>
<text text-anchor="middle" x="9755.5" y="-496.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cur_row == 1 then</text>
<text text-anchor="middle" x="9755.5" y="-481.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="9755.5" y="-465.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="9755.5" y="-450.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cur_row = cur_row &#45; 1</text>
<text text-anchor="middle" x="9755.5" y="-434.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if txtbuf.cursor &gt; #txtbuf.lines[txtbuf.cur_row] + 1 then</text>
<text text-anchor="middle" x="9755.5" y="-419.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;txtbuf.cursor = #txtbuf.lines[txtbuf.cur_row] + 1</text>
<text text-anchor="middle" x="9755.5" y="-404.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9755.5" y="-388.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="9755.5" y="-373.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="9755.5" y="-357.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_131&#45;&gt;leaf_136 -->
<g id="edge136" class="edge">
<title>codeblock_131&#45;&gt;leaf_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9699.0736,-734.534C9705.9726,-699.2686 9721.5987,-619.3931 9734.6614,-552.6206"/>
<polygon fill="#000000" stroke="#000000" points="9738.1662,-552.9347 9736.6513,-542.4488 9731.2965,-551.5907 9738.1662,-552.9347"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="10459,-542.401 10002,-542.401 10002,-349.8 10459,-349.8 10459,-542.401"/>
<text text-anchor="middle" x="10230.5" y="-527.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.down(txtbuf)</text>
<text text-anchor="middle" x="10230.5" y="-511.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cur_row = txtbuf.cur_row</text>
<text text-anchor="middle" x="10230.5" y="-496.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cur_row == #txtbuf.lines then</text>
<text text-anchor="middle" x="10230.5" y="-481.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="10230.5" y="-465.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="10230.5" y="-450.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cur_row = cur_row + 1</text>
<text text-anchor="middle" x="10230.5" y="-434.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if txtbuf.cursor &gt; #txtbuf.lines[txtbuf.cur_row] + 1 then</text>
<text text-anchor="middle" x="10230.5" y="-419.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;txtbuf.cursor = #txtbuf.lines[txtbuf.cur_row] + 1</text>
<text text-anchor="middle" x="10230.5" y="-404.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10230.5" y="-388.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="10230.5" y="-373.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="10230.5" y="-357.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_132&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>codeblock_132&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10069.6847,-734.534C10089.4679,-699.0514 10134.4308,-618.4073 10171.7972,-551.3881"/>
<polygon fill="#000000" stroke="#000000" points="10174.9685,-552.8874 10176.7813,-542.4488 10168.8546,-549.4785 10174.9685,-552.8874"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="9508.5,-141.4 9454.5,-141.4 9454.5,-105.4 9508.5,-105.4 9508.5,-141.4"/>
</g>
<!-- raw_134&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>raw_134&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9481.5,-427.8261C9481.5,-374.1335 9481.5,-216.5758 9481.5,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="9485.0001,-151.474 9481.5,-141.474 9478.0001,-151.474 9485.0001,-151.474"/>
</g>
<!-- leaf_144 -->
<g id="node145" class="node">
<title>leaf_144</title>
<polygon fill="none" stroke="#c0c0c0" points="10598,-464.1005 10477,-464.1005 10477,-428.1005 10598,-428.1005 10598,-464.1005"/>
<text text-anchor="middle" x="10537.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:nl()</text>
</g>
<!-- header_138&#45;&gt;leaf_144 -->
<g id="edge144" class="edge">
<title>header_138&#45;&gt;leaf_144</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10566.6536,-734.534C10561.4523,-683.0741 10546.6498,-536.6248 10540.3715,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="10543.8247,-473.8691 10539.3367,-464.2718 10536.8601,-474.5731 10543.8247,-473.8691"/>
</g>
<!-- raw_145 -->
<g id="node146" class="node">
<title>raw_145</title>
<ellipse fill="none" stroke="#000000" cx="10643.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="10643.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_139&#45;&gt;raw_145 -->
<g id="edge145" class="edge">
<title>prose_139&#45;&gt;raw_145</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10723.7331,-737.709C10709.3509,-724.4215 10689.8425,-703.7493 10679.5,-681.401 10647.3633,-611.9588 10642.8813,-519.8779 10642.8617,-474.2322"/>
<polygon fill="#000000" stroke="#000000" points="10646.3618,-474.209 10642.9311,-464.185 10639.362,-474.1606 10646.3618,-474.209"/>
</g>
<!-- leaf_147 -->
<g id="node148" class="node">
<title>leaf_147</title>
<polygon fill="none" stroke="#c0c0c0" points="11132,-681.2016 10689,-681.2016 10689,-210.9994 11132,-210.9994 11132,-681.2016"/>
<text text-anchor="middle" x="10910.5" y="-666.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local sub = assert(string.sub)</text>
<text text-anchor="middle" x="10910.5" y="-650.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert = assert(table.insert)</text>
<text text-anchor="middle" x="10910.5" y="-635.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.nl(txtbuf)</text>
<text text-anchor="middle" x="10910.5" y="-620.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Most txtbufs are one line, so we always evaluate from</text>
<text text-anchor="middle" x="10910.5" y="-604.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; a one&#45;liner, regardless of cursor location.</text>
<text text-anchor="middle" x="10910.5" y="-589.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local linum = #txtbuf.lines</text>
<text text-anchor="middle" x="10910.5" y="-573.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if linum == 1 then</text>
<text text-anchor="middle" x="10910.5" y="-558.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="10910.5" y="-543.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="10910.5" y="-527.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cursor = txtbuf.cursor</text>
<text text-anchor="middle" x="10910.5" y="-512.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cur_row = txtbuf.cur_row</text>
<text text-anchor="middle" x="10910.5" y="-496.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; these are the two default positions for up and down</text>
<text text-anchor="middle" x="10910.5" y="-481.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; history search</text>
<text text-anchor="middle" x="10910.5" y="-466.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cur_row == 1 and cursor &gt; #txtbuf.lines[1] then</text>
<text text-anchor="middle" x="10910.5" y="-450.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="10910.5" y="-435.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="10910.5" y="-419.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cur_row == linum and cursor &gt; #txtbuf.lines[linum] then</text>
<text text-anchor="middle" x="10910.5" y="-404.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="10910.5" y="-389.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="10910.5" y="-373.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; split the line</text>
<text text-anchor="middle" x="10910.5" y="-358.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cur_line = concat(txtbuf.lines[txtbuf.cur_row])</text>
<text text-anchor="middle" x="10910.5" y="-342.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local first = sub(cur_line, 1, cursor &#45; 1)</text>
<text text-anchor="middle" x="10910.5" y="-327.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local second = sub(cur_line, cursor)</text>
<text text-anchor="middle" x="10910.5" y="-312.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.lines[cur_row] = codepoints(first)</text>
<text text-anchor="middle" x="10910.5" y="-296.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;insert(txtbuf.lines, cur_row + 1, codepoints(second))</text>
<text text-anchor="middle" x="10910.5" y="-281.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = 1</text>
<text text-anchor="middle" x="10910.5" y="-265.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = cur_row + 1</text>
<text text-anchor="middle" x="10910.5" y="-234.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return false</text>
<text text-anchor="middle" x="10910.5" y="-219.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_140&#45;&gt;leaf_147 -->
<g id="edge147" class="edge">
<title>codeblock_140&#45;&gt;leaf_147</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10910.5,-734.534C10910.5,-723.8616 10910.5,-709.1036 10910.5,-691.8596"/>
<polygon fill="#000000" stroke="#000000" points="10914.0001,-691.4314 10910.5,-681.4315 10907.0001,-691.4315 10914.0001,-691.4314"/>
</g>
<!-- leaf_148 -->
<g id="node149" class="node">
<title>leaf_148</title>
<polygon fill="none" stroke="#c0c0c0" points="11425,-504.5014 11150,-504.5014 11150,-387.6996 11425,-387.6996 11425,-504.5014"/>
<text text-anchor="middle" x="11287.5" y="-489.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.suspend(txtbuf)</text>
<text text-anchor="middle" x="11287.5" y="-473.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(txtbuf.lines) do</text>
<text text-anchor="middle" x="11287.5" y="-458.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.lines[i] = tostring(v)</text>
<text text-anchor="middle" x="11287.5" y="-442.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11287.5" y="-411.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return txtbuf</text>
<text text-anchor="middle" x="11287.5" y="-396.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_141&#45;&gt;leaf_148 -->
<g id="edge148" class="edge">
<title>codeblock_141&#45;&gt;leaf_148</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11200.9795,-734.534C11213.6888,-692.1649 11245.7137,-585.4035 11267.0315,-514.3362"/>
<polygon fill="#000000" stroke="#000000" points="11270.4446,-515.1397 11269.9654,-504.5557 11263.7397,-513.1284 11270.4446,-515.1397"/>
</g>
<!-- leaf_149 -->
<g id="node150" class="node">
<title>leaf_149</title>
<polygon fill="none" stroke="#c0c0c0" points="11816,-519.8009 11443,-519.8009 11443,-372.4001 11816,-372.4001 11816,-519.8009"/>
<text text-anchor="middle" x="11629.5" y="-504.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.resume(txtbuf)</text>
<text text-anchor="middle" x="11629.5" y="-489.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i, line in ipairs(txtbuf.lines) do</text>
<text text-anchor="middle" x="11629.5" y="-473.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.lines[i] = codepoints(line)</text>
<text text-anchor="middle" x="11629.5" y="-458.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11629.5" y="-442.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = #txtbuf.lines[#txtbuf.lines] + 1</text>
<text text-anchor="middle" x="11629.5" y="-427.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = #txtbuf.lines</text>
<text text-anchor="middle" x="11629.5" y="-396.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return txtbuf</text>
<text text-anchor="middle" x="11629.5" y="-380.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_142&#45;&gt;leaf_149 -->
<g id="edge149" class="edge">
<title>codeblock_142&#45;&gt;leaf_149</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11515.7067,-734.534C11531.2878,-695.0403 11568.942,-599.5977 11596.689,-529.2671"/>
<polygon fill="#000000" stroke="#000000" points="11599.9493,-530.54 11600.3635,-519.9532 11593.4377,-527.971 11599.9493,-530.54"/>
</g>
<!-- leaf_150 -->
<g id="node151" class="node">
<title>leaf_150</title>
<polygon fill="none" stroke="#c0c0c0" points="12284.5,-527.2013 11834.5,-527.2013 11834.5,-364.9997 12284.5,-364.9997 12284.5,-527.2013"/>
<text text-anchor="middle" x="12059.5" y="-512.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local cl = assert(table.clone, &quot;table.clone must be provided&quot;)</text>
<text text-anchor="middle" x="12059.5" y="-480.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.clone(txtbuf)</text>
<text text-anchor="middle" x="12059.5" y="-465.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Clone to depth of 3 to get tb, tb.lines, and each lines</text>
<text text-anchor="middle" x="12059.5" y="-450.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local tb = cl(txtbuf, 3)</text>
<text text-anchor="middle" x="12059.5" y="-434.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if type(tb.lines[1]) == &quot;string&quot; then</text>
<text text-anchor="middle" x="12059.5" y="-419.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return tb:resume()</text>
<text text-anchor="middle" x="12059.5" y="-403.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12059.5" y="-388.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return tb</text>
<text text-anchor="middle" x="12059.5" y="-373.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_143&#45;&gt;leaf_150 -->
<g id="edge150" class="edge">
<title>codeblock_143&#45;&gt;leaf_150</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11891.1612,-734.534C11913.464,-696.3201 11966.3385,-605.7244 12006.9265,-536.1805"/>
<polygon fill="#000000" stroke="#000000" points="12010.0457,-537.7795 12012.0636,-527.3786 12004,-534.2511 12010.0457,-537.7795"/>
</g>
<!-- leaf_146 -->
<g id="node147" class="node">
<title>leaf_146</title>
<polygon fill="none" stroke="#c0c0c0" points="10823,-151.3015 10464,-151.3015 10464,-95.4985 10823,-95.4985 10823,-151.3015"/>
<text text-anchor="middle" x="10643.5" y="-103.9" font-family="Inconsolata" font-size="14.00" fill="#000000">Either splits a line or (more usually) evaluates.</text>
</g>
<!-- raw_145&#45;&gt;leaf_146 -->
<g id="edge146" class="edge">
<title>raw_145&#45;&gt;leaf_146</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10643.5,-427.8261C10643.5,-376.5907 10643.5,-230.7795 10643.5,-161.2182"/>
<polygon fill="#000000" stroke="#000000" points="10647.0001,-161.1314 10643.5,-151.1314 10640.0001,-161.1314 10647.0001,-161.1314"/>
</g>
<!-- leaf_155 -->
<g id="node156" class="node">
<title>leaf_155</title>
<polygon fill="none" stroke="#c0c0c0" points="12368,-464.1005 12303,-464.1005 12303,-428.1005 12368,-428.1005 12368,-464.1005"/>
<text text-anchor="middle" x="12335.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** new</text>
</g>
<!-- header_151&#45;&gt;leaf_155 -->
<g id="edge155" class="edge">
<title>header_151&#45;&gt;leaf_155</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12335.5,-734.534C12335.5,-683.0741 12335.5,-536.6248 12335.5,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="12339.0001,-474.2718 12335.5,-464.2718 12332.0001,-474.2719 12339.0001,-474.2718"/>
</g>
<!-- raw_156 -->
<g id="node157" class="node">
<title>raw_156</title>
<ellipse fill="none" stroke="#000000" cx="12413.5" cy="-446.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="12413.5" y="-441.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_152&#45;&gt;raw_156 -->
<g id="edge156" class="edge">
<title>prose_152&#45;&gt;raw_156</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12423.8448,-734.534C12421.9992,-683.0741 12416.7467,-536.6248 12414.5189,-474.5094"/>
<polygon fill="#000000" stroke="#000000" points="12418.008,-474.1399 12414.1517,-464.2718 12411.0125,-474.3909 12418.008,-474.1399"/>
</g>
<!-- leaf_158 -->
<g id="node159" class="node">
<title>leaf_158</title>
<polygon fill="none" stroke="#c0c0c0" points="12852.5,-628.1011 12458.5,-628.1011 12458.5,-264.0999 12852.5,-264.0999 12852.5,-628.1011"/>
<text text-anchor="middle" x="12655.5" y="-612.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function into_codepoints(lines)</text>
<text text-anchor="middle" x="12655.5" y="-597.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cp = {}</text>
<text text-anchor="middle" x="12655.5" y="-582.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(lines) do</text>
<text text-anchor="middle" x="12655.5" y="-566.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;cp[i] = codepoints(v)</text>
<text text-anchor="middle" x="12655.5" y="-551.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12655.5" y="-519.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return cp</text>
<text text-anchor="middle" x="12655.5" y="-504.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="12655.5" y="-473.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(line)</text>
<text text-anchor="middle" x="12655.5" y="-457.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local txtbuf = meta(Txtbuf)</text>
<text text-anchor="middle" x="12655.5" y="-442.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local __l = line or &quot;&quot;</text>
<text text-anchor="middle" x="12655.5" y="-426.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _lines = into_codepoints(collect(lines, __l))</text>
<text text-anchor="middle" x="12655.5" y="-411.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if #_lines == 0 then</text>
<text text-anchor="middle" x="12655.5" y="-396.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;_lines[1] = {}</text>
<text text-anchor="middle" x="12655.5" y="-380.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12655.5" y="-365.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = line and #_lines[#_lines] + 1 or 1</text>
<text text-anchor="middle" x="12655.5" y="-349.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = line and #_lines &#160;or 1</text>
<text text-anchor="middle" x="12655.5" y="-334.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.lines = _lines</text>
<text text-anchor="middle" x="12655.5" y="-319.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return txtbuf</text>
<text text-anchor="middle" x="12655.5" y="-303.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="12655.5" y="-272.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">Txtbuf.idEst = new</text>
</g>
<!-- codeblock_153&#45;&gt;leaf_158 -->
<g id="edge158" class="edge">
<title>codeblock_153&#45;&gt;leaf_158</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12611.2993,-734.534C12614.4669,-713.8639 12619.983,-677.8681 12626.0668,-638.1679"/>
<polygon fill="#000000" stroke="#000000" points="12629.5271,-638.6935 12627.5823,-628.2787 12622.6078,-637.6331 12629.5271,-638.6935"/>
</g>
<!-- leaf_159 -->
<g id="node160" class="node">
<title>leaf_159</title>
<polygon fill="none" stroke="#c0c0c0" points="12956.5,-464.1005 12870.5,-464.1005 12870.5,-428.1005 12956.5,-428.1005 12956.5,-464.1005"/>
<text text-anchor="middle" x="12913.5" y="-442.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_154&#45;&gt;leaf_159 -->
<g id="edge159" class="edge">
<title>codeblock_154&#45;&gt;leaf_159</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12860.8354,-734.534C12870.2508,-682.9676 12897.0821,-536.018 12908.3831,-474.1247"/>
<polygon fill="#000000" stroke="#000000" points="12911.8289,-474.7379 12910.1821,-464.2718 12904.9428,-473.4805 12911.8289,-474.7379"/>
</g>
<!-- leaf_157 -->
<g id="node158" class="node">
<title>leaf_157</title>
<polygon fill="none" stroke="#c0c0c0" points="12440.5,-141.4 12386.5,-141.4 12386.5,-105.4 12440.5,-105.4 12440.5,-141.4"/>
</g>
<!-- raw_156&#45;&gt;leaf_157 -->
<g id="edge157" class="edge">
<title>raw_156&#45;&gt;leaf_157</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12413.5,-427.8261C12413.5,-374.1335 12413.5,-216.5758 12413.5,-151.7548"/>
<polygon fill="#000000" stroke="#000000" points="12417.0001,-151.474 12413.5,-141.474 12410.0001,-151.474 12417.0001,-151.474"/>
</g>
</g>
</svg>
