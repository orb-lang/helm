<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="13113pt" height="1642pt"
 viewBox="0.00 0.00 13112.50 1641.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1637.602)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1637.602 13108.5,-1637.602 13108.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1434.5" cy="-1615.602" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1434.5" y="-1611.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 421</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1434.5" cy="-1543.602" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1434.5" y="-1539.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;40</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1434.5,-1597.4334C1434.5,-1589.733 1434.5,-1580.5763 1434.5,-1572.0186"/>
<polygon fill="#000000" stroke="#000000" points="1438.0001,-1572.0152 1434.5,-1562.0153 1431.0001,-1572.0153 1438.0001,-1572.0152"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1173.5" cy="-1471.602" rx="46.6307" ry="18"/>
<text text-anchor="middle" x="1173.5" y="-1467.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Txtbuf</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1387.4873,-1531.9785C1345.8088,-1521.4932 1283.3739,-1505.3437 1229.5,-1489.602 1226.1136,-1488.6125 1222.6214,-1487.5623 1219.1136,-1486.4857"/>
<polygon fill="#000000" stroke="#000000" points="1219.85,-1483.0491 1209.2613,-1483.4107 1217.7643,-1489.7312 1219.85,-1483.0491"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1270.5" cy="-1471.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1270.5" y="-1467.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1400.1202,-1528.5084C1372.3097,-1516.2989 1333.3158,-1499.1797 1305.3739,-1486.9125"/>
<polygon fill="#000000" stroke="#000000" points="1306.5513,-1483.607 1295.9879,-1482.7918 1303.7374,-1490.0165 1306.5513,-1483.607"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1352.5" cy="-1471.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1352.5" y="-1467.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1415.0671,-1526.539C1403.8006,-1516.6464 1389.4965,-1504.0867 1377.4098,-1493.474"/>
<polygon fill="#000000" stroke="#000000" points="1379.6653,-1490.7967 1369.8415,-1486.8287 1375.0466,-1496.0568 1379.6653,-1490.7967"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1434.5" cy="-1471.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1434.5" y="-1467.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1434.5,-1525.4334C1434.5,-1517.733 1434.5,-1508.5763 1434.5,-1500.0186"/>
<polygon fill="#000000" stroke="#000000" points="1438.0001,-1500.0152 1434.5,-1490.0153 1431.0001,-1500.0153 1438.0001,-1500.0152"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1683.5" cy="-1471.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1683.5" y="-1467.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1478.1574,-1530.9782C1525.3573,-1517.33 1599.8685,-1495.7846 1644.9687,-1482.7436"/>
<polygon fill="#000000" stroke="#000000" points="1646.0381,-1486.0778 1654.6723,-1479.9377 1644.0936,-1479.3533 1646.0381,-1486.0778"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="2034.5" cy="-1471.602" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2034.5" y="-1467.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 15&#45;16</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.9465,-1536.8284C1600.9292,-1523.6305 1843.6618,-1494.5026 1964.0093,-1480.0609"/>
<polygon fill="#000000" stroke="#000000" points="1964.7022,-1483.5029 1974.2139,-1478.8363 1963.8681,-1476.5528 1964.7022,-1483.5029"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="6039.5" cy="-1471.602" rx="70.655" ry="18"/>
<text text-anchor="middle" x="6039.5" y="-1467.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 41&#45;390</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1495.2591,-1542.652C1992.6291,-1534.8755 5389.953,-1481.7578 5958.7843,-1472.864"/>
<polygon fill="#000000" stroke="#000000" points="5958.9985,-1476.3612 5968.9426,-1472.7052 5958.889,-1469.362 5958.9985,-1476.3612"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="1209.5,-1417.602 1137.5,-1417.602 1137.5,-1381.602 1209.5,-1381.602 1209.5,-1417.602"/>
<text text-anchor="middle" x="1173.5" y="-1396.102" font-family="Inconsolata" font-size="14.00" fill="#000000">* Txtbuf</text>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1173.5,-1453.4334C1173.5,-1445.733 1173.5,-1436.5763 1173.5,-1428.0186"/>
<polygon fill="#000000" stroke="#000000" points="1177.0001,-1428.0152 1173.5,-1418.0153 1170.0001,-1428.0153 1177.0001,-1428.0152"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="1262.5" cy="-1399.602" rx="27" ry="18"/>
<text text-anchor="middle" x="1262.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1268.4813,-1453.4334C1267.6257,-1445.733 1266.6083,-1436.5763 1265.6574,-1428.0186"/>
<polygon fill="#000000" stroke="#000000" points="1269.1289,-1427.5676 1264.5459,-1418.0153 1262.1717,-1428.3406 1269.1289,-1427.5676"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="1343.5" cy="-1399.602" rx="27" ry="18"/>
<text text-anchor="middle" x="1343.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_4&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1350.2289,-1453.4334C1349.2664,-1445.733 1348.1218,-1436.5763 1347.0521,-1428.0186"/>
<polygon fill="#000000" stroke="#000000" points="1350.5151,-1427.5039 1345.8017,-1418.0153 1343.5691,-1428.3722 1350.5151,-1427.5039"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="1425.5" cy="-1399.602" rx="27" ry="18"/>
<text text-anchor="middle" x="1425.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_5&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1432.2289,-1453.4334C1431.2664,-1445.733 1430.1218,-1436.5763 1429.0521,-1428.0186"/>
<polygon fill="#000000" stroke="#000000" points="1432.5151,-1427.5039 1427.8017,-1418.0153 1425.5691,-1428.3722 1432.5151,-1427.5039"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1722.5" cy="-1399.602" rx="27" ry="18"/>
<text text-anchor="middle" x="1722.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_6&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1692.9408,-1454.1728C1697.5396,-1445.6827 1703.1664,-1435.2948 1708.2718,-1425.8694"/>
<polygon fill="#000000" stroke="#000000" points="1711.4608,-1427.3306 1713.1461,-1416.8707 1705.3057,-1423.9966 1711.4608,-1427.3306"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1980.5" cy="-1399.602" rx="56.6148" ry="18"/>
<text text-anchor="middle" x="1980.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Interface</text>
</g>
<!-- section_7&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_7&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2021.1517,-1453.8042C2014.7432,-1445.2596 2006.9423,-1434.8584 1999.8943,-1425.461"/>
<polygon fill="#000000" stroke="#000000" points="2002.4948,-1423.095 1993.6948,-1417.195 1996.8948,-1427.2951 2002.4948,-1423.095"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="2087.5" cy="-1399.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2087.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_7&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2047.6011,-1453.8042C2053.9848,-1445.1321 2061.7762,-1434.5475 2068.7741,-1425.0409"/>
<polygon fill="#000000" stroke="#000000" points="2071.805,-1426.8275 2074.9145,-1416.6992 2066.1676,-1422.6777 2071.805,-1426.8275"/>
</g>
<!-- section_20 -->
<g id="node21" class="node">
<title>section_20</title>
<ellipse fill="none" stroke="#000000" cx="2416.5" cy="-1399.602" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2416.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 17&#45;30</text>
</g>
<!-- section_7&#45;&gt;section_20 -->
<g id="edge20" class="edge">
<title>section_7&#45;&gt;section_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2088.8256,-1461.3626C2158.2713,-1448.2734 2278.3386,-1425.6429 2352.2491,-1411.7121"/>
<polygon fill="#000000" stroke="#000000" points="2353.1831,-1415.0978 2362.3618,-1409.8061 2351.8865,-1408.2189 2353.1831,-1415.0978"/>
</g>
<!-- header_46 -->
<g id="node47" class="node">
<title>header_46</title>
<ellipse fill="none" stroke="#000000" cx="3679.5" cy="-1399.602" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="3679.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Methods</text>
</g>
<!-- section_8&#45;&gt;header_46 -->
<g id="edge46" class="edge">
<title>section_8&#45;&gt;header_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5968.7611,-1471.1336C5700.3874,-1469.0747 4719.4796,-1458.9889 3912.5,-1417.602 3855.4993,-1414.6786 3790.7847,-1409.5326 3744.047,-1405.4896"/>
<polygon fill="#000000" stroke="#000000" points="3744.3256,-1402.0007 3734.0594,-1404.6187 3743.7175,-1408.9742 3744.3256,-1402.0007"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="3953.5" cy="-1399.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3953.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_8&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5968.7698,-1471.4405C5659.3266,-1470.4653 4422.9772,-1463.7032 4037.5,-1417.602 4022.7235,-1415.8348 4006.7046,-1412.7106 3992.6565,-1409.5558"/>
<polygon fill="#000000" stroke="#000000" points="3993.3542,-1406.1247 3982.8216,-1407.2721 3991.7708,-1412.9433 3993.3542,-1406.1247"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="4123.5" cy="-1399.602" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4123.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 43&#45;45</text>
</g>
<!-- section_8&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_8&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5969.0183,-1470.5063C5681.1925,-1465.8722 4594.0095,-1446.7686 4251.5,-1417.602 4233.93,-1416.1058 4215.0864,-1413.8322 4197.4065,-1411.3995"/>
<polygon fill="#000000" stroke="#000000" points="4197.5405,-1407.8838 4187.1498,-1409.9534 4196.5632,-1414.8153 4197.5405,-1407.8838"/>
</g>
<!-- section_49 -->
<g id="node50" class="node">
<title>section_49</title>
<ellipse fill="none" stroke="#000000" cx="4326.5" cy="-1399.602" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="4326.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 47&#45;78</text>
</g>
<!-- section_8&#45;&gt;section_49 -->
<g id="edge49" class="edge">
<title>section_8&#45;&gt;section_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5969.6917,-1468.6678C5694.5265,-1457.1022 4686.1482,-1414.7186 4401.6724,-1402.7616"/>
<polygon fill="#000000" stroke="#000000" points="4401.5985,-1399.2555 4391.4603,-1402.3324 4401.3044,-1406.2493 4401.5985,-1399.2555"/>
</g>
<!-- section_50 -->
<g id="node51" class="node">
<title>section_50</title>
<ellipse fill="none" stroke="#000000" cx="5136.5" cy="-1399.602" rx="70.655" ry="18"/>
<text text-anchor="middle" x="5136.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 79&#45;150</text>
</g>
<!-- section_8&#45;&gt;section_50 -->
<g id="edge50" class="edge">
<title>section_8&#45;&gt;section_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5971.9975,-1466.2197C5807.8033,-1453.1278 5388.2814,-1419.6776 5214.1141,-1405.7905"/>
<polygon fill="#000000" stroke="#000000" points="5214.2483,-1402.2902 5204.0017,-1404.9842 5213.6919,-1409.268 5214.2483,-1402.2902"/>
</g>
<!-- section_51 -->
<g id="node52" class="node">
<title>section_51</title>
<ellipse fill="none" stroke="#000000" cx="5847.5" cy="-1399.602" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5847.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 151&#45;163</text>
</g>
<!-- section_8&#45;&gt;section_51 -->
<g id="edge51" class="edge">
<title>section_8&#45;&gt;section_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5999.7175,-1456.6836C5970.1534,-1445.597 5929.6065,-1430.3919 5897.7943,-1418.4624"/>
<polygon fill="#000000" stroke="#000000" points="5898.816,-1415.1076 5888.2238,-1414.8734 5896.3581,-1421.6619 5898.816,-1415.1076"/>
</g>
<!-- section_52 -->
<g id="node53" class="node">
<title>section_52</title>
<ellipse fill="none" stroke="#000000" cx="6218.5" cy="-1399.602" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="6218.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 164&#45;220</text>
</g>
<!-- section_8&#45;&gt;section_52 -->
<g id="edge52" class="edge">
<title>section_8&#45;&gt;section_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6077.4613,-1456.3326C6104.5686,-1445.4291 6141.2444,-1430.6769 6170.4013,-1418.949"/>
<polygon fill="#000000" stroke="#000000" points="6172.0049,-1422.0765 6179.9763,-1415.0976 6169.3926,-1415.5822 6172.0049,-1422.0765"/>
</g>
<!-- section_53 -->
<g id="node54" class="node">
<title>section_53</title>
<ellipse fill="none" stroke="#000000" cx="7025.5" cy="-1399.602" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7025.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 221&#45;241</text>
</g>
<!-- section_8&#45;&gt;section_53 -->
<g id="edge53" class="edge">
<title>section_8&#45;&gt;section_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6107.6608,-1466.6247C6283.4752,-1453.7864 6751.8618,-1419.5837 6942.7694,-1405.6432"/>
<polygon fill="#000000" stroke="#000000" points="6943.303,-1409.1136 6953.0215,-1404.8945 6942.7931,-1402.1322 6943.303,-1409.1136"/>
</g>
<!-- section_54 -->
<g id="node55" class="node">
<title>section_54</title>
<ellipse fill="none" stroke="#000000" cx="7791.5" cy="-1399.602" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7791.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 242&#45;265</text>
</g>
<!-- section_8&#45;&gt;section_54 -->
<g id="edge54" class="edge">
<title>section_8&#45;&gt;section_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6109.2616,-1468.7351C6385.8303,-1457.3692 7404.7877,-1415.4943 7706.6793,-1403.0878"/>
<polygon fill="#000000" stroke="#000000" points="7706.8385,-1406.5843 7716.6863,-1402.6765 7706.551,-1399.5902 7706.8385,-1406.5843"/>
</g>
<!-- section_55 -->
<g id="node56" class="node">
<title>section_55</title>
<ellipse fill="none" stroke="#000000" cx="8906.5" cy="-1399.602" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8906.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 266&#45;284</text>
</g>
<!-- section_8&#45;&gt;section_55 -->
<g id="edge55" class="edge">
<title>section_8&#45;&gt;section_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6110.0137,-1469.8312C6500.4191,-1460.0268 8394.7304,-1412.4543 8821.1399,-1401.7457"/>
<polygon fill="#000000" stroke="#000000" points="8821.3288,-1405.2421 8831.2378,-1401.4921 8821.153,-1398.2443 8821.3288,-1405.2421"/>
</g>
<!-- section_56 -->
<g id="node57" class="node">
<title>section_56</title>
<ellipse fill="none" stroke="#000000" cx="9645.5" cy="-1399.602" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="9645.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 285&#45;316</text>
</g>
<!-- section_8&#45;&gt;section_56 -->
<g id="edge56" class="edge">
<title>section_8&#45;&gt;section_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6110.0325,-1470.5502C6437.2385,-1465.6208 7840.1158,-1443.9336 8990.5,-1417.602 9194.868,-1412.9241 9435.0625,-1405.9444 9560.089,-1402.1992"/>
<polygon fill="#000000" stroke="#000000" points="9560.4665,-1405.6896 9570.357,-1401.8912 9560.2565,-1398.6927 9560.4665,-1405.6896"/>
</g>
<!-- section_57 -->
<g id="node58" class="node">
<title>section_57</title>
<ellipse fill="none" stroke="#000000" cx="11058.5" cy="-1399.602" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="11058.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 317&#45;390</text>
</g>
<!-- section_8&#45;&gt;section_57 -->
<g id="edge57" class="edge">
<title>section_8&#45;&gt;section_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6109.9703,-1470.5911C6667.5381,-1462.5925 10361.2908,-1409.6038 10972.8123,-1400.8312"/>
<polygon fill="#000000" stroke="#000000" points="10972.9273,-1404.33 10982.876,-1400.6869 10972.8268,-1397.3308 10972.9273,-1404.33"/>
</g>
<!-- section_58 -->
<g id="node59" class="node">
<title>section_58</title>
<ellipse fill="none" stroke="#000000" cx="12572.5" cy="-1399.602" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="12572.5" y="-1395.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 391&#45;421</text>
</g>
<!-- section_8&#45;&gt;section_58 -->
<g id="edge58" class="edge">
<title>section_8&#45;&gt;section_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6110.3502,-1470.9058C6562.0081,-1466.4565 9085.4867,-1441.4319 11142.5,-1417.602 11652.3539,-1411.6955 12264.4489,-1403.6818 12486.6375,-1400.7428"/>
<polygon fill="#000000" stroke="#000000" points="12486.9685,-1404.2388 12496.9213,-1400.6067 12486.8758,-1397.2394 12486.9685,-1404.2388"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-1345.5023 0,-1345.5023 0,-1274.9016 513,-1274.9016 513,-1345.5023"/>
<text text-anchor="middle" x="256.5" y="-1298.402" font-family="Inconsolata" font-size="14.00" fill="#000000">This is not much more than an ordinary array of lines that has a bit of</text>
<text text-anchor="middle" x="256.5" y="-1283.002" font-family="Inconsolata" font-size="14.00" fill="#000000">awareness, mostly about which lines have cursors and which don&#39;t.</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1240.5869,-1388.945C1233.6769,-1386.0494 1225.9102,-1383.2588 1218.5,-1381.602 919.0349,-1314.6479 832.2332,-1372.8821 523.2799,-1345.7261"/>
<polygon fill="#000000" stroke="#000000" points="523.4103,-1342.2237 513.1362,-1344.811 522.7812,-1349.1954 523.4103,-1342.2237"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1086,-1337.5024 531,-1337.5024 531,-1282.9015 1086,-1282.9015 1086,-1337.5024"/>
<text text-anchor="middle" x="808.5" y="-1306.402" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ll circle back for quipu but I want a basic editor as soon as possible. The</text>
<text text-anchor="middle" x="808.5" y="-1291.002" font-family="Inconsolata" font-size="14.00" fill="#000000">interaction dynamics need to be worked out right away, plus I want to use it!</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1320.9623,-1389.3794C1313.8901,-1386.5015 1305.9758,-1383.6116 1298.5,-1381.602 1249.8409,-1368.522 1143.0055,-1352.4502 1041.4736,-1338.8689"/>
<polygon fill="#000000" stroke="#000000" points="1041.7252,-1335.3716 1031.3506,-1337.5206 1040.801,-1342.3103 1041.7252,-1335.3716"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1666.5,-1337.5024 1104.5,-1337.5024 1104.5,-1282.9015 1666.5,-1282.9015 1666.5,-1337.5024"/>
<text text-anchor="middle" x="1385.5" y="-1306.402" font-family="Inconsolata" font-size="14.00" fill="#000000">Plan: A line that has a cursor on it, and there can be many, gets &#39;opened&#39;</text>
<text text-anchor="middle" x="1385.5" y="-1291.002" font-family="Inconsolata" font-size="14.00" fill="#000000">into a grid of characters. &#160;These in turn get &#39;closed&#39; when the cursor leaves.</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1417.5973,-1381.9394C1413.1419,-1371.9816 1407.4035,-1359.1562 1402.0136,-1347.11"/>
<polygon fill="#000000" stroke="#000000" points="1405.076,-1345.3843 1397.797,-1337.6858 1398.6864,-1348.2433 1405.076,-1345.3843"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1918,-1338.1035 1685,-1338.1035 1685,-1282.3005 1918,-1282.3005 1918,-1338.1035"/>
<text text-anchor="middle" x="1801.5" y="-1306.702" font-family="Inconsolata" font-size="14.00" fill="#000000">A closed line is just a string.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1736.2607,-1384.0297C1745.5732,-1373.4912 1758.2665,-1359.127 1769.9821,-1345.869"/>
<polygon fill="#000000" stroke="#000000" points="1772.7351,-1348.0392 1776.7342,-1338.2281 1767.4897,-1343.404 1772.7351,-1348.0392"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2036.5,-1328.202 1936.5,-1328.202 1936.5,-1292.202 2036.5,-1292.202 2036.5,-1328.202"/>
<text text-anchor="middle" x="1986.5" y="-1306.702" font-family="Inconsolata" font-size="14.00" fill="#000000">** Interface</text>
</g>
<!-- header_18&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>header_18&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1981.7142,-1381.5106C1982.5437,-1369.1506 1983.6596,-1352.5232 1984.6053,-1338.4336"/>
<polygon fill="#000000" stroke="#000000" points="1988.11,-1338.4784 1985.2876,-1328.2665 1981.1257,-1338.0096 1988.11,-1338.4784"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="2081.5" cy="-1310.202" rx="27" ry="18"/>
<text text-anchor="middle" x="2081.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_19&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2086.2858,-1381.5106C2085.4563,-1369.1506 2084.3404,-1352.5232 2083.3947,-1338.4336"/>
<polygon fill="#000000" stroke="#000000" points="2086.8743,-1338.0096 2082.7124,-1328.2665 2079.89,-1338.4784 2086.8743,-1338.0096"/>
</g>
<!-- header_24 -->
<g id="node25" class="node">
<title>header_24</title>
<ellipse fill="none" stroke="#000000" cx="2205.5" cy="-1310.202" rx="78.8574" ry="18"/>
<text text-anchor="middle" x="2205.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Instance fields</text>
</g>
<!-- section_20&#45;&gt;header_24 -->
<g id="edge24" class="edge">
<title>section_20&#45;&gt;header_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2380.7067,-1384.4365C2345.4797,-1369.5109 2291.4847,-1346.6334 2252.7495,-1330.2214"/>
<polygon fill="#000000" stroke="#000000" points="2253.8242,-1326.8756 2243.2511,-1326.197 2251.0933,-1333.321 2253.8242,-1326.8756"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="2334.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2334.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_20&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2400.2994,-1381.9394C2387.6601,-1368.1595 2369.9843,-1348.8885 2356.1352,-1333.7896"/>
<polygon fill="#000000" stroke="#000000" points="2358.6276,-1331.329 2349.2887,-1326.3253 2353.4689,-1336.0607 2358.6276,-1331.329"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2416.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2416.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_20&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2416.5,-1381.5106C2416.5,-1369.1506 2416.5,-1352.5232 2416.5,-1338.4336"/>
<polygon fill="#000000" stroke="#000000" points="2420.0001,-1338.2665 2416.5,-1328.2665 2413.0001,-1338.2665 2420.0001,-1338.2665"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="2498.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2498.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_20&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2432.7006,-1381.9394C2445.3399,-1368.1595 2463.0157,-1348.8885 2476.8648,-1333.7896"/>
<polygon fill="#000000" stroke="#000000" points="2479.5311,-1336.0607 2483.7113,-1326.3253 2474.3724,-1331.329 2479.5311,-1336.0607"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2746.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2746.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_20&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2463.4305,-1386.8881C2528.8651,-1369.1613 2646.3243,-1337.3405 2707.3249,-1320.8149"/>
<polygon fill="#000000" stroke="#000000" points="2708.587,-1324.0992 2717.3239,-1318.106 2706.7566,-1317.3427 2708.587,-1324.0992"/>
</g>
<!-- section_29 -->
<g id="node30" class="node">
<title>section_29</title>
<ellipse fill="none" stroke="#000000" cx="3224.5" cy="-1310.202" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3224.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 31&#45;40</text>
</g>
<!-- section_20&#45;&gt;section_29 -->
<g id="edge29" class="edge">
<title>section_20&#45;&gt;section_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2477.5625,-1392.8458C2624.4294,-1376.5959 2996.8233,-1335.3929 3153.4102,-1318.0676"/>
<polygon fill="#000000" stroke="#000000" points="3153.8531,-1321.54 3163.4075,-1316.9615 3153.0832,-1314.5825 3153.8531,-1321.54"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="2108.5,-742.801 2054.5,-742.801 2054.5,-706.801 2108.5,-706.801 2108.5,-742.801"/>
</g>
<!-- raw_22&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_22&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2081.5,-1292.0401C2081.5,-1207.9698 2081.5,-856.3244 2081.5,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="2085.0001,-753.04 2081.5,-743.04 2078.0001,-753.04 2085.0001,-753.04"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2280,-742.801 2131,-742.801 2131,-706.801 2280,-706.801 2280,-742.801"/>
<text text-anchor="middle" x="2205.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Instance fields</text>
</g>
<!-- header_24&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>header_24&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2205.5,-1292.0401C2205.5,-1207.9698 2205.5,-856.3244 2205.5,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="2209.0001,-753.04 2205.5,-743.04 2202.0001,-753.04 2209.0001,-753.04"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="2329.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="2329.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_25&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2334.3449,-1292.0401C2333.6268,-1207.9698 2330.6234,-856.3244 2329.7433,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="2333.2412,-753.0097 2329.6558,-743.04 2326.2414,-753.0696 2333.2412,-753.0097"/>
</g>
<!-- raw_33 -->
<g id="node34" class="node">
<title>raw_33</title>
<ellipse fill="none" stroke="#000000" cx="2408.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="2408.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_33 -->
<g id="edge33" class="edge">
<title>prose_26&#45;&gt;raw_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2416.2518,-1292.0401C2415.1029,-1207.9698 2410.2974,-856.3244 2408.8893,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="2412.3857,-752.9912 2408.7493,-743.04 2405.3863,-753.0869 2412.3857,-752.9912"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2489.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="2489.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_27&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2498.2208,-1292.0401C2496.9283,-1207.9698 2491.5221,-856.3244 2489.938,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="2493.4338,-752.985 2489.7804,-743.04 2486.4346,-753.0927 2493.4338,-752.985"/>
</g>
<!-- raw_37 -->
<g id="node38" class="node">
<title>raw_37</title>
<ellipse fill="none" stroke="#000000" cx="2787.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="2787.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_37 -->
<g id="edge37" class="edge">
<title>prose_28&#45;&gt;raw_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2747.772,-1292.0401C2753.6601,-1207.9698 2778.2884,-856.3244 2785.5048,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="2789.0153,-753.2601 2786.2226,-743.04 2782.0324,-752.771 2789.0153,-753.2601"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="3160.5" cy="-724.801" rx="77.4383" ry="18"/>
<text text-anchor="middle" x="3160.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : dependencies</text>
</g>
<!-- section_29&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_29&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3222.5144,-1292.0401C3213.3233,-1207.9698 3174.879,-856.3244 3163.6144,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="3167.0602,-752.6004 3162.494,-743.04 3160.1016,-753.3612 3167.0602,-752.6004"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3288.5" cy="-724.801" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3288.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_29&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_29&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3231.2118,-1292.283C3236.2674,-1278.0062 3242.9195,-1257.3979 3246.5,-1238.8019 3281.6641,-1056.1685 3287.4153,-831.4895 3288.334,-753.2533"/>
<polygon fill="#000000" stroke="#000000" points="3291.8342,-753.2398 3288.4341,-743.2054 3284.8346,-753.17 3291.8342,-753.2398"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="3416.5" cy="-724.801" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3416.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 33&#45;38</text>
</g>
<!-- section_29&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_29&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3260.386,-1294.995C3283.8392,-1283.1511 3313.0671,-1264.4031 3329.5,-1238.8019 3432.2,-1078.8031 3424.9345,-835.2849 3419.0212,-753.0512"/>
<polygon fill="#000000" stroke="#000000" points="3422.5026,-752.6732 3418.243,-742.9724 3415.5233,-753.2122 3422.5026,-752.6732"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1789,-151.3015 1276,-151.3015 1276,-95.4985 1789,-95.4985 1789,-151.3015"/>
<text text-anchor="middle" x="1532.5" y="-103.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;An array of arrays containing codepoints (string fragments).</text>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2331.028,-706.5867C2337.5716,-623.522 2359.7763,-281.6316 2288.5,-210.8001 2249.7776,-172.3193 1852.6155,-181.9911 1798.5,-174.8001 1756.4146,-169.2076 1710.9377,-161.1688 1669.693,-153.1039"/>
<polygon fill="#000000" stroke="#000000" points="1670.3471,-149.6656 1659.8589,-151.165 1668.993,-156.5334 1670.3471,-149.6656"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2243.5,-143.3021 1807.5,-143.3021 1807.5,-103.4979 2243.5,-103.4979 2243.5,-143.3021"/>
<text text-anchor="middle" x="2025.5" y="-111.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; cursor : &#160;Number of fragments to skip before an insertion.</text>
</g>
<!-- raw_33&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>raw_33&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2413.469,-707.0833C2432.4616,-635.2037 2493.1917,-361.9942 2365.5,-210.8001 2357.4328,-201.2481 2219.9791,-168.0243 2122.3457,-145.4048"/>
<polygon fill="#000000" stroke="#000000" points="2122.9657,-141.9559 2112.4343,-143.1132 2121.3888,-148.776 2122.9657,-141.9559"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2551,-143.3021 2262,-143.3021 2262,-103.4979 2551,-103.4979 2551,-143.3021"/>
<text text-anchor="middle" x="2406.5" y="-111.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; cur_row : &#160;Row containing the cursor.</text>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2489.9974,-706.6981C2491.4035,-639.7218 2492.5719,-400.0699 2444.5,-210.8001 2439.3587,-190.5576 2430.0489,-169.0284 2421.9313,-152.4028"/>
<polygon fill="#000000" stroke="#000000" points="2424.9414,-150.5973 2417.33,-143.2272 2418.6841,-153.7352 2424.9414,-150.5973"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="3089.5,-174.7003 2569.5,-174.7003 2569.5,-72.0998 3089.5,-72.0998 3089.5,-174.7003"/>
<text text-anchor="middle" x="2829.5" y="-143.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; disp : &#160;Array of numbers, representing the furthest&#45;right column which</text>
<text text-anchor="middle" x="2829.5" y="-128.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;may be reached by printing the corresponding row.</text>
</g>
<!-- raw_37&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>raw_37&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2788.757,-706.8023C2794.1977,-628.8965 2815.8624,-318.6778 2825.1911,-185.0997"/>
<polygon fill="#000000" stroke="#000000" points="2828.6893,-185.2462 2825.8946,-175.0267 2821.7063,-184.7585 2828.6893,-185.2462"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3243,-141.4 3108,-141.4 3108,-105.4 3243,-105.4 3243,-141.4"/>
<text text-anchor="middle" x="3175.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000">**** dependencies</text>
</g>
<!-- header_39&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>header_39&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3160.9571,-706.4739C3163.1029,-620.4416 3172.1814,-256.4521 3174.794,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="3178.2959,-151.6683 3175.0465,-141.5841 3171.2981,-151.4937 3178.2959,-151.6683"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="3288.5" cy="-123.4" rx="27" ry="18"/>
<text text-anchor="middle" x="3288.5" y="-119.2" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_40&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3288.5,-706.4739C3288.5,-620.4416 3288.5,-256.4521 3288.5,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="3292.0001,-151.5841 3288.5,-141.5841 3285.0001,-151.5841 3292.0001,-151.5841"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3657.5,-158.0013 3333.5,-158.0013 3333.5,-88.7988 3657.5,-88.7988 3657.5,-158.0013"/>
<text text-anchor="middle" x="3495.5" y="-143.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">assert(meta)</text>
<text text-anchor="middle" x="3495.5" y="-127.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">local collect = assert(table.collect)</text>
<text text-anchor="middle" x="3495.5" y="-112.2" font-family="Inconsolata" font-size="14.00" fill="#000000">local lines = assert(string.lines)</text>
<text text-anchor="middle" x="3495.5" y="-96.8" font-family="Inconsolata" font-size="14.00" fill="#000000">local codepoints = assert(string.codepoints)</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>codeblock_41&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3418.8643,-706.8023C3429.5537,-625.4276 3473.5379,-290.5904 3489.5963,-168.3427"/>
<polygon fill="#000000" stroke="#000000" points="3493.0955,-168.5777 3490.9278,-158.207 3486.1551,-167.6659 3493.0955,-168.5777"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="3315.5,-36 3261.5,-36 3261.5,0 3315.5,0 3315.5,-36"/>
</g>
<!-- raw_43&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>raw_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3288.5,-105.0407C3288.5,-88.7936 3288.5,-64.8334 3288.5,-46.1629"/>
<polygon fill="#000000" stroke="#000000" points="3292.0001,-46.1489 3288.5,-36.1489 3285.0001,-46.1489 3292.0001,-46.1489"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="3638.5,-1328.202 3552.5,-1328.202 3552.5,-1292.202 3638.5,-1292.202 3638.5,-1328.202"/>
<text text-anchor="middle" x="3595.5" y="-1306.702" font-family="Inconsolata" font-size="14.00" fill="#000000">** Methods</text>
</g>
<!-- header_46&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>header_46&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3662.9043,-1381.9394C3650.5268,-1368.7662 3633.4341,-1350.5747 3619.5586,-1335.8072"/>
<polygon fill="#000000" stroke="#000000" points="3622.0362,-1333.3327 3612.6379,-1328.4416 3616.9348,-1338.126 3622.0362,-1333.3327"/>
</g>
<!-- raw_60 -->
<g id="node61" class="node">
<title>raw_60</title>
<ellipse fill="none" stroke="#000000" cx="3683.5" cy="-1310.202" rx="27" ry="18"/>
<text text-anchor="middle" x="3683.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_47&#45;&gt;raw_60 -->
<g id="edge60" class="edge">
<title>prose_47&#45;&gt;raw_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3921.2702,-1397.6961C3874.2497,-1393.7357 3785.2914,-1381.7063 3719.5,-1345.602 3713.7511,-1342.4472 3708.2878,-1338.113 3703.4341,-1333.5582"/>
<polygon fill="#000000" stroke="#000000" points="3705.8615,-1331.0349 3696.3553,-1326.3569 3700.8695,-1335.942 3705.8615,-1331.0349"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="3898.5,-1328.202 3728.5,-1328.202 3728.5,-1292.202 3898.5,-1292.202 3898.5,-1328.202"/>
<text text-anchor="middle" x="3813.5" y="-1306.702" font-family="Inconsolata" font-size="14.00" fill="#000000">local Txtbuf = meta {}</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_48&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4066.6105,-1387.2657C4022.764,-1377.305 3960.8178,-1362.2456 3907.5,-1345.602 3894.633,-1341.5855 3880.9664,-1336.7671 3868.156,-1331.9972"/>
<polygon fill="#000000" stroke="#000000" points="3869.1459,-1328.6299 3858.5542,-1328.3733 3866.6741,-1335.179 3869.1459,-1328.6299"/>
</g>
<!-- header_63 -->
<g id="node64" class="node">
<title>header_63</title>
<ellipse fill="none" stroke="#000000" cx="4032.5" cy="-1310.202" rx="115.7565" ry="18"/>
<text text-anchor="middle" x="4032.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf.__tostring(txtbuf)</text>
</g>
<!-- section_49&#45;&gt;header_63 -->
<g id="edge63" class="edge">
<title>section_49&#45;&gt;header_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4282.4852,-1386.2179C4232.7685,-1371.1 4151.4678,-1346.3779 4095.1431,-1329.2506"/>
<polygon fill="#000000" stroke="#000000" points="4095.8658,-1325.8122 4085.2801,-1326.2514 4093.8292,-1332.5094 4095.8658,-1325.8122"/>
</g>
<!-- prose_64 -->
<g id="node65" class="node">
<title>prose_64</title>
<ellipse fill="none" stroke="#000000" cx="4198.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4198.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_64 -->
<g id="edge64" class="edge">
<title>section_49&#45;&gt;prose_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4298.3542,-1383.2899C4281.237,-1373.039 4259.1546,-1359.2179 4240.5,-1345.602 4234.8072,-1341.4469 4228.9009,-1336.7405 4223.3788,-1332.1474"/>
<polygon fill="#000000" stroke="#000000" points="4225.5228,-1329.3764 4215.6329,-1325.5765 4220.9945,-1334.7145 4225.5228,-1329.3764"/>
</g>
<!-- codeblock_65 -->
<g id="node66" class="node">
<title>codeblock_65</title>
<ellipse fill="none" stroke="#000000" cx="4326.5" cy="-1310.202" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4326.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 49&#45;65</text>
</g>
<!-- section_49&#45;&gt;codeblock_65 -->
<g id="edge65" class="edge">
<title>section_49&#45;&gt;codeblock_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4326.5,-1381.5106C4326.5,-1369.1506 4326.5,-1352.5232 4326.5,-1338.4336"/>
<polygon fill="#000000" stroke="#000000" points="4330.0001,-1338.2665 4326.5,-1328.2665 4323.0001,-1338.2665 4330.0001,-1338.2665"/>
</g>
<!-- codeblock_66 -->
<g id="node67" class="node">
<title>codeblock_66</title>
<ellipse fill="none" stroke="#000000" cx="4499.5" cy="-1310.202" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4499.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 67&#45;76</text>
</g>
<!-- section_49&#45;&gt;codeblock_66 -->
<g id="edge66" class="edge">
<title>section_49&#45;&gt;codeblock_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4357.4289,-1383.6191C4385.6138,-1369.0541 4427.4492,-1347.4352 4458.4295,-1331.4257"/>
<polygon fill="#000000" stroke="#000000" points="4460.3913,-1334.3517 4467.6684,-1326.6514 4457.1776,-1328.1329 4460.3913,-1334.3517"/>
</g>
<!-- header_72 -->
<g id="node73" class="node">
<title>header_72</title>
<ellipse fill="none" stroke="#000000" cx="4821.5" cy="-1310.202" rx="92.0509" ry="18"/>
<text text-anchor="middle" x="4821.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:insert(frag)</text>
</g>
<!-- section_50&#45;&gt;header_72 -->
<g id="edge72" class="edge">
<title>section_50&#45;&gt;header_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5089.0003,-1386.1211C5034.2154,-1370.5727 4943.9645,-1344.9586 4883.6416,-1327.8384"/>
<polygon fill="#000000" stroke="#000000" points="4884.4323,-1324.4246 4873.8567,-1325.0613 4882.5211,-1331.1587 4884.4323,-1324.4246"/>
</g>
<!-- prose_73 -->
<g id="node74" class="node">
<title>prose_73</title>
<ellipse fill="none" stroke="#000000" cx="5048.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5048.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_50&#45;&gt;prose_73 -->
<g id="edge73" class="edge">
<title>section_50&#45;&gt;prose_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5119.114,-1381.9394C5105.4646,-1368.0728 5086.3419,-1348.6459 5071.4383,-1333.5052"/>
<polygon fill="#000000" stroke="#000000" points="5073.59,-1330.7019 5064.0806,-1326.0305 5068.6014,-1335.6124 5073.59,-1330.7019"/>
</g>
<!-- codeblock_74 -->
<g id="node75" class="node">
<title>codeblock_74</title>
<ellipse fill="none" stroke="#000000" cx="5224.5" cy="-1310.202" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="5224.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 81&#45;148</text>
</g>
<!-- section_50&#45;&gt;codeblock_74 -->
<g id="edge74" class="edge">
<title>section_50&#45;&gt;codeblock_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5153.886,-1381.9394C5167.0235,-1368.5928 5185.2316,-1350.0951 5199.8678,-1335.2261"/>
<polygon fill="#000000" stroke="#000000" points="5202.6294,-1337.4098 5207.1501,-1327.8278 5197.6407,-1332.4992 5202.6294,-1337.4098"/>
</g>
<!-- header_79 -->
<g id="node80" class="node">
<title>header_79</title>
<ellipse fill="none" stroke="#000000" cx="5617.5" cy="-1310.202" rx="88.6939" ry="18"/>
<text text-anchor="middle" x="5617.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:advance()</text>
</g>
<!-- section_51&#45;&gt;header_79 -->
<g id="edge79" class="edge">
<title>section_51&#45;&gt;header_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5807.9616,-1384.2336C5769.3549,-1369.2273 5710.4333,-1346.3247 5668.3562,-1329.9696"/>
<polygon fill="#000000" stroke="#000000" points="5669.4363,-1326.6343 5658.8476,-1326.2736 5666.9003,-1333.1588 5669.4363,-1326.6343"/>
</g>
<!-- prose_80 -->
<g id="node81" class="node">
<title>prose_80</title>
<ellipse fill="none" stroke="#000000" cx="5774.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5774.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_51&#45;&gt;prose_80 -->
<g id="edge80" class="edge">
<title>section_51&#45;&gt;prose_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5832.7274,-1381.5106C5821.6896,-1367.9931 5806.4839,-1349.3714 5794.3793,-1334.5473"/>
<polygon fill="#000000" stroke="#000000" points="5797.0555,-1332.291 5788.0197,-1326.7589 5791.6335,-1336.7184 5797.0555,-1332.291"/>
</g>
<!-- codeblock_81 -->
<g id="node82" class="node">
<title>codeblock_81</title>
<ellipse fill="none" stroke="#000000" cx="5917.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5917.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 153&#45;161</text>
</g>
<!-- section_51&#45;&gt;codeblock_81 -->
<g id="edge81" class="edge">
<title>section_51&#45;&gt;codeblock_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5861.6655,-1381.5106C5871.8177,-1368.5448 5885.647,-1350.8828 5897.0022,-1336.3806"/>
<polygon fill="#000000" stroke="#000000" points="5899.9463,-1338.2978 5903.3555,-1328.2665 5894.4347,-1333.9823 5899.9463,-1338.2978"/>
</g>
<!-- header_86 -->
<g id="node87" class="node">
<title>header_86</title>
<ellipse fill="none" stroke="#000000" cx="6151.5" cy="-1310.202" rx="83.8576" ry="18"/>
<text text-anchor="middle" x="6151.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:d_back()</text>
</g>
<!-- section_52&#45;&gt;header_86 -->
<g id="edge86" class="edge">
<title>section_52&#45;&gt;header_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6204.9416,-1381.5106C6195.2244,-1368.5448 6181.9879,-1350.8828 6171.1194,-1336.3806"/>
<polygon fill="#000000" stroke="#000000" points="6173.8362,-1334.1696 6165.0383,-1328.2665 6168.2347,-1338.3677 6173.8362,-1334.1696"/>
</g>
<!-- prose_87 -->
<g id="node88" class="node">
<title>prose_87</title>
<ellipse fill="none" stroke="#000000" cx="6285.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6285.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_52&#45;&gt;prose_87 -->
<g id="edge87" class="edge">
<title>section_52&#45;&gt;prose_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6232.0584,-1381.5106C6242.0313,-1368.2036 6255.7112,-1349.95 6266.7337,-1335.2424"/>
<polygon fill="#000000" stroke="#000000" points="6269.6719,-1337.158 6272.8683,-1327.0568 6264.0704,-1332.96 6269.6719,-1337.158"/>
</g>
<!-- codeblock_88 -->
<g id="node89" class="node">
<title>codeblock_88</title>
<ellipse fill="none" stroke="#000000" cx="6512.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6512.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 172&#45;218</text>
</g>
<!-- section_52&#45;&gt;codeblock_88 -->
<g id="edge88" class="edge">
<title>section_52&#45;&gt;codeblock_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6265.0852,-1385.4363C6316.1014,-1369.9232 6398.026,-1345.0114 6453.4969,-1328.1437"/>
<polygon fill="#000000" stroke="#000000" points="6454.6409,-1331.4542 6463.19,-1325.1962 6452.6043,-1324.757 6454.6409,-1331.4542"/>
</g>
<!-- header_93 -->
<g id="node94" class="node">
<title>header_93</title>
<ellipse fill="none" stroke="#000000" cx="6961.5" cy="-1310.202" rx="78.5213" ry="18"/>
<text text-anchor="middle" x="6961.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:d_fwd()</text>
</g>
<!-- section_53&#45;&gt;header_93 -->
<g id="edge93" class="edge">
<title>section_53&#45;&gt;header_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7012.5486,-1381.5106C7003.3534,-1368.6659 6990.8588,-1351.2125 6980.5325,-1336.7881"/>
<polygon fill="#000000" stroke="#000000" points="6983.099,-1334.3603 6974.4321,-1328.2665 6977.4072,-1338.4351 6983.099,-1334.3603"/>
</g>
<!-- prose_94 -->
<g id="node95" class="node">
<title>prose_94</title>
<ellipse fill="none" stroke="#000000" cx="7090.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7090.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_53&#45;&gt;prose_94 -->
<g id="edge94" class="edge">
<title>section_53&#45;&gt;prose_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7038.6537,-1381.5106C7048.3288,-1368.2036 7061.6004,-1349.95 7072.2938,-1335.2424"/>
<polygon fill="#000000" stroke="#000000" points="7075.1955,-1337.2032 7078.2454,-1327.0568 7069.5338,-1333.0867 7075.1955,-1337.2032"/>
</g>
<!-- codeblock_95 -->
<g id="node96" class="node">
<title>codeblock_95</title>
<ellipse fill="none" stroke="#000000" cx="7289.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7289.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 223&#45;239</text>
</g>
<!-- section_53&#45;&gt;codeblock_95 -->
<g id="edge95" class="edge">
<title>section_53&#45;&gt;codeblock_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7069.0942,-1384.8394C7114.4028,-1369.4963 7185.4298,-1345.4439 7234.5516,-1328.8095"/>
<polygon fill="#000000" stroke="#000000" points="7235.7208,-1332.1089 7244.0698,-1325.5863 7233.4756,-1325.4787 7235.7208,-1332.1089"/>
</g>
<!-- header_100 -->
<g id="node101" class="node">
<title>header_100</title>
<ellipse fill="none" stroke="#000000" cx="7658.5" cy="-1310.202" rx="83.3644" ry="18"/>
<text text-anchor="middle" x="7658.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:left(disp)</text>
</g>
<!-- section_54&#45;&gt;header_100 -->
<g id="edge100" class="edge">
<title>section_54&#45;&gt;header_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7766.1707,-1382.5761C7745.3195,-1368.5603 7715.5651,-1348.56 7692.6171,-1333.1348"/>
<polygon fill="#000000" stroke="#000000" points="7694.4399,-1330.1429 7684.1881,-1327.469 7690.5349,-1335.9524 7694.4399,-1330.1429"/>
</g>
<!-- prose_101 -->
<g id="node102" class="node">
<title>prose_101</title>
<ellipse fill="none" stroke="#000000" cx="7791.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7791.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_101 -->
<g id="edge101" class="edge">
<title>section_54&#45;&gt;prose_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7791.5,-1381.5106C7791.5,-1369.1506 7791.5,-1352.5232 7791.5,-1338.4336"/>
<polygon fill="#000000" stroke="#000000" points="7795.0001,-1338.2665 7791.5,-1328.2665 7788.0001,-1338.2665 7795.0001,-1338.2665"/>
</g>
<!-- prose_102 -->
<g id="node103" class="node">
<title>prose_102</title>
<ellipse fill="none" stroke="#000000" cx="8082.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8082.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_102 -->
<g id="edge102" class="edge">
<title>section_54&#45;&gt;prose_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7837.9316,-1385.3374C7895.065,-1367.7851 7991.0094,-1338.3094 8044.1555,-1321.982"/>
<polygon fill="#000000" stroke="#000000" points="8045.3447,-1325.2782 8053.8759,-1318.9958 8043.289,-1318.5869 8045.3447,-1325.2782"/>
</g>
<!-- codeblock_103 -->
<g id="node104" class="node">
<title>codeblock_103</title>
<ellipse fill="none" stroke="#000000" cx="8402.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8402.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 250&#45;263</text>
</g>
<!-- section_54&#45;&gt;codeblock_103 -->
<g id="edge103" class="edge">
<title>section_54&#45;&gt;codeblock_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7856.0208,-1390.1615C7968.059,-1373.7683 8198.3352,-1340.0749 8321.1487,-1322.1051"/>
<polygon fill="#000000" stroke="#000000" points="8321.8588,-1325.5386 8331.2467,-1320.6276 8320.8453,-1318.6123 8321.8588,-1325.5386"/>
</g>
<!-- header_122 -->
<g id="node123" class="node">
<title>header_122</title>
<ellipse fill="none" stroke="#000000" cx="8837.5" cy="-1310.202" rx="88.6766" ry="18"/>
<text text-anchor="middle" x="8837.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:right(disp)</text>
</g>
<!-- section_55&#45;&gt;header_122 -->
<g id="edge122" class="edge">
<title>section_55&#45;&gt;header_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8892.5368,-1381.5106C8882.5297,-1368.5448 8868.898,-1350.8828 8857.705,-1336.3806"/>
<polygon fill="#000000" stroke="#000000" points="8860.3231,-1334.0444 8851.4424,-1328.2665 8854.7817,-1338.3214 8860.3231,-1334.0444"/>
</g>
<!-- prose_123 -->
<g id="node124" class="node">
<title>prose_123</title>
<ellipse fill="none" stroke="#000000" cx="8976.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8976.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_123 -->
<g id="edge123" class="edge">
<title>section_55&#45;&gt;prose_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8920.6655,-1381.5106C8931.1517,-1368.1182 8945.5608,-1349.7158 8957.1145,-1334.96"/>
<polygon fill="#000000" stroke="#000000" points="8960.1267,-1336.7903 8963.5359,-1326.7589 8954.6152,-1332.4748 8960.1267,-1336.7903"/>
</g>
<!-- codeblock_124 -->
<g id="node125" class="node">
<title>codeblock_124</title>
<ellipse fill="none" stroke="#000000" cx="9146.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9146.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 268&#45;282</text>
</g>
<!-- section_55&#45;&gt;codeblock_124 -->
<g id="edge124" class="edge">
<title>section_55&#45;&gt;codeblock_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8947.2127,-1384.4365C8987.8305,-1369.3064 9050.3847,-1346.0049 9094.5578,-1329.5505"/>
<polygon fill="#000000" stroke="#000000" points="9095.8194,-1332.8155 9103.9686,-1326.0449 9093.3759,-1326.2558 9095.8194,-1332.8155"/>
</g>
<!-- header_129 -->
<g id="node130" class="node">
<title>header_129</title>
<ellipse fill="none" stroke="#000000" cx="9471.5" cy="-1310.202" rx="123.6395" ry="18"/>
<text text-anchor="middle" x="9471.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:up(), Txtbuf:down()</text>
</g>
<!-- section_56&#45;&gt;header_129 -->
<g id="edge129" class="edge">
<title>section_56&#45;&gt;header_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9613.5857,-1383.2047C9585.7562,-1368.906 9545.1518,-1348.0438 9514.4693,-1332.2793"/>
<polygon fill="#000000" stroke="#000000" points="9515.785,-1329.0204 9505.2908,-1327.5634 9512.5859,-1335.2466 9515.785,-1329.0204"/>
</g>
<!-- prose_130 -->
<g id="node131" class="node">
<title>prose_130</title>
<ellipse fill="none" stroke="#000000" cx="9645.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9645.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_56&#45;&gt;prose_130 -->
<g id="edge130" class="edge">
<title>section_56&#45;&gt;prose_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9645.5,-1381.5106C9645.5,-1369.1506 9645.5,-1352.5232 9645.5,-1338.4336"/>
<polygon fill="#000000" stroke="#000000" points="9649.0001,-1338.2665 9645.5,-1328.2665 9642.0001,-1338.2665 9649.0001,-1338.2665"/>
</g>
<!-- codeblock_131 -->
<g id="node132" class="node">
<title>codeblock_131</title>
<ellipse fill="none" stroke="#000000" cx="9843.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9843.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 287&#45;300</text>
</g>
<!-- section_56&#45;&gt;codeblock_131 -->
<g id="edge131" class="edge">
<title>section_56&#45;&gt;codeblock_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9680.8984,-1383.6191C9713.5734,-1368.8658 9762.2782,-1346.8749 9797.8636,-1330.8075"/>
<polygon fill="#000000" stroke="#000000" points="9799.3947,-1333.9565 9807.0684,-1326.6514 9796.5141,-1327.5766 9799.3947,-1333.9565"/>
</g>
<!-- codeblock_132 -->
<g id="node133" class="node">
<title>codeblock_132</title>
<ellipse fill="none" stroke="#000000" cx="10207.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10207.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 302&#45;315</text>
</g>
<!-- section_56&#45;&gt;codeblock_132 -->
<g id="edge132" class="edge">
<title>section_56&#45;&gt;codeblock_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9708.3327,-1389.6069C9811.2067,-1373.2422 10015.3823,-1340.7631 10128.1141,-1322.8303"/>
<polygon fill="#000000" stroke="#000000" points="10128.74,-1326.2748 10138.066,-1321.2472 10127.6403,-1319.3617 10128.74,-1326.2748"/>
</g>
<!-- header_138 -->
<g id="node139" class="node">
<title>header_138</title>
<ellipse fill="none" stroke="#000000" cx="10716.5" cy="-1310.202" rx="62.0899" ry="18"/>
<text text-anchor="middle" x="10716.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Txtbuf:nl()</text>
</g>
<!-- section_57&#45;&gt;header_138 -->
<g id="edge138" class="edge">
<title>section_57&#45;&gt;header_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11006.6807,-1386.4356C10964.1543,-1375.5923 10902.386,-1359.7554 10848.5,-1345.602 10823.3001,-1338.9831 10795.4312,-1331.529 10771.8198,-1325.174"/>
<polygon fill="#000000" stroke="#000000" points="10772.5477,-1321.7454 10761.9815,-1322.5234 10770.7267,-1328.5044 10772.5477,-1321.7454"/>
</g>
<!-- prose_139 -->
<g id="node140" class="node">
<title>prose_139</title>
<ellipse fill="none" stroke="#000000" cx="10889.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10889.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_57&#45;&gt;prose_139 -->
<g id="edge139" class="edge">
<title>section_57&#45;&gt;prose_139</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11027.1085,-1382.9961C10997.177,-1367.1625 10952.2949,-1343.4201 10922.0007,-1327.3947"/>
<polygon fill="#000000" stroke="#000000" points="10923.5762,-1324.2686 10913.1001,-1322.6863 10920.3029,-1330.4562 10923.5762,-1324.2686"/>
</g>
<!-- codeblock_140 -->
<g id="node141" class="node">
<title>codeblock_140</title>
<ellipse fill="none" stroke="#000000" cx="11058.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11058.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 321&#45;352</text>
</g>
<!-- section_57&#45;&gt;codeblock_140 -->
<g id="edge140" class="edge">
<title>section_57&#45;&gt;codeblock_140</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11058.5,-1381.5106C11058.5,-1369.1506 11058.5,-1352.5232 11058.5,-1338.4336"/>
<polygon fill="#000000" stroke="#000000" points="11062.0001,-1338.2665 11058.5,-1328.2665 11055.0001,-1338.2665 11062.0001,-1338.2665"/>
</g>
<!-- codeblock_141 -->
<g id="node142" class="node">
<title>codeblock_141</title>
<ellipse fill="none" stroke="#000000" cx="11343.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11343.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 355&#45;363</text>
</g>
<!-- section_57&#45;&gt;codeblock_141 -->
<g id="edge141" class="edge">
<title>section_57&#45;&gt;codeblock_141</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11104.2902,-1385.2383C11153.6174,-1369.7652 11232.2174,-1345.1096 11285.7516,-1328.3167"/>
<polygon fill="#000000" stroke="#000000" points="11286.9492,-1331.6093 11295.4432,-1325.2766 11284.854,-1324.9302 11286.9492,-1331.6093"/>
</g>
<!-- codeblock_142 -->
<g id="node143" class="node">
<title>codeblock_142</title>
<ellipse fill="none" stroke="#000000" cx="11657.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11657.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 365&#45;375</text>
</g>
<!-- section_57&#45;&gt;codeblock_142 -->
<g id="edge142" class="edge">
<title>section_57&#45;&gt;codeblock_142</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11124.2945,-1390.6875C11200.2868,-1380.296 11329.035,-1362.3974 11439.5,-1345.602 11485.9013,-1338.547 11537.7702,-1330.1452 11579.2692,-1323.2976"/>
<polygon fill="#000000" stroke="#000000" points="11580.0187,-1326.7213 11589.3139,-1321.6371 11578.877,-1319.815 11580.0187,-1326.7213"/>
</g>
<!-- codeblock_143 -->
<g id="node144" class="node">
<title>codeblock_143</title>
<ellipse fill="none" stroke="#000000" cx="12029.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12029.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 377&#45;388</text>
</g>
<!-- section_57&#45;&gt;codeblock_143 -->
<g id="edge143" class="edge">
<title>section_57&#45;&gt;codeblock_143</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11131.6528,-1395.1262C11258.4448,-1387.0987 11527.1714,-1368.8944 11753.5,-1345.602 11818.8713,-1338.8744 11892.7012,-1329.3009 11947.5417,-1321.8056"/>
<polygon fill="#000000" stroke="#000000" points="11948.1231,-1325.2587 11957.5543,-1320.4315 11947.1713,-1318.3237 11948.1231,-1325.2587"/>
</g>
<!-- header_151 -->
<g id="node152" class="node">
<title>header_151</title>
<ellipse fill="none" stroke="#000000" cx="12483.5" cy="-1310.202" rx="38.7388" ry="18"/>
<text text-anchor="middle" x="12483.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : new</text>
</g>
<!-- section_58&#45;&gt;header_151 -->
<g id="edge151" class="edge">
<title>section_58&#45;&gt;header_151</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12554.9165,-1381.9394C12541.2845,-1368.2462 12522.2545,-1349.1307 12507.2662,-1334.075"/>
<polygon fill="#000000" stroke="#000000" points="12509.3823,-1331.2397 12499.8466,-1326.6221 12504.4214,-1336.1783 12509.3823,-1331.2397"/>
</g>
<!-- prose_152 -->
<g id="node153" class="node">
<title>prose_152</title>
<ellipse fill="none" stroke="#000000" cx="12572.5" cy="-1310.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12572.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_58&#45;&gt;prose_152 -->
<g id="edge152" class="edge">
<title>section_58&#45;&gt;prose_152</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12572.5,-1381.5106C12572.5,-1369.1506 12572.5,-1352.5232 12572.5,-1338.4336"/>
<polygon fill="#000000" stroke="#000000" points="12576.0001,-1338.2665 12572.5,-1328.2665 12569.0001,-1338.2665 12576.0001,-1338.2665"/>
</g>
<!-- codeblock_153 -->
<g id="node154" class="node">
<title>codeblock_153</title>
<ellipse fill="none" stroke="#000000" cx="12756.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12756.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 393&#45;417</text>
</g>
<!-- section_58&#45;&gt;codeblock_153 -->
<g id="edge153" class="edge">
<title>section_58&#45;&gt;codeblock_153</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12605.821,-1383.4123C12635.7949,-1368.8489 12680.0311,-1347.3559 12712.8265,-1331.4216"/>
<polygon fill="#000000" stroke="#000000" points="12714.7143,-1334.3957 12722.1793,-1326.8774 12711.6551,-1328.0995 12714.7143,-1334.3957"/>
</g>
<!-- codeblock_154 -->
<g id="node155" class="node">
<title>codeblock_154</title>
<ellipse fill="none" stroke="#000000" cx="13005.5" cy="-1310.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="13005.5" y="-1306.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 419&#45;421</text>
</g>
<!-- section_58&#45;&gt;codeblock_154 -->
<g id="edge154" class="edge">
<title>section_58&#45;&gt;codeblock_154</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12632.7107,-1388.6533C12689.5012,-1378.1697 12776.949,-1361.6218 12852.5,-1345.602 12880.7616,-1339.6094 12911.8404,-1332.5127 12938.5622,-1326.2526"/>
<polygon fill="#000000" stroke="#000000" points="12939.6419,-1329.5943 12948.5754,-1323.8983 12938.0397,-1322.7801 12939.6419,-1329.5943"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="3565.5,-742.801 3511.5,-742.801 3511.5,-706.801 3565.5,-706.801 3565.5,-742.801"/>
</g>
<!-- raw_60&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>raw_60&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3669.7401,-1294.5966C3663.3951,-1287.9732 3655.5039,-1280.4868 3647.5,-1274.8019 3618.0069,-1253.8544 3594.665,-1268.8355 3574.5,-1238.8019 3469.6434,-1082.6297 3512.7586,-836.2129 3531.502,-753.1817"/>
<polygon fill="#000000" stroke="#000000" points="3534.9611,-753.7587 3533.8118,-743.2263 3528.1422,-752.1766 3534.9611,-753.7587"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="3803,-742.801 3584,-742.801 3584,-706.801 3803,-706.801 3803,-742.801"/>
<text text-anchor="middle" x="3693.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf.__tostring(txtbuf)</text>
</g>
<!-- header_63&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>header_63&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3978.8696,-1294.2398C3915.6412,-1275.2084 3818.3357,-1245.1644 3812.5,-1238.8019 3681.5791,-1096.0637 3685.7487,-838.4384 3691.1635,-753.1064"/>
<polygon fill="#000000" stroke="#000000" points="3694.6553,-753.3434 3691.8546,-743.1255 3687.6721,-752.8598 3694.6553,-753.3434"/>
</g>
<!-- raw_68 -->
<g id="node69" class="node">
<title>raw_68</title>
<ellipse fill="none" stroke="#000000" cx="3848.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="3848.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_64&#45;&gt;raw_68 -->
<g id="edge68" class="edge">
<title>prose_64&#45;&gt;raw_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4184.0559,-1294.0261C4176.8046,-1286.9538 4167.4533,-1279.2668 4157.5,-1274.8019 4101.6682,-1249.757 3926.4254,-1283.3744 3884.5,-1238.8019 3818.2554,-1168.3747 3838.217,-850.3892 3846.0323,-753.1434"/>
<polygon fill="#000000" stroke="#000000" points="3849.5424,-753.1642 3846.8761,-742.9104 3842.5661,-752.5889 3849.5424,-753.1642"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="4287.5,-845.0015 3893.5,-845.0015 3893.5,-604.6005 4287.5,-604.6005 4287.5,-845.0015"/>
<text text-anchor="middle" x="4090.5" y="-829.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">local concat = assert(table.concat)</text>
<text text-anchor="middle" x="4090.5" y="-798.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function cat(l)</text>
<text text-anchor="middle" x="4090.5" y="-782.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if type(l) == &quot;string&quot; then</text>
<text text-anchor="middle" x="4090.5" y="-767.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return l</text>
<text text-anchor="middle" x="4090.5" y="-752.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif type(l) == &quot;table&quot; then</text>
<text text-anchor="middle" x="4090.5" y="-736.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if l[1] ~= nil then</text>
<text text-anchor="middle" x="4090.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return concat(l)</text>
<text text-anchor="middle" x="4090.5" y="-705.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4090.5" y="-690.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="4090.5" y="-675.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4090.5" y="-659.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4090.5" y="-628.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;error(&quot;called private fn cat with type&quot; .. type(l))</text>
<text text-anchor="middle" x="4090.5" y="-612.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_65&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>codeblock_65&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4318.7718,-1292.0417C4312.6633,-1277.6318 4303.9537,-1256.9623 4296.5,-1238.8019 4242.9066,-1108.2264 4183.0296,-958.3613 4141.704,-854.2804"/>
<polygon fill="#000000" stroke="#000000" points="4144.9562,-852.9867 4138.0136,-844.9835 4138.45,-855.5694 4144.9562,-852.9867"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="4693,-790.6014 4306,-790.6014 4306,-659.0006 4693,-659.0006 4693,-790.6014"/>
<text text-anchor="middle" x="4499.5" y="-775.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.__tostring(txtbuf)</text>
<text text-anchor="middle" x="4499.5" y="-760.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4499.5" y="-744.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = 1, #txtbuf.lines &#45; 1 do</text>
<text text-anchor="middle" x="4499.5" y="-729.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;phrase = phrase .. cat(txtbuf.lines[i]) .. &quot;\n&quot;</text>
<text text-anchor="middle" x="4499.5" y="-713.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4499.5" y="-682.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase .. cat(txtbuf.lines[#txtbuf.lines])</text>
<text text-anchor="middle" x="4499.5" y="-667.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_66&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>codeblock_66&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4499.5,-1292.0401C4499.5,-1218.216 4499.5,-938.0646 4499.5,-801.1051"/>
<polygon fill="#000000" stroke="#000000" points="4503.0001,-800.6986 4499.5,-790.6986 4496.0001,-800.6987 4503.0001,-800.6986"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="3875.5,-141.4 3821.5,-141.4 3821.5,-105.4 3875.5,-105.4 3875.5,-141.4"/>
</g>
<!-- raw_68&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>raw_68&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3848.5,-706.4739C3848.5,-620.4416 3848.5,-256.4521 3848.5,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="3852.0001,-151.5841 3848.5,-141.5841 3845.0001,-151.5841 3852.0001,-151.5841"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="4888,-742.801 4711,-742.801 4711,-706.801 4888,-706.801 4888,-742.801"/>
<text text-anchor="middle" x="4799.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:insert(frag)</text>
</g>
<!-- header_72&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>header_72&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4820.8175,-1292.0401C4817.658,-1207.9698 4804.4428,-856.3244 4800.5706,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="4804.0586,-752.9015 4800.1854,-743.04 4797.0635,-753.1644 4804.0586,-752.9015"/>
</g>
<!-- raw_76 -->
<g id="node77" class="node">
<title>raw_76</title>
<ellipse fill="none" stroke="#000000" cx="4933.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="4933.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_73&#45;&gt;raw_76 -->
<g id="edge76" class="edge">
<title>prose_73&#45;&gt;raw_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5026.0672,-1296.9351C5007.3411,-1284.5027 4981.796,-1264.069 4969.5,-1238.8019 4887.6263,-1070.5603 4915.5087,-834.1157 4928.4522,-753.2274"/>
<polygon fill="#000000" stroke="#000000" points="4931.9866,-753.3067 4930.1665,-742.8694 4925.0806,-752.1637 4931.9866,-753.3067"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="5512.5,-1238.8029 4978.5,-1238.8029 4978.5,-210.7991 5512.5,-210.7991 5512.5,-1238.8029"/>
<text text-anchor="middle" x="5245.5" y="-1223.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local t_insert, splice = assert(table.insert), assert(table.splice)</text>
<text text-anchor="middle" x="5245.5" y="-1208.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local utf8, codepoints, gsub = string.utf8, string.codepoints, string.gsub</text>
<text text-anchor="middle" x="5245.5" y="-1176.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local _frag_sub = { [&quot;(&quot;] = {&quot;(&quot;, &quot;)&quot;},</text>
<text text-anchor="middle" x="5245.5" y="-1161.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[&#39;&quot;&#39;] = {&#39;&quot;&#39;, &#39;&quot;&#39;},</text>
<text text-anchor="middle" x="5245.5" y="-1146.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[&quot;&#39;&quot;] = {&quot;&#39;&quot;, &quot;&#39;&quot;},</text>
<text text-anchor="middle" x="5245.5" y="-1130.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[&quot;{&quot;] = {&quot;{&quot;, &quot;}&quot;},</text>
<text text-anchor="middle" x="5245.5" y="-1115.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[&quot;[&quot;] = {&quot;[&quot;, &quot;]&quot;} }</text>
<text text-anchor="middle" x="5245.5" y="-1083.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local _closing_pairs = { &#39;&quot;&#39;, &quot;)&quot;, &quot;}&quot;, &quot;]&quot;, &quot;&#39;&quot;}</text>
<text text-anchor="middle" x="5245.5" y="-1052.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; pronounced clozer</text>
<text text-anchor="middle" x="5245.5" y="-1037.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _closer(frag)</text>
<text text-anchor="middle" x="5245.5" y="-1021.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local mebbe = false</text>
<text text-anchor="middle" x="5245.5" y="-1006.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _, cha in ipairs(_closing_pairs) do</text>
<text text-anchor="middle" x="5245.5" y="-990.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;mebbe = mebbe or cha == frag</text>
<text text-anchor="middle" x="5245.5" y="-975.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-960.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return mebbe</text>
<text text-anchor="middle" x="5245.5" y="-944.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5245.5" y="-913.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _no_insert(line, cursor, frag)</text>
<text text-anchor="middle" x="5245.5" y="-897.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if frag == line[cursor]</text>
<text text-anchor="middle" x="5245.5" y="-882.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;and _closer(frag) then</text>
<text text-anchor="middle" x="5245.5" y="-867.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="5245.5" y="-851.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="5245.5" y="-836.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="5245.5" y="-820.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-805.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5245.5" y="-774.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.insert(txtbuf, frag)</text>
<text text-anchor="middle" x="5245.5" y="-758.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local line = txtbuf.lines[txtbuf.cur_row]</text>
<text text-anchor="middle" x="5245.5" y="-743.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if type(line) == &quot;string&quot; then</text>
<text text-anchor="middle" x="5245.5" y="-727.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;line = codepoints(line)</text>
<text text-anchor="middle" x="5245.5" y="-712.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.line = line</text>
<text text-anchor="middle" x="5245.5" y="-697.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-681.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local wide_frag = utf8(frag)</text>
<text text-anchor="middle" x="5245.5" y="-666.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; in principle, we should be breaking up wide (paste) inputs in</text>
<text text-anchor="middle" x="5245.5" y="-650.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; femto.</text>
<text text-anchor="middle" x="5245.5" y="-635.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;</text>
<text text-anchor="middle" x="5245.5" y="-620.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; in reality this code is still invoked on paste. &#160;Something to fix</text>
<text text-anchor="middle" x="5245.5" y="-604.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; at some point...</text>
<text text-anchor="middle" x="5245.5" y="-589.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if wide_frag &lt; #frag then &#45;&#45; a paste</text>
<text text-anchor="middle" x="5245.5" y="-573.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Normalize whitespace</text>
<text text-anchor="middle" x="5245.5" y="-558.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;frag = gsub(frag, &quot;\r\n&quot;, &quot;\n&quot;):gsub(&quot;\r&quot;, &quot;\n&quot;):gsub(&quot;\t&quot;, &quot; &#160;&#160;&quot;)</text>
<text text-anchor="middle" x="5245.5" y="-543.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;wide_frag = codepoints(frag)</text>
<text text-anchor="middle" x="5245.5" y="-527.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="5245.5" y="-512.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;wide_frag = false</text>
<text text-anchor="middle" x="5245.5" y="-496.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-481.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; #/deprecated</text>
<text text-anchor="middle" x="5245.5" y="-466.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not wide_frag then</text>
<text text-anchor="middle" x="5245.5" y="-450.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if _frag_sub[frag] and _no_insert(line, txtbuf.cursor, frag) then</text>
<text text-anchor="middle" x="5245.5" y="-435.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add a closing symbol</text>
<text text-anchor="middle" x="5245.5" y="-419.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;splice(line, txtbuf.cursor, _frag_sub[frag])</text>
<text text-anchor="middle" x="5245.5" y="-404.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif _no_insert(line, txtbuf.cursor, frag)then</text>
<text text-anchor="middle" x="5245.5" y="-389.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;t_insert(line, txtbuf.cursor, frag)</text>
<text text-anchor="middle" x="5245.5" y="-373.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-358.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = txtbuf.cursor + 1</text>
<text text-anchor="middle" x="5245.5" y="-342.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="5245.5" y="-327.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="5245.5" y="-312.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;splice(line, txtbuf.cursor, wide_frag)</text>
<text text-anchor="middle" x="5245.5" y="-296.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = txtbuf.cursor + #wide_frag</text>
<text text-anchor="middle" x="5245.5" y="-281.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="5245.5" y="-265.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5245.5" y="-234.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return false</text>
<text text-anchor="middle" x="5245.5" y="-219.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_74&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>codeblock_74&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5225.1515,-1292.0401C5225.5268,-1281.5781 5226.0508,-1266.9724 5226.6877,-1249.2177"/>
<polygon fill="#000000" stroke="#000000" points="5230.1921,-1249.1555 5227.0529,-1239.0364 5223.1966,-1248.9044 5230.1921,-1249.1555"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="4960.5,-141.4 4906.5,-141.4 4906.5,-105.4 4960.5,-105.4 4960.5,-141.4"/>
</g>
<!-- raw_76&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>raw_76&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4933.5,-706.4739C4933.5,-620.4416 4933.5,-256.4521 4933.5,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="4937.0001,-151.5841 4933.5,-141.5841 4930.0001,-151.5841 4937.0001,-151.5841"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="5686.5,-742.801 5530.5,-742.801 5530.5,-706.801 5686.5,-706.801 5686.5,-742.801"/>
<text text-anchor="middle" x="5608.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:advance()</text>
</g>
<!-- header_79&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>header_79&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5617.2208,-1292.0401C5615.9283,-1207.9698 5610.5221,-856.3244 5608.938,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="5612.4338,-752.985 5608.7804,-743.04 5605.4346,-753.0927 5612.4338,-752.985"/>
</g>
<!-- raw_83 -->
<g id="node84" class="node">
<title>raw_83</title>
<ellipse fill="none" stroke="#000000" cx="5731.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="5731.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_80&#45;&gt;raw_83 -->
<g id="edge83" class="edge">
<title>prose_80&#45;&gt;raw_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5772.5768,-1292.0198C5771.0852,-1277.5978 5769.0226,-1256.9228 5767.5,-1238.8019 5751.9732,-1054.0089 5737.9861,-831.4446 5733.2268,-753.4602"/>
<polygon fill="#000000" stroke="#000000" points="5736.6928,-752.7943 5732.5924,-743.0251 5729.7057,-753.2191 5736.6928,-752.7943"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="6066,-783.2019 5777,-783.2019 5777,-666.4001 6066,-666.4001 6066,-783.2019"/>
<text text-anchor="middle" x="5921.5" y="-767.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local ts_bw = (require &quot;color&quot;).ts_bw</text>
<text text-anchor="middle" x="5921.5" y="-736.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.advance(txtbuf)</text>
<text text-anchor="middle" x="5921.5" y="-721.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.lines[#txtbuf.lines + 1] = {}</text>
<text text-anchor="middle" x="5921.5" y="-705.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = #txtbuf.lines</text>
<text text-anchor="middle" x="5921.5" y="-690.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = 1</text>
<text text-anchor="middle" x="5921.5" y="-674.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_81&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>codeblock_81&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5917.6241,-1292.0401C5918.1382,-1216.8053 5920.1165,-927.2829 5921.0312,-793.4133"/>
<polygon fill="#000000" stroke="#000000" points="5924.532,-793.2977 5921.1005,-783.274 5917.5321,-793.2498 5924.532,-793.2977"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="5758.5,-141.4 5704.5,-141.4 5704.5,-105.4 5758.5,-105.4 5758.5,-141.4"/>
</g>
<!-- raw_83&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>raw_83&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.5,-706.4739C5731.5,-620.4416 5731.5,-256.4521 5731.5,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="5735.0001,-151.5841 5731.5,-141.5841 5728.0001,-151.5841 5735.0001,-151.5841"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="6233,-742.801 6084,-742.801 6084,-706.801 6233,-706.801 6233,-742.801"/>
<text text-anchor="middle" x="6158.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:d_back()</text>
</g>
<!-- header_86&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>header_86&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6151.7172,-1292.0401C6152.7225,-1207.9698 6156.9273,-856.3244 6158.1594,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="6161.662,-753.0812 6158.2819,-743.04 6154.6625,-752.9974 6161.662,-753.0812"/>
</g>
<!-- raw_90 -->
<g id="node91" class="node">
<title>raw_90</title>
<ellipse fill="none" stroke="#000000" cx="6278.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="6278.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_87&#45;&gt;raw_90 -->
<g id="edge90" class="edge">
<title>prose_87&#45;&gt;raw_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6285.2828,-1292.0401C6284.2775,-1207.9698 6280.0727,-856.3244 6278.8406,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="6282.3375,-752.9974 6278.7181,-743.04 6275.338,-753.0812 6282.3375,-752.9974"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="6879,-1076.7024 6324,-1076.7024 6324,-372.8996 6879,-372.8996 6879,-1076.7024"/>
<text text-anchor="middle" x="6601.5" y="-1061.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">local remove = assert(table.remove)</text>
<text text-anchor="middle" x="6601.5" y="-1029.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">local _del_by_pairs = { {&quot;{&quot;, &quot;}&quot;},</text>
<text text-anchor="middle" x="6601.5" y="-1014.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{&quot;&#39;&quot;, &quot;&#39;&quot;},</text>
<text text-anchor="middle" x="6601.5" y="-999.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{&#39;&quot;&#39;, &#39;&quot;&#39;},</text>
<text text-anchor="middle" x="6601.5" y="-983.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{&quot;[&quot;, &quot;]&quot;},</text>
<text text-anchor="middle" x="6601.5" y="-968.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{&quot;(&quot;, &quot;)&quot;} }</text>
<text text-anchor="middle" x="6601.5" y="-936.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _isPaired(a, b)</text>
<text text-anchor="middle" x="6601.5" y="-921.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local pairing = false</text>
<text text-anchor="middle" x="6601.5" y="-906.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _, bookends in ipairs(_del_by_pairs) do</text>
<text text-anchor="middle" x="6601.5" y="-890.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;pairing = pairing or (a == bookends[1] and b == bookends[2])</text>
<text text-anchor="middle" x="6601.5" y="-875.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6601.5" y="-859.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return pairing</text>
<text text-anchor="middle" x="6601.5" y="-844.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6601.5" y="-813.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _deleteBack(txtbuf, cursor)</text>
<text text-anchor="middle" x="6601.5" y="-797.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cursor, cur_row, lines = txtbuf.cursor, txtbuf.cur_row, txtbuf.lines</text>
<text text-anchor="middle" x="6601.5" y="-782.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if _isPaired(lines[cur_row][cursor &#45; 1], lines[cur_row][cursor]) then</text>
<text text-anchor="middle" x="6601.5" y="-766.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines[cur_row], cursor)</text>
<text text-anchor="middle" x="6601.5" y="-751.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines[cur_row], cursor &#45; 1)</text>
<text text-anchor="middle" x="6601.5" y="-736.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="6601.5" y="-720.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines[cur_row], cursor &#45; 1)</text>
<text text-anchor="middle" x="6601.5" y="-705.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6601.5" y="-689.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = cursor &#45; 1</text>
<text text-anchor="middle" x="6601.5" y="-674.501" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6601.5" y="-643.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.d_back(txtbuf)</text>
<text text-anchor="middle" x="6601.5" y="-627.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cursor, cur_row = txtbuf.cursor, txtbuf.cur_row</text>
<text text-anchor="middle" x="6601.5" y="-612.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cursor &gt; 1 then</text>
<text text-anchor="middle" x="6601.5" y="-596.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;_deleteBack(txtbuf, cursor)</text>
<text text-anchor="middle" x="6601.5" y="-581.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="6601.5" y="-566.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif cur_row == 1 then</text>
<text text-anchor="middle" x="6601.5" y="-550.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="6601.5" y="-535.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="6601.5" y="-519.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local new_line = concat(txtbuf.lines[cur_row &#45; 1])</text>
<text text-anchor="middle" x="6601.5" y="-504.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. concat(txtbuf.lines[cur_row])</text>
<text text-anchor="middle" x="6601.5" y="-489.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local new_cursor = #txtbuf.lines[cur_row &#45; 1] + 1</text>
<text text-anchor="middle" x="6601.5" y="-473.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.lines[cur_row &#45; 1] = codepoints(new_line)</text>
<text text-anchor="middle" x="6601.5" y="-458.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines, cur_row)</text>
<text text-anchor="middle" x="6601.5" y="-442.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cur_row = cur_row &#45; 1</text>
<text text-anchor="middle" x="6601.5" y="-427.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = new_cursor</text>
<text text-anchor="middle" x="6601.5" y="-412.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="6601.5" y="-396.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6601.5" y="-381.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_88&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>codeblock_88&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6515.2612,-1292.0401C6520.5496,-1257.2555 6532.8022,-1176.6638 6546.4602,-1086.8273"/>
<polygon fill="#000000" stroke="#000000" points="6549.959,-1087.0996 6548.0019,-1076.6871 6543.0385,-1086.0474 6549.959,-1087.0996"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6524.5,-158.7004 6032.5,-158.7004 6032.5,-88.0997 6524.5,-88.0997 6524.5,-158.7004"/>
<text text-anchor="middle" x="6278.5" y="-111.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">The return value tells us if we have one less line, since we need to</text>
<text text-anchor="middle" x="6278.5" y="-96.2" font-family="Inconsolata" font-size="14.00" fill="#000000">clear it off the screen (true of d_fwd as well</text>
</g>
<!-- raw_90&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>raw_90&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6278.5,-706.4739C6278.5,-624.7016 6278.5,-291.8179 6278.5,-169.1086"/>
<polygon fill="#000000" stroke="#000000" points="6282.0001,-168.9262 6278.5,-158.9263 6275.0001,-168.9263 6282.0001,-168.9262"/>
</g>
<!-- leaf_96 -->
<g id="node97" class="node">
<title>leaf_96</title>
<polygon fill="none" stroke="#c0c0c0" points="7039.5,-742.801 6897.5,-742.801 6897.5,-706.801 7039.5,-706.801 7039.5,-742.801"/>
<text text-anchor="middle" x="6968.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:d_fwd()</text>
</g>
<!-- header_93&#45;&gt;leaf_96 -->
<g id="edge96" class="edge">
<title>header_93&#45;&gt;leaf_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6961.7172,-1292.0401C6962.7225,-1207.9698 6966.9273,-856.3244 6968.1594,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="6971.662,-753.0812 6968.2819,-743.04 6964.6625,-752.9974 6971.662,-753.0812"/>
</g>
<!-- raw_97 -->
<g id="node98" class="node">
<title>raw_97</title>
<ellipse fill="none" stroke="#000000" cx="7084.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="7084.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_94&#45;&gt;raw_97 -->
<g id="edge97" class="edge">
<title>prose_94&#45;&gt;raw_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7090.3139,-1292.0401C7089.4522,-1207.9698 7085.848,-856.3244 7084.792,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="7088.2893,-753.0036 7084.6869,-743.04 7081.2897,-753.0754 7088.2893,-753.0036"/>
</g>
<!-- leaf_99 -->
<g id="node100" class="node">
<title>leaf_99</title>
<polygon fill="none" stroke="#c0c0c0" points="7559,-844.3015 7130,-844.3015 7130,-605.3005 7559,-605.3005 7559,-844.3015"/>
<text text-anchor="middle" x="7344.5" y="-829.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.d_fwd(txtbuf)</text>
<text text-anchor="middle" x="7344.5" y="-813.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cursor, cur_row = txtbuf.cursor, txtbuf.cur_row</text>
<text text-anchor="middle" x="7344.5" y="-798.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cursor &lt;= #txtbuf.lines[cur_row] then</text>
<text text-anchor="middle" x="7344.5" y="-782.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines[txtbuf.cur_row], txtbuf.cursor)</text>
<text text-anchor="middle" x="7344.5" y="-767.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="7344.5" y="-752.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif cur_row == #txtbuf.lines then</text>
<text text-anchor="middle" x="7344.5" y="-736.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="7344.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="7344.5" y="-705.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local new_line = concat(txtbuf.lines[cur_row])</text>
<text text-anchor="middle" x="7344.5" y="-690.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. concat(txtbuf.lines[cur_row + 1])</text>
<text text-anchor="middle" x="7344.5" y="-675.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.lines[cur_row] = codepoints(new_line)</text>
<text text-anchor="middle" x="7344.5" y="-659.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;remove(txtbuf.lines, cur_row + 1)</text>
<text text-anchor="middle" x="7344.5" y="-644.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="7344.5" y="-628.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="7344.5" y="-613.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_95&#45;&gt;leaf_99 -->
<g id="edge99" class="edge">
<title>codeblock_95&#45;&gt;leaf_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7291.2064,-1292.0401C7297.324,-1226.9258 7318.5224,-1001.2978 7332.2687,-854.9866"/>
<polygon fill="#000000" stroke="#000000" points="7335.7944,-854.8761 7333.2453,-844.5925 7328.8251,-854.2213 7335.7944,-854.8761"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="6996.5,-141.4 6942.5,-141.4 6942.5,-105.4 6996.5,-105.4 6996.5,-141.4"/>
</g>
<!-- raw_97&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>raw_97&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7088.0417,-706.6289C7100.5857,-637.4009 7137.5462,-385.2994 7048.5,-210.8001 7037.1709,-188.599 7022.3501,-193.166 7005.5,-174.8001 6998.6848,-167.3718 6992.0931,-158.5982 6986.4536,-150.4223"/>
<polygon fill="#000000" stroke="#000000" points="6989.2091,-148.2463 6980.7425,-141.8771 6983.3893,-152.136 6989.2091,-148.2463"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="7740,-742.801 7577,-742.801 7577,-706.801 7740,-706.801 7740,-742.801"/>
<text text-anchor="middle" x="7658.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:left(disp)</text>
</g>
<!-- header_100&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>header_100&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7658.5,-1292.0401C7658.5,-1207.9698 7658.5,-856.3244 7658.5,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="7662.0001,-753.04 7658.5,-743.04 7655.0001,-753.04 7662.0001,-753.04"/>
</g>
<!-- raw_105 -->
<g id="node106" class="node">
<title>raw_105</title>
<ellipse fill="none" stroke="#000000" cx="7785.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="7785.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_101&#45;&gt;raw_105 -->
<g id="edge105" class="edge">
<title>prose_101&#45;&gt;raw_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7791.3139,-1292.0401C7790.4522,-1207.9698 7786.848,-856.3244 7785.792,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="7789.2893,-753.0036 7785.6869,-743.04 7782.2897,-753.0754 7789.2893,-753.0036"/>
</g>
<!-- raw_107 -->
<g id="node108" class="node">
<title>raw_107</title>
<ellipse fill="none" stroke="#000000" cx="7857.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="7857.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_102&#45;&gt;raw_107 -->
<g id="edge107" class="edge">
<title>prose_102&#45;&gt;raw_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8052.5911,-1303.0739C8004.4114,-1290.9439 7913.0269,-1265.0418 7893.5,-1238.8019 7780.5725,-1087.052 7829.6393,-835.3023 7850.1335,-752.2879"/>
<polygon fill="#000000" stroke="#000000" points="7853.529,-753.1367 7852.5914,-742.5834 7846.7433,-751.418 7853.529,-753.1367"/>
</g>
<!-- prespace_108 -->
<g id="node109" class="node">
<title>prespace_108</title>
<ellipse fill="none" stroke="#000000" cx="7948.5" cy="-724.801" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="7948.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_102&#45;&gt;prespace_108 -->
<g id="edge108" class="edge">
<title>prose_102&#45;&gt;prespace_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8060.5855,-1296.749C8042.2467,-1284.1974 8017.1137,-1263.6932 8004.5,-1238.8019 7919.6311,-1071.3253 7936.0617,-834.3956 7944.9149,-753.3042"/>
<polygon fill="#000000" stroke="#000000" points="7948.4436,-753.2525 7946.1025,-742.9196 7941.4889,-752.4571 7948.4436,-753.2525"/>
</g>
<!-- literal_109 -->
<g id="node110" class="node">
<title>literal_109</title>
<ellipse fill="none" stroke="#000000" cx="8044.5" cy="-724.801" rx="31.481" ry="18"/>
<text text-anchor="middle" x="8044.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_102&#45;&gt;literal_109 -->
<g id="edge109" class="edge">
<title>prose_102&#45;&gt;literal_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8081.3211,-1292.0401C8075.8638,-1207.9698 8053.0376,-856.3244 8046.3492,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="8049.8244,-752.7922 8045.6839,-743.04 8042.8392,-753.2457 8049.8244,-752.7922"/>
</g>
<!-- raw_110 -->
<g id="node111" class="node">
<title>raw_110</title>
<ellipse fill="none" stroke="#000000" cx="8120.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="8120.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_102&#45;&gt;raw_110 -->
<g id="edge110" class="edge">
<title>prose_102&#45;&gt;raw_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8083.6789,-1292.0401C8089.1362,-1207.9698 8111.9624,-856.3244 8118.6508,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="8122.1608,-753.2457 8119.3161,-743.04 8115.1756,-752.7922 8122.1608,-753.2457"/>
</g>
<!-- prespace_111 -->
<g id="node112" class="node">
<title>prespace_111</title>
<ellipse fill="none" stroke="#000000" cx="8211.5" cy="-724.801" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="8211.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_102&#45;&gt;prespace_111 -->
<g id="edge111" class="edge">
<title>prose_102&#45;&gt;prespace_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8103.6566,-1296.2417C8121.0375,-1283.5072 8144.6549,-1263.0172 8156.5,-1238.8019 8238.9827,-1070.1807 8223.3976,-833.9767 8214.9336,-753.1893"/>
<polygon fill="#000000" stroke="#000000" points="8218.3684,-752.4026 8213.7975,-742.8445 8211.4102,-753.1668 8218.3684,-752.4026"/>
</g>
<!-- literal_112 -->
<g id="node113" class="node">
<title>literal_112</title>
<ellipse fill="none" stroke="#000000" cx="8307.5" cy="-724.801" rx="31.481" ry="18"/>
<text text-anchor="middle" x="8307.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_102&#45;&gt;literal_112 -->
<g id="edge112" class="edge">
<title>prose_102&#45;&gt;literal_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8114.6229,-1307.8121C8157.0183,-1302.7793 8230.4793,-1287.1695 8266.5,-1238.8019 8379.3077,-1087.327 8334.0262,-836.4192 8314.6094,-752.8488"/>
<polygon fill="#000000" stroke="#000000" points="8318.0003,-751.9794 8312.2743,-743.0651 8311.1915,-753.6045 8318.0003,-751.9794"/>
</g>
<!-- raw_113 -->
<g id="node114" class="node">
<title>raw_113</title>
<ellipse fill="none" stroke="#000000" cx="8383.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="8383.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_102&#45;&gt;raw_113 -->
<g id="edge113" class="edge">
<title>prose_102&#45;&gt;raw_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8113.9695,-1306.2809C8177.5372,-1297.6693 8317.7458,-1274.9436 8347.5,-1238.8019 8408.8844,-1164.24 8392.3289,-849.7782 8385.642,-753.1594"/>
<polygon fill="#000000" stroke="#000000" points="8389.1191,-752.7116 8384.9179,-742.9854 8382.1368,-753.2087 8389.1191,-752.7116"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="8738.5,-821.7018 8428.5,-821.7018 8428.5,-627.9002 8738.5,-627.9002 8738.5,-821.7018"/>
<text text-anchor="middle" x="8583.5" y="-806.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.left(txtbuf, disp)</text>
<text text-anchor="middle" x="8583.5" y="-790.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local disp = disp or 1</text>
<text text-anchor="middle" x="8583.5" y="-775.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local moved = false</text>
<text text-anchor="middle" x="8583.5" y="-760.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if txtbuf.cursor &#45; disp &gt;= 1 then</text>
<text text-anchor="middle" x="8583.5" y="-744.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = txtbuf.cursor &#45; disp</text>
<text text-anchor="middle" x="8583.5" y="-729.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;moved = true</text>
<text text-anchor="middle" x="8583.5" y="-713.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="8583.5" y="-698.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = 1</text>
<text text-anchor="middle" x="8583.5" y="-683.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="8583.5" y="-651.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return moved</text>
<text text-anchor="middle" x="8583.5" y="-636.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_103&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>codeblock_103&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8408.1154,-1292.0401C8429.3619,-1223.3235 8505.8808,-975.8415 8550.5184,-831.4722"/>
<polygon fill="#000000" stroke="#000000" points="8553.9336,-832.275 8553.5437,-821.6874 8547.2459,-830.2072 8553.9336,-832.275"/>
</g>
<!-- leaf_106 -->
<g id="node107" class="node">
<title>leaf_106</title>
<polygon fill="none" stroke="#c0c0c0" points="7542,-158.7004 7015,-158.7004 7015,-88.0997 7542,-88.0997 7542,-158.7004"/>
<text text-anchor="middle" x="7278.5" y="-111.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">This method and the next inform the modeSelektor if the cursor has moved,</text>
<text text-anchor="middle" x="7278.5" y="-96.2" font-family="Inconsolata" font-size="14.00" fill="#000000">so as to wrap around otherwise.</text>
</g>
<!-- raw_105&#45;&gt;leaf_106 -->
<g id="edge106" class="edge">
<title>raw_105&#45;&gt;leaf_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7787.0025,-706.7657C7793.4536,-624.4916 7815.5431,-285.5716 7748.5,-210.8001 7718.7908,-177.6661 7595.2562,-182.9172 7551.5,-174.8001 7526.9057,-170.2376 7501.0714,-165.4141 7475.5089,-160.6225"/>
<polygon fill="#000000" stroke="#000000" points="7475.8209,-157.1201 7465.3471,-158.7168 7474.5306,-164.0002 7475.8209,-157.1201"/>
</g>
<!-- leaf_114 -->
<g id="node115" class="node">
<title>leaf_114</title>
<polygon fill="none" stroke="#c0c0c0" points="7940.5,-143.3021 7560.5,-143.3021 7560.5,-103.4979 7940.5,-103.4979 7940.5,-143.3021"/>
<text text-anchor="middle" x="7750.5" y="-111.9" font-family="Inconsolata" font-size="14.00" fill="#000000">Arguably this logic should be completely internal to</text>
</g>
<!-- raw_107&#45;&gt;leaf_114 -->
<g id="edge114" class="edge">
<title>raw_107&#45;&gt;leaf_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7860.03,-706.6474C7868.757,-638.5054 7893.2871,-392.5988 7821.5,-210.8001 7812.4913,-187.9859 7795.2583,-166.5404 7780.0265,-150.6021"/>
<polygon fill="#000000" stroke="#000000" points="7782.2717,-147.8945 7772.7547,-143.2384 7777.2909,-152.8131 7782.2717,-147.8945"/>
</g>
<!-- leaf_115 -->
<g id="node116" class="node">
<title>leaf_115</title>
<polygon fill="none" stroke="#c0c0c0" points="8012.5,-141.4 7958.5,-141.4 7958.5,-105.4 8012.5,-105.4 8012.5,-141.4"/>
<text text-anchor="middle" x="7985.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_108&#45;&gt;leaf_115 -->
<g id="edge115" class="edge">
<title>prespace_108&#45;&gt;leaf_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7949.6073,-706.8023C7954.8623,-621.388 7977.2976,-256.7222 7983.7549,-151.7656"/>
<polygon fill="#000000" stroke="#000000" points="7987.2581,-151.8184 7984.3789,-141.6223 7980.2714,-151.3885 7987.2581,-151.8184"/>
</g>
<!-- leaf_116 -->
<g id="node117" class="node">
<title>leaf_116</title>
<polygon fill="none" stroke="#c0c0c0" points="8084.5,-141.4 8030.5,-141.4 8030.5,-105.4 8084.5,-105.4 8084.5,-141.4"/>
<text text-anchor="middle" x="8057.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000">left</text>
</g>
<!-- literal_109&#45;&gt;leaf_116 -->
<g id="edge116" class="edge">
<title>literal_109&#45;&gt;leaf_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8044.8891,-706.8023C8046.7354,-621.388 8054.6181,-256.7222 8056.8868,-151.7656"/>
<polygon fill="#000000" stroke="#000000" points="8060.3891,-151.6956 8057.1061,-141.6223 8053.3907,-151.5443 8060.3891,-151.6956"/>
</g>
<!-- leaf_117 -->
<g id="node118" class="node">
<title>leaf_117</title>
<polygon fill="none" stroke="#c0c0c0" points="8156.5,-141.4 8102.5,-141.4 8102.5,-105.4 8156.5,-105.4 8156.5,-141.4"/>
<text text-anchor="middle" x="8129.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> and</text>
</g>
<!-- raw_110&#45;&gt;leaf_117 -->
<g id="edge117" class="edge">
<title>raw_110&#45;&gt;leaf_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8120.7743,-706.4739C8122.0617,-620.4416 8127.5089,-256.4521 8129.0764,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="8132.5778,-151.6354 8129.2279,-141.5841 8125.5785,-151.5306 8132.5778,-151.6354"/>
</g>
<!-- leaf_118 -->
<g id="node119" class="node">
<title>leaf_118</title>
<polygon fill="none" stroke="#c0c0c0" points="8238.5,-141.4 8184.5,-141.4 8184.5,-105.4 8238.5,-105.4 8238.5,-141.4"/>
<text text-anchor="middle" x="8211.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_111&#45;&gt;leaf_118 -->
<g id="edge118" class="edge">
<title>prespace_111&#45;&gt;leaf_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8211.5,-706.4739C8211.5,-620.4416 8211.5,-256.4521 8211.5,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="8215.0001,-151.5841 8211.5,-141.5841 8208.0001,-151.5841 8215.0001,-151.5841"/>
</g>
<!-- leaf_119 -->
<g id="node120" class="node">
<title>leaf_119</title>
<polygon fill="none" stroke="#c0c0c0" points="8326.5,-141.4 8272.5,-141.4 8272.5,-105.4 8326.5,-105.4 8326.5,-141.4"/>
<text text-anchor="middle" x="8299.5" y="-119.9" font-family="Inconsolata" font-size="14.00" fill="#000000">right</text>
</g>
<!-- literal_112&#45;&gt;leaf_119 -->
<g id="edge119" class="edge">
<title>literal_112&#45;&gt;leaf_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8307.2562,-706.4739C8306.1118,-620.4416 8301.2699,-256.4521 8299.8765,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="8303.3747,-151.5366 8299.7419,-141.5841 8296.3753,-151.6298 8303.3747,-151.5366"/>
</g>
<!-- leaf_120 -->
<g id="node121" class="node">
<title>leaf_120</title>
<polygon fill="none" stroke="#c0c0c0" points="8438,-143.3021 8345,-143.3021 8345,-103.4979 8438,-103.4979 8438,-143.3021"/>
<text text-anchor="middle" x="8391.5" y="-111.9" font-family="Inconsolata" font-size="14.00" fill="#000000">themselves.</text>
</g>
<!-- raw_113&#45;&gt;leaf_120 -->
<g id="edge120" class="edge">
<title>raw_113&#45;&gt;leaf_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8383.7438,-706.4739C8384.8818,-620.9255 8389.6757,-260.5385 8391.0996,-153.4991"/>
<polygon fill="#000000" stroke="#000000" points="8394.6007,-153.4343 8391.2341,-143.3886 8387.6013,-153.3411 8394.6007,-153.4343"/>
</g>
<!-- leaf_125 -->
<g id="node126" class="node">
<title>leaf_125</title>
<polygon fill="none" stroke="#c0c0c0" points="8926.5,-742.801 8756.5,-742.801 8756.5,-706.801 8926.5,-706.801 8926.5,-742.801"/>
<text text-anchor="middle" x="8841.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:right(disp)</text>
</g>
<!-- header_122&#45;&gt;leaf_125 -->
<g id="edge125" class="edge">
<title>header_122&#45;&gt;leaf_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8837.6241,-1292.0401C8838.1985,-1207.9698 8840.6013,-856.3244 8841.3054,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="8844.8069,-753.0637 8841.3754,-743.04 8837.807,-753.0158 8844.8069,-753.0637"/>
</g>
<!-- raw_126 -->
<g id="node127" class="node">
<title>raw_126</title>
<ellipse fill="none" stroke="#000000" cx="8971.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="8971.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_123&#45;&gt;raw_126 -->
<g id="edge126" class="edge">
<title>prose_123&#45;&gt;raw_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8976.3449,-1292.0401C8975.6268,-1207.9698 8972.6234,-856.3244 8971.7433,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="8975.2412,-753.0097 8971.6558,-743.04 8968.2414,-753.0696 8975.2412,-753.0097"/>
</g>
<!-- leaf_128 -->
<g id="node129" class="node">
<title>leaf_128</title>
<polygon fill="none" stroke="#c0c0c0" points="9340.5,-829.1015 9016.5,-829.1015 9016.5,-620.5005 9340.5,-620.5005 9340.5,-829.1015"/>
<text text-anchor="middle" x="9178.5" y="-814.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.right(txtbuf, disp)</text>
<text text-anchor="middle" x="9178.5" y="-798.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;disp = disp or 1</text>
<text text-anchor="middle" x="9178.5" y="-783.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local moved = false</text>
<text text-anchor="middle" x="9178.5" y="-767.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local line = txtbuf.lines[txtbuf.cur_row]</text>
<text text-anchor="middle" x="9178.5" y="-752.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if txtbuf.cursor + disp &lt;= #line + 1 then</text>
<text text-anchor="middle" x="9178.5" y="-737.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = txtbuf.cursor + disp</text>
<text text-anchor="middle" x="9178.5" y="-721.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;moved = true</text>
<text text-anchor="middle" x="9178.5" y="-706.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="9178.5" y="-690.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cursor = #line + 1</text>
<text text-anchor="middle" x="9178.5" y="-675.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="9178.5" y="-644.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return moved</text>
<text text-anchor="middle" x="9178.5" y="-628.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_124&#45;&gt;leaf_128 -->
<g id="edge128" class="edge">
<title>codeblock_124&#45;&gt;leaf_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9147.4928,-1292.0401C9151.1809,-1224.57 9164.2897,-984.7615 9172.234,-839.429"/>
<polygon fill="#000000" stroke="#000000" points="9175.7458,-839.3082 9172.7969,-829.132 9168.7562,-838.9261 9175.7458,-839.3082"/>
</g>
<!-- leaf_127 -->
<g id="node128" class="node">
<title>leaf_127</title>
<polygon fill="none" stroke="#c0c0c0" points="8998.5,-141.4 8944.5,-141.4 8944.5,-105.4 8998.5,-105.4 8998.5,-141.4"/>
</g>
<!-- raw_126&#45;&gt;leaf_127 -->
<g id="edge127" class="edge">
<title>raw_126&#45;&gt;leaf_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8971.5,-706.4739C8971.5,-620.4416 8971.5,-256.4521 8971.5,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="8975.0001,-151.5841 8971.5,-141.5841 8968.0001,-151.5841 8975.0001,-151.5841"/>
</g>
<!-- leaf_133 -->
<g id="node134" class="node">
<title>leaf_133</title>
<polygon fill="none" stroke="#c0c0c0" points="9584.5,-742.801 9358.5,-742.801 9358.5,-706.801 9584.5,-706.801 9584.5,-742.801"/>
<text text-anchor="middle" x="9471.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:up(), Txtbuf:down()</text>
</g>
<!-- header_129&#45;&gt;leaf_133 -->
<g id="edge133" class="edge">
<title>header_129&#45;&gt;leaf_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9471.5,-1292.0401C9471.5,-1207.9698 9471.5,-856.3244 9471.5,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="9475.0001,-753.04 9471.5,-743.04 9468.0001,-753.04 9475.0001,-753.04"/>
</g>
<!-- raw_134 -->
<g id="node135" class="node">
<title>raw_134</title>
<ellipse fill="none" stroke="#000000" cx="9629.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="9629.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_134 -->
<g id="edge134" class="edge">
<title>prose_130&#45;&gt;raw_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9645.0036,-1292.0401C9642.7058,-1207.9698 9633.0948,-856.3244 9630.2786,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="9633.7705,-752.9406 9629.9985,-743.04 9626.7731,-753.1319 9633.7705,-752.9406"/>
</g>
<!-- leaf_136 -->
<g id="node137" class="node">
<title>leaf_136</title>
<polygon fill="none" stroke="#c0c0c0" points="10132,-821.1015 9675,-821.1015 9675,-628.5005 10132,-628.5005 10132,-821.1015"/>
<text text-anchor="middle" x="9903.5" y="-806.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.up(txtbuf)</text>
<text text-anchor="middle" x="9903.5" y="-790.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cur_row = txtbuf.cur_row</text>
<text text-anchor="middle" x="9903.5" y="-775.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cur_row == 1 then</text>
<text text-anchor="middle" x="9903.5" y="-759.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="9903.5" y="-744.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="9903.5" y="-729.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cur_row = cur_row &#45; 1</text>
<text text-anchor="middle" x="9903.5" y="-713.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if txtbuf.cursor &gt; #txtbuf.lines[txtbuf.cur_row] + 1 then</text>
<text text-anchor="middle" x="9903.5" y="-698.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;txtbuf.cursor = #txtbuf.lines[txtbuf.cur_row] + 1</text>
<text text-anchor="middle" x="9903.5" y="-682.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9903.5" y="-667.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="9903.5" y="-652.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="9903.5" y="-636.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_131&#45;&gt;leaf_136 -->
<g id="edge136" class="edge">
<title>codeblock_131&#45;&gt;leaf_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9845.3615,-1292.0401C9852.4023,-1223.345 9877.754,-975.9966 9892.5529,-831.6079"/>
<polygon fill="#000000" stroke="#000000" points="9896.0619,-831.6985 9893.5998,-821.3937 9889.0984,-830.9847 9896.0619,-831.6985"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="10607,-821.1015 10150,-821.1015 10150,-628.5005 10607,-628.5005 10607,-821.1015"/>
<text text-anchor="middle" x="10378.5" y="-806.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.down(txtbuf)</text>
<text text-anchor="middle" x="10378.5" y="-790.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cur_row = txtbuf.cur_row</text>
<text text-anchor="middle" x="10378.5" y="-775.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cur_row == #txtbuf.lines then</text>
<text text-anchor="middle" x="10378.5" y="-759.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="10378.5" y="-744.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="10378.5" y="-729.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.cur_row = cur_row + 1</text>
<text text-anchor="middle" x="10378.5" y="-713.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if txtbuf.cursor &gt; #txtbuf.lines[txtbuf.cur_row] + 1 then</text>
<text text-anchor="middle" x="10378.5" y="-698.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;txtbuf.cursor = #txtbuf.lines[txtbuf.cur_row] + 1</text>
<text text-anchor="middle" x="10378.5" y="-682.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10378.5" y="-667.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="10378.5" y="-652.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="10378.5" y="-636.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_132&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>codeblock_132&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10212.8052,-1292.0401C10232.8916,-1223.2763 10305.2684,-975.5017 10347.4273,-831.175"/>
<polygon fill="#000000" stroke="#000000" points="10350.8402,-831.974 10350.2845,-821.3937 10344.121,-830.0112 10350.8402,-831.974"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="9656.5,-141.4 9602.5,-141.4 9602.5,-105.4 9656.5,-105.4 9656.5,-141.4"/>
</g>
<!-- raw_134&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>raw_134&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9629.5,-706.4739C9629.5,-620.4416 9629.5,-256.4521 9629.5,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="9633.0001,-151.5841 9629.5,-141.5841 9626.0001,-151.5841 9633.0001,-151.5841"/>
</g>
<!-- leaf_144 -->
<g id="node145" class="node">
<title>leaf_144</title>
<polygon fill="none" stroke="#c0c0c0" points="10746,-742.801 10625,-742.801 10625,-706.801 10746,-706.801 10746,-742.801"/>
<text text-anchor="middle" x="10685.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Txtbuf:nl()</text>
</g>
<!-- header_138&#45;&gt;leaf_144 -->
<g id="edge144" class="edge">
<title>header_138&#45;&gt;leaf_144</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10715.5382,-1292.0401C10711.0863,-1207.9698 10692.4648,-856.3244 10687.0085,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="10690.4899,-752.8409 10686.4658,-743.04 10683.4996,-753.2111 10690.4899,-752.8409"/>
</g>
<!-- raw_145 -->
<g id="node146" class="node">
<title>raw_145</title>
<ellipse fill="none" stroke="#000000" cx="10791.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="10791.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_139&#45;&gt;raw_145 -->
<g id="edge145" class="edge">
<title>prose_139&#45;&gt;raw_145</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10871.2581,-1295.3181C10856.5861,-1282.1575 10836.919,-1261.5549 10827.5,-1238.8019 10756.0978,-1066.3183 10777.1837,-833.4849 10787.4173,-753.3098"/>
<polygon fill="#000000" stroke="#000000" points="10790.9352,-753.405 10788.7786,-743.032 10783.9958,-752.4859 10790.9352,-753.405"/>
</g>
<!-- leaf_147 -->
<g id="node148" class="node">
<title>leaf_147</title>
<polygon fill="none" stroke="#c0c0c0" points="11280,-959.9021 10837,-959.9021 10837,-489.6999 11280,-489.6999 11280,-959.9021"/>
<text text-anchor="middle" x="11058.5" y="-944.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local sub = assert(string.sub)</text>
<text text-anchor="middle" x="11058.5" y="-929.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert = assert(table.insert)</text>
<text text-anchor="middle" x="11058.5" y="-914.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.nl(txtbuf)</text>
<text text-anchor="middle" x="11058.5" y="-898.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Most txtbufs are one line, so we always evaluate from</text>
<text text-anchor="middle" x="11058.5" y="-883.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; a one&#45;liner, regardless of cursor location.</text>
<text text-anchor="middle" x="11058.5" y="-867.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local linum = #txtbuf.lines</text>
<text text-anchor="middle" x="11058.5" y="-852.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if linum == 1 then</text>
<text text-anchor="middle" x="11058.5" y="-837.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="11058.5" y="-821.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11058.5" y="-806.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cursor = txtbuf.cursor</text>
<text text-anchor="middle" x="11058.5" y="-790.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cur_row = txtbuf.cur_row</text>
<text text-anchor="middle" x="11058.5" y="-775.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; these are the two default positions for up and down</text>
<text text-anchor="middle" x="11058.5" y="-760.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; history search</text>
<text text-anchor="middle" x="11058.5" y="-744.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cur_row == 1 and cursor &gt; #txtbuf.lines[1] then</text>
<text text-anchor="middle" x="11058.5" y="-729.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="11058.5" y="-713.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11058.5" y="-698.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if cur_row == linum and cursor &gt; #txtbuf.lines[linum] then</text>
<text text-anchor="middle" x="11058.5" y="-683.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="11058.5" y="-667.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11058.5" y="-652.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; split the line</text>
<text text-anchor="middle" x="11058.5" y="-636.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cur_line = concat(txtbuf.lines[txtbuf.cur_row])</text>
<text text-anchor="middle" x="11058.5" y="-621.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local first = sub(cur_line, 1, cursor &#45; 1)</text>
<text text-anchor="middle" x="11058.5" y="-606.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local second = sub(cur_line, cursor)</text>
<text text-anchor="middle" x="11058.5" y="-590.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.lines[cur_row] = codepoints(first)</text>
<text text-anchor="middle" x="11058.5" y="-575.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;insert(txtbuf.lines, cur_row + 1, codepoints(second))</text>
<text text-anchor="middle" x="11058.5" y="-559.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = 1</text>
<text text-anchor="middle" x="11058.5" y="-544.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = cur_row + 1</text>
<text text-anchor="middle" x="11058.5" y="-513.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return false</text>
<text text-anchor="middle" x="11058.5" y="-497.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_140&#45;&gt;leaf_147 -->
<g id="edge147" class="edge">
<title>codeblock_140&#45;&gt;leaf_147</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11058.5,-1292.0401C11058.5,-1242.4792 11058.5,-1099.9278 11058.5,-970.1392"/>
<polygon fill="#000000" stroke="#000000" points="11062.0001,-970.0233 11058.5,-960.0233 11055.0001,-970.0233 11062.0001,-970.0233"/>
</g>
<!-- leaf_148 -->
<g id="node149" class="node">
<title>leaf_148</title>
<polygon fill="none" stroke="#c0c0c0" points="11573,-783.2019 11298,-783.2019 11298,-666.4001 11573,-666.4001 11573,-783.2019"/>
<text text-anchor="middle" x="11435.5" y="-767.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.suspend(txtbuf)</text>
<text text-anchor="middle" x="11435.5" y="-752.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(txtbuf.lines) do</text>
<text text-anchor="middle" x="11435.5" y="-737.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.lines[i] = tostring(v)</text>
<text text-anchor="middle" x="11435.5" y="-721.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11435.5" y="-690.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return txtbuf</text>
<text text-anchor="middle" x="11435.5" y="-674.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_141&#45;&gt;leaf_148 -->
<g id="edge148" class="edge">
<title>codeblock_141&#45;&gt;leaf_148</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11346.3543,-1292.0401C11358.178,-1216.8053 11403.6785,-927.2829 11424.7171,-793.4133"/>
<polygon fill="#000000" stroke="#000000" points="11428.2155,-793.6961 11426.3105,-783.274 11421.3004,-792.6093 11428.2155,-793.6961"/>
</g>
<!-- leaf_149 -->
<g id="node150" class="node">
<title>leaf_149</title>
<polygon fill="none" stroke="#c0c0c0" points="11964,-798.5014 11591,-798.5014 11591,-651.1006 11964,-651.1006 11964,-798.5014"/>
<text text-anchor="middle" x="11777.5" y="-783.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.resume(txtbuf)</text>
<text text-anchor="middle" x="11777.5" y="-767.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i, line in ipairs(txtbuf.lines) do</text>
<text text-anchor="middle" x="11777.5" y="-752.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;txtbuf.lines[i] = codepoints(line)</text>
<text text-anchor="middle" x="11777.5" y="-737.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11777.5" y="-721.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = #txtbuf.lines[#txtbuf.lines] + 1</text>
<text text-anchor="middle" x="11777.5" y="-706.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = #txtbuf.lines</text>
<text text-anchor="middle" x="11777.5" y="-674.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return txtbuf</text>
<text text-anchor="middle" x="11777.5" y="-659.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_142&#45;&gt;leaf_149 -->
<g id="edge149" class="edge">
<title>codeblock_142&#45;&gt;leaf_149</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11661.2229,-1292.0401C11676.0966,-1219.4815 11731.8271,-947.609 11760.3892,-808.2731"/>
<polygon fill="#000000" stroke="#000000" points="11763.8183,-808.9737 11762.3978,-798.4746 11756.9609,-807.568 11763.8183,-808.9737"/>
</g>
<!-- leaf_150 -->
<g id="node151" class="node">
<title>leaf_150</title>
<polygon fill="none" stroke="#c0c0c0" points="12432.5,-805.9018 11982.5,-805.9018 11982.5,-643.7002 12432.5,-643.7002 12432.5,-805.9018"/>
<text text-anchor="middle" x="12207.5" y="-790.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">local cl = assert(table.clone, &quot;table.clone must be provided&quot;)</text>
<text text-anchor="middle" x="12207.5" y="-759.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">function Txtbuf.clone(txtbuf)</text>
<text text-anchor="middle" x="12207.5" y="-744.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Clone to depth of 3 to get tb, tb.lines, and each lines</text>
<text text-anchor="middle" x="12207.5" y="-728.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local tb = cl(txtbuf, 3)</text>
<text text-anchor="middle" x="12207.5" y="-713.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if type(tb.lines[1]) == &quot;string&quot; then</text>
<text text-anchor="middle" x="12207.5" y="-697.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return tb:resume()</text>
<text text-anchor="middle" x="12207.5" y="-682.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12207.5" y="-667.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return tb</text>
<text text-anchor="middle" x="12207.5" y="-651.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_143&#45;&gt;leaf_150 -->
<g id="edge150" class="edge">
<title>codeblock_143&#45;&gt;leaf_150</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12035.0224,-1292.0401C12056.6838,-1220.8008 12136.7658,-957.4294 12179.7687,-816.0027"/>
<polygon fill="#000000" stroke="#000000" points="12183.239,-816.6208 12182.7996,-806.0351 12176.5417,-814.5843 12183.239,-816.6208"/>
</g>
<!-- leaf_146 -->
<g id="node147" class="node">
<title>leaf_146</title>
<polygon fill="none" stroke="#c0c0c0" points="10971,-151.3015 10612,-151.3015 10612,-95.4985 10971,-95.4985 10971,-151.3015"/>
<text text-anchor="middle" x="10791.5" y="-103.9" font-family="Inconsolata" font-size="14.00" fill="#000000">Either splits a line or (more usually) evaluates.</text>
</g>
<!-- raw_145&#45;&gt;leaf_146 -->
<g id="edge146" class="edge">
<title>raw_145&#45;&gt;leaf_146</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10791.5,-706.4739C10791.5,-622.957 10791.5,-277.4997 10791.5,-161.5462"/>
<polygon fill="#000000" stroke="#000000" points="10795.0001,-161.3724 10791.5,-151.3724 10788.0001,-161.3725 10795.0001,-161.3724"/>
</g>
<!-- leaf_155 -->
<g id="node156" class="node">
<title>leaf_155</title>
<polygon fill="none" stroke="#c0c0c0" points="12516,-742.801 12451,-742.801 12451,-706.801 12516,-706.801 12516,-742.801"/>
<text text-anchor="middle" x="12483.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">*** new</text>
</g>
<!-- header_151&#45;&gt;leaf_155 -->
<g id="edge155" class="edge">
<title>header_151&#45;&gt;leaf_155</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12483.5,-1292.0401C12483.5,-1207.9698 12483.5,-856.3244 12483.5,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="12487.0001,-753.04 12483.5,-743.04 12480.0001,-753.04 12487.0001,-753.04"/>
</g>
<!-- raw_156 -->
<g id="node157" class="node">
<title>raw_156</title>
<ellipse fill="none" stroke="#000000" cx="12561.5" cy="-724.801" rx="27" ry="18"/>
<text text-anchor="middle" x="12561.5" y="-720.601" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_152&#45;&gt;raw_156 -->
<g id="edge156" class="edge">
<title>prose_152&#45;&gt;raw_156</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12572.1587,-1292.0401C12570.579,-1207.9698 12563.9714,-856.3244 12562.0353,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="12565.5301,-752.9724 12561.8427,-743.04 12558.5313,-753.104 12565.5301,-752.9724"/>
</g>
<!-- leaf_158 -->
<g id="node159" class="node">
<title>leaf_158</title>
<polygon fill="none" stroke="#c0c0c0" points="13000.5,-906.8016 12606.5,-906.8016 12606.5,-542.8004 13000.5,-542.8004 13000.5,-906.8016"/>
<text text-anchor="middle" x="12803.5" y="-891.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local function into_codepoints(lines)</text>
<text text-anchor="middle" x="12803.5" y="-876.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cp = {}</text>
<text text-anchor="middle" x="12803.5" y="-860.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(lines) do</text>
<text text-anchor="middle" x="12803.5" y="-845.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;cp[i] = codepoints(v)</text>
<text text-anchor="middle" x="12803.5" y="-830.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12803.5" y="-798.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return cp</text>
<text text-anchor="middle" x="12803.5" y="-783.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="12803.5" y="-751.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(line)</text>
<text text-anchor="middle" x="12803.5" y="-736.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local txtbuf = meta(Txtbuf)</text>
<text text-anchor="middle" x="12803.5" y="-721.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local __l = line or &quot;&quot;</text>
<text text-anchor="middle" x="12803.5" y="-705.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _lines = into_codepoints(collect(lines, __l))</text>
<text text-anchor="middle" x="12803.5" y="-690.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if #_lines == 0 then</text>
<text text-anchor="middle" x="12803.5" y="-674.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;_lines[1] = {}</text>
<text text-anchor="middle" x="12803.5" y="-659.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12803.5" y="-644.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = line and #_lines[#_lines] + 1 or 1</text>
<text text-anchor="middle" x="12803.5" y="-628.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = line and #_lines &#160;or 1</text>
<text text-anchor="middle" x="12803.5" y="-613.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.lines = _lines</text>
<text text-anchor="middle" x="12803.5" y="-597.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return txtbuf</text>
<text text-anchor="middle" x="12803.5" y="-582.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="12803.5" y="-551.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">Txtbuf.idEst = new</text>
</g>
<!-- codeblock_153&#45;&gt;leaf_158 -->
<g id="edge158" class="edge">
<title>codeblock_153&#45;&gt;leaf_158</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12757.9582,-1292.0401C12762.4899,-1235.5952 12776.7057,-1058.5329 12788.0627,-917.0784"/>
<polygon fill="#000000" stroke="#000000" points="12791.5636,-917.2054 12788.8752,-906.9573 12784.5861,-916.6451 12791.5636,-917.2054"/>
</g>
<!-- leaf_159 -->
<g id="node160" class="node">
<title>leaf_159</title>
<polygon fill="none" stroke="#c0c0c0" points="13104.5,-742.801 13018.5,-742.801 13018.5,-706.801 13104.5,-706.801 13104.5,-742.801"/>
<text text-anchor="middle" x="13061.5" y="-721.301" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_154&#45;&gt;leaf_159 -->
<g id="edge159" class="edge">
<title>codeblock_154&#45;&gt;leaf_159</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13007.2374,-1292.0401C13015.2796,-1207.9698 13048.9183,-856.3244 13058.7749,-753.2879"/>
<polygon fill="#000000" stroke="#000000" points="13062.287,-753.3279 13059.7552,-743.04 13055.3188,-752.6612 13062.287,-753.3279"/>
</g>
<!-- leaf_157 -->
<g id="node158" class="node">
<title>leaf_157</title>
<polygon fill="none" stroke="#c0c0c0" points="12588.5,-141.4 12534.5,-141.4 12534.5,-105.4 12588.5,-105.4 12588.5,-141.4"/>
</g>
<!-- raw_156&#45;&gt;leaf_157 -->
<g id="edge157" class="edge">
<title>raw_156&#45;&gt;leaf_157</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12561.5,-706.4739C12561.5,-620.4416 12561.5,-256.4521 12561.5,-151.7068"/>
<polygon fill="#000000" stroke="#000000" points="12565.0001,-151.5841 12561.5,-141.5841 12558.0001,-151.5841 12565.0001,-151.5841"/>
</g>
</g>
</svg>
