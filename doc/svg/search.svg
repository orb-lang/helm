<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="3616pt" height="663pt"
 viewBox="0.00 0.00 3615.50 663.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 659.4007)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-659.4007 3611.5,-659.4007 3611.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1561" cy="-637.4007" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1561" y="-633.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 101</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1561" cy="-565.4007" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1561" y="-561.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;101</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1561,-619.232C1561,-611.5316 1561,-602.375 1561,-593.8173"/>
<polygon fill="#000000" stroke="#000000" points="1564.5001,-593.8139 1561,-583.8139 1557.5001,-593.814 1564.5001,-593.8139"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="120" cy="-493.4007" rx="50.3327" ry="18"/>
<text text-anchor="middle" x="120" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Search</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1495.3716,-564.6086C1304.7033,-561.8904 734.4305,-550.808 263,-511.4007 234.6029,-509.0269 203.1719,-505.203 177.026,-501.6889"/>
<polygon fill="#000000" stroke="#000000" points="177.2939,-498.1931 166.9127,-500.31 176.3481,-505.1289 177.2939,-498.1931"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="304" cy="-493.4007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="304" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1496.5018,-561.7062C1272.5344,-548.8776 532.0349,-506.4623 346.461,-495.8328"/>
<polygon fill="#000000" stroke="#000000" points="346.4726,-492.3278 336.2888,-495.2501 346.0722,-499.3164 346.4726,-492.3278"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="726" cy="-493.4007" rx="67.748" ry="18"/>
<text text-anchor="middle" x="726" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 7&#45;9</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1498.2393,-559.989C1347.098,-546.9564 963.4195,-513.8728 800.74,-499.8453"/>
<polygon fill="#000000" stroke="#000000" points="800.6128,-496.3214 790.349,-498.9493 800.0113,-503.2956 800.6128,-496.3214"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="1095" cy="-493.4007" rx="76.6175" ry="18"/>
<text text-anchor="middle" x="1095" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 11&#45;16</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1503.3919,-556.4998C1419.0441,-543.4676 1261.9092,-519.1892 1169.0757,-504.8458"/>
<polygon fill="#000000" stroke="#000000" points="1169.6078,-501.3866 1159.1906,-503.3185 1168.5389,-508.3045 1169.6078,-501.3866"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1475" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1475" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 19&#45;36</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1540.1818,-547.9715C1529.2765,-538.8414 1515.75,-527.5169 1503.8505,-517.5546"/>
<polygon fill="#000000" stroke="#000000" points="1505.839,-514.6546 1495.9246,-510.9189 1501.3454,-520.022 1505.839,-514.6546"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1837" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1837" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;52</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1608.7604,-552.9414C1654.9018,-540.9045 1725.0111,-522.6152 1775.3461,-509.4843"/>
<polygon fill="#000000" stroke="#000000" points="1776.3438,-512.8412 1785.1365,-506.9303 1774.5768,-506.0679 1776.3438,-512.8412"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="2261" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2261" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 54&#45;67</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1622.5068,-559.0742C1748.9535,-546.0683 2038.0807,-516.3295 2179.7437,-501.7584"/>
<polygon fill="#000000" stroke="#000000" points="2180.5078,-505.1984 2190.0972,-500.6935 2179.7915,-498.2351 2180.5078,-505.1984"/>
</g>
<!-- codeblock_9 -->
<g id="node10" class="node">
<title>codeblock_9</title>
<ellipse fill="none" stroke="#000000" cx="2650" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2650" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 69&#45;73</text>
</g>
<!-- section_1&#45;&gt;codeblock_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;codeblock_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1625.0563,-561.1655C1811.665,-548.8278 2354.9142,-512.9105 2565.3485,-498.9974"/>
<polygon fill="#000000" stroke="#000000" points="2565.6693,-502.484 2575.4166,-498.3318 2565.2075,-495.4992 2565.6693,-502.484"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="3063" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3063" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 75&#45;97</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1625.9728,-562.6217C1803.6907,-554.9757 2312.8069,-532.7722 2736,-511.4007 2817.9293,-507.2632 2911.3775,-502.0719 2977.3362,-498.3289"/>
<polygon fill="#000000" stroke="#000000" points="2977.895,-501.8028 2987.6802,-497.7409 2977.4977,-494.8141 2977.895,-501.8028"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="3445" cy="-493.4007" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="3445" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 99&#45;101</text>
</g>
<!-- section_1&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1626.4471,-563.8027C1843.3343,-558.3728 2558.3016,-539.3994 3149,-511.4007 3218.6391,-508.0998 3297.4276,-503.2545 3356.2004,-499.4223"/>
<polygon fill="#000000" stroke="#000000" points="3356.4441,-502.9139 3366.194,-498.7679 3355.9866,-495.9289 3356.4441,-502.9139"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="72,-291.4003 0,-291.4003 0,-255.4003 72,-255.4003 72,-291.4003"/>
<text text-anchor="middle" x="36" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">* Search</text>
</g>
<!-- header_2&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>header_2&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M104.8964,-475.9421C96.8193,-465.839 87.2736,-452.5521 81,-439.4007 59.1908,-393.682 46.5255,-335.6616 40.4623,-301.719"/>
<polygon fill="#000000" stroke="#000000" points="43.865,-300.8539 38.7224,-291.5908 36.9661,-302.039 43.865,-300.8539"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="117" cy="-273.4003" rx="27" ry="18"/>
<text text-anchor="middle" x="117" y="-269.2003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_3&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M271.813,-490.8682C237.2746,-486.3768 183.3065,-473.9232 153,-439.4007 119.2365,-400.9402 114.7061,-338.3366 115.2904,-301.9994"/>
<polygon fill="#000000" stroke="#000000" points="118.8004,-301.7242 115.6092,-291.6214 111.8037,-301.5092 118.8004,-301.7242"/>
</g>
<!-- prespace_14 -->
<g id="node15" class="node">
<title>prespace_14</title>
<ellipse fill="none" stroke="#000000" cx="208" cy="-273.4003" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="208" y="-269.2003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_3&#45;&gt;prespace_14 -->
<g id="edge14" class="edge">
<title>prose_3&#45;&gt;prespace_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M289.5729,-476.8029C281.2285,-466.5586 271.0233,-452.8434 264,-439.4007 240.1072,-393.6695 223.2894,-335.6531 214.6617,-301.7147"/>
<polygon fill="#000000" stroke="#000000" points="217.9544,-300.451 212.1497,-291.5879 211.1603,-302.1364 217.9544,-300.451"/>
</g>
<!-- literal_15 -->
<g id="node16" class="node">
<title>literal_15</title>
<ellipse fill="none" stroke="#000000" cx="304" cy="-273.4003" rx="31.481" ry="18"/>
<text text-anchor="middle" x="304" y="-269.2003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_3&#45;&gt;literal_15 -->
<g id="edge15" class="edge">
<title>prose_3&#45;&gt;literal_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M304,-475.3971C304,-437.2049 304,-347.8084 304,-301.8259"/>
<polygon fill="#000000" stroke="#000000" points="307.5001,-301.6526 304,-291.6527 300.5001,-301.6527 307.5001,-301.6526"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="380" cy="-273.4003" rx="27" ry="18"/>
<text text-anchor="middle" x="380" y="-269.2003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_3&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M318.9809,-477.0728C327.5216,-466.9242 337.7387,-453.2149 344,-439.4007 364.652,-393.8364 373.7418,-335.7658 377.5243,-301.7717"/>
<polygon fill="#000000" stroke="#000000" points="381.0261,-301.9341 378.5738,-291.627 374.0632,-301.2137 381.0261,-301.9341"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="840.5,-291.4003 425.5,-291.4003 425.5,-255.4003 840.5,-255.4003 840.5,-291.4003"/>
<text text-anchor="middle" x="633" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">local clone = assert(table.clone, &quot;requires table.clone&quot;)</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_4&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M718.3894,-475.3971C702.1424,-436.9631 663.9751,-346.6748 644.6494,-300.9581"/>
<polygon fill="#000000" stroke="#000000" points="647.8333,-299.5007 640.7157,-291.6527 641.3857,-302.2263 647.8333,-299.5007"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1105.5,-308.6007 858.5,-308.6007 858.5,-238.2 1105.5,-238.2 1105.5,-308.6007"/>
<text text-anchor="middle" x="982" y="-293.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Nerf = require &quot;nerf&quot;</text>
<text text-anchor="middle" x="982" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Rainbuf = require &quot;rainbuf&quot;</text>
<text text-anchor="middle" x="982" y="-246.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Search = clone(Nerf, 3)</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_5&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1085.7527,-475.3971C1068.223,-441.2684 1029.6919,-366.252 1004.838,-317.8638"/>
<polygon fill="#000000" stroke="#000000" points="1007.8946,-316.154 1000.2123,-308.8579 1001.6679,-319.3523 1007.8946,-316.154"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1636.5,-400.8012 1123.5,-400.8012 1123.5,-145.9995 1636.5,-145.9995 1636.5,-400.8012"/>
<text text-anchor="middle" x="1380" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function Search.NAV.RETURN(modeS, category, value)</text>
<text text-anchor="middle" x="1380" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local searchResult = modeS.hist:search(tostring(modeS.txtbuf))[1]</text>
<text text-anchor="middle" x="1380" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if #searchResult &gt; 0 then</text>
<text text-anchor="middle" x="1380" y="-339.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local result</text>
<text text-anchor="middle" x="1380" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local hl = searchResult.hl</text>
<text text-anchor="middle" x="1380" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS.txtbuf, result = modeS.hist:index(searchResult.cursors[hl])</text>
<text text-anchor="middle" x="1380" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not result then</text>
<text text-anchor="middle" x="1380" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result = {n=1}</text>
<text text-anchor="middle" x="1380" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1380" y="-246.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS.zones.results:replace(Rainbuf(result))</text>
<text text-anchor="middle" x="1380" y="-231.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS:shiftMode(modeS.raga_default)</text>
<text text-anchor="middle" x="1380" y="-216.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="1380" y="-200.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS:shiftMode(modeS.raga_default)</text>
<text text-anchor="middle" x="1380" y="-185.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS.zones.results:replace &quot;&quot;</text>
<text text-anchor="middle" x="1380" y="-169.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1380" y="-154.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_6&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1467.2258,-475.3971C1460.5464,-459.929 1450.2401,-436.062 1439.0214,-410.0816"/>
<polygon fill="#000000" stroke="#000000" points="1442.1972,-408.6074 1435.0196,-400.8143 1435.7708,-411.3825 1442.1972,-408.6074"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2209.5,-377.6008 1654.5,-377.6008 1654.5,-169.1998 2209.5,-169.1998 2209.5,-377.6008"/>
<text text-anchor="middle" x="1932" y="-362.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">function Search.NAV.SHIFT_DOWN(modeS, category, value)</text>
<text text-anchor="middle" x="1932" y="-346.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local search_buf = modeS.hist.last_collection</text>
<text text-anchor="middle" x="1932" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not search_buf then return end</text>
<text text-anchor="middle" x="1932" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local search_result = search_buf[1]</text>
<text text-anchor="middle" x="1932" y="-300.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if search_result.hl &lt; #search_result then</text>
<text text-anchor="middle" x="1932" y="-285.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;search_result.hl = search_result.hl + 1</text>
<text text-anchor="middle" x="1932" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if search_result.hl &gt;= modeS.zones.results:height() + search_buf.offset</text>
<text text-anchor="middle" x="1932" y="-254.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;and search_buf.more then</text>
<text text-anchor="middle" x="1932" y="-239.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;search_buf.offset = search_buf.offset + 1</text>
<text text-anchor="middle" x="1932" y="-223.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1932" y="-208.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1932" y="-192.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;modeS.zones.results.touched = true</text>
<text text-anchor="middle" x="1932" y="-177.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_7&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1844.7742,-475.3971C1853.4185,-455.3788 1868.1373,-421.2932 1883.0471,-386.7651"/>
<polygon fill="#000000" stroke="#000000" points="1886.2934,-388.076 1887.0446,-377.5078 1879.8669,-385.3009 1886.2934,-388.076"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="2608,-369.7008 2228,-369.7008 2228,-177.0999 2608,-177.0999 2608,-369.7008"/>
<text text-anchor="middle" x="2418" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">function Search.NAV.SHIFT_UP(modeS, category, value)</text>
<text text-anchor="middle" x="2418" y="-339.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local search_buf = modeS.hist.last_collection</text>
<text text-anchor="middle" x="2418" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not search_buf then return end</text>
<text text-anchor="middle" x="2418" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local search_result = search_buf[1]</text>
<text text-anchor="middle" x="2418" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if search_result.hl &gt; 1 then</text>
<text text-anchor="middle" x="2418" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;search_result.hl = search_result.hl &#45; 1</text>
<text text-anchor="middle" x="2418" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if search_result.hl &lt; search_buf.offset then</text>
<text text-anchor="middle" x="2418" y="-246.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;search_buf.offset = search_buf.offset &#45; 1</text>
<text text-anchor="middle" x="2418" y="-231.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2418" y="-216.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS.zones.results.touched = true</text>
<text text-anchor="middle" x="2418" y="-200.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2418" y="-185.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_8&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2273.848,-475.3971C2289.3034,-453.7398 2316.5088,-415.6175 2343.152,-378.283"/>
<polygon fill="#000000" stroke="#000000" points="2346.2222,-380.0061 2349.1821,-369.8332 2340.5243,-375.9399 2346.2222,-380.0061"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2915.5,-292.7009 2626.5,-292.7009 2626.5,-254.0998 2915.5,-254.0998 2915.5,-292.7009"/>
<text text-anchor="middle" x="2771" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">Search.NAV.UP = Search.NAV.SHIFT_UP</text>
<text text-anchor="middle" x="2771" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">Search.NAV.DOWN = Search.NAV.SHIFT_DOWN</text>
</g>
<!-- codeblock_9&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_9&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2659.9019,-475.3971C2680.918,-437.186 2730.1241,-347.7202 2755.4034,-301.7579"/>
<polygon fill="#000000" stroke="#000000" points="2758.5179,-303.3577 2760.2704,-292.9088 2752.3844,-299.9843 2758.5179,-303.3577"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="3482,-439.401 2934,-439.401 2934,-107.3997 3482,-107.3997 3482,-439.401"/>
<text text-anchor="middle" x="3208" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _makeControl(num)</text>
<text text-anchor="middle" x="3208" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return function(modeS, category, value)</text>
<text text-anchor="middle" x="3208" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local searchResult = modeS.hist:search(tostring(modeS.txtbuf))[1]</text>
<text text-anchor="middle" x="3208" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if #searchResult &gt; 0 then</text>
<text text-anchor="middle" x="3208" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local result</text>
<text text-anchor="middle" x="3208" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS.txtbuf, result = modeS.hist:index(searchResult.cursors[num])</text>
<text text-anchor="middle" x="3208" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not result then</text>
<text text-anchor="middle" x="3208" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result = {n=1}</text>
<text text-anchor="middle" x="3208" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3208" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS.zones.results:replace(Rainbuf(result))</text>
<text text-anchor="middle" x="3208" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS:shiftMode(modeS.raga_default)</text>
<text text-anchor="middle" x="3208" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3208" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS:shiftMode(modeS.raga_default)</text>
<text text-anchor="middle" x="3208" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS.zones.results:replace &quot;&quot;</text>
<text text-anchor="middle" x="3208" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3208" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3208" y="-177.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3208" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">for i = 1, 9 do</text>
<text text-anchor="middle" x="3208" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Search.ALT[&quot;M&#45;&quot; ..tostring(i)] = _makeControl(i)</text>
<text text-anchor="middle" x="3208" y="-115.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_10&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3074.866,-475.3971C3079.7707,-467.9554 3085.9567,-458.5697 3092.9627,-447.9399"/>
<polygon fill="#000000" stroke="#000000" points="3095.8916,-449.856 3098.4724,-439.5803 3090.0469,-446.0038 3095.8916,-449.856"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3607.5,-291.4003 3500.5,-291.4003 3500.5,-255.4003 3607.5,-255.4003 3607.5,-291.4003"/>
<text text-anchor="middle" x="3554" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">return Search</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_11&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3462.8767,-475.6191C3472.19,-465.6247 3483.2254,-452.5445 3491,-439.4007 3517.7375,-394.1979 3536.7903,-335.6365 3546.5444,-301.5191"/>
<polygon fill="#000000" stroke="#000000" points="3549.9517,-302.3305 3549.2712,-291.7575 3543.2098,-300.4471 3549.9517,-302.3305"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="175,-71.6012 19,-71.6012 19,.2011 175,.2011 175,-71.6012"/>
<text text-anchor="middle" x="97" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">A light wrapper over</text>
</g>
<!-- raw_13&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_13&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M115.4638,-255.1431C112.3682,-218.3509 105.2975,-134.3164 100.8595,-81.5707"/>
<polygon fill="#000000" stroke="#000000" points="104.3352,-81.1333 100.009,-71.462 97.3598,-81.7203 104.3352,-81.1333"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="247,-53.7 193,-53.7 193,-17.7 247,-17.7 247,-53.7"/>
<text text-anchor="middle" x="220" y="-32.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_14&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prespace_14&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M208.9217,-255.1431C211.0027,-213.922 216.0774,-113.4001 218.5703,-64.0197"/>
<polygon fill="#000000" stroke="#000000" points="222.0664,-64.1833 219.0752,-54.0195 215.0753,-63.8303 222.0664,-64.1833"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="331,-53.7 277,-53.7 277,-17.7 331,-17.7 331,-53.7"/>
<text text-anchor="middle" x="304" y="-32.2" font-family="Inconsolata" font-size="14.00" fill="#000000">nerf</text>
</g>
<!-- literal_15&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>literal_15&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M304,-255.1431C304,-213.922 304,-113.4001 304,-64.0197"/>
<polygon fill="#000000" stroke="#000000" points="307.5001,-64.0194 304,-54.0195 300.5001,-64.0195 307.5001,-64.0194"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="407,-55.6021 353,-55.6021 353,-15.7979 407,-15.7979 407,-55.6021"/>
<text text-anchor="middle" x="380" y="-40.2" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_16&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_16&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M380,-255.1431C380,-214.4284 380,-115.861 380,-65.8626"/>
<polygon fill="#000000" stroke="#000000" points="383.5001,-65.6831 380,-55.6832 376.5001,-65.6832 383.5001,-65.6831"/>
</g>
</g>
</svg>
