<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="3455pt" height="663pt"
 viewBox="0.00 0.00 3454.50 663.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 659.4007)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-659.4007 3450.5,-659.4007 3450.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1541" cy="-637.4007" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="1541" y="-633.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 90</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1541" cy="-565.4007" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1541" y="-561.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;90</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1541,-619.232C1541,-611.5316 1541,-602.375 1541,-593.8173"/>
<polygon fill="#000000" stroke="#000000" points="1544.5001,-593.8139 1541,-583.8139 1537.5001,-593.814 1544.5001,-593.8139"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="120" cy="-493.4007" rx="50.3327" ry="18"/>
<text text-anchor="middle" x="120" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Search</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1480.0265,-564.6188C1296.0181,-561.8739 730.2094,-550.608 263,-511.4007 234.6037,-509.0177 203.1728,-505.1928 177.0267,-501.6804"/>
<polygon fill="#000000" stroke="#000000" points="177.2943,-498.1846 166.9133,-500.3022 176.3492,-505.1205 177.2943,-498.1846"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="304" cy="-493.4007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="304" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1481.3369,-561.9279C1265.8134,-549.3833 530.565,-506.5879 346.1951,-495.8566"/>
<polygon fill="#000000" stroke="#000000" points="346.2749,-492.3554 336.0884,-495.2684 345.8681,-499.3436 346.2749,-492.3554"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="726" cy="-493.4007" rx="67.748" ry="18"/>
<text text-anchor="middle" x="726" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 7&#45;9</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1482.7143,-560.2515C1337.7985,-547.4491 961.3308,-514.1906 800.5556,-499.9872"/>
<polygon fill="#000000" stroke="#000000" points="800.5515,-496.4733 790.2823,-499.0796 799.9354,-503.4461 800.5515,-496.4733"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="1095" cy="-493.4007" rx="76.6175" ry="18"/>
<text text-anchor="middle" x="1095" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 11&#45;16</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1487.645,-556.7873C1408.1639,-543.9563 1258.4178,-519.782 1168.5845,-505.2798"/>
<polygon fill="#000000" stroke="#000000" points="1168.9026,-501.7859 1158.4725,-503.6473 1167.7869,-508.6964 1168.9026,-501.7859"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1455" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1455" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 19&#45;36</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1520.6192,-548.3377C1509.5364,-539.0591 1495.6512,-527.4342 1483.5109,-517.2702"/>
<polygon fill="#000000" stroke="#000000" points="1485.7463,-514.5771 1475.8319,-510.8413 1481.2527,-519.9444 1485.7463,-514.5771"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1777" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1777" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;46</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1583.4646,-552.4453C1621.6733,-540.7885 1678.1104,-523.5704 1720.1922,-510.7319"/>
<polygon fill="#000000" stroke="#000000" points="1721.4761,-513.9995 1730.0195,-507.7337 1719.4334,-507.3041 1721.4761,-513.9995"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="2141" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2141" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;56</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1597.4465,-558.6271C1704.8441,-545.7394 1938.8247,-517.6617 2061.8238,-502.9018"/>
<polygon fill="#000000" stroke="#000000" points="2062.417,-506.3558 2071.9288,-501.6892 2061.583,-499.4057 2062.417,-506.3558"/>
</g>
<!-- codeblock_9 -->
<g id="node10" class="node">
<title>codeblock_9</title>
<ellipse fill="none" stroke="#000000" cx="2499" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2499" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 58&#45;62</text>
</g>
<!-- section_1&#45;&gt;codeblock_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;codeblock_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1600.2042,-560.9511C1764.1377,-548.6304 2224.4214,-514.037 2414.8712,-499.7235"/>
<polygon fill="#000000" stroke="#000000" points="2415.3963,-503.194 2425.1058,-498.9543 2414.8716,-496.2137 2415.3963,-503.194"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="2897" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2897" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 64&#45;86</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1601.0299,-562.4209C1760.9828,-554.454 2210.778,-531.8735 2585,-511.4007 2661.5933,-507.2104 2748.7456,-502.1585 2811.4337,-498.4747"/>
<polygon fill="#000000" stroke="#000000" points="2811.8926,-501.9538 2821.6697,-497.8725 2811.4814,-494.9659 2811.8926,-501.9538"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="3269" cy="-493.4007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3269" y="-489.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 88&#45;90</text>
</g>
<!-- section_1&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1601.4682,-563.6869C1799.6498,-557.9524 2447.5553,-538.2716 2983,-511.4007 3050.8503,-507.9956 3127.6899,-503.1018 3184.6243,-499.2762"/>
<polygon fill="#000000" stroke="#000000" points="3184.9163,-502.7645 3194.658,-498.5992 3184.445,-495.7804 3184.9163,-502.7645"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="72,-291.4003 0,-291.4003 0,-255.4003 72,-255.4003 72,-291.4003"/>
<text text-anchor="middle" x="36" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">* Search</text>
</g>
<!-- header_2&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>header_2&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M104.8964,-475.9421C96.8193,-465.839 87.2736,-452.5521 81,-439.4007 59.1908,-393.682 46.5255,-335.6616 40.4623,-301.719"/>
<polygon fill="#000000" stroke="#000000" points="43.865,-300.8539 38.7224,-291.5908 36.9661,-302.039 43.865,-300.8539"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="117" cy="-273.4003" rx="27" ry="18"/>
<text text-anchor="middle" x="117" y="-269.2003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_3&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M271.813,-490.8682C237.2746,-486.3768 183.3065,-473.9232 153,-439.4007 119.2365,-400.9402 114.7061,-338.3366 115.2904,-301.9994"/>
<polygon fill="#000000" stroke="#000000" points="118.8004,-301.7242 115.6092,-291.6214 111.8037,-301.5092 118.8004,-301.7242"/>
</g>
<!-- prespace_14 -->
<g id="node15" class="node">
<title>prespace_14</title>
<ellipse fill="none" stroke="#000000" cx="208" cy="-273.4003" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="208" y="-269.2003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_3&#45;&gt;prespace_14 -->
<g id="edge14" class="edge">
<title>prose_3&#45;&gt;prespace_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M289.5729,-476.8029C281.2285,-466.5586 271.0233,-452.8434 264,-439.4007 240.1072,-393.6695 223.2894,-335.6531 214.6617,-301.7147"/>
<polygon fill="#000000" stroke="#000000" points="217.9544,-300.451 212.1497,-291.5879 211.1603,-302.1364 217.9544,-300.451"/>
</g>
<!-- literal_15 -->
<g id="node16" class="node">
<title>literal_15</title>
<ellipse fill="none" stroke="#000000" cx="304" cy="-273.4003" rx="31.481" ry="18"/>
<text text-anchor="middle" x="304" y="-269.2003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_3&#45;&gt;literal_15 -->
<g id="edge15" class="edge">
<title>prose_3&#45;&gt;literal_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M304,-475.3971C304,-437.2049 304,-347.8084 304,-301.8259"/>
<polygon fill="#000000" stroke="#000000" points="307.5001,-301.6526 304,-291.6527 300.5001,-301.6527 307.5001,-301.6526"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="380" cy="-273.4003" rx="27" ry="18"/>
<text text-anchor="middle" x="380" y="-269.2003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_3&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M318.9809,-477.0728C327.5216,-466.9242 337.7387,-453.2149 344,-439.4007 364.652,-393.8364 373.7418,-335.7658 377.5243,-301.7717"/>
<polygon fill="#000000" stroke="#000000" points="381.0261,-301.9341 378.5738,-291.627 374.0632,-301.2137 381.0261,-301.9341"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="840.5,-291.4003 425.5,-291.4003 425.5,-255.4003 840.5,-255.4003 840.5,-291.4003"/>
<text text-anchor="middle" x="633" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">local clone = assert(table.clone, &quot;requires table.clone&quot;)</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_4&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M718.3894,-475.3971C702.1424,-436.9631 663.9751,-346.6748 644.6494,-300.9581"/>
<polygon fill="#000000" stroke="#000000" points="647.8333,-299.5007 640.7157,-291.6527 641.3857,-302.2263 647.8333,-299.5007"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1105.5,-308.6007 858.5,-308.6007 858.5,-238.2 1105.5,-238.2 1105.5,-308.6007"/>
<text text-anchor="middle" x="982" y="-293.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Nerf = require &quot;nerf&quot;</text>
<text text-anchor="middle" x="982" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Rainbuf = require &quot;rainbuf&quot;</text>
<text text-anchor="middle" x="982" y="-246.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Search = clone(Nerf, 3)</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_5&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1085.7527,-475.3971C1068.223,-441.2684 1029.6919,-366.252 1004.838,-317.8638"/>
<polygon fill="#000000" stroke="#000000" points="1007.8946,-316.154 1000.2123,-308.8579 1001.6679,-319.3523 1007.8946,-316.154"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1636.5,-400.8012 1123.5,-400.8012 1123.5,-145.9995 1636.5,-145.9995 1636.5,-400.8012"/>
<text text-anchor="middle" x="1380" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function Search.NAV.RETURN(modeS, category, value)</text>
<text text-anchor="middle" x="1380" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local searchResult = modeS.hist:search(tostring(modeS.txtbuf))</text>
<text text-anchor="middle" x="1380" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if #searchResult &gt; 0 then</text>
<text text-anchor="middle" x="1380" y="-339.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local result</text>
<text text-anchor="middle" x="1380" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local hl = searchResult.hl</text>
<text text-anchor="middle" x="1380" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS.txtbuf, result = modeS.hist:index(searchResult.cursors[hl])</text>
<text text-anchor="middle" x="1380" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not result then</text>
<text text-anchor="middle" x="1380" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result = {n=1}</text>
<text text-anchor="middle" x="1380" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1380" y="-246.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS.zones.results:replace(Rainbuf(result))</text>
<text text-anchor="middle" x="1380" y="-231.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS:shiftMode(modeS.raga_default)</text>
<text text-anchor="middle" x="1380" y="-216.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="1380" y="-200.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS:shiftMode(modeS.raga_default)</text>
<text text-anchor="middle" x="1380" y="-185.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;modeS.zones.results:replace &quot;&quot;</text>
<text text-anchor="middle" x="1380" y="-169.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1380" y="-154.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_6&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1448.8624,-475.3971C1443.6123,-459.9966 1435.5238,-436.2702 1426.7118,-410.4219"/>
<polygon fill="#000000" stroke="#000000" points="1429.9761,-409.15 1423.4365,-400.8143 1423.3505,-411.4088 1429.9761,-409.15"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2049,-331.2007 1655,-331.2007 1655,-215.6 2049,-215.6 2049,-331.2007"/>
<text text-anchor="middle" x="1852" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">function Search.NAV.SHIFT_DOWN(modeS, category, value)</text>
<text text-anchor="middle" x="1852" y="-300.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local search_result = modeS.hist.last_collection</text>
<text text-anchor="middle" x="1852" y="-285.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not search_result then return end</text>
<text text-anchor="middle" x="1852" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if search_result.hl &lt; #search_result then</text>
<text text-anchor="middle" x="1852" y="-254.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;search_result.hl = search_result.hl + 1</text>
<text text-anchor="middle" x="1852" y="-239.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1852" y="-223.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_7&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1783.1376,-475.3971C1793.034,-446.3675 1813.0155,-387.7552 1828.9171,-341.1103"/>
<polygon fill="#000000" stroke="#000000" points="1832.3293,-341.9479 1832.2433,-331.3534 1825.7037,-339.6891 1832.3293,-341.9479"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="2447,-331.2007 2067,-331.2007 2067,-215.6 2447,-215.6 2447,-331.2007"/>
<text text-anchor="middle" x="2257" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">function Search.NAV.SHIFT_UP(modeS, category, value)</text>
<text text-anchor="middle" x="2257" y="-300.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local search_result = modeS.hist.last_collection</text>
<text text-anchor="middle" x="2257" y="-285.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not search_result then return end</text>
<text text-anchor="middle" x="2257" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if search_result.hl &gt; 1 then</text>
<text text-anchor="middle" x="2257" y="-254.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;search_result.hl = search_result.hl &#45; 1</text>
<text text-anchor="middle" x="2257" y="-239.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2257" y="-223.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_8&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2150.4928,-475.3971C2165.8953,-446.1853 2197.0924,-387.0183 2221.7608,-340.2335"/>
<polygon fill="#000000" stroke="#000000" points="2224.8748,-341.8316 2226.443,-331.3534 2218.6828,-338.5667 2224.8748,-341.8316"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2754.5,-292.7009 2465.5,-292.7009 2465.5,-254.0998 2754.5,-254.0998 2754.5,-292.7009"/>
<text text-anchor="middle" x="2610" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">Search.NAV.UP = Search.NAV.SHIFT_UP</text>
<text text-anchor="middle" x="2610" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">Search.NAV.DOWN = Search.NAV.SHIFT_DOWN</text>
</g>
<!-- codeblock_9&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_9&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2508.0836,-475.3971C2527.3226,-437.2658 2572.3139,-348.0935 2595.5468,-302.0463"/>
<polygon fill="#000000" stroke="#000000" points="2598.7773,-303.4134 2600.1571,-292.9088 2592.5277,-300.2602 2598.7773,-303.4134"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="3321,-439.401 2773,-439.401 2773,-107.3997 3321,-107.3997 3321,-439.401"/>
<text text-anchor="middle" x="3047" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _makeControl(num)</text>
<text text-anchor="middle" x="3047" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return function(modeS, category, value)</text>
<text text-anchor="middle" x="3047" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local searchResult = modeS.hist:search(tostring(modeS.txtbuf))</text>
<text text-anchor="middle" x="3047" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if #searchResult &gt; 0 then</text>
<text text-anchor="middle" x="3047" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local result</text>
<text text-anchor="middle" x="3047" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS.txtbuf, result = modeS.hist:index(searchResult.cursors[num])</text>
<text text-anchor="middle" x="3047" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not result then</text>
<text text-anchor="middle" x="3047" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result = {n=1}</text>
<text text-anchor="middle" x="3047" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3047" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS.zones.results:replace(Rainbuf(result))</text>
<text text-anchor="middle" x="3047" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS:shiftMode(modeS.raga_default)</text>
<text text-anchor="middle" x="3047" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3047" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS:shiftMode(modeS.raga_default)</text>
<text text-anchor="middle" x="3047" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;modeS.zones.results:replace &quot;&quot;</text>
<text text-anchor="middle" x="3047" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3047" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3047" y="-177.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3047" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">for i = 1, 9 do</text>
<text text-anchor="middle" x="3047" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Search.ALT[&quot;M&#45;&quot; ..tostring(i)] = _makeControl(i)</text>
<text text-anchor="middle" x="3047" y="-115.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_10&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2909.2751,-475.3971C2914.349,-467.9554 2920.7484,-458.5697 2927.9959,-447.9399"/>
<polygon fill="#000000" stroke="#000000" points="2930.954,-449.8143 2933.6956,-439.5803 2925.1704,-445.8709 2930.954,-449.8143"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3446.5,-291.4003 3339.5,-291.4003 3339.5,-255.4003 3446.5,-255.4003 3446.5,-291.4003"/>
<text text-anchor="middle" x="3393" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">return Search</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_11&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3293.5824,-476.1737C3305.88,-466.5281 3320.1935,-453.5985 3330,-439.4007 3360.0853,-395.8432 3378.1573,-336.0218 3386.7949,-301.3592"/>
<polygon fill="#000000" stroke="#000000" points="3390.2414,-301.9965 3389.1755,-291.4554 3383.4352,-300.3604 3390.2414,-301.9965"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="175,-71.6012 19,-71.6012 19,.2011 175,.2011 175,-71.6012"/>
<text text-anchor="middle" x="97" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">A light wrapper over</text>
</g>
<!-- raw_13&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_13&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M115.4638,-255.1431C112.3682,-218.3509 105.2975,-134.3164 100.8595,-81.5707"/>
<polygon fill="#000000" stroke="#000000" points="104.3352,-81.1333 100.009,-71.462 97.3598,-81.7203 104.3352,-81.1333"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="247,-53.7 193,-53.7 193,-17.7 247,-17.7 247,-53.7"/>
<text text-anchor="middle" x="220" y="-32.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_14&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prespace_14&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M208.9217,-255.1431C211.0027,-213.922 216.0774,-113.4001 218.5703,-64.0197"/>
<polygon fill="#000000" stroke="#000000" points="222.0664,-64.1833 219.0752,-54.0195 215.0753,-63.8303 222.0664,-64.1833"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="331,-53.7 277,-53.7 277,-17.7 331,-17.7 331,-53.7"/>
<text text-anchor="middle" x="304" y="-32.2" font-family="Inconsolata" font-size="14.00" fill="#000000">nerf</text>
</g>
<!-- literal_15&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>literal_15&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M304,-255.1431C304,-213.922 304,-113.4001 304,-64.0197"/>
<polygon fill="#000000" stroke="#000000" points="307.5001,-64.0194 304,-54.0195 300.5001,-64.0195 307.5001,-64.0194"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="407,-55.6021 353,-55.6021 353,-15.7979 407,-15.7979 407,-55.6021"/>
<text text-anchor="middle" x="380" y="-40.2" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_16&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_16&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M380,-255.1431C380,-214.4284 380,-115.861 380,-65.8626"/>
<polygon fill="#000000" stroke="#000000" points="383.5001,-65.6831 380,-55.6832 376.5001,-65.6832 383.5001,-65.6831"/>
</g>
</g>
</svg>
