<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="14450pt" height="2716pt"
 viewBox="0.00 0.00 14450.00 2716.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2712.2042)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2712.2042 14446,-2712.2042 14446,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1806" cy="-2690.2042" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1806" y="-2686.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 424</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1806" cy="-2618.2042" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1806" y="-2614.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;338</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1806,-2672.0355C1806,-2664.3351 1806,-2655.1785 1806,-2646.6208"/>
<polygon fill="#000000" stroke="#000000" points="1809.5001,-2646.6174 1806,-2636.6174 1802.5001,-2646.6175 1809.5001,-2646.6174"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1383" cy="-2546.2042" rx="57.0821" ry="18"/>
<text text-anchor="middle" x="1383" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Historian</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1745.7149,-2610.8469C1675.1794,-2601.8085 1555.0436,-2585.0747 1453,-2564.2042 1447.6215,-2563.1041 1442.037,-2561.8544 1436.4738,-2560.5382"/>
<polygon fill="#000000" stroke="#000000" points="1437.0769,-2557.0828 1426.5325,-2558.1153 1435.4193,-2563.8837 1437.0769,-2557.0828"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1494" cy="-2546.2042" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1494" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1747.191,-2610.0476C1691.8997,-2601.5371 1607.2172,-2586.3235 1536,-2564.2042 1533.5472,-2563.4423 1531.0431,-2562.5853 1528.5399,-2561.6694"/>
<polygon fill="#000000" stroke="#000000" points="1529.5872,-2558.3205 1518.9998,-2557.9213 1527.0274,-2564.8357 1529.5872,-2558.3205"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1577" cy="-2546.2042" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1577" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1757.4359,-2605.9493C1719.3795,-2595.923 1665.3029,-2580.74 1619,-2564.2042 1616.5813,-2563.3404 1614.1026,-2562.4072 1611.6178,-2561.436"/>
<polygon fill="#000000" stroke="#000000" points="1612.6994,-2558.0974 1602.1178,-2557.5679 1610.0596,-2564.5806 1612.6994,-2558.0974"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1660" cy="-2546.2042" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1660" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1773.9597,-2602.4034C1750.0983,-2590.6362 1717.6044,-2574.6118 1693.4189,-2562.6847"/>
<polygon fill="#000000" stroke="#000000" points="1694.7832,-2559.4551 1684.2664,-2558.1711 1691.6871,-2565.7332 1694.7832,-2559.4551"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1742" cy="-2546.2042" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1742" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1790.1798,-2600.4064C1782.1184,-2591.3373 1772.1979,-2580.1768 1763.4584,-2570.3448"/>
<polygon fill="#000000" stroke="#000000" points="1766.0204,-2567.9588 1756.7607,-2562.81 1760.7885,-2572.6094 1766.0204,-2567.9588"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1870" cy="-2546.2042" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1870" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 16&#45;25</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1821.8202,-2600.4064C1829.5126,-2591.7524 1838.8978,-2581.1941 1847.3344,-2571.703"/>
<polygon fill="#000000" stroke="#000000" points="1850.1122,-2573.8461 1854.14,-2564.0467 1844.8803,-2569.1955 1850.1122,-2573.8461"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="2087" cy="-2546.2042" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2087" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 27&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1853.9863,-2605.9087C1901.2571,-2593.7966 1973.679,-2575.2401 2025.2255,-2562.0325"/>
<polygon fill="#000000" stroke="#000000" points="2026.1011,-2565.4213 2034.9194,-2559.5486 2024.3636,-2558.6403 2026.1011,-2565.4213"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="5347" cy="-2546.2042" rx="70.655" ry="18"/>
<text text-anchor="middle" x="5347" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 32&#45;242</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1871.6345,-2616.8696C2307.8066,-2608.0008 4784.8896,-2557.6337 5266.0338,-2547.8505"/>
<polygon fill="#000000" stroke="#000000" points="5266.4295,-2551.3432 5276.3562,-2547.6406 5266.2871,-2544.3447 5266.4295,-2551.3432"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="11096" cy="-2546.2042" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="11096" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 293&#45;338</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1871.8737,-2617.6936C2652.4976,-2611.6436 10124.2821,-2553.7352 11010.2816,-2546.8685"/>
<polygon fill="#000000" stroke="#000000" points="11010.428,-2550.3676 11020.4005,-2546.7901 11010.3737,-2543.3678 11010.428,-2550.3676"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="12128" cy="-2546.2042" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="12128" y="-2542.0042" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 339&#45;390</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1872.0992,-2618.1588C2488.0773,-2617.6675 7288.64,-2612.3536 11180,-2564.2042 11498.2175,-2560.2667 11876.4571,-2552.0108 12042.5826,-2548.2044"/>
<polygon fill="#000000" stroke="#000000" points="12042.8188,-2551.7 12052.7358,-2547.9713 12042.658,-2544.7019 12042.8188,-2551.7"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="1428.5,-2444.604 1335.5,-2444.604 1335.5,-2408.604 1428.5,-2408.604 1428.5,-2444.604"/>
<text text-anchor="middle" x="1382" y="-2423.104" font-family="Inconsolata" font-size="14.00" fill="#000000">* Historian</text>
</g>
<!-- header_2&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>header_2&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1382.8481,-2528.0395C1382.6859,-2508.6334 1382.4265,-2477.6141 1382.2373,-2454.982"/>
<polygon fill="#000000" stroke="#000000" points="1385.7369,-2454.91 1382.1533,-2444.9397 1378.7371,-2454.9686 1385.7369,-2454.91"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="1474" cy="-2426.604" rx="27" ry="18"/>
<text text-anchor="middle" x="1474" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_3&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.9624,-2528.0395C1487.6984,-2508.5206 1482.4697,-2477.2531 1478.6796,-2454.5881"/>
<polygon fill="#000000" stroke="#000000" points="1482.1021,-2453.8335 1477.0006,-2444.5478 1475.198,-2454.9881 1482.1021,-2453.8335"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="1546" cy="-2426.604" rx="27" ry="18"/>
<text text-anchor="middle" x="1546" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1572.359,-2528.2988C1567.291,-2508.7463 1559.1105,-2477.1854 1553.2061,-2454.4056"/>
<polygon fill="#000000" stroke="#000000" points="1556.5699,-2453.4337 1550.6727,-2444.6318 1549.7938,-2455.1901 1556.5699,-2453.4337"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="1618" cy="-2426.604" rx="27" ry="18"/>
<text text-anchor="middle" x="1618" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_5&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1653.7122,-2528.2988C1646.7751,-2508.5447 1635.5337,-2476.5333 1627.5166,-2453.7038"/>
<polygon fill="#000000" stroke="#000000" points="1630.8094,-2452.5168 1624.1937,-2444.2414 1624.2048,-2454.8362 1630.8094,-2452.5168"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1690" cy="-2426.604" rx="27" ry="18"/>
<text text-anchor="middle" x="1690" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_6&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1734.3272,-2528.5567C1725.6753,-2508.6572 1711.5143,-2476.0869 1701.5301,-2453.1234"/>
<polygon fill="#000000" stroke="#000000" points="1704.7323,-2451.7101 1697.5352,-2443.935 1698.3128,-2454.5013 1704.7323,-2451.7101"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2017,-2492.3044 1735,-2492.3044 1735,-2360.9036 2017,-2360.9036 2017,-2492.3044"/>
<text text-anchor="middle" x="1876" y="-2477.0042" font-family="Inconsolata" font-size="14.00" fill="#000000">local Txtbuf = require &quot;txtbuf&quot;</text>
<text text-anchor="middle" x="1876" y="-2461.6041" font-family="Inconsolata" font-size="14.00" fill="#000000">local sql &#160;&#160;&#160;&#160;= require &quot;sqlayer&quot;</text>
<text text-anchor="middle" x="1876" y="-2446.2041" font-family="Inconsolata" font-size="14.00" fill="#000000">local color &#160;&#160;= require &quot;color&quot;</text>
<text text-anchor="middle" x="1876" y="-2430.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">local L &#160;&#160;&#160;&#160;&#160;&#160;= require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1876" y="-2415.404" font-family="Inconsolata" font-size="14.00" fill="#000000">local format &#160;= assert (string.format)</text>
<text text-anchor="middle" x="1876" y="-2400.004" font-family="Inconsolata" font-size="14.00" fill="#000000">local sub &#160;&#160;&#160;&#160;= assert (string.sub)</text>
<text text-anchor="middle" x="1876" y="-2384.604" font-family="Inconsolata" font-size="14.00" fill="#000000">local reverse = assert (table.reverse)</text>
<text text-anchor="middle" x="1876" y="-2369.2039" font-family="Inconsolata" font-size="14.00" fill="#000000">assert(meta)</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_7&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1870.9113,-2528.0395C1871.2762,-2520.7645 1871.7231,-2511.8574 1872.1989,-2502.372"/>
<polygon fill="#000000" stroke="#000000" points="1875.6976,-2502.4848 1872.7031,-2492.322 1868.7064,-2502.134 1875.6976,-2502.4848"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2226.5,-2444.604 2035.5,-2444.604 2035.5,-2408.604 2226.5,-2408.604 2226.5,-2444.604"/>
<text text-anchor="middle" x="2131" y="-2423.104" font-family="Inconsolata" font-size="14.00" fill="#000000">local Historian = meta {}</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_8&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2093.6827,-2528.0395C2100.8866,-2508.4578 2112.4407,-2477.0517 2120.7853,-2454.3696"/>
<polygon fill="#000000" stroke="#000000" points="2124.0865,-2455.5332 2124.2545,-2444.9397 2117.5169,-2453.1162 2124.0865,-2455.5332"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="2313" cy="-2426.604" rx="68.6997" ry="18"/>
<text text-anchor="middle" x="2313" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Persistence</text>
</g>
<!-- section_9&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_9&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5276.1258,-2545.5617C4833.0745,-2541.466 2460.7058,-2518.3433 2391,-2492.2042 2368.991,-2483.9509 2348.8201,-2466.5985 2334.5062,-2451.8129"/>
<polygon fill="#000000" stroke="#000000" points="2336.9544,-2449.3061 2327.5761,-2444.3767 2331.8334,-2454.0785 2336.9544,-2449.3061"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2432" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2432" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_9&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5276.2065,-2545.5519C4884.8171,-2541.8371 2994.1581,-2522.4438 2736,-2492.2042 2639.3759,-2480.886 2528.1701,-2453.0028 2470.7748,-2437.4796"/>
<polygon fill="#000000" stroke="#000000" points="2471.6018,-2434.0774 2461.0332,-2434.8234 2469.7603,-2440.8308 2471.6018,-2434.0774"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="2777" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2777" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5277.3067,-2543.2163C5090.9994,-2535.207 4565.8844,-2512.4877 4129,-2492.2042 3613.3187,-2468.2623 2987.108,-2437.1049 2819.7866,-2428.7453"/>
<polygon fill="#000000" stroke="#000000" points="2819.5974,-2425.2315 2809.4351,-2428.2279 2819.2479,-2432.2228 2819.5974,-2425.2315"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="4170" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4170" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_9&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5281.1973,-2539.5177C5066.1627,-2517.667 4387.9274,-2448.7486 4212.0113,-2430.873"/>
<polygon fill="#000000" stroke="#000000" points="4212.1699,-2427.3712 4201.8673,-2429.8422 4211.4622,-2434.3353 4212.1699,-2427.3712"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="5158" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5158" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_9&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5320.3218,-2529.322C5285.5204,-2507.2995 5224.7819,-2468.8639 5188.2874,-2445.77"/>
<polygon fill="#000000" stroke="#000000" points="5189.8838,-2442.6384 5179.562,-2440.2486 5186.1407,-2448.5535 5189.8838,-2442.6384"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="5769" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5769" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_9&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5394.5885,-2532.717C5478.8588,-2508.8337 5652.7326,-2459.5557 5730.2404,-2437.589"/>
<polygon fill="#000000" stroke="#000000" points="5731.4139,-2440.8943 5740.0806,-2434.8002 5729.5051,-2434.1596 5731.4139,-2440.8943"/>
</g>
<!-- prose_29 -->
<g id="node30" class="node">
<title>prose_29</title>
<ellipse fill="none" stroke="#000000" cx="6239" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6239" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_29 -->
<g id="edge29" class="edge">
<title>section_9&#45;&gt;prose_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5412.2666,-2539.3333C5501.9949,-2529.7182 5668.4432,-2511.2759 5810,-2492.2042 5952.6318,-2472.9875 6121.2573,-2445.9254 6197.676,-2433.4245"/>
<polygon fill="#000000" stroke="#000000" points="6198.5325,-2436.8309 6207.8347,-2431.7595 6197.4003,-2429.923 6198.5325,-2436.8309"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="7397" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7397" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_9&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5416.0582,-2542.2273C5570.7495,-2533.3147 5956.8595,-2511.0443 6280,-2492.2042 6699.0104,-2467.7745 7206.4124,-2437.8526 7354.5232,-2429.1117"/>
<polygon fill="#000000" stroke="#000000" points="7354.7838,-2432.6025 7364.5602,-2428.5193 7354.3713,-2425.6146 7354.7838,-2432.6025"/>
</g>
<!-- section_31 -->
<g id="node32" class="node">
<title>section_31</title>
<ellipse fill="none" stroke="#000000" cx="8001" cy="-2426.604" rx="70.655" ry="18"/>
<text text-anchor="middle" x="8001" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 59&#45;164</text>
</g>
<!-- section_9&#45;&gt;section_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;section_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5417.5648,-2545.2383C5734.9303,-2540.7627 7032.1899,-2521.0275 7438,-2492.2042 7615.3422,-2479.6081 7822.7864,-2452.1171 7929.5127,-2437.0292"/>
<polygon fill="#000000" stroke="#000000" points="7930.1132,-2440.4792 7939.5222,-2435.6088 7929.1296,-2433.5486 7930.1132,-2440.4792"/>
</g>
<!-- section_32 -->
<g id="node33" class="node">
<title>section_32</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-2426.604" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8865" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 165&#45;242</text>
</g>
<!-- section_9&#45;&gt;section_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;section_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5417.6439,-2545.42C5791.2508,-2541.1801 7540.0665,-2520.1487 8081,-2492.2042 8339.1649,-2478.8674 8644.1209,-2449.3949 8785.5736,-2434.9349"/>
<polygon fill="#000000" stroke="#000000" points="8786.2919,-2438.3797 8795.8827,-2433.878 8785.5779,-2431.4162 8786.2919,-2438.3797"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="10167" cy="-2426.604" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10167" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 243&#45;292</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5417.6304,-2545.5202C5857.3215,-2541.2061 8224.3355,-2517.1415 8949,-2492.2042 9376.2742,-2477.5007 9887.1389,-2445.1897 10084.0176,-2432.1871"/>
<polygon fill="#000000" stroke="#000000" points="10084.5347,-2435.6606 10094.2818,-2431.5079 10084.0725,-2428.6759 10084.5347,-2435.6606"/>
</g>
<!-- header_155 -->
<g id="node156" class="node">
<title>header_155</title>
<ellipse fill="none" stroke="#000000" cx="11017" cy="-2426.604" rx="107.339" ry="18"/>
<text text-anchor="middle" x="11017" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Historian:search(frag)</text>
</g>
<!-- section_10&#45;&gt;header_155 -->
<g id="edge155" class="edge">
<title>section_10&#45;&gt;header_155</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11084.1729,-2528.2988C11071.0251,-2508.394 11049.6569,-2476.0442 11034.5563,-2453.1829"/>
<polygon fill="#000000" stroke="#000000" points="11037.3399,-2451.0468 11028.908,-2444.6318 11031.4991,-2454.9049 11037.3399,-2451.0468"/>
</g>
<!-- prose_156 -->
<g id="node157" class="node">
<title>prose_156</title>
<ellipse fill="none" stroke="#000000" cx="11175" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11175" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_156 -->
<g id="edge156" class="edge">
<title>section_10&#45;&gt;prose_156</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11108.4746,-2528.2993C11115.7161,-2517.8311 11124.9661,-2504.3311 11133,-2492.2042 11141.6297,-2479.1778 11151.0256,-2464.5463 11158.738,-2452.4124"/>
<polygon fill="#000000" stroke="#000000" points="11161.8701,-2454.0085 11164.2669,-2443.6883 11155.9575,-2450.2613 11161.8701,-2454.0085"/>
</g>
<!-- codeblock_157 -->
<g id="node158" class="node">
<title>codeblock_157</title>
<ellipse fill="none" stroke="#000000" cx="11402" cy="-2426.604" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11402" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 295&#45;336</text>
</g>
<!-- section_10&#45;&gt;codeblock_157 -->
<g id="edge157" class="edge">
<title>section_10&#45;&gt;codeblock_157</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11135.3777,-2530.8134C11190.5371,-2509.2543 11290.8341,-2470.0532 11351.4467,-2446.3628"/>
<polygon fill="#000000" stroke="#000000" points="11352.7811,-2449.5991 11360.8209,-2442.6989 11350.2329,-2443.0794 11352.7811,-2449.5991"/>
</g>
<!-- header_162 -->
<g id="node163" class="node">
<title>header_162</title>
<ellipse fill="none" stroke="#000000" cx="11874" cy="-2426.604" rx="82.6821" ry="18"/>
<text text-anchor="middle" x="11874" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Historian:prev()</text>
</g>
<!-- section_11&#45;&gt;header_162 -->
<g id="edge162" class="edge">
<title>section_11&#45;&gt;header_162</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12091.8916,-2530.3209C12067.9965,-2519.7203 12036.0197,-2505.3629 12008,-2492.2042 11977.2005,-2477.7399 11942.725,-2460.8462 11916.4566,-2447.8252"/>
<polygon fill="#000000" stroke="#000000" points="11917.6853,-2444.5276 11907.172,-2443.2149 11914.572,-2450.7972 11917.6853,-2444.5276"/>
</g>
<!-- prose_163 -->
<g id="node164" class="node">
<title>prose_163</title>
<ellipse fill="none" stroke="#000000" cx="12049" cy="-2426.604" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12049" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_163 -->
<g id="edge163" class="edge">
<title>section_11&#45;&gt;prose_163</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12116.1729,-2528.2988C12102.8731,-2508.1639 12081.1618,-2475.2945 12066.0351,-2452.3939"/>
<polygon fill="#000000" stroke="#000000" points="12068.8263,-2450.2692 12060.3944,-2443.8542 12062.9855,-2454.1273 12068.8263,-2450.2692"/>
</g>
<!-- codeblock_164 -->
<g id="node165" class="node">
<title>codeblock_164</title>
<ellipse fill="none" stroke="#000000" cx="12198" cy="-2426.604" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12198" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 341&#45;354</text>
</g>
<!-- section_11&#45;&gt;codeblock_164 -->
<g id="edge164" class="edge">
<title>section_11&#45;&gt;codeblock_164</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12138.4797,-2528.2988C12150.0781,-2508.4821 12168.8961,-2476.3302 12182.2659,-2453.4869"/>
<polygon fill="#000000" stroke="#000000" points="12185.418,-2455.0302 12187.4487,-2444.6318 12179.3767,-2451.4943 12185.418,-2455.0302"/>
</g>
<!-- section_165 -->
<g id="node166" class="node">
<title>section_165</title>
<ellipse fill="none" stroke="#000000" cx="12642" cy="-2426.604" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="12642" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 357&#45;390</text>
</g>
<!-- section_11&#45;&gt;section_165 -->
<g id="edge165" class="edge">
<title>section_11&#45;&gt;section_165</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12182.0355,-2533.6309C12277.5721,-2511.401 12475.8455,-2465.2657 12578.0355,-2441.4876"/>
<polygon fill="#000000" stroke="#000000" points="12578.9706,-2444.8636 12587.9172,-2439.1883 12577.3842,-2438.0457 12578.9706,-2444.8636"/>
</g>
<!-- section_166 -->
<g id="node167" class="node">
<title>section_166</title>
<ellipse fill="none" stroke="#000000" cx="13575" cy="-2426.604" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="13575" y="-2422.404" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 391&#45;424</text>
</g>
<!-- section_11&#45;&gt;section_166 -->
<g id="edge166" class="edge">
<title>section_11&#45;&gt;section_166</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12199.757,-2540.2732C12443.1441,-2520.1563 13236.3794,-2454.5923 13493.644,-2433.3284"/>
<polygon fill="#000000" stroke="#000000" points="13493.9877,-2436.812 13503.6654,-2432.5001 13493.411,-2429.8358 13493.9877,-2436.812"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="324,-2048.0045 0,-2048.0045 0,-1976.2022 324,-1976.2022 324,-2048.0045"/>
<text text-anchor="middle" x="162" y="-1984.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">This module is responsible for REPL history.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1469.2603,-2408.6313C1464.1116,-2393.0607 1454.2199,-2371.4416 1437,-2361.0039 1332.0438,-2297.3855 437.5278,-2389.3238 333,-2325.0039 235.8874,-2265.2468 189.9966,-2129.4985 171.8927,-2058.0448"/>
<polygon fill="#000000" stroke="#000000" points="175.206,-2056.8614 169.4204,-2047.9857 168.4083,-2058.5321 175.206,-2056.8614"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="897.5,-2039.4037 342.5,-2039.4037 342.5,-1984.8029 897.5,-1984.8029 897.5,-2039.4037"/>
<text text-anchor="middle" x="620" y="-2008.3034" font-family="Inconsolata" font-size="14.00" fill="#000000">Eventually this will include persisting and restoring from a SQLite database,</text>
<text text-anchor="middle" x="620" y="-1992.9033" font-family="Inconsolata" font-size="14.00" fill="#000000">fuzzy searching, and variable cacheing.</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1541.4601,-2408.7559C1536.4988,-2393.2691 1526.9051,-2371.7031 1510,-2361.0039 1396.5705,-2289.2143 1028.2178,-2382.6775 907,-2325.0039 778.3195,-2263.7797 680.3217,-2116.5878 640.0477,-2048.1803"/>
<polygon fill="#000000" stroke="#000000" points="643.0277,-2046.3423 634.9746,-2039.4576 636.9766,-2049.8616 643.0277,-2046.3423"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1464,-2039.4037 916,-2039.4037 916,-1984.8029 1464,-1984.8029 1464,-2039.4037"/>
<text text-anchor="middle" x="1190" y="-2008.3034" font-family="Inconsolata" font-size="14.00" fill="#000000">Currently does the basic job of retaining history and not letting subsequent</text>
<text text-anchor="middle" x="1190" y="-1992.9033" font-family="Inconsolata" font-size="14.00" fill="#000000">edits munge it.</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1612.4099,-2408.8814C1606.8952,-2394.1191 1597.0799,-2373.5502 1582,-2361.0039 1542.7807,-2328.374 1515.7512,-2352.8463 1473,-2325.0039 1356.0536,-2248.8407 1256.4186,-2112.7159 1213.11,-2048.079"/>
<polygon fill="#000000" stroke="#000000" points="1215.8249,-2045.8404 1207.3768,-2039.4466 1209.9937,-2049.7131 1215.8249,-2045.8404"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="2030,-2047.4037 1482,-2047.4037 1482,-1976.803 2030,-1976.803 2030,-2047.4037"/>
<text text-anchor="middle" x="1756" y="-2016.3034" font-family="Inconsolata" font-size="14.00" fill="#000000">Next step: now that we clone a new txtbuf each time, we have an immutable</text>
<text text-anchor="middle" x="1756" y="-2000.9033" font-family="Inconsolata" font-size="14.00" fill="#000000">record. &#160;We should store the line as a string, to facilitate fuzzy matching.</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1692.8784,-2408.5269C1702.5897,-2347.5369 1734.3431,-2148.1153 1748.7614,-2057.5637"/>
<polygon fill="#000000" stroke="#000000" points="1752.2329,-2058.0195 1750.349,-2047.5935 1745.32,-2056.9187 1752.2329,-2058.0195"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2162,-2030.1033 2048,-2030.1033 2048,-1994.1033 2162,-1994.1033 2162,-2030.1033"/>
<text text-anchor="middle" x="2105" y="-2008.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">** Persistence</text>
</g>
<!-- header_23&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>header_23&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2294.2485,-2409.1089C2278.9263,-2395.2469 2256.3814,-2375.8153 2235,-2361.0039 2208.1724,-2342.4198 2190.31,-2351.3138 2171,-2325.0039 2106.3679,-2236.9423 2102.0982,-2099.4134 2103.5836,-2040.4733"/>
<polygon fill="#000000" stroke="#000000" points="2107.0838,-2040.5219 2103.9147,-2030.4121 2100.0876,-2040.2916 2107.0838,-2040.5219"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2207" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="2207" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_24&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2425.3924,-2408.838C2418.9012,-2393.8406 2407.5503,-2372.9548 2391,-2361.0039 2336.1172,-2321.3731 2287.8087,-2375.7473 2243,-2325.0039 2171.1264,-2243.6109 2189.0952,-2100.218 2200.7726,-2039.9849"/>
<polygon fill="#000000" stroke="#000000" points="2204.2266,-2040.5628 2202.7871,-2030.0662 2197.3666,-2039.1695 2204.2266,-2040.5628"/>
</g>
<!-- prespace_36 -->
<g id="node37" class="node">
<title>prespace_36</title>
<ellipse fill="none" stroke="#000000" cx="2298" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2298" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_24&#45;&gt;prespace_36 -->
<g id="edge36" class="edge">
<title>prose_24&#45;&gt;prespace_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2422.6152,-2409.1301C2414.9161,-2395.4557 2403.312,-2376.265 2391,-2361.0039 2376.5937,-2343.1468 2364.7594,-2345.2685 2354,-2325.0039 2303.4303,-2229.7591 2297.4333,-2097.6091 2297.4275,-2040.3868"/>
<polygon fill="#000000" stroke="#000000" points="2300.928,-2040.3084 2297.4907,-2030.2866 2293.9281,-2040.2645 2300.928,-2040.3084"/>
</g>
<!-- literal_37 -->
<g id="node38" class="node">
<title>literal_37</title>
<ellipse fill="none" stroke="#000000" cx="2394" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2394" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_24&#45;&gt;literal_37 -->
<g id="edge37" class="edge">
<title>prose_24&#45;&gt;literal_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2430.3428,-2408.5269C2424.367,-2343.3439 2403.8954,-2120.0411 2396.6044,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="2400.0644,-2039.9143 2395.666,-2030.2756 2393.0936,-2040.5534 2400.0644,-2039.9143"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="2470" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="2470" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_24&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2433.6572,-2408.5269C2439.633,-2343.3439 2460.1046,-2120.0411 2467.3956,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="2470.9064,-2040.5534 2468.334,-2030.2756 2463.9356,-2039.9143 2470.9064,-2040.5534"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="2542" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="2542" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_25&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2746.4474,-2420.4947C2701.3914,-2409.7404 2618.1392,-2382.8467 2578,-2325.0039 2516.5159,-2236.4021 2528.4005,-2098.6038 2537.0987,-2039.9996"/>
<polygon fill="#000000" stroke="#000000" points="2540.5739,-2040.4301 2538.6673,-2030.0082 2533.6586,-2039.3443 2540.5739,-2040.4301"/>
</g>
<!-- link_44 -->
<g id="node45" class="node">
<title>link_44</title>
<ellipse fill="none" stroke="#000000" cx="2614" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="2614" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">link</text>
</g>
<!-- prose_25&#45;&gt;link_44 -->
<g id="edge44" class="edge">
<title>prose_25&#45;&gt;link_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2752.546,-2414.6923C2722.7579,-2398.7562 2673.5094,-2367.5005 2650,-2325.0039 2598.1522,-2231.2816 2604.5703,-2097.7963 2610.4448,-2040.2653"/>
<polygon fill="#000000" stroke="#000000" points="2613.9464,-2040.4414 2611.5581,-2030.1193 2606.9882,-2039.6778 2613.9464,-2040.4414"/>
</g>
<!-- raw_45 -->
<g id="node46" class="node">
<title>raw_45</title>
<ellipse fill="none" stroke="#000000" cx="2686" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="2686" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_45 -->
<g id="edge45" class="edge">
<title>prose_25&#45;&gt;raw_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2765.0979,-2409.5358C2752.1641,-2390.0518 2732.0098,-2356.7592 2722,-2325.0039 2690.0978,-2223.7969 2685.8755,-2096.2229 2685.6999,-2040.4158"/>
<polygon fill="#000000" stroke="#000000" points="2689.2,-2040.2445 2685.7117,-2030.2404 2682.2,-2040.2363 2689.2,-2040.2445"/>
</g>
<!-- prespace_46 -->
<g id="node47" class="node">
<title>prespace_46</title>
<ellipse fill="none" stroke="#000000" cx="2777" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2777" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_25&#45;&gt;prespace_46 -->
<g id="edge46" class="edge">
<title>prose_25&#45;&gt;prespace_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2777,-2408.5269C2777,-2343.3439 2777,-2120.0411 2777,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="2780.5001,-2040.2756 2777,-2030.2756 2773.5001,-2040.2756 2780.5001,-2040.2756"/>
</g>
<!-- literal_47 -->
<g id="node48" class="node">
<title>literal_47</title>
<ellipse fill="none" stroke="#000000" cx="2873" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2873" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_25&#45;&gt;literal_47 -->
<g id="edge47" class="edge">
<title>prose_25&#45;&gt;literal_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2788.8096,-2409.5062C2801.6604,-2389.9957 2821.7405,-2356.6795 2832,-2325.0039 2864.7612,-2223.8554 2871.4133,-2096.2512 2872.7145,-2040.4261"/>
<polygon fill="#000000" stroke="#000000" points="2876.2172,-2040.3125 2872.9095,-2030.2473 2869.2185,-2040.1783 2876.2172,-2040.3125"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="3060" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="3060" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_25&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2800.1998,-2414.0958C2829.7012,-2397.2113 2880.6808,-2364.6296 2913,-2325.0039 2987.6381,-2233.492 3034.3799,-2097.8164 3052.0172,-2039.9189"/>
<polygon fill="#000000" stroke="#000000" points="3055.4591,-2040.6252 3054.9719,-2030.0415 3048.7527,-2038.619 3055.4591,-2040.6252"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="3866" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="3866" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_26&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4145.1238,-2415.0481C4112.547,-2398.8653 4055.3214,-2366.6965 4019,-2325.0039 3940.6615,-2235.0806 3892.2183,-2097.997 3874.1034,-2039.7906"/>
<polygon fill="#000000" stroke="#000000" points="3877.3417,-2038.4109 3871.0735,-2029.8692 3870.647,-2040.4555 3877.3417,-2038.4109"/>
</g>
<!-- prespace_59 -->
<g id="node60" class="node">
<title>prespace_59</title>
<ellipse fill="none" stroke="#000000" cx="4074" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="4074" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_26&#45;&gt;prespace_59 -->
<g id="edge59" class="edge">
<title>prose_26&#45;&gt;prespace_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4161.8251,-2408.9874C4152.8501,-2389.012 4138.5778,-2355.2804 4130,-2325.0039 4100.8777,-2222.2127 4083.7764,-2095.9475 4077.1692,-2040.4955"/>
<polygon fill="#000000" stroke="#000000" points="4080.624,-2039.9036 4075.9873,-2030.3772 4073.6712,-2040.7158 4080.624,-2039.9036"/>
</g>
<!-- literal_60 -->
<g id="node61" class="node">
<title>literal_60</title>
<ellipse fill="none" stroke="#000000" cx="4170" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="4170" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_26&#45;&gt;literal_60 -->
<g id="edge60" class="edge">
<title>prose_26&#45;&gt;literal_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4170,-2408.5269C4170,-2343.3439 4170,-2120.0411 4170,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="4173.5001,-2040.2756 4170,-2030.2756 4166.5001,-2040.2756 4173.5001,-2040.2756"/>
</g>
<!-- raw_61 -->
<g id="node62" class="node">
<title>raw_61</title>
<ellipse fill="none" stroke="#000000" cx="4268" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="4268" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_61 -->
<g id="edge61" class="edge">
<title>prose_26&#45;&gt;raw_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4178.1402,-2408.9776C4187.0841,-2388.9932 4201.3286,-2355.2537 4210,-2325.0039 4239.4733,-2222.1875 4257.5385,-2095.9352 4264.5948,-2040.491"/>
<polygon fill="#000000" stroke="#000000" points="4268.0919,-2040.7311 4265.8593,-2030.3742 4261.1459,-2039.8628 4268.0919,-2040.7311"/>
</g>
<!-- raw_66 -->
<g id="node67" class="node">
<title>raw_66</title>
<ellipse fill="none" stroke="#000000" cx="4947" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="4947" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_66 -->
<g id="edge66" class="edge">
<title>prose_27&#45;&gt;raw_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5149.0684,-2409.0582C5115.9708,-2344.0395 5000.1845,-2116.5821 4960.4809,-2038.5861"/>
<polygon fill="#000000" stroke="#000000" points="4963.4722,-2036.7471 4955.8165,-2029.4231 4957.234,-2039.9227 4963.4722,-2036.7471"/>
</g>
<!-- raw_68 -->
<g id="node69" class="node">
<title>raw_68</title>
<ellipse fill="none" stroke="#000000" cx="5220" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="5220" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_68 -->
<g id="edge68" class="edge">
<title>prose_28&#45;&gt;raw_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5737.1338,-2423.5592C5644.7132,-2414.1133 5379.1902,-2382.4363 5317,-2325.0039 5233.8334,-2248.1998 5221.3543,-2101.6642 5219.9179,-2040.2671"/>
<polygon fill="#000000" stroke="#000000" points="5223.416,-2040.1084 5219.7657,-2030.1623 5216.4168,-2040.2139 5223.416,-2040.1084"/>
</g>
<!-- prespace_69 -->
<g id="node70" class="node">
<title>prespace_69</title>
<ellipse fill="none" stroke="#000000" cx="5372" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5372" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_69 -->
<g id="edge69" class="edge">
<title>prose_28&#45;&gt;prespace_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5737.9825,-2421.5946C5662.0622,-2408.6995 5470.0306,-2372.0493 5428,-2325.0039 5355.1618,-2243.4751 5361.52,-2100.75 5368.1211,-2040.365"/>
<polygon fill="#000000" stroke="#000000" points="5371.5997,-2040.751 5369.2956,-2030.4098 5364.6479,-2039.9308 5371.5997,-2040.751"/>
</g>
<!-- literal_70 -->
<g id="node71" class="node">
<title>literal_70</title>
<ellipse fill="none" stroke="#000000" cx="5468" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5468" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_70 -->
<g id="edge70" class="edge">
<title>prose_28&#45;&gt;literal_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5736.8004,-2424.2957C5680.4919,-2418.3947 5564.739,-2397.6065 5508,-2325.0039 5441.3321,-2239.6965 5453.7778,-2099.5427 5462.905,-2040.1269"/>
<polygon fill="#000000" stroke="#000000" points="5466.4007,-2040.4357 5464.5508,-2030.0036 5459.4914,-2039.3124 5466.4007,-2040.4357"/>
</g>
<!-- raw_71 -->
<g id="node72" class="node">
<title>raw_71</title>
<ellipse fill="none" stroke="#000000" cx="5544" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="5544" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_71 -->
<g id="edge71" class="edge">
<title>prose_28&#45;&gt;raw_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5738.871,-2419.7297C5695.7895,-2408.1821 5617.6434,-2380.4964 5580,-2325.0039 5519.6027,-2235.9686 5530.7793,-2098.9627 5539.1874,-2040.3169"/>
<polygon fill="#000000" stroke="#000000" points="5542.6663,-2040.7197 5540.7073,-2030.3075 5535.7456,-2039.6687 5542.6663,-2040.7197"/>
</g>
<!-- prespace_72 -->
<g id="node73" class="node">
<title>prespace_72</title>
<ellipse fill="none" stroke="#000000" cx="5635" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5635" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_72 -->
<g id="edge72" class="edge">
<title>prose_28&#45;&gt;prespace_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5753.0369,-2410.9558C5734.9691,-2392.2541 5706.0942,-2359.1779 5691,-2325.0039 5647.6255,-2226.802 5637.8345,-2097.167 5635.6333,-2040.5748"/>
<polygon fill="#000000" stroke="#000000" points="5639.1207,-2040.1379 5635.2865,-2030.2612 5632.1246,-2040.3732 5639.1207,-2040.1379"/>
</g>
<!-- literal_73 -->
<g id="node74" class="node">
<title>literal_73</title>
<ellipse fill="none" stroke="#000000" cx="5731" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5731" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_73 -->
<g id="edge73" class="edge">
<title>prose_28&#45;&gt;literal_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5767.3428,-2408.5269C5761.367,-2343.3439 5740.8954,-2120.0411 5733.6044,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="5737.0644,-2039.9143 5732.666,-2030.2756 5730.0936,-2040.5534 5737.0644,-2039.9143"/>
</g>
<!-- raw_74 -->
<g id="node75" class="node">
<title>raw_74</title>
<ellipse fill="none" stroke="#000000" cx="5807" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="5807" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_74 -->
<g id="edge74" class="edge">
<title>prose_28&#45;&gt;raw_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5770.6572,-2408.5269C5776.633,-2343.3439 5797.1046,-2120.0411 5804.3956,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="5807.9064,-2040.5534 5805.334,-2030.2756 5800.9356,-2039.9143 5807.9064,-2040.5534"/>
</g>
<!-- prespace_75 -->
<g id="node76" class="node">
<title>prespace_75</title>
<ellipse fill="none" stroke="#000000" cx="5898" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5898" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_75 -->
<g id="edge75" class="edge">
<title>prose_28&#45;&gt;prespace_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5784.4462,-2410.4643C5801.601,-2391.5612 5828.7502,-2358.5444 5843,-2325.0039 5884.9554,-2226.2515 5894.9066,-2096.9026 5897.2666,-2040.4795"/>
<polygon fill="#000000" stroke="#000000" points="5900.7747,-2040.3198 5897.6446,-2030.198 5893.7794,-2040.0626 5900.7747,-2040.3198"/>
</g>
<!-- literal_76 -->
<g id="node77" class="node">
<title>literal_76</title>
<ellipse fill="none" stroke="#000000" cx="5994" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5994" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_76 -->
<g id="edge76" class="edge">
<title>prose_28&#45;&gt;literal_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5798.5894,-2419.3077C5840.4891,-2407.3021 5916.108,-2379.1275 5953,-2325.0039 6013.7139,-2235.9317 6005.3207,-2098.9456 5998.184,-2040.3109"/>
<polygon fill="#000000" stroke="#000000" points="6001.6431,-2039.7689 5996.883,-2030.3036 5994.7015,-2040.6714 6001.6431,-2039.7689"/>
</g>
<!-- raw_77 -->
<g id="node78" class="node">
<title>raw_77</title>
<ellipse fill="none" stroke="#000000" cx="6101" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="6101" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_77 -->
<g id="edge77" class="edge">
<title>prose_28&#45;&gt;raw_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5801.0658,-2423.9596C5857.2546,-2417.532 5973.2925,-2395.946 6034,-2325.0039 6105.4075,-2241.5578 6106.483,-2100.3905 6103.2689,-2040.4165"/>
<polygon fill="#000000" stroke="#000000" points="6106.7474,-2039.9592 6102.6349,-2030.1951 6099.7608,-2040.3927 6106.7474,-2039.9592"/>
</g>
<!-- prespace_78 -->
<g id="node79" class="node">
<title>prespace_78</title>
<ellipse fill="none" stroke="#000000" cx="6209" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="6209" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_28&#45;&gt;prespace_78 -->
<g id="edge78" class="edge">
<title>prose_28&#45;&gt;prespace_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5800.2269,-2422.1332C5880.2673,-2410.0516 6089.7817,-2374.3079 6137,-2325.0039 6213.562,-2245.0602 6214.6692,-2100.8682 6211.3138,-2040.2037"/>
<polygon fill="#000000" stroke="#000000" points="6214.806,-2039.9687 6210.6765,-2030.2118 6207.8202,-2040.4144 6214.806,-2039.9687"/>
</g>
<!-- literal_79 -->
<g id="node80" class="node">
<title>literal_79</title>
<ellipse fill="none" stroke="#000000" cx="6322" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="6322" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_28&#45;&gt;literal_79 -->
<g id="edge79" class="edge">
<title>prose_28&#45;&gt;literal_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5800.4823,-2422.2109C5904.2805,-2407.4483 6230.9778,-2358.6649 6264,-2325.0039 6340.8305,-2246.6872 6333.3659,-2101.5981 6326.1515,-2040.4492"/>
<polygon fill="#000000" stroke="#000000" points="6329.6042,-2039.855 6324.873,-2030.3753 6322.6599,-2040.7364 6329.6042,-2039.855"/>
</g>
<!-- raw_80 -->
<g id="node81" class="node">
<title>raw_80</title>
<ellipse fill="none" stroke="#000000" cx="6459" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="6459" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_80 -->
<g id="edge80" class="edge">
<title>prose_28&#45;&gt;raw_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5800.4129,-2422.1492C5919.8985,-2405.0858 6340.4529,-2343.8998 6362,-2325.0039 6447.1136,-2250.3631 6458.512,-2102.6268 6459.3711,-2040.5883"/>
<polygon fill="#000000" stroke="#000000" points="6462.8721,-2040.3934 6459.4256,-2030.3749 6455.8722,-2040.356 6462.8721,-2040.3934"/>
</g>
<!-- raw_94 -->
<g id="node95" class="node">
<title>raw_94</title>
<ellipse fill="none" stroke="#000000" cx="6665" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="6665" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_29&#45;&gt;raw_94 -->
<g id="edge94" class="edge">
<title>prose_29&#45;&gt;raw_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6270.1871,-2421.3697C6322.3382,-2411.1969 6428.0985,-2384.3304 6495,-2325.0039 6586.8529,-2243.5512 6638.4953,-2100.1913 6657.0415,-2039.9759"/>
<polygon fill="#000000" stroke="#000000" points="6660.4952,-2040.6447 6660.0257,-2030.0602 6653.7922,-2038.6273 6660.4952,-2040.6447"/>
</g>
<!-- raw_96 -->
<g id="node97" class="node">
<title>raw_96</title>
<ellipse fill="none" stroke="#000000" cx="7084" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="7084" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_96 -->
<g id="edge96" class="edge">
<title>prose_30&#45;&gt;raw_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7365.0544,-2423.3836C7310.8961,-2416.1319 7201.4533,-2393.398 7145,-2325.0039 7075.3489,-2240.6206 7076.8952,-2099.9636 7081.2125,-2040.2707"/>
<polygon fill="#000000" stroke="#000000" points="7084.7175,-2040.3481 7082.0343,-2030.0987 7077.7403,-2039.7843 7084.7175,-2040.3481"/>
</g>
<!-- prespace_97 -->
<g id="node98" class="node">
<title>prespace_97</title>
<ellipse fill="none" stroke="#000000" cx="7200" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="7200" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_30&#45;&gt;prespace_97 -->
<g id="edge97" class="edge">
<title>prose_30&#45;&gt;prespace_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7376.3246,-2412.568C7351.907,-2394.9277 7311.7443,-2362.3922 7289,-2325.0039 7231.6435,-2230.7182 7209.9935,-2098.0631 7202.958,-2040.548"/>
<polygon fill="#000000" stroke="#000000" points="7206.4088,-2039.9217 7201.7742,-2030.3943 7199.4559,-2040.7324 7206.4088,-2039.9217"/>
</g>
<!-- literal_98 -->
<g id="node99" class="node">
<title>literal_98</title>
<ellipse fill="none" stroke="#000000" cx="7329" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="7329" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_30&#45;&gt;literal_98 -->
<g id="edge98" class="edge">
<title>prose_30&#45;&gt;literal_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7394.0344,-2408.5269C7383.3409,-2343.3439 7346.7075,-2120.0411 7333.6605,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="7337.054,-2039.5771 7331.9812,-2030.2756 7330.1463,-2040.7103 7337.054,-2039.5771"/>
</g>
<!-- raw_99 -->
<g id="node100" class="node">
<title>raw_99</title>
<ellipse fill="none" stroke="#000000" cx="7466" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="7466" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_99 -->
<g id="edge99" class="edge">
<title>prose_30&#45;&gt;raw_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7400.0092,-2408.5269C7410.8599,-2343.3439 7448.0321,-2120.0411 7461.271,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="7464.7853,-2040.7146 7462.9749,-2030.2756 7457.8803,-2039.5651 7464.7853,-2040.7146"/>
</g>
<!-- prespace_100 -->
<g id="node101" class="node">
<title>prespace_100</title>
<ellipse fill="none" stroke="#000000" cx="7613" cy="-2012.1033" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="7613" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_30&#45;&gt;prespace_100 -->
<g id="edge100" class="edge">
<title>prose_30&#45;&gt;prespace_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7416.6922,-2412.1903C7440.0291,-2394.1781 7478.68,-2361.2765 7502,-2325.0039 7562.9101,-2230.2626 7595.5067,-2097.8475 7607.5251,-2040.4714"/>
<polygon fill="#000000" stroke="#000000" points="7611.0217,-2040.8414 7609.5945,-2030.3432 7604.1634,-2039.4401 7611.0217,-2040.8414"/>
</g>
<!-- literal_101 -->
<g id="node102" class="node">
<title>literal_101</title>
<ellipse fill="none" stroke="#000000" cx="7723" cy="-2012.1033" rx="31.481" ry="18"/>
<text text-anchor="middle" x="7723" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_30&#45;&gt;literal_101 -->
<g id="edge101" class="edge">
<title>prose_30&#45;&gt;literal_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7429.1338,-2424.5158C7486.6414,-2418.9459 7606.846,-2398.6409 7668,-2325.0039 7737.6646,-2241.1191 7732.5327,-2100.1907 7726.5815,-2040.3482"/>
<polygon fill="#000000" stroke="#000000" points="7730.0336,-2039.7157 7725.4786,-2030.15 7723.0742,-2040.4684 7730.0336,-2039.7157"/>
</g>
<!-- raw_102 -->
<g id="node103" class="node">
<title>raw_102</title>
<ellipse fill="none" stroke="#000000" cx="7813" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="7813" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_102 -->
<g id="edge102" class="edge">
<title>prose_30&#45;&gt;raw_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7428.5444,-2422.2443C7508.8365,-2410.4921 7717.7979,-2375.5913 7763,-2325.0039 7835.7878,-2243.5442 7825.7387,-2100.1881 7817.5682,-2039.9748"/>
<polygon fill="#000000" stroke="#000000" points="7821.0297,-2039.456 7816.1352,-2030.0595 7814.1017,-2040.4574 7821.0297,-2039.456"/>
</g>
<!-- header_110 -->
<g id="node111" class="node">
<title>header_110</title>
<ellipse fill="none" stroke="#000000" cx="7937" cy="-2012.1033" rx="78.8488" ry="18"/>
<text text-anchor="middle" x="7937" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : SQLite battery</text>
</g>
<!-- section_31&#45;&gt;header_110 -->
<g id="edge110" class="edge">
<title>section_31&#45;&gt;header_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7998.2088,-2408.5269C7988.1444,-2343.3439 7953.6659,-2120.0411 7941.3864,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="7944.7909,-2039.6244 7939.8058,-2030.2756 7937.8729,-2040.6926 7944.7909,-2039.6244"/>
</g>
<!-- prose_111 -->
<g id="node112" class="node">
<title>prose_111</title>
<ellipse fill="none" stroke="#000000" cx="8066" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8066" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_31&#45;&gt;prose_111 -->
<g id="edge111" class="edge">
<title>section_31&#45;&gt;prose_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8005.8997,-2408.3679C8011.2,-2388.1236 8019.6129,-2354.4199 8025,-2325.0039 8044.1065,-2220.6741 8057.7623,-2095.1973 8063.2848,-2040.2212"/>
<polygon fill="#000000" stroke="#000000" points="8066.7752,-2040.4899 8064.28,-2030.1931 8059.8094,-2039.7985 8066.7752,-2040.4899"/>
</g>
<!-- codeblock_112 -->
<g id="node113" class="node">
<title>codeblock_112</title>
<ellipse fill="none" stroke="#000000" cx="8286" cy="-2012.1033" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="8286" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 61&#45;162</text>
</g>
<!-- section_31&#45;&gt;codeblock_112 -->
<g id="edge112" class="edge">
<title>section_31&#45;&gt;codeblock_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8022.2595,-2409.4351C8045.0012,-2390.3806 8081.2659,-2357.95 8107,-2325.0039 8182.5926,-2228.2264 8247.4657,-2095.9786 8273.6419,-2039.4909"/>
<polygon fill="#000000" stroke="#000000" points="8276.9348,-2040.7073 8277.9323,-2030.1596 8270.5748,-2037.7831 8276.9348,-2040.7073"/>
</g>
<!-- header_117 -->
<g id="node118" class="node">
<title>header_117</title>
<ellipse fill="none" stroke="#000000" cx="8732" cy="-2012.1033" rx="82.2147" ry="18"/>
<text text-anchor="middle" x="8732" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:load()</text>
</g>
<!-- section_32&#45;&gt;header_117 -->
<g id="edge117" class="edge">
<title>section_32&#45;&gt;header_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8857.0498,-2408.4537C8848.3629,-2388.2846 8834.3112,-2354.6463 8824,-2325.0039 8787.9109,-2221.2557 8753.6864,-2095.0614 8739.2251,-2040.0191"/>
<polygon fill="#000000" stroke="#000000" points="8742.5966,-2039.0774 8736.6801,-2030.2885 8735.8244,-2040.8487 8742.5966,-2039.0774"/>
</g>
<!-- prose_118 -->
<g id="node119" class="node">
<title>prose_118</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8865" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_32&#45;&gt;prose_118 -->
<g id="edge118" class="edge">
<title>section_32&#45;&gt;prose_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8865,-2408.5269C8865,-2343.3439 8865,-2120.0411 8865,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="8868.5001,-2040.2756 8865,-2030.2756 8861.5001,-2040.2756 8868.5001,-2040.2756"/>
</g>
<!-- prose_119 -->
<g id="node120" class="node">
<title>prose_119</title>
<ellipse fill="none" stroke="#000000" cx="8947" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8947" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_32&#45;&gt;prose_119 -->
<g id="edge119" class="edge">
<title>section_32&#45;&gt;prose_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8873.8358,-2408.7237C8883.298,-2388.7908 8898.025,-2355.3584 8906,-2325.0039 8932.9517,-2222.4204 8942.5873,-2096.0487 8945.6834,-2040.5325"/>
<polygon fill="#000000" stroke="#000000" points="8949.1861,-2040.5728 8946.2186,-2030.4021 8942.1958,-2040.2034 8949.1861,-2040.5728"/>
</g>
<!-- codeblock_120 -->
<g id="node121" class="node">
<title>codeblock_120</title>
<ellipse fill="none" stroke="#000000" cx="9173" cy="-2012.1033" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9173" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 172&#45;240</text>
</g>
<!-- section_32&#45;&gt;codeblock_120 -->
<g id="edge120" class="edge">
<title>section_32&#45;&gt;codeblock_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8890.7814,-2409.3653C8917.3366,-2390.7392 8958.8489,-2359.1137 8988,-2325.0039 9068.6434,-2230.6428 9134.5756,-2096.5701 9160.7971,-2039.5115"/>
<polygon fill="#000000" stroke="#000000" points="9164.1274,-2040.6434 9165.0854,-2030.092 9157.7565,-2037.743 9164.1274,-2040.6434"/>
</g>
<!-- header_127 -->
<g id="node128" class="node">
<title>header_127</title>
<ellipse fill="none" stroke="#000000" cx="9921" cy="-2012.1033" rx="113.1277" ry="18"/>
<text text-anchor="middle" x="9921" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:persist(txtbuf)</text>
</g>
<!-- section_33&#45;&gt;header_127 -->
<g id="edge127" class="edge">
<title>section_33&#45;&gt;header_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10139.3155,-2409.7598C10111.8197,-2391.789 10070.0987,-2360.9901 10044,-2325.0039 9976.7369,-2232.2579 9940.3104,-2097.7874 9926.9761,-2040.0986"/>
<polygon fill="#000000" stroke="#000000" points="9930.3686,-2039.2318 9924.7528,-2030.2477 9923.5404,-2040.773 9930.3686,-2039.2318"/>
</g>
<!-- prose_128 -->
<g id="node129" class="node">
<title>prose_128</title>
<ellipse fill="none" stroke="#000000" cx="10085" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10085" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_128 -->
<g id="edge128" class="edge">
<title>section_33&#45;&gt;prose_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10158.1642,-2408.7237C10148.702,-2388.7908 10133.975,-2355.3584 10126,-2325.0039 10099.0483,-2222.4204 10089.4127,-2096.0487 10086.3166,-2040.5325"/>
<polygon fill="#000000" stroke="#000000" points="10089.8042,-2040.2034 10085.7814,-2030.4021 10082.8139,-2040.5728 10089.8042,-2040.2034"/>
</g>
<!-- prose_129 -->
<g id="node130" class="node">
<title>prose_129</title>
<ellipse fill="none" stroke="#000000" cx="10167" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10167" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_129 -->
<g id="edge129" class="edge">
<title>section_33&#45;&gt;prose_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10167,-2408.5269C10167,-2343.3439 10167,-2120.0411 10167,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="10170.5001,-2040.2756 10167,-2030.2756 10163.5001,-2040.2756 10170.5001,-2040.2756"/>
</g>
<!-- prose_130 -->
<g id="node131" class="node">
<title>prose_130</title>
<ellipse fill="none" stroke="#000000" cx="10601" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10601" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_130 -->
<g id="edge130" class="edge">
<title>section_33&#45;&gt;prose_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10185.3712,-2409.0582C10254.4711,-2343.0629 10498.799,-2109.7125 10576.8443,-2035.1737"/>
<polygon fill="#000000" stroke="#000000" points="10579.4688,-2037.507 10584.2831,-2028.0691 10574.6341,-2032.4448 10579.4688,-2037.507"/>
</g>
<!-- prose_131 -->
<g id="node132" class="node">
<title>prose_131</title>
<ellipse fill="none" stroke="#000000" cx="10683" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10683" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_131 -->
<g id="edge131" class="edge">
<title>section_33&#45;&gt;prose_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10239.3117,-2421.1547C10358.4998,-2410.6023 10588.3889,-2383.1101 10642,-2325.0039 10715.7747,-2245.0434 10699.7661,-2100.8607 10688.8725,-2040.2011"/>
<polygon fill="#000000" stroke="#000000" points="10692.2808,-2039.3872 10686.9862,-2030.2101 10685.4023,-2040.6859 10692.2808,-2039.3872"/>
</g>
<!-- codeblock_132 -->
<g id="node133" class="node">
<title>codeblock_132</title>
<ellipse fill="none" stroke="#000000" cx="10821" cy="-2012.1033" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10821" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 258&#45;290</text>
</g>
<!-- section_33&#45;&gt;codeblock_132 -->
<g id="edge132" class="edge">
<title>section_33&#45;&gt;codeblock_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10240.5286,-2422.4838C10375.0189,-2413.4868 10653.3409,-2387.643 10724,-2325.0039 10808.7116,-2249.9072 10820.3331,-2102.4239 10821.3115,-2040.5206"/>
<polygon fill="#000000" stroke="#000000" points="10824.8127,-2040.3555 10821.3861,-2030.3301 10817.8128,-2040.3041 10824.8127,-2040.3555"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="1722.5,-912.6029 1503.5,-912.6029 1503.5,-856.7999 1722.5,-856.7999 1722.5,-912.6029"/>
<text text-anchor="middle" x="1613" y="-865.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">This is where we practice for</text>
</g>
<!-- raw_35&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_35&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2211.6482,-1994.317C2224.4641,-1940.7377 2254.1049,-1779.6314 2171,-1699.2027 2100.663,-1631.1308 1803.5887,-1729.9571 1732,-1663.2027 1516.8049,-1462.54 1579.3154,-1049.1125 1604.7064,-922.43"/>
<polygon fill="#000000" stroke="#000000" points="1608.1754,-922.9358 1606.7529,-912.4369 1601.3177,-921.5314 1608.1754,-922.9358"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="1795,-902.7014 1741,-902.7014 1741,-866.7014 1795,-866.7014 1795,-902.7014"/>
<text text-anchor="middle" x="1768" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_36&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>prespace_36&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2301.406,-1994.1512C2310.5088,-1940.1017 2329.2,-1777.8021 2243,-1699.2027 2170.671,-1633.2513 1871.9704,-1733.6379 1804,-1663.2027 1698.7851,-1554.1726 1750.1177,-1040.0295 1764.6089,-913.0885"/>
<polygon fill="#000000" stroke="#000000" points="1768.1041,-913.3317 1765.7773,-902.9955 1761.1505,-912.5267 1768.1041,-913.3317"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="1867,-902.7014 1813,-902.7014 1813,-866.7014 1867,-866.7014 1867,-902.7014"/>
<text text-anchor="middle" x="1840" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">codex</text>
</g>
<!-- literal_37&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>literal_37&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2398.3428,-1994.2468C2410.2425,-1940.4683 2437.1566,-1778.8567 2353,-1699.2027 2275.7966,-1626.13 1950.0642,-1739.4556 1876,-1663.2027 1770.4317,-1554.5147 1822.0293,-1040.1151 1836.5923,-913.1046"/>
<polygon fill="#000000" stroke="#000000" points="1840.0881,-913.3434 1837.7665,-903.006 1833.1349,-912.5349 1840.0881,-913.3434"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="1939,-902.7014 1885,-902.7014 1885,-866.7014 1939,-866.7014 1939,-902.7014"/>
<text text-anchor="middle" x="1912" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_38&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_38&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2474.6768,-1994.2873C2487.5741,-1940.6236 2517.4212,-1779.3032 2434,-1699.2027 2355.8842,-1624.1966 2023.5077,-1740.8338 1948,-1663.2027 1842.3562,-1554.5881 1894.0104,-1040.1335 1908.5888,-913.108"/>
<polygon fill="#000000" stroke="#000000" points="1912.0846,-913.3459 1909.7642,-903.0083 1905.1316,-912.5366 1912.0846,-913.3459"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="2449,-904.6035 1957,-904.6035 1957,-864.7993 2449,-864.7993 2449,-904.6035"/>
<text text-anchor="middle" x="2203" y="-873.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">Note: I&#39;m not happy with how the existing SQLite binding is handling</text>
</g>
<!-- raw_43&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_43&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2544.6021,-1993.9971C2550.9362,-1943.4572 2562.7408,-1798.0911 2506,-1699.2027 2492.7285,-1676.0731 2473.5358,-1684.8764 2458,-1663.2027 2277.3773,-1411.2204 2219.4647,-1023.8875 2206.2495,-914.4254"/>
<polygon fill="#000000" stroke="#000000" points="2209.7182,-913.9531 2205.0752,-904.4299 2202.766,-914.77 2209.7182,-913.9531"/>
</g>
<!-- anchortext_50 -->
<g id="node51" class="node">
<title>anchortext_50</title>
<ellipse fill="none" stroke="#000000" cx="2518" cy="-884.7014" rx="51.3018" ry="18"/>
<text text-anchor="middle" x="2518" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">anchortext</text>
</g>
<!-- link_44&#45;&gt;anchortext_50 -->
<g id="edge50" class="edge">
<title>link_44&#45;&gt;anchortext_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2611.9602,-1993.9583C2606.1887,-1942.2949 2589.4221,-1789.9589 2578,-1663.2027 2551.5891,-1370.1092 2526.8245,-1014.2736 2519.9065,-912.8757"/>
<polygon fill="#000000" stroke="#000000" points="2523.3932,-912.5597 2519.2222,-902.8205 2516.4094,-913.0351 2523.3932,-912.5597"/>
</g>
<!-- url_51 -->
<g id="node52" class="node">
<title>url_51</title>
<ellipse fill="none" stroke="#000000" cx="2614" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="2614" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">url</text>
</g>
<!-- link_44&#45;&gt;url_51 -->
<g id="edge51" class="edge">
<title>link_44&#45;&gt;url_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2614,-1993.9379C2614,-1863.8043 2614,-1073.9236 2614,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="2617.5001,-912.7562 2614,-902.7562 2610.5001,-912.7562 2617.5001,-912.7562"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="2731,-902.7014 2659,-902.7014 2659,-866.7014 2731,-866.7014 2731,-902.7014"/>
<text text-anchor="middle" x="2695" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">. &#160;Lua&#39;s</text>
</g>
<!-- raw_45&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_45&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2686.145,-1993.9379C2687.1839,-1863.8043 2693.4894,-1073.9236 2694.7723,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="2698.2758,-912.7839 2694.8559,-902.7562 2691.2761,-912.7279 2698.2758,-912.7839"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="2803,-902.7014 2749,-902.7014 2749,-866.7014 2803,-866.7014 2803,-902.7014"/>
<text text-anchor="middle" x="2776" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_46&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>prespace_46&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2776.9839,-1993.9379C2776.8685,-1863.8043 2776.1678,-1073.9236 2776.0253,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="2779.525,-912.7531 2776.016,-902.7562 2772.525,-912.7593 2779.525,-912.7531"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="2875,-902.7014 2821,-902.7014 2821,-866.7014 2875,-866.7014 2875,-902.7014"/>
<text text-anchor="middle" x="2848" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">nil</text>
</g>
<!-- literal_47&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>literal_47&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2872.5972,-1993.9379C2869.7115,-1863.8043 2852.196,-1073.9236 2848.6324,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="2852.1213,-912.6761 2848.4004,-902.7562 2845.123,-912.8314 2852.1213,-912.6761"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3448.5,-911.9019 2893.5,-911.9019 2893.5,-857.501 3448.5,-857.501 3448.5,-911.9019"/>
<text text-anchor="middle" x="3171" y="-896.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> is a frequent source of</text>
<text text-anchor="middle" x="3171" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">annoyance, true, but every union type system has a bottom value, and Lua&#39;s is</text>
<text text-anchor="middle" x="3171" y="-865.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">implemented cleanly.</text>
</g>
<!-- raw_48&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>raw_48&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3061.7885,-1993.9379C3074.3857,-1865.9913 3149.7743,-1100.286 3167.3424,-921.8507"/>
<polygon fill="#000000" stroke="#000000" points="3170.8258,-922.1909 3168.3225,-911.8961 3163.8594,-921.505 3170.8258,-922.1909"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="2576,-53.1 2434,-53.1 2434,-17.1 2576,-17.1 2576,-53.1"/>
<text text-anchor="middle" x="2505" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">three&#45;valued logic</text>
</g>
<!-- anchortext_50&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>anchortext_50&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2517.7225,-866.5632C2516.0653,-758.2631 2507.4807,-197.2221 2505.437,-63.6604"/>
<polygon fill="#000000" stroke="#000000" points="2508.9331,-63.3745 2505.2805,-53.4293 2501.934,-63.4817 2508.9331,-63.3745"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="2659.5,-53.1 2594.5,-53.1 2594.5,-17.1 2659.5,-17.1 2659.5,-53.1"/>
<text text-anchor="middle" x="2627" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">httk://</text>
</g>
<!-- url_51&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>url_51&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2614.2775,-866.5632C2615.9347,-758.2631 2624.5193,-197.2221 2626.563,-63.6604"/>
<polygon fill="#000000" stroke="#000000" points="2630.066,-63.4817 2626.7195,-53.4293 2623.0669,-63.3745 2630.066,-63.4817"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4029,-927.3025 3467,-927.3025 3467,-842.1004 4029,-842.1004 4029,-927.3025"/>
<text text-anchor="middle" x="3748" y="-896.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">But this is not the semantics of SQLite&#39;s NULL, which cleanly represents &quot;no</text>
<text text-anchor="middle" x="3748" y="-880.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">answer available for constraint&quot;. &#160;Our bindings would appear to represent</text>
<text text-anchor="middle" x="3748" y="-865.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">nulls on the right side of a left join as missing values, which breaks some of</text>
<text text-anchor="middle" x="3748" y="-850.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">the conventions of Lua, such as</text>
</g>
<!-- raw_58&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>raw_58&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3864.0987,-1993.9379C3851.0671,-1869.4309 3774.825,-1140.994 3753.5252,-937.4908"/>
<polygon fill="#000000" stroke="#000000" points="3756.9867,-936.9392 3752.4647,-927.3579 3750.0247,-937.6679 3756.9867,-936.9392"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="4101,-902.7014 4047,-902.7014 4047,-866.7014 4101,-866.7014 4101,-902.7014"/>
<text text-anchor="middle" x="4074" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_59&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prespace_59&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4074,-1993.9379C4074,-1863.8043 4074,-1073.9236 4074,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="4077.5001,-912.7562 4074,-902.7562 4070.5001,-912.7562 4077.5001,-912.7562"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="4173,-902.7014 4119,-902.7014 4119,-866.7014 4173,-866.7014 4173,-902.7014"/>
<text text-anchor="middle" x="4146" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">#</text>
</g>
<!-- literal_60&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>literal_60&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4169.6133,-1993.9379C4166.843,-1863.8043 4150.0281,-1073.9236 4146.6071,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="4150.0965,-912.6794 4146.3843,-902.7562 4143.0981,-912.8285 4150.0965,-912.6794"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="4389,-902.7014 4191,-902.7014 4191,-866.7014 4389,-866.7014 4389,-902.7014"/>
<text text-anchor="middle" x="4290" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">, to no plausible benefit.</text>
</g>
<!-- raw_61&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>raw_61&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4268.3545,-1993.9379C4270.8939,-1863.8043 4286.3075,-1073.9236 4289.4435,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="4292.9518,-912.8226 4289.6477,-902.7562 4285.9532,-912.686 4292.9518,-912.8226"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="4962.5,-912.0018 4407.5,-912.0018 4407.5,-857.401 4962.5,-857.401 4962.5,-912.0018"/>
<text text-anchor="middle" x="4685" y="-880.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">It&#39;s also quite possible I&#39;m trying to unwrap a data structure which is meant</text>
<text text-anchor="middle" x="4685" y="-865.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">to be handled through method calls.</text>
</g>
<!-- raw_66&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>raw_66&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4942.7785,-1993.9379C4913.0608,-1866.0607 4735.2934,-1101.1168 4693.7008,-922.1417"/>
<polygon fill="#000000" stroke="#000000" points="4697.0524,-921.1014 4691.3796,-912.1532 4690.2341,-922.6859 4697.0524,-921.1014"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="5339.5,-904.6035 4980.5,-904.6035 4980.5,-864.7993 5339.5,-864.7993 5339.5,-904.6035"/>
<text text-anchor="middle" x="5160" y="-873.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">Looks like there&#39;s a magic &quot;hik&quot; string where the</text>
</g>
<!-- raw_68&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>raw_68&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5219.0332,-1993.9379C5212.1301,-1864.2279 5170.3436,-1079.0588 5161.6024,-914.8109"/>
<polygon fill="#000000" stroke="#000000" points="5165.0796,-914.2879 5161.053,-904.4881 5158.0895,-914.66 5165.0796,-914.2879"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="5412,-902.7014 5358,-902.7014 5358,-866.7014 5412,-866.7014 5412,-902.7014"/>
<text text-anchor="middle" x="5385" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_69&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>prespace_69&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5372.2095,-1993.9379C5373.71,-1863.8043 5382.8181,-1073.9236 5384.6711,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="5388.1762,-912.7959 5384.7918,-902.7562 5381.1766,-912.7151 5388.1762,-912.7959"/>
</g>
<!-- leaf_83 -->
<g id="node84" class="node">
<title>leaf_83</title>
<polygon fill="none" stroke="#c0c0c0" points="5484,-902.7014 5430,-902.7014 5430,-866.7014 5484,-866.7014 5484,-902.7014"/>
<text text-anchor="middle" x="5457" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">i</text>
</g>
<!-- literal_70&#45;&gt;leaf_83 -->
<g id="edge83" class="edge">
<title>literal_70&#45;&gt;leaf_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5467.8228,-1993.9379C5466.5531,-1863.8043 5458.8462,-1073.9236 5457.2783,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="5460.7737,-912.7215 5457.1762,-902.7562 5453.774,-912.7899 5460.7737,-912.7215"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="5588,-902.7014 5502,-902.7014 5502,-866.7014 5588,-866.7014 5588,-902.7014"/>
<text text-anchor="middle" x="5545" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> is index,</text>
</g>
<!-- raw_71&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>raw_71&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5544.0161,-1993.9379C5544.1315,-1863.8043 5544.8322,-1073.9236 5544.9747,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="5548.475,-912.7593 5544.984,-902.7562 5541.475,-912.7531 5548.475,-912.7593"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="5660,-902.7014 5606,-902.7014 5606,-866.7014 5660,-866.7014 5660,-902.7014"/>
<text text-anchor="middle" x="5633" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_72&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>prespace_72&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5634.9678,-1993.9379C5634.7369,-1863.8043 5633.3357,-1073.9236 5633.0506,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="5636.5499,-912.7499 5633.032,-902.7562 5629.5499,-912.7624 5636.5499,-912.7499"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="5732,-902.7014 5678,-902.7014 5678,-866.7014 5732,-866.7014 5732,-902.7014"/>
<text text-anchor="middle" x="5705" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">k</text>
</g>
<!-- literal_73&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>literal_73&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5730.5811,-1993.9379C5727.5799,-1863.8043 5709.3638,-1073.9236 5705.6577,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="5709.1461,-912.6728 5705.4164,-902.7562 5702.148,-912.8343 5709.1461,-912.6728"/>
</g>
<!-- leaf_87 -->
<g id="node88" class="node">
<title>leaf_87</title>
<polygon fill="none" stroke="#c0c0c0" points="5864,-904.002 5750,-904.002 5750,-865.4008 5864,-865.4008 5864,-904.002"/>
<text text-anchor="middle" x="5807" y="-888.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> is key/value,</text>
<text text-anchor="middle" x="5807" y="-873.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">and</text>
</g>
<!-- raw_74&#45;&gt;leaf_87 -->
<g id="edge87" class="edge">
<title>raw_74&#45;&gt;leaf_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5807,-1993.9379C5807,-1864.0895 5807,-1077.3822 5807,-914.2872"/>
<polygon fill="#000000" stroke="#000000" points="5810.5001,-914.0481 5807,-904.0481 5803.5001,-914.0481 5810.5001,-914.0481"/>
</g>
<!-- leaf_88 -->
<g id="node89" class="node">
<title>leaf_88</title>
<polygon fill="none" stroke="#c0c0c0" points="5936,-902.7014 5882,-902.7014 5882,-866.7014 5936,-866.7014 5936,-902.7014"/>
<text text-anchor="middle" x="5909" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_75&#45;&gt;leaf_88 -->
<g id="edge88" class="edge">
<title>prespace_75&#45;&gt;leaf_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5898.1772,-1993.9379C5899.4469,-1863.8043 5907.1538,-1073.9236 5908.7217,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="5912.226,-912.7899 5908.8238,-902.7562 5905.2263,-912.7215 5912.226,-912.7899"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="6008,-902.7014 5954,-902.7014 5954,-866.7014 6008,-866.7014 6008,-902.7014"/>
<text text-anchor="middle" x="5981" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">h</text>
</g>
<!-- literal_76&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>literal_76&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5993.7905,-1993.9379C5992.29,-1863.8043 5983.1819,-1073.9236 5981.3289,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="5984.8234,-912.7151 5981.2082,-902.7562 5977.8238,-912.7959 5984.8234,-912.7151"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="6238,-902.7014 6026,-902.7014 6026,-866.7014 6238,-866.7014 6238,-902.7014"/>
<text text-anchor="middle" x="6132" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> is some weird object on the</text>
</g>
<!-- raw_77&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>raw_77&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6101.4995,-1993.9379C6105.0778,-1863.8043 6126.797,-1073.9236 6131.2158,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="6134.7273,-912.8487 6131.5036,-902.7562 6127.7299,-912.6562 6134.7273,-912.8487"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6310,-902.7014 6256,-902.7014 6256,-866.7014 6310,-866.7014 6310,-902.7014"/>
<text text-anchor="middle" x="6283" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_78&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>prespace_78&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6211.3772,-1993.9795C6218.0591,-1942.3718 6237.1599,-1790.1683 6247,-1663.2027 6269.6963,-1370.3564 6279.7875,-1014.3487 6282.3308,-912.8928"/>
<polygon fill="#000000" stroke="#000000" points="6285.8312,-912.9151 6282.579,-902.8318 6278.8333,-912.7424 6285.8312,-912.9151"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="6382,-902.7014 6328,-902.7014 6328,-866.7014 6382,-866.7014 6382,-902.7014"/>
<text text-anchor="middle" x="6355" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">[0]</text>
</g>
<!-- literal_79&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>literal_79&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6322.5317,-1993.9379C6326.3408,-1863.8043 6349.4613,-1073.9236 6354.1652,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="6357.6773,-912.8544 6354.4715,-902.7562 6350.6803,-912.6495 6357.6773,-912.8544"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="6640,-904.002 6400,-904.002 6400,-865.4008 6640,-865.4008 6640,-904.002"/>
<text text-anchor="middle" x="6520" y="-888.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> index which has column&#45;centered</text>
<text text-anchor="middle" x="6520" y="-873.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">values.</text>
</g>
<!-- raw_80&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>raw_80&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6459.9829,-1993.9379C6467.0085,-1864.0895 6509.5747,-1077.3822 6518.3992,-914.2872"/>
<polygon fill="#000000" stroke="#000000" points="6521.9077,-914.2226 6518.9532,-904.0481 6514.918,-913.8444 6521.9077,-914.2226"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="6940,-904.6035 6658,-904.6035 6658,-864.7993 6940,-864.7993 6940,-904.6035"/>
<text text-anchor="middle" x="6799" y="-873.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ve been getting back all three. Hmm.</text>
</g>
<!-- raw_94&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>raw_94&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6667.1591,-1993.9379C6682.5761,-1864.2279 6775.8992,-1079.0588 6795.4213,-914.8109"/>
<polygon fill="#000000" stroke="#000000" points="6798.9434,-914.8313 6796.6482,-904.4881 6791.9923,-914.005 6798.9434,-914.8313"/>
</g>
<!-- leaf_103 -->
<g id="node104" class="node">
<title>leaf_103</title>
<polygon fill="none" stroke="#c0c0c0" points="7149.5,-904.6035 6958.5,-904.6035 6958.5,-864.7993 7149.5,-864.7993 7149.5,-904.6035"/>
<text text-anchor="middle" x="7054" y="-873.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">Also the return format is</text>
</g>
<!-- raw_96&#45;&gt;leaf_103 -->
<g id="edge103" class="edge">
<title>raw_96&#45;&gt;leaf_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7083.5166,-1993.9379C7080.0651,-1864.2279 7059.1718,-1079.0588 7054.8012,-914.8109"/>
<polygon fill="#000000" stroke="#000000" points="7058.2914,-914.3914 7054.5265,-904.4881 7051.2939,-914.5777 7058.2914,-914.3914"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="7222,-902.7014 7168,-902.7014 7168,-866.7014 7222,-866.7014 7222,-902.7014"/>
<text text-anchor="middle" x="7195" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_97&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>prespace_97&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7199.9194,-1993.9379C7199.3423,-1863.8043 7195.8392,-1073.9236 7195.1265,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="7198.6245,-912.7405 7195.0801,-902.7562 7191.6246,-912.7717 7198.6245,-912.7405"/>
</g>
<!-- leaf_105 -->
<g id="node106" class="node">
<title>leaf_105</title>
<polygon fill="none" stroke="#c0c0c0" points="7361.5,-902.7014 7240.5,-902.7014 7240.5,-866.7014 7361.5,-866.7014 7361.5,-902.7014"/>
<text text-anchor="middle" x="7301" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">resultset, nrow</text>
</g>
<!-- literal_98&#45;&gt;leaf_105 -->
<g id="edge105" class="edge">
<title>literal_98&#45;&gt;leaf_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7328.5488,-1993.9379C7325.3169,-1863.8043 7305.6995,-1073.9236 7301.7083,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="7305.1957,-912.6662 7301.4484,-902.7562 7298.1979,-912.84 7305.1957,-912.6662"/>
</g>
<!-- leaf_106 -->
<g id="node107" class="node">
<title>leaf_106</title>
<polygon fill="none" stroke="#c0c0c0" points="7620,-902.7014 7380,-902.7014 7380,-866.7014 7620,-866.7014 7620,-902.7014"/>
<text text-anchor="middle" x="7500" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> which mitigates the damage from</text>
</g>
<!-- raw_99&#45;&gt;leaf_106 -->
<g id="edge106" class="edge">
<title>raw_99&#45;&gt;leaf_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7466.5478,-1993.9379C7470.4724,-1863.8043 7494.2935,-1073.9236 7499.1399,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="7502.6524,-912.8572 7499.4555,-902.7562 7495.6556,-912.6461 7502.6524,-912.8572"/>
</g>
<!-- leaf_107 -->
<g id="node108" class="node">
<title>leaf_107</title>
<polygon fill="none" stroke="#c0c0c0" points="7692,-902.7014 7638,-902.7014 7638,-866.7014 7692,-866.7014 7692,-902.7014"/>
</g>
<!-- prespace_100&#45;&gt;leaf_107 -->
<g id="edge107" class="edge">
<title>prespace_100&#45;&gt;leaf_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7613.8379,-1993.9379C7619.8401,-1863.8043 7656.2724,-1073.9236 7663.6845,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="7667.2027,-912.9069 7664.1672,-902.7562 7660.2101,-912.5843 7667.2027,-912.9069"/>
</g>
<!-- leaf_108 -->
<g id="node109" class="node">
<title>leaf_108</title>
<polygon fill="none" stroke="#c0c0c0" points="7764,-902.7014 7710,-902.7014 7710,-866.7014 7764,-866.7014 7764,-902.7014"/>
<text text-anchor="middle" x="7737" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">NULL</text>
</g>
<!-- literal_101&#45;&gt;leaf_108 -->
<g id="edge108" class="edge">
<title>literal_101&#45;&gt;leaf_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7723.2256,-1993.9379C7724.8416,-1863.8043 7734.6503,-1073.9236 7736.6458,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="7740.1513,-912.7989 7736.7758,-902.7562 7733.1518,-912.7119 7740.1513,-912.7989"/>
</g>
<!-- leaf_109 -->
<g id="node110" class="node">
<title>leaf_109</title>
<polygon fill="none" stroke="#c0c0c0" points="7847.5,-904.6035 7782.5,-904.6035 7782.5,-864.7993 7847.5,-864.7993 7847.5,-904.6035"/>
<text text-anchor="middle" x="7815" y="-889.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> holes.</text>
</g>
<!-- raw_102&#45;&gt;leaf_109 -->
<g id="edge109" class="edge">
<title>raw_102&#45;&gt;leaf_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7813.0322,-1993.9379C7813.2623,-1864.2279 7814.6552,-1079.0588 7814.9466,-914.8109"/>
<polygon fill="#000000" stroke="#000000" points="7818.4471,-914.4943 7814.9649,-904.4881 7811.4471,-914.4818 7818.4471,-914.4943"/>
</g>
<!-- leaf_113 -->
<g id="node114" class="node">
<title>leaf_113</title>
<polygon fill="none" stroke="#c0c0c0" points="8008,-902.7014 7866,-902.7014 7866,-866.7014 8008,-866.7014 8008,-902.7014"/>
<text text-anchor="middle" x="7937" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">*** SQLite battery</text>
</g>
<!-- header_110&#45;&gt;leaf_113 -->
<g id="edge113" class="edge">
<title>header_110&#45;&gt;leaf_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7937,-1993.9379C7937,-1863.8043 7937,-1073.9236 7937,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="7940.5001,-912.7562 7937,-902.7562 7933.5001,-912.7562 7940.5001,-912.7562"/>
</g>
<!-- raw_114 -->
<g id="node115" class="node">
<title>raw_114</title>
<ellipse fill="none" stroke="#000000" cx="8053" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="8053" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_111&#45;&gt;raw_114 -->
<g id="edge114" class="edge">
<title>prose_111&#45;&gt;raw_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8065.7905,-1993.9379C8064.29,-1863.8043 8055.1819,-1073.9236 8053.3289,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="8056.8234,-912.7151 8053.2082,-902.7562 8049.8238,-912.7959 8056.8234,-912.7151"/>
</g>
<!-- leaf_116 -->
<g id="node117" class="node">
<title>leaf_116</title>
<polygon fill="none" stroke="#c0c0c0" points="8646,-1663.2041 8098,-1663.2041 8098,-106.1988 8646,-106.1988 8646,-1663.2041"/>
<text text-anchor="middle" x="8372" y="-1648.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.HISTORY_LIMIT = 1000</text>
<text text-anchor="middle" x="8372" y="-1616.6027" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_project_table = [[</text>
<text text-anchor="middle" x="8372" y="-1601.2027" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS project (</text>
<text text-anchor="middle" x="8372" y="-1585.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">project_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-1570.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">directory TEXT UNIQUE,</text>
<text text-anchor="middle" x="8372" y="-1555.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">time DATETIME DEFAULT CURRENT_TIMESTAMP );</text>
<text text-anchor="middle" x="8372" y="-1539.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-1508.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_repl_table = [[</text>
<text text-anchor="middle" x="8372" y="-1492.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS repl (</text>
<text text-anchor="middle" x="8372" y="-1477.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">line_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-1462.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">project INTEGER,</text>
<text text-anchor="middle" x="8372" y="-1446.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">line TEXT,</text>
<text text-anchor="middle" x="8372" y="-1431.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">time DATETIME DEFAULT CURRENT_TIMESTAMP,</text>
<text text-anchor="middle" x="8372" y="-1415.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">FOREIGN KEY (project)</text>
<text text-anchor="middle" x="8372" y="-1400.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;REFERENCES project (project_id)</text>
<text text-anchor="middle" x="8372" y="-1385.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ON DELETE CASCADE );</text>
<text text-anchor="middle" x="8372" y="-1369.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-1338.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_result_table = [[</text>
<text text-anchor="middle" x="8372" y="-1322.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS result (</text>
<text text-anchor="middle" x="8372" y="-1307.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">result_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-1292.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">line_id INTEGER,</text>
<text text-anchor="middle" x="8372" y="-1276.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">repr text NOT NULL,</text>
<text text-anchor="middle" x="8372" y="-1261.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">value blob,</text>
<text text-anchor="middle" x="8372" y="-1245.802" font-family="Inconsolata" font-size="14.00" fill="#000000">FOREIGN KEY (line_id)</text>
<text text-anchor="middle" x="8372" y="-1230.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;REFERENCES repl (line_id)</text>
<text text-anchor="middle" x="8372" y="-1215.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ON DELETE CASCADE );</text>
<text text-anchor="middle" x="8372" y="-1199.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-1168.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local create_session_table = [[</text>
<text text-anchor="middle" x="8372" y="-1152.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">CREATE TABLE IF NOT EXISTS session (</text>
<text text-anchor="middle" x="8372" y="-1137.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">session_id INTEGER PRIMARY KEY AUTOINCREMENT,</text>
<text text-anchor="middle" x="8372" y="-1122.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">name TEXT,</text>
<text text-anchor="middle" x="8372" y="-1106.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">project INTEGER,</text>
<text text-anchor="middle" x="8372" y="-1091.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; These two are line_ids</text>
<text text-anchor="middle" x="8372" y="-1075.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">start INTEGER NOT NULL,</text>
<text text-anchor="middle" x="8372" y="-1060.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">end INTEGER,</text>
<text text-anchor="middle" x="8372" y="-1045.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">test BOOLEAN,</text>
<text text-anchor="middle" x="8372" y="-1029.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">sha TEXT,</text>
<text text-anchor="middle" x="8372" y="-1014.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">FOREIGN KEY (project)</text>
<text text-anchor="middle" x="8372" y="-998.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;REFERENCES project (project_id)</text>
<text text-anchor="middle" x="8372" y="-983.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ON DELETE CASCADE );</text>
<text text-anchor="middle" x="8372" y="-968.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-936.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert_line_stmt = [[</text>
<text text-anchor="middle" x="8372" y="-921.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">INSERT INTO repl (project, line) VALUES (:project, :line);</text>
<text text-anchor="middle" x="8372" y="-905.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-874.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert_result_stmt = [[</text>
<text text-anchor="middle" x="8372" y="-859.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">INSERT INTO results (line_id, repr) VALUES (:line_id, :repr);</text>
<text text-anchor="middle" x="8372" y="-843.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-812.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local insert_project = [[</text>
<text text-anchor="middle" x="8372" y="-796.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">INSERT INTO project (directory) VALUES (:dir);</text>
<text text-anchor="middle" x="8372" y="-781.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-750.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_tables = [[</text>
<text text-anchor="middle" x="8372" y="-734.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT name FROM sqlite_master WHERE type=&#39;table&#39;;</text>
<text text-anchor="middle" x="8372" y="-719.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-687.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_recent = [[</text>
<text text-anchor="middle" x="8372" y="-672.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT CAST (line_id AS REAL), line FROM repl</text>
<text text-anchor="middle" x="8372" y="-657.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;WHERE project = %d</text>
<text text-anchor="middle" x="8372" y="-641.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ORDER BY time</text>
<text text-anchor="middle" x="8372" y="-626.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;DESC LIMIT %d;</text>
<text text-anchor="middle" x="8372" y="-610.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_project = [[</text>
<text text-anchor="middle" x="8372" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT CAST (project_id AS REAL) FROM project</text>
<text text-anchor="middle" x="8372" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;WHERE directory = %s;</text>
<text text-anchor="middle" x="8372" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-501.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local get_reprs = [[</text>
<text text-anchor="middle" x="8372" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">SELECT CAST (repl.line_id AS REAL), result.repr</text>
<text text-anchor="middle" x="8372" y="-471.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">FROM repl</text>
<text text-anchor="middle" x="8372" y="-455.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">LEFT OUTER JOIN result</text>
<text text-anchor="middle" x="8372" y="-440.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">ON repl.line_id = result.line_id</text>
<text text-anchor="middle" x="8372" y="-424.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">WHERE repl.project = %d</text>
<text text-anchor="middle" x="8372" y="-409.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">ORDER BY result.</text>
<text text-anchor="middle" x="8372" y="-394.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">DESC LIMIT %d;</text>
<text text-anchor="middle" x="8372" y="-378.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="8372" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local home_dir = io.popen(&quot;echo $HOME&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local bridge_home = io.popen(&quot;echo $BRIDGE_HOME&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.bridge_home = bridge_home ~= &quot;&quot; and bridge_home</text>
<text text-anchor="middle" x="8372" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or home_dir .. &quot;/.bridge&quot;</text>
<text text-anchor="middle" x="8372" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.project = io.popen(&quot;pwd&quot;, &quot;r&quot;):read(&quot;*a&quot;):sub(1, &#45;2)</text>
<text text-anchor="middle" x="8372" y="-222.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function has(table, name)</text>
<text text-anchor="middle" x="8372" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _,v in ipairs(table) do</text>
<text text-anchor="middle" x="8372" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if name == v then</text>
<text text-anchor="middle" x="8372" y="-176.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="8372" y="-160.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8372" y="-145.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="8372" y="-129.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return false</text>
<text text-anchor="middle" x="8372" y="-114.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_112&#45;&gt;leaf_116 -->
<g id="edge116" class="edge">
<title>codeblock_112&#45;&gt;leaf_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8287.3857,-1993.9379C8290.8308,-1948.7747 8300.3375,-1824.1481 8311.7959,-1673.9362"/>
<polygon fill="#000000" stroke="#000000" points="8315.318,-1673.7794 8312.5888,-1663.5421 8308.3382,-1673.2469 8315.318,-1673.7794"/>
</g>
<!-- leaf_115 -->
<g id="node116" class="node">
<title>leaf_115</title>
<polygon fill="none" stroke="#c0c0c0" points="8018,-53.1 7964,-53.1 7964,-17.1 8018,-17.1 8018,-53.1"/>
</g>
<!-- raw_114&#45;&gt;leaf_115 -->
<g id="edge115" class="edge">
<title>raw_114&#45;&gt;leaf_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8054.1665,-866.6357C8059.3012,-780.6899 8077.0675,-404.9873 8017,-106.2001 8014.0275,-91.4141 8008.4958,-75.598 8003.2965,-62.6461"/>
<polygon fill="#000000" stroke="#000000" points="8006.5073,-61.2518 7999.4332,-53.3646 8000.0447,-63.9417 8006.5073,-61.2518"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="8820,-902.7014 8664,-902.7014 8664,-866.7014 8820,-866.7014 8820,-902.7014"/>
<text text-anchor="middle" x="8742" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:load()</text>
</g>
<!-- header_117&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>header_117&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8732.1611,-1993.9379C8733.3154,-1863.8043 8740.3216,-1073.9236 8741.747,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="8745.2509,-912.7869 8741.8399,-902.7562 8738.2512,-912.7247 8745.2509,-912.7869"/>
</g>
<!-- raw_122 -->
<g id="node123" class="node">
<title>raw_122</title>
<ellipse fill="none" stroke="#000000" cx="8865" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="8865" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_118&#45;&gt;raw_122 -->
<g id="edge122" class="edge">
<title>prose_118&#45;&gt;raw_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8865,-1993.9379C8865,-1863.8043 8865,-1073.9236 8865,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="8868.5001,-912.7562 8865,-902.7562 8861.5001,-912.7562 8868.5001,-912.7562"/>
</g>
<!-- raw_124 -->
<g id="node125" class="node">
<title>raw_124</title>
<ellipse fill="none" stroke="#000000" cx="8937" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="8937" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_119&#45;&gt;raw_124 -->
<g id="edge124" class="edge">
<title>prose_119&#45;&gt;raw_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8946.8389,-1993.9379C8945.6846,-1863.8043 8938.6784,-1073.9236 8937.253,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="8940.7488,-912.7247 8937.1601,-902.7562 8933.7491,-912.7869 8940.7488,-912.7247"/>
</g>
<!-- leaf_126 -->
<g id="node127" class="node">
<title>leaf_126</title>
<polygon fill="none" stroke="#c0c0c0" points="9537.5,-1404.5035 8982.5,-1404.5035 8982.5,-364.8993 9537.5,-364.8993 9537.5,-1404.5035"/>
<text text-anchor="middle" x="9260" y="-1389.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.load(historian)</text>
<text text-anchor="middle" x="9260" y="-1374.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local conn = sql.open(historian.bridge_home)</text>
<text text-anchor="middle" x="9260" y="-1358.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.conn = conn</text>
<text text-anchor="middle" x="9260" y="-1343.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Set up bridge tables</text>
<text text-anchor="middle" x="9260" y="-1327.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn.pragma.foreign_keys(true)</text>
<text text-anchor="middle" x="9260" y="-1312.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn:exec(create_project_table)</text>
<text text-anchor="middle" x="9260" y="-1297.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn:exec(create_result_table)</text>
<text text-anchor="middle" x="9260" y="-1281.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn:exec(create_repl_table)</text>
<text text-anchor="middle" x="9260" y="-1266.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn:exec(create_session_table)</text>
<text text-anchor="middle" x="9260" y="-1250.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Retrive project id</text>
<text text-anchor="middle" x="9260" y="-1235.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local proj_val, proj_row = sql.pexec(conn,</text>
<text text-anchor="middle" x="9260" y="-1220.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sql.format(get_project, historian.project),</text>
<text text-anchor="middle" x="9260" y="-1204.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;i&quot;)</text>
<text text-anchor="middle" x="9260" y="-1189.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not proj_val then</text>
<text text-anchor="middle" x="9260" y="-1173.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local ins_proj_stmt = conn:prepare(insert_project)</text>
<text text-anchor="middle" x="9260" y="-1158.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;ins_proj_stmt:bindkv {dir = historian.project}</text>
<text text-anchor="middle" x="9260" y="-1143.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;proj_val, proj_row = ins_proj_stmt:step()</text>
<text text-anchor="middle" x="9260" y="-1127.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; retry</text>
<text text-anchor="middle" x="9260" y="-1112.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;proj_val, proj_row = sql.pexec(conn,</text>
<text text-anchor="middle" x="9260" y="-1096.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sql.format(get_project, historian.project),</text>
<text text-anchor="middle" x="9260" y="-1081.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;i&quot;)</text>
<text text-anchor="middle" x="9260" y="-1066.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not proj_val then</text>
<text text-anchor="middle" x="9260" y="-1050.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error &quot;no project&quot;</text>
<text text-anchor="middle" x="9260" y="-1035.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9260" y="-1019.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="9260" y="-1004.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local project_id = proj_val[1]</text>
<text text-anchor="middle" x="9260" y="-989.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Create insert prepared statements</text>
<text text-anchor="middle" x="9260" y="-973.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.insert_line_stmt = conn:prepare(insert_line_stmt)</text>
<text text-anchor="middle" x="9260" y="-958.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.insert_result_stmt = conn:prepare(insert_result_stmt)</text>
<text text-anchor="middle" x="9260" y="-942.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Retrieve history</text>
<text text-anchor="middle" x="9260" y="-927.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local pop_str = sql.format(get_recent, project_id,</text>
<text text-anchor="middle" x="9260" y="-912.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.HISTORY_LIMIT)</text>
<text text-anchor="middle" x="9260" y="-896.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local repl_val, repl_row = sql.pexec(conn, pop_str, &quot;i&quot;)</text>
<text text-anchor="middle" x="9260" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local res_str = sql.format(get_reprs, project_id,</text>
<text text-anchor="middle" x="9260" y="-865.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.HISTORY_LIMIT * 2)</text>
<text text-anchor="middle" x="9260" y="-850.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local res_val, res_row = sql.pexec(conn, res_str, &quot;i&quot;)</text>
<text text-anchor="middle" x="9260" y="-835.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if repl_val and res_val then</text>
<text text-anchor="middle" x="9260" y="-819.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local lines = reverse(repl_val[2])</text>
<text text-anchor="middle" x="9260" y="-804.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local line_ids = reverse(repl_val[1])</text>
<text text-anchor="middle" x="9260" y="-788.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local repl_map = {}</text>
<text text-anchor="middle" x="9260" y="-773.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i, v in ipairs(lines) do</text>
<text text-anchor="middle" x="9260" y="-758.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local buf = Txtbuf(v)</text>
<text text-anchor="middle" x="9260" y="-742.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian[i] = buf</text>
<text text-anchor="middle" x="9260" y="-727.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repl_map[line_ids[i]] = buf</text>
<text text-anchor="middle" x="9260" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9260" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.cursor = #historian</text>
<text text-anchor="middle" x="9260" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.repl_map = repl_map &#45;&#45; remove</text>
<text text-anchor="middle" x="9260" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; reuse line_id var for foreign keys</text>
<text text-anchor="middle" x="9260" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;line_ids = res_val[1]</text>
<text text-anchor="middle" x="9260" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local reprs = res_val[2]</text>
<text text-anchor="middle" x="9260" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; This is keyed by txtbuf with a string value.</text>
<text text-anchor="middle" x="9260" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local result_map = {}</text>
<text text-anchor="middle" x="9260" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, #reprs do</text>
<text text-anchor="middle" x="9260" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local buf = repl_map[line_ids[i]]</text>
<text text-anchor="middle" x="9260" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if buf then</text>
<text text-anchor="middle" x="9260" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local result = result_map[buf] or {frozen = true}</text>
<text text-anchor="middle" x="9260" y="-527.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result[#result + 1] = reprs[i]</text>
<text text-anchor="middle" x="9260" y="-511.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result.n = #result &#45;&#45; for compat with nil in live use</text>
<text text-anchor="middle" x="9260" y="-496.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result_map[buf] = result</text>
<text text-anchor="middle" x="9260" y="-480.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9260" y="-465.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="9260" y="-450.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.results = result_map</text>
<text text-anchor="middle" x="9260" y="-434.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="9260" y="-419.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; one of the &#39;row&#39; vals will have an error</text>
<text text-anchor="middle" x="9260" y="-403.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;error(repr_row .. res_row)</text>
<text text-anchor="middle" x="9260" y="-388.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="9260" y="-373.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_120&#45;&gt;leaf_126 -->
<g id="edge126" class="edge">
<title>codeblock_120&#45;&gt;leaf_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9174.4018,-1993.9379C9179.783,-1924.2052 9199.783,-1665.0323 9219.0976,-1414.7408"/>
<polygon fill="#000000" stroke="#000000" points="9222.5915,-1414.9542 9219.8713,-1404.7146 9215.6122,-1414.4156 9222.5915,-1414.9542"/>
</g>
<!-- leaf_123 -->
<g id="node124" class="node">
<title>leaf_123</title>
<polygon fill="none" stroke="#c0c0c0" points="8549.5,-63.0015 8036.5,-63.0015 8036.5,-7.1986 8549.5,-7.1986 8549.5,-63.0015"/>
<text text-anchor="middle" x="8293" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Brings up the project history and (eventually) results and user config.</text>
</g>
<!-- raw_122&#45;&gt;leaf_123 -->
<g id="edge123" class="edge">
<title>raw_122&#45;&gt;leaf_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8867.1381,-866.4869C8879.1908,-760.2205 8934.4394,-221.0828 8829,-106.2001 8829,-106.2001 8660.4034,-83.8359 8512.3229,-64.1931"/>
<polygon fill="#000000" stroke="#000000" points="8512.5238,-60.6892 8502.1504,-62.8437 8511.6033,-67.6284 8512.5238,-60.6892"/>
</g>
<!-- leaf_125 -->
<g id="node126" class="node">
<title>leaf_125</title>
<polygon fill="none" stroke="#c0c0c0" points="9066.5,-62.4005 8567.5,-62.4005 8567.5,-7.7996 9066.5,-7.7996 9066.5,-62.4005"/>
<text text-anchor="middle" x="8817" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">Most of the complexity serves to make a simple key/value relationship</text>
<text text-anchor="middle" x="8817" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">between the regenerated txtbufs and their associated result history.</text>
</g>
<!-- raw_124&#45;&gt;leaf_125 -->
<g id="edge125" class="edge">
<title>raw_124&#45;&gt;leaf_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8938.0873,-866.5621C8944.0133,-762.9565 8969.6991,-245.8087 8901,-106.2001 8894.0108,-91.9969 8882.7473,-79.54 8870.7081,-69.1866"/>
<polygon fill="#000000" stroke="#000000" points="8872.6878,-66.2852 8862.7217,-62.6896 8868.2703,-71.7153 8872.6878,-66.2852"/>
</g>
<!-- leaf_133 -->
<g id="node134" class="node">
<title>leaf_133</title>
<polygon fill="none" stroke="#c0c0c0" points="10030.5,-902.7014 9811.5,-902.7014 9811.5,-866.7014 10030.5,-866.7014 10030.5,-902.7014"/>
<text text-anchor="middle" x="9921" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:persist(txtbuf)</text>
</g>
<!-- header_127&#45;&gt;leaf_133 -->
<g id="edge133" class="edge">
<title>header_127&#45;&gt;leaf_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9921,-1993.9379C9921,-1863.8043 9921,-1073.9236 9921,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="9924.5001,-912.7562 9921,-902.7562 9917.5001,-912.7562 9924.5001,-912.7562"/>
</g>
<!-- raw_134 -->
<g id="node135" class="node">
<title>raw_134</title>
<ellipse fill="none" stroke="#000000" cx="10080" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="10080" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_128&#45;&gt;raw_134 -->
<g id="edge134" class="edge">
<title>prose_128&#45;&gt;raw_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10084.9194,-1993.9379C10084.3423,-1863.8043 10080.8392,-1073.9236 10080.1265,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="10083.6245,-912.7405 10080.0801,-902.7562 10076.6246,-912.7717 10083.6245,-912.7405"/>
</g>
<!-- raw_136 -->
<g id="node137" class="node">
<title>raw_136</title>
<ellipse fill="none" stroke="#000000" cx="10159" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="10159" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_129&#45;&gt;raw_136 -->
<g id="edge136" class="edge">
<title>prose_129&#45;&gt;raw_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10166.8711,-1993.9379C10165.9477,-1863.8043 10160.3427,-1073.9236 10159.2024,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="10162.6991,-912.7311 10159.1281,-902.7562 10155.6993,-912.7808 10162.6991,-912.7311"/>
</g>
<!-- raw_138 -->
<g id="node139" class="node">
<title>raw_138</title>
<ellipse fill="none" stroke="#000000" cx="10353" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="10353" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_138 -->
<g id="edge138" class="edge">
<title>prose_130&#45;&gt;raw_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10591.2693,-1994.5984C10563.9694,-1944.6193 10486.2894,-1796.2891 10450,-1663.2027 10372.1288,-1377.6209 10356.5656,-1015.8505 10353.6407,-913.0751"/>
<polygon fill="#000000" stroke="#000000" points="10357.1345,-912.7914 10353.3689,-902.8884 10350.137,-912.9782 10357.1345,-912.7914"/>
</g>
<!-- prespace_139 -->
<g id="node140" class="node">
<title>prespace_139</title>
<ellipse fill="none" stroke="#000000" cx="10505" cy="-884.7014" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10505" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_139 -->
<g id="edge139" class="edge">
<title>prose_130&#45;&gt;prespace_139</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10598.6466,-1993.9705C10592.0049,-1942.3391 10572.8309,-1790.0792 10561,-1663.2027 10533.688,-1370.3043 10512.427,-1014.3329 10506.595,-912.8892"/>
<polygon fill="#000000" stroke="#000000" points="10510.085,-912.6131 10506.0194,-902.8294 10503.0964,-913.013 10510.085,-912.6131"/>
</g>
<!-- literal_140 -->
<g id="node141" class="node">
<title>literal_140</title>
<ellipse fill="none" stroke="#000000" cx="10601" cy="-884.7014" rx="31.481" ry="18"/>
<text text-anchor="middle" x="10601" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_140 -->
<g id="edge140" class="edge">
<title>prose_130&#45;&gt;literal_140</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10601,-1993.9379C10601,-1863.8043 10601,-1073.9236 10601,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="10604.5001,-912.7562 10601,-902.7562 10597.5001,-912.7562 10604.5001,-912.7562"/>
</g>
<!-- raw_141 -->
<g id="node142" class="node">
<title>raw_141</title>
<ellipse fill="none" stroke="#000000" cx="10677" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="10677" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_141 -->
<g id="edge141" class="edge">
<title>prose_130&#45;&gt;raw_141</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10603.5177,-1993.9847C10610.5917,-1942.3909 10630.794,-1790.2202 10641,-1663.2027 10664.5252,-1370.4218 10674.0395,-1014.3686 10676.3882,-912.8974"/>
<polygon fill="#000000" stroke="#000000" points="10679.8887,-912.9117 10676.6168,-902.8347 10672.8905,-912.7527 10679.8887,-912.9117"/>
</g>
<!-- prespace_142 -->
<g id="node143" class="node">
<title>prespace_142</title>
<ellipse fill="none" stroke="#000000" cx="10768" cy="-884.7014" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10768" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_142 -->
<g id="edge142" class="edge">
<title>prose_130&#45;&gt;prespace_142</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10598.0036,-1994.1561C10590.4532,-1942.7913 10575.6916,-1792.8913 10642,-1699.2027 10662.4392,-1670.3238 10693.4327,-1692.6794 10713,-1663.2027 10877.4411,-1415.4844 10800.3784,-1020.4198 10775.0157,-912.6392"/>
<polygon fill="#000000" stroke="#000000" points="10778.4019,-911.7508 10772.6647,-902.8438 10771.5952,-913.3845 10778.4019,-911.7508"/>
</g>
<!-- literal_143 -->
<g id="node144" class="node">
<title>literal_143</title>
<ellipse fill="none" stroke="#000000" cx="10864" cy="-884.7014" rx="31.481" ry="18"/>
<text text-anchor="middle" x="10864" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_143 -->
<g id="edge143" class="edge">
<title>prose_130&#45;&gt;literal_143</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10596.9562,-1993.943C10586.2639,-1940.6906 10563.188,-1783.3995 10642,-1699.2027 10698.0506,-1639.3225 10769.3166,-1725.2141 10823,-1663.2027 10922.2023,-1548.6112 10879.205,-1038.638 10866.8936,-912.8274"/>
<polygon fill="#000000" stroke="#000000" points="10870.3714,-912.43 10865.8996,-902.8252 10863.4057,-913.1223 10870.3714,-912.43"/>
</g>
<!-- raw_144 -->
<g id="node145" class="node">
<title>raw_144</title>
<ellipse fill="none" stroke="#000000" cx="10940" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="10940" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_144 -->
<g id="edge144" class="edge">
<title>prose_130&#45;&gt;raw_144</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10596.8017,-1994.0983C10585.4997,-1940.595 10560.5137,-1781.2007 10642,-1699.2027 10724.8518,-1615.8307 10824.7254,-1749.9832 10904,-1663.2027 11006.1924,-1551.3347 10957.126,-1039.3194 10943.2492,-912.9553"/>
<polygon fill="#000000" stroke="#000000" points="10946.7157,-912.4597 10942.1301,-902.9086 10939.7587,-913.2346 10946.7157,-912.4597"/>
</g>
<!-- raw_152 -->
<g id="node153" class="node">
<title>raw_152</title>
<ellipse fill="none" stroke="#000000" cx="11012" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="11012" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_131&#45;&gt;raw_152 -->
<g id="edge152" class="edge">
<title>prose_131&#45;&gt;raw_152</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10678.8909,-1994.1119C10667.8483,-1940.6465 10643.5933,-1781.3475 10725,-1699.2027 10804.3285,-1619.1551 10900.2367,-1746.6327 10976,-1663.2027 11077.8617,-1551.0334 11029.0432,-1039.244 11015.2336,-912.9411"/>
<polygon fill="#000000" stroke="#000000" points="11018.701,-912.4526 11014.12,-902.8994 11011.7437,-913.2243 11018.701,-912.4526"/>
</g>
<!-- leaf_154 -->
<g id="node155" class="node">
<title>leaf_154</title>
<polygon fill="none" stroke="#c0c0c0" points="11563,-1127.7024 11057,-1127.7024 11057,-641.7005 11563,-641.7005 11563,-1127.7024"/>
<text text-anchor="middle" x="11310" y="-1112.5019" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.persist(historian, txtbuf, results)</text>
<text text-anchor="middle" x="11310" y="-1097.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local lb = tostring(txtbuf)</text>
<text text-anchor="middle" x="11310" y="-1081.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if lb ~= &quot;&quot; then</text>
<text text-anchor="middle" x="11310" y="-1066.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.insert_line_stmt:bindkv { project = historian.project,</text>
<text text-anchor="middle" x="11310" y="-1050.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;line &#160;&#160;&#160;= lb }</text>
<text text-anchor="middle" x="11310" y="-1035.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local err = historian.insert_line_stmt:step()</text>
<text text-anchor="middle" x="11310" y="-1020.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not err then</text>
<text text-anchor="middle" x="11310" y="-1004.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_line_stmt:clearbind():reset()</text>
<text text-anchor="middle" x="11310" y="-989.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="11310" y="-973.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error(err)</text>
<text text-anchor="middle" x="11310" y="-958.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11310" y="-943.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local line_id = sql.lastRowId(historian.conn)</text>
<text text-anchor="middle" x="11310" y="-927.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if results and type(results) == &quot;table&quot; then</text>
<text text-anchor="middle" x="11310" y="-912.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _,v in ipairs(results) do</text>
<text text-anchor="middle" x="11310" y="-896.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; insert result repr</text>
<text text-anchor="middle" x="11310" y="-881.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; tostring() just for compactness</text>
<text text-anchor="middle" x="11310" y="-866.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_result_stmt:bindkv { line_id = line_id,</text>
<text text-anchor="middle" x="11310" y="-850.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repr = color.ts(v) }</text>
<text text-anchor="middle" x="11310" y="-835.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;err = historian.insert_result_stmt:step()</text>
<text text-anchor="middle" x="11310" y="-819.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not err then</text>
<text text-anchor="middle" x="11310" y="-804.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;historian.insert_result_stmt:clearbind():reset()</text>
<text text-anchor="middle" x="11310" y="-789.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11310" y="-773.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11310" y="-758.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11310" y="-726.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return true</text>
<text text-anchor="middle" x="11310" y="-711.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="11310" y="-696.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; A blank line can have no results and is uninteresting.</text>
<text text-anchor="middle" x="11310" y="-680.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="11310" y="-665.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11310" y="-649.901" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_132&#45;&gt;leaf_154 -->
<g id="edge154" class="edge">
<title>codeblock_132&#45;&gt;leaf_154</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10820.8871,-1993.86C10821.5875,-1940.3793 10831.1841,-1782.5237 10917,-1699.2027 10960.3207,-1657.1416 11004.1165,-1704.6764 11048,-1663.2027 11192.2429,-1526.8807 11257.086,-1308.6939 11286.2289,-1137.9433"/>
<polygon fill="#000000" stroke="#000000" points="11289.6853,-1138.4946 11287.8861,-1128.0537 11282.7815,-1137.3377 11289.6853,-1138.4946"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="9359.5,-63.0015 9084.5,-63.0015 9084.5,-7.1986 9359.5,-7.1986 9359.5,-63.0015"/>
<text text-anchor="middle" x="9222" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Persists a line and results to store.</text>
</g>
<!-- raw_134&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>raw_134&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10082.1029,-866.6989C10094.0808,-760.4965 10149.3581,-216.6755 10039,-106.2001 9986.3119,-53.456 9442.7799,-80.901 9369,-70.2001 9358.9643,-68.7445 9348.6084,-66.9285 9338.2576,-64.8939"/>
<polygon fill="#000000" stroke="#000000" points="9338.8425,-61.4413 9328.3459,-62.881 9337.4493,-68.3013 9338.8425,-61.4413"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="9940,-70.3004 9378,-70.3004 9378,.1003 9940,.1003 9940,-70.3004"/>
<text text-anchor="middle" x="9659" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">The hooks are in place to persist the results. I&#39;m starting with a string</text>
<text text-anchor="middle" x="9659" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">representation; the goal is to provide the sense of persistence across</text>
<text text-anchor="middle" x="9659" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">sessions, and supplement that over time with better and better approximations.</text>
</g>
<!-- raw_136&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>raw_136&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10165.0036,-867.0099C10195.4217,-773.7629 10323.1477,-334.9798 10116,-106.2001 10108.8665,-98.3216 10029.4429,-84.7958 9938.7538,-71.6426"/>
<polygon fill="#000000" stroke="#000000" points="9939.1957,-68.1702 9928.7985,-70.2065 9938.1963,-75.0985 9939.1957,-68.1702"/>
</g>
<!-- leaf_145 -->
<g id="node146" class="node">
<title>leaf_145</title>
<polygon fill="none" stroke="#c0c0c0" points="10478,-62.4005 9958,-62.4005 9958,-7.7996 10478,-7.7996 10478,-62.4005"/>
<text text-anchor="middle" x="10218" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">To really nail it down will require semantic analysis and hence thorough</text>
<text text-anchor="middle" x="10218" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">parsing. &#160;General&#45;purpose persistence tools belong in</text>
</g>
<!-- raw_138&#45;&gt;leaf_145 -->
<g id="edge145" class="edge">
<title>raw_138&#45;&gt;leaf_145</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10350.1179,-866.5632C10333.2692,-760.5289 10247.4597,-220.4998 10223.9582,-72.5967"/>
<polygon fill="#000000" stroke="#000000" points="10227.4015,-71.9635 10222.3755,-62.6367 10220.4883,-73.0621 10227.4015,-71.9635"/>
</g>
<!-- leaf_146 -->
<g id="node147" class="node">
<title>leaf_146</title>
<polygon fill="none" stroke="#c0c0c0" points="10550,-53.1 10496,-53.1 10496,-17.1 10550,-17.1 10550,-53.1"/>
<text text-anchor="middle" x="10523" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_139&#45;&gt;leaf_146 -->
<g id="edge146" class="edge">
<title>prespace_139&#45;&gt;leaf_146</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10505.3843,-866.5632C10507.6788,-758.2631 10519.5652,-197.2221 10522.3949,-63.6604"/>
<polygon fill="#000000" stroke="#000000" points="10525.899,-63.5012 10522.6117,-53.4293 10518.9005,-63.3529 10525.899,-63.5012"/>
</g>
<!-- leaf_147 -->
<g id="node148" class="node">
<title>leaf_147</title>
<polygon fill="none" stroke="#c0c0c0" points="10633.5,-53.1 10568.5,-53.1 10568.5,-17.1 10633.5,-17.1 10633.5,-53.1"/>
<text text-anchor="middle" x="10601" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlayer</text>
</g>
<!-- literal_140&#45;&gt;leaf_147 -->
<g id="edge147" class="edge">
<title>literal_140&#45;&gt;leaf_147</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10601,-866.5632C10601,-758.2631 10601,-197.2221 10601,-63.6604"/>
<polygon fill="#000000" stroke="#000000" points="10604.5001,-63.4293 10601,-53.4293 10597.5001,-63.4293 10604.5001,-63.4293"/>
</g>
<!-- leaf_148 -->
<g id="node149" class="node">
<title>leaf_148</title>
<polygon fill="none" stroke="#c0c0c0" points="10920,-54.4006 10652,-54.4006 10652,-15.7995 10920,-15.7995 10920,-54.4006"/>
<text text-anchor="middle" x="10786" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">, which will</text>
<text text-anchor="middle" x="10786" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">merge with our increasingly&#45;modified</text>
</g>
<!-- raw_141&#45;&gt;leaf_148 -->
<g id="edge148" class="edge">
<title>raw_141&#45;&gt;leaf_148</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10676.0647,-866.6337C10670.9846,-763.4262 10649.2139,-248.1207 10713,-106.2001 10720.8815,-88.6642 10735.2262,-73.204 10749.1266,-61.2173"/>
<polygon fill="#000000" stroke="#000000" points="10751.707,-63.6268 10757.2074,-54.5716 10747.2606,-58.2203 10751.707,-63.6268"/>
</g>
<!-- leaf_149 -->
<g id="node150" class="node">
<title>leaf_149</title>
<polygon fill="none" stroke="#c0c0c0" points="10992,-53.1 10938,-53.1 10938,-17.1 10992,-17.1 10992,-53.1"/>
<text text-anchor="middle" x="10965" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_142&#45;&gt;leaf_149 -->
<g id="edge149" class="edge">
<title>prespace_142&#45;&gt;leaf_149</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10766.697,-866.4082C10759.5531,-760.8315 10728.8279,-229.8066 10824,-106.2001 10854.097,-67.1111 10886.9813,-96.0499 10929,-70.2001 10933.5306,-67.4129 10937.9441,-63.9638 10942.0395,-60.3258"/>
<polygon fill="#000000" stroke="#000000" points="10944.661,-62.6618 10949.4704,-53.2215 10939.8236,-57.6021 10944.661,-62.6618"/>
</g>
<!-- leaf_150 -->
<g id="node151" class="node">
<title>leaf_150</title>
<polygon fill="none" stroke="#c0c0c0" points="11068,-53.1 11010,-53.1 11010,-17.1 11068,-17.1 11068,-53.1"/>
<text text-anchor="middle" x="11039" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlite</text>
</g>
<!-- literal_143&#45;&gt;leaf_150 -->
<g id="edge150" class="edge">
<title>literal_143&#45;&gt;leaf_150</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10862.3337,-866.4682C10853.0909,-761.2292 10811.7841,-231.7834 10904,-106.2001 10931.2168,-69.1351 10961.8107,-94.2576 11001,-70.2001 11005.5708,-67.3942 11010.0769,-63.9873 11014.2999,-60.4126"/>
<polygon fill="#000000" stroke="#000000" points="11016.9389,-62.7453 11022.0142,-53.4451 11012.247,-57.5504 11016.9389,-62.7453"/>
</g>
<!-- leaf_151 -->
<g id="node152" class="node">
<title>leaf_151</title>
<polygon fill="none" stroke="#c0c0c0" points="11172,-53.1 11086,-53.1 11086,-17.1 11172,-17.1 11172,-53.1"/>
<text text-anchor="middle" x="11129" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> bindings.</text>
</g>
<!-- raw_144&#45;&gt;leaf_151 -->
<g id="edge151" class="edge">
<title>raw_144&#45;&gt;leaf_151</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10938.2062,-866.4562C10928.2323,-761.1498 10883.3148,-231.3889 10976,-106.2001 11004.3563,-67.8995 11034.4707,-91.7006 11077,-70.2001 11083.5491,-66.8892 11090.2528,-62.8899 11096.5761,-58.7937"/>
<polygon fill="#000000" stroke="#000000" points="11098.5563,-61.68 11104.9127,-53.2037 11094.6578,-55.866 11098.5563,-61.68"/>
</g>
<!-- leaf_153 -->
<g id="node154" class="node">
<title>leaf_153</title>
<polygon fill="none" stroke="#c0c0c0" points="11724,-62.4005 11190,-62.4005 11190,-7.7996 11724,-7.7996 11724,-62.4005"/>
<text text-anchor="middle" x="11457" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">Medium&#45;term goal is to hash any Lua object in a way that will resolve to a</text>
<text text-anchor="middle" x="11457" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">common value for any identical semantics.</text>
</g>
<!-- raw_152&#45;&gt;leaf_153 -->
<g id="edge153" class="edge">
<title>raw_152&#45;&gt;leaf_153</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11009.9313,-866.5494C10998.2739,-760.6384 10944.8931,-223.1808 11048,-106.2001 11055.653,-97.5174 11158.6301,-79.643 11259.3284,-63.9893"/>
<polygon fill="#000000" stroke="#000000" points="11260.0303,-67.4225 11269.3769,-62.4334 11258.9591,-60.5049 11260.0303,-67.4225"/>
</g>
<!-- leaf_158 -->
<g id="node159" class="node">
<title>leaf_158</title>
<polygon fill="none" stroke="#c0c0c0" points="11117.5,-2030.1033 10926.5,-2030.1033 10926.5,-1994.1033 11117.5,-1994.1033 11117.5,-2030.1033"/>
<text text-anchor="middle" x="11022" y="-2008.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">** Historian:search(frag)</text>
</g>
<!-- header_155&#45;&gt;leaf_158 -->
<g id="edge158" class="edge">
<title>header_155&#45;&gt;leaf_158</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11017.2181,-2408.5269C11018.0043,-2343.3439 11020.698,-2120.0411 11021.6573,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="11025.1598,-2040.3171 11021.7808,-2030.2756 11018.1603,-2040.2326 11025.1598,-2040.3171"/>
</g>
<!-- raw_159 -->
<g id="node160" class="node">
<title>raw_159</title>
<ellipse fill="none" stroke="#000000" cx="11171" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="11171" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_156&#45;&gt;raw_159 -->
<g id="edge159" class="edge">
<title>prose_156&#45;&gt;raw_159</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11174.8256,-2408.5269C11174.1965,-2343.3439 11172.0416,-2120.0411 11171.2741,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="11174.7718,-2040.2413 11171.1754,-2030.2756 11167.7721,-2040.3089 11174.7718,-2040.2413"/>
</g>
<!-- leaf_161 -->
<g id="node162" class="node">
<title>leaf_161</title>
<polygon fill="none" stroke="#c0c0c0" points="11771.5,-2324.9045 11216.5,-2324.9045 11216.5,-1699.3021 11771.5,-1699.3021 11771.5,-2324.9045"/>
<text text-anchor="middle" x="11494" y="-2309.8039" font-family="Inconsolata" font-size="14.00" fill="#000000">local P, match = L.P, L.match</text>
<text text-anchor="middle" x="11494" y="-2278.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; second_best is broke and I don&#39;t know why</text>
<text text-anchor="middle" x="11494" y="-2263.0038" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; also this fails on a single key search &gt;.&lt;</text>
<text text-anchor="middle" x="11494" y="-2247.6038" font-family="Inconsolata" font-size="14.00" fill="#000000">local function fuzz_patt(frag)</text>
<text text-anchor="middle" x="11494" y="-2232.2038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;frag = type(frag) == &quot;string&quot; and codepoints(frag) or frag</text>
<text text-anchor="middle" x="11494" y="-2216.8037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt = &#160;&#160;&#160;&#160;&#160;&#160;&#160;(P(1) &#45; P(frag[1]))^0</text>
<text text-anchor="middle" x="11494" y="-2201.4037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = 1 , #frag &#45; 1 do</text>
<text text-anchor="middle" x="11494" y="-2186.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local v = frag[i]</text>
<text text-anchor="middle" x="11494" y="-2170.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;patt = patt * (P(v) * (P(1) &#45; P(frag[i + 1]))^0)</text>
<text text-anchor="middle" x="11494" y="-2155.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11494" y="-2139.8036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;patt = patt * P(frag[#frag])</text>
<text text-anchor="middle" x="11494" y="-2124.4036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return patt</text>
<text text-anchor="middle" x="11494" y="-2109.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="11494" y="-2077.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.search(historian, frag)</text>
<text text-anchor="middle" x="11494" y="-2062.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local collection = {}</text>
<text text-anchor="middle" x="11494" y="-2046.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local best = true</text>
<text text-anchor="middle" x="11494" y="-2031.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt = fuzz_patt(frag)</text>
<text text-anchor="middle" x="11494" y="-2016.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = #historian, 1, &#45;1 do</text>
<text text-anchor="middle" x="11494" y="-2000.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local score = match(patt, tostring(historian[i]))</text>
<text text-anchor="middle" x="11494" y="-1985.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if score then</text>
<text text-anchor="middle" x="11494" y="-1969.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collection[#collection + 1] = tostring(historian[i])</text>
<text text-anchor="middle" x="11494" y="-1954.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11494" y="-1939.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11494" y="-1923.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if #collection == 0 then</text>
<text text-anchor="middle" x="11494" y="-1908.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; try the transpose</text>
<text text-anchor="middle" x="11494" y="-1892.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;best = false</text>
<text text-anchor="middle" x="11494" y="-1877.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local slip = sub(frag, 1, &#45;3) .. sub(frag, &#45;1, &#45;1) .. sub(frag, &#45;2, &#45;2)</text>
<text text-anchor="middle" x="11494" y="-1862.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local second = fuzz_patt(slip)</text>
<text text-anchor="middle" x="11494" y="-1846.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = #historian, 1, &#45;1 do</text>
<text text-anchor="middle" x="11494" y="-1831.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local score = match(second, tostring(historian[i]))</text>
<text text-anchor="middle" x="11494" y="-1815.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if score then</text>
<text text-anchor="middle" x="11494" y="-1800.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collection[#collection + 1] = tostring(historian[i])</text>
<text text-anchor="middle" x="11494" y="-1785.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11494" y="-1769.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="11494" y="-1754.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="11494" y="-1722.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return collection, best</text>
<text text-anchor="middle" x="11494" y="-1707.4028" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_157&#45;&gt;leaf_161 -->
<g id="edge161" class="edge">
<title>codeblock_157&#45;&gt;leaf_161</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11406.0123,-2408.5269C11409.6167,-2392.2876 11415.3993,-2366.2342 11422.3241,-2335.0349"/>
<polygon fill="#000000" stroke="#000000" points="11425.7587,-2335.7131 11424.5087,-2325.1923 11418.925,-2334.1963 11425.7587,-2335.7131"/>
</g>
<!-- leaf_160 -->
<g id="node161" class="node">
<title>leaf_160</title>
<polygon fill="none" stroke="#c0c0c0" points="11635,-902.7014 11581,-902.7014 11581,-866.7014 11635,-866.7014 11635,-902.7014"/>
</g>
<!-- raw_159&#45;&gt;leaf_160 -->
<g id="edge160" class="edge">
<title>raw_159&#45;&gt;leaf_160</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11166.3222,-1993.9983C11153.63,-1940.2158 11124.756,-1780.1221 11207,-1699.2027 11265.0985,-1642.04 11515.8883,-1722.3169 11572,-1663.2027 11777.7214,-1446.4735 11655.2787,-1024.274 11617.7825,-912.436"/>
<polygon fill="#000000" stroke="#000000" points="11621.0672,-911.2238 11614.5317,-902.8848 11614.4405,-913.4793 11621.0672,-911.2238"/>
</g>
<!-- leaf_167 -->
<g id="node168" class="node">
<title>leaf_167</title>
<polygon fill="none" stroke="#c0c0c0" points="11938.5,-2030.1033 11789.5,-2030.1033 11789.5,-1994.1033 11938.5,-1994.1033 11938.5,-2030.1033"/>
<text text-anchor="middle" x="11864" y="-2008.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">** Historian:prev()</text>
</g>
<!-- header_162&#45;&gt;leaf_167 -->
<g id="edge167" class="edge">
<title>header_162&#45;&gt;leaf_167</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11873.5639,-2408.5269C11871.9913,-2343.3439 11866.604,-2120.0411 11864.6854,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="11868.1787,-2040.1882 11864.4384,-2030.2756 11861.1807,-2040.3571 11868.1787,-2040.1882"/>
</g>
<!-- raw_168 -->
<g id="node169" class="node">
<title>raw_168</title>
<ellipse fill="none" stroke="#000000" cx="11984" cy="-2012.1033" rx="27" ry="18"/>
<text text-anchor="middle" x="11984" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_163&#45;&gt;raw_168 -->
<g id="edge168" class="edge">
<title>prose_163&#45;&gt;raw_168</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12042.9694,-2408.835C12036.3694,-2388.7228 12025.9388,-2354.8692 12020,-2325.0039 11999.3535,-2221.1771 11989.3463,-2095.4426 11985.6942,-2040.3109"/>
<polygon fill="#000000" stroke="#000000" points="11989.182,-2040.008 11985.0472,-2030.2533 11982.1965,-2040.4574 11989.182,-2040.008"/>
</g>
<!-- leaf_170 -->
<g id="node171" class="node">
<title>leaf_170</title>
<polygon fill="none" stroke="#c0c0c0" points="12409,-2113.4836 12029,-2113.4836 12029,-1910.723 12409,-1910.723 12409,-2113.4836"/>
<text text-anchor="middle" x="12219" y="-2098.3435" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.prev(historian)</text>
<text text-anchor="middle" x="12219" y="-2082.9434" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if historian.cursor == 0 then</text>
<text text-anchor="middle" x="12219" y="-2067.5434" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Txtbuf()</text>
<text text-anchor="middle" x="12219" y="-2052.1434" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="12219" y="-2036.7433" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local Δ = historian.cursor &gt; 1 and 1 or 0</text>
<text text-anchor="middle" x="12219" y="-2017.9833" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local txtbuf = historian[historian.cursor &#45; Δ]</text>
<text text-anchor="middle" x="12219" y="-1999.2233" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = 1</text>
<text text-anchor="middle" x="12219" y="-1983.8233" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local result = historian.results[txtbuf]</text>
<text text-anchor="middle" x="12219" y="-1968.4233" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = historian.cursor &#45; Δ</text>
<text text-anchor="middle" x="12219" y="-1949.6633" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = #txtbuf.lines[txtbuf.cur_row] + 1</text>
<text text-anchor="middle" x="12219" y="-1934.2632" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return txtbuf:clone(), result</text>
<text text-anchor="middle" x="12219" y="-1918.8632" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_164&#45;&gt;leaf_170 -->
<g id="edge170" class="edge">
<title>codeblock_164&#45;&gt;leaf_170</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12198.9158,-2408.5269C12201.3811,-2359.8684 12208.3103,-2223.0977 12213.3412,-2123.797"/>
<polygon fill="#000000" stroke="#000000" points="12216.842,-2123.868 12213.8526,-2113.7037 12209.851,-2123.5138 12216.842,-2123.868"/>
</g>
<!-- header_171 -->
<g id="node172" class="node">
<title>header_171</title>
<ellipse fill="none" stroke="#000000" cx="12509" cy="-2012.1033" rx="82.2061" ry="18"/>
<text text-anchor="middle" x="12509" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:next()</text>
</g>
<!-- section_165&#45;&gt;header_171 -->
<g id="edge171" class="edge">
<title>section_165&#45;&gt;header_171</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12634.0498,-2408.4537C12625.3629,-2388.2846 12611.3112,-2354.6463 12601,-2325.0039 12564.9109,-2221.2557 12530.6864,-2095.0614 12516.2251,-2040.0191"/>
<polygon fill="#000000" stroke="#000000" points="12519.5966,-2039.0774 12513.6801,-2030.2885 12512.8244,-2040.8487 12519.5966,-2039.0774"/>
</g>
<!-- prose_172 -->
<g id="node173" class="node">
<title>prose_172</title>
<ellipse fill="none" stroke="#000000" cx="12642" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12642" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_165&#45;&gt;prose_172 -->
<g id="edge172" class="edge">
<title>section_165&#45;&gt;prose_172</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12642,-2408.5269C12642,-2343.3439 12642,-2120.0411 12642,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="12645.5001,-2040.2756 12642,-2030.2756 12638.5001,-2040.2756 12645.5001,-2040.2756"/>
</g>
<!-- prose_173 -->
<g id="node174" class="node">
<title>prose_173</title>
<ellipse fill="none" stroke="#000000" cx="12757" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12757" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_165&#45;&gt;prose_173 -->
<g id="edge173" class="edge">
<title>section_165&#45;&gt;prose_173</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12650.2535,-2408.5547C12659.2059,-2388.4739 12673.4888,-2354.9126 12683,-2325.0039 12715.7499,-2222.0189 12741.2861,-2095.853 12751.79,-2040.4609"/>
<polygon fill="#000000" stroke="#000000" points="12755.2822,-2040.8282 12753.6881,-2030.354 12748.4024,-2039.5362 12755.2822,-2040.8282"/>
</g>
<!-- codeblock_174 -->
<g id="node175" class="node">
<title>codeblock_174</title>
<ellipse fill="none" stroke="#000000" cx="12962" cy="-2012.1033" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12962" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 364&#45;388</text>
</g>
<!-- section_165&#45;&gt;codeblock_174 -->
<g id="edge174" class="edge">
<title>section_165&#45;&gt;codeblock_174</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12676.6787,-2410.5953C12710.9635,-2393.3815 12763.2013,-2363.2573 12798,-2325.0039 12879.3716,-2235.5538 12932.6813,-2098.2883 12952.8878,-2039.9164"/>
<polygon fill="#000000" stroke="#000000" points="12956.2579,-2040.8773 12956.1684,-2030.2829 12949.6316,-2038.6208 12956.2579,-2040.8773"/>
</g>
<!-- header_187 -->
<g id="node188" class="node">
<title>header_187</title>
<ellipse fill="none" stroke="#000000" cx="13348" cy="-2012.1033" rx="95.2951" ry="18"/>
<text text-anchor="middle" x="13348" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Historian:append()</text>
</g>
<!-- section_166&#45;&gt;header_187 -->
<g id="edge187" class="edge">
<title>section_166&#45;&gt;header_187</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13546.6482,-2409.8805C13518.8312,-2392.1108 13477.0457,-2361.563 13452,-2325.0039 13388.6279,-2232.5001 13361.3472,-2098.3686 13352.0284,-2040.4669"/>
<polygon fill="#000000" stroke="#000000" points="13355.4358,-2039.5993 13350.4456,-2030.2532 13348.5184,-2040.6713 13355.4358,-2039.5993"/>
</g>
<!-- prose_188 -->
<g id="node189" class="node">
<title>prose_188</title>
<ellipse fill="none" stroke="#000000" cx="13493" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="13493" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_166&#45;&gt;prose_188 -->
<g id="edge188" class="edge">
<title>section_166&#45;&gt;prose_188</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13566.1642,-2408.7237C13556.702,-2388.7908 13541.975,-2355.3584 13534,-2325.0039 13507.0483,-2222.4204 13497.4127,-2096.0487 13494.3166,-2040.5325"/>
<polygon fill="#000000" stroke="#000000" points="13497.8042,-2040.2034 13493.7814,-2030.4021 13490.8139,-2040.5728 13497.8042,-2040.2034"/>
</g>
<!-- prose_189 -->
<g id="node190" class="node">
<title>prose_189</title>
<ellipse fill="none" stroke="#000000" cx="13575" cy="-2012.1033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="13575" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_166&#45;&gt;prose_189 -->
<g id="edge189" class="edge">
<title>section_166&#45;&gt;prose_189</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13575,-2408.5269C13575,-2343.3439 13575,-2120.0411 13575,-2040.5119"/>
<polygon fill="#000000" stroke="#000000" points="13578.5001,-2040.2756 13575,-2030.2756 13571.5001,-2040.2756 13578.5001,-2040.2756"/>
</g>
<!-- codeblock_190 -->
<g id="node191" class="node">
<title>codeblock_190</title>
<ellipse fill="none" stroke="#000000" cx="13769" cy="-2012.1033" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="13769" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 397&#45;411</text>
</g>
<!-- section_166&#45;&gt;codeblock_190 -->
<g id="edge190" class="edge">
<title>section_166&#45;&gt;codeblock_190</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13583.4607,-2408.5269C13614.0932,-2343.0773 13719.3377,-2118.2119 13756.1572,-2039.5433"/>
<polygon fill="#000000" stroke="#000000" points="13759.4257,-2040.8164 13760.4948,-2030.2756 13753.0857,-2037.849 13759.4257,-2040.8164"/>
</g>
<!-- codeblock_191 -->
<g id="node192" class="node">
<title>codeblock_191</title>
<ellipse fill="none" stroke="#000000" cx="14082" cy="-2012.1033" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="14082" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 413&#45;420</text>
</g>
<!-- section_166&#45;&gt;codeblock_191 -->
<g id="edge191" class="edge">
<title>section_166&#45;&gt;codeblock_191</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13637.52,-2416.3896C13700.1811,-2403.637 13796.8737,-2376.8702 13865,-2325.0039 13969.8825,-2245.1541 14043.0302,-2099.8609 14070.2486,-2039.5167"/>
<polygon fill="#000000" stroke="#000000" points="14073.5021,-2040.814 14074.3648,-2030.2543 14067.1053,-2037.9712 14073.5021,-2040.814"/>
</g>
<!-- codeblock_192 -->
<g id="node193" class="node">
<title>codeblock_192</title>
<ellipse fill="none" stroke="#000000" cx="14337" cy="-2012.1033" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="14337" y="-2007.9033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 422&#45;424</text>
</g>
<!-- section_166&#45;&gt;codeblock_192 -->
<g id="edge192" class="edge">
<title>section_166&#45;&gt;codeblock_192</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13648.5509,-2422.3982C13790.3422,-2412.9937 14094.8607,-2386.1055 14178,-2325.0039 14276.1678,-2252.8573 14317.9808,-2102.5498 14331.5871,-2040.1728"/>
<polygon fill="#000000" stroke="#000000" points="14335.0383,-2040.7682 14333.6707,-2030.262 14328.1881,-2039.328 14335.0383,-2040.7682"/>
</g>
<!-- leaf_169 -->
<g id="node170" class="node">
<title>leaf_169</title>
<polygon fill="none" stroke="#c0c0c0" points="12011,-902.7014 11957,-902.7014 11957,-866.7014 12011,-866.7014 12011,-902.7014"/>
</g>
<!-- raw_168&#45;&gt;leaf_169 -->
<g id="edge169" class="edge">
<title>raw_168&#45;&gt;leaf_169</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11984,-1993.9379C11984,-1863.8043 11984,-1073.9236 11984,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="11987.5001,-912.7562 11984,-902.7562 11980.5001,-912.7562 11987.5001,-912.7562"/>
</g>
<!-- leaf_175 -->
<g id="node176" class="node">
<title>leaf_175</title>
<polygon fill="none" stroke="#c0c0c0" points="12393,-902.7014 12237,-902.7014 12237,-866.7014 12393,-866.7014 12393,-902.7014"/>
<text text-anchor="middle" x="12315" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:next()</text>
</g>
<!-- header_171&#45;&gt;leaf_175 -->
<g id="edge175" class="edge">
<title>header_171&#45;&gt;leaf_175</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12504.6097,-1993.8376C12492.7288,-1945.2271 12458.1272,-1808.9198 12418,-1699.2027 12411.9859,-1682.7589 12406.5817,-1680.1017 12402,-1663.2027 12324.6577,-1377.9359 12315.9326,-1015.9456 12315.0614,-913.0967"/>
<polygon fill="#000000" stroke="#000000" points="12318.5601,-912.8793 12314.9945,-902.9025 12311.5603,-912.9253 12318.5601,-912.8793"/>
</g>
<!-- raw_176 -->
<g id="node177" class="node">
<title>raw_176</title>
<ellipse fill="none" stroke="#000000" cx="12438" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="12438" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_172&#45;&gt;raw_176 -->
<g id="edge176" class="edge">
<title>prose_172&#45;&gt;raw_176</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12645.7115,-1993.859C12655.318,-1941.0468 12675.2854,-1786.2686 12600,-1699.2027 12561.9059,-1655.1478 12510.1372,-1708.8766 12474,-1663.2027 12380.0806,-1544.4981 12422.8343,-1038.5972 12435.098,-913.0065"/>
<polygon fill="#000000" stroke="#000000" points="12438.6165,-912.9921 12436.1204,-902.6955 12431.6506,-912.3013 12438.6165,-912.9921"/>
</g>
<!-- prespace_177 -->
<g id="node178" class="node">
<title>prespace_177</title>
<ellipse fill="none" stroke="#000000" cx="12529" cy="-884.7014" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="12529" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_172&#45;&gt;prespace_177 -->
<g id="edge177" class="edge">
<title>prose_172&#45;&gt;prespace_177</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12641.2104,-1993.7862C12638.7543,-1945.0498 12629.5466,-1808.4612 12600,-1699.2027 12595.4751,-1682.4704 12589.0073,-1680.0665 12585,-1663.2027 12516.9156,-1376.685 12524.0716,-1015.5677 12527.7868,-913.011"/>
<polygon fill="#000000" stroke="#000000" points="12531.2908,-912.9728 12528.1754,-902.8464 12524.2959,-912.7053 12531.2908,-912.9728"/>
</g>
<!-- literal_178 -->
<g id="node179" class="node">
<title>literal_178</title>
<ellipse fill="none" stroke="#000000" cx="12625" cy="-884.7014" rx="31.481" ry="18"/>
<text text-anchor="middle" x="12625" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_172&#45;&gt;literal_178 -->
<g id="edge178" class="edge">
<title>prose_172&#45;&gt;literal_178</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12641.7261,-1993.9379C12639.7638,-1863.8043 12627.8533,-1073.9236 12625.4301,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="12628.9227,-912.7023 12625.2722,-902.7562 12621.9235,-912.8079 12628.9227,-912.7023"/>
</g>
<!-- raw_179 -->
<g id="node180" class="node">
<title>raw_179</title>
<ellipse fill="none" stroke="#000000" cx="12701" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="12701" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_172&#45;&gt;raw_179 -->
<g id="edge179" class="edge">
<title>prose_172&#45;&gt;raw_179</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12643.3228,-1993.9499C12647.0618,-1942.2645 12657.8966,-1789.8761 12665,-1663.2027 12681.4452,-1369.9389 12695.8873,-1014.2218 12699.8976,-912.8639"/>
<polygon fill="#000000" stroke="#000000" points="12703.3971,-912.9429 12700.294,-902.8127 12696.4025,-912.667 12703.3971,-912.9429"/>
</g>
<!-- raw_184 -->
<g id="node185" class="node">
<title>raw_184</title>
<ellipse fill="none" stroke="#000000" cx="12773" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="12773" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_173&#45;&gt;raw_184 -->
<g id="edge184" class="edge">
<title>prose_173&#45;&gt;raw_184</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12757.2578,-1993.9379C12759.1046,-1863.8043 12770.3146,-1073.9236 12772.5952,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="12776.1014,-912.8049 12772.7438,-902.7562 12769.1021,-912.7055 12776.1014,-912.8049"/>
</g>
<!-- leaf_186 -->
<g id="node187" class="node">
<title>leaf_186</title>
<polygon fill="none" stroke="#c0c0c0" points="13206.4016,-1072.3422 12817.5984,-1072.3422 12817.5984,-697.0606 13206.4016,-697.0606 13206.4016,-1072.3422"/>
<text text-anchor="middle" x="13012" y="-1057.3217" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.next(historian)</text>
<text text-anchor="middle" x="13012" y="-1041.9217" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local Δ = historian.cursor &lt; #historian and 1 or 0</text>
<text text-anchor="middle" x="13012" y="-1023.1617" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if historian.cursor == 0 then</text>
<text text-anchor="middle" x="13012" y="-1007.7617" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Txtbuf()</text>
<text text-anchor="middle" x="13012" y="-992.3616" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13012" y="-976.9616" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local txtbuf = historian[historian.cursor + Δ]</text>
<text text-anchor="middle" x="13012" y="-958.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not txtbuf then</text>
<text text-anchor="middle" x="13012" y="-942.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Txtbuf()</text>
<text text-anchor="middle" x="13012" y="-927.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13012" y="-912.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cur_row = #txtbuf.lines</text>
<text text-anchor="middle" x="13012" y="-896.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local result = historian.results[txtbuf]</text>
<text text-anchor="middle" x="13012" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not txtbuf then</text>
<text text-anchor="middle" x="13012" y="-865.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return Txtbuf()</text>
<text text-anchor="middle" x="13012" y="-850.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13012" y="-835.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian.cursor = historian.cursor + Δ</text>
<text text-anchor="middle" x="13012" y="-816.2413" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;txtbuf.cursor = #txtbuf.lines[txtbuf.cur_row] + 1</text>
<text text-anchor="middle" x="13012" y="-800.8413" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if not (Δ &gt; 0) and #txtbuf.lines &gt; 0 then</text>
<text text-anchor="middle" x="13012" y="-782.0813" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian.cursor = #historian + 1</text>
<text text-anchor="middle" x="13012" y="-766.6813" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return txtbuf:clone(), nil, true</text>
<text text-anchor="middle" x="13012" y="-751.2812" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="13012" y="-735.8812" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return txtbuf:clone(), result, false</text>
<text text-anchor="middle" x="13012" y="-720.4812" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13012" y="-705.0811" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_174&#45;&gt;leaf_186 -->
<g id="edge186" class="edge">
<title>codeblock_174&#45;&gt;leaf_186</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12962.8056,-1993.9379C12967.3816,-1890.758 12990.3518,-1372.8258 13003.2233,-1082.5996"/>
<polygon fill="#000000" stroke="#000000" points="13006.7302,-1082.5177 13003.6768,-1072.3724 12999.7371,-1082.2075 13006.7302,-1082.5177"/>
</g>
<!-- leaf_180 -->
<g id="node181" class="node">
<title>leaf_180</title>
<polygon fill="none" stroke="#c0c0c0" points="12450.5,-63.0015 11979.5,-63.0015 11979.5,-7.1986 12450.5,-7.1986 12450.5,-63.0015"/>
<text text-anchor="middle" x="12215" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Returns the next txtbuf in history, and a second flag to tell the</text>
</g>
<!-- raw_176&#45;&gt;leaf_180 -->
<g id="edge180" class="edge">
<title>raw_176&#45;&gt;leaf_180</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12439.7539,-866.4855C12449.503,-761.3436 12493.3695,-232.3524 12402,-106.2001 12391.7109,-91.9941 12360.4311,-77.93 12326.3259,-66.1073"/>
<polygon fill="#000000" stroke="#000000" points="12327.241,-62.7221 12316.6467,-62.8339 12324.9984,-69.3531 12327.241,-62.7221"/>
</g>
<!-- leaf_181 -->
<g id="node182" class="node">
<title>leaf_181</title>
<polygon fill="none" stroke="#c0c0c0" points="12523,-53.1 12469,-53.1 12469,-17.1 12523,-17.1 12523,-53.1"/>
</g>
<!-- prespace_177&#45;&gt;leaf_181 -->
<g id="edge181" class="edge">
<title>prespace_177&#45;&gt;leaf_181</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12528.2955,-866.5632C12524.0889,-758.2631 12502.2971,-197.2221 12497.1093,-63.6604"/>
<polygon fill="#000000" stroke="#000000" points="12500.5975,-63.2859 12496.7119,-53.4293 12493.6028,-63.5576 12500.5975,-63.2859"/>
</g>
<!-- leaf_182 -->
<g id="node183" class="node">
<title>leaf_182</title>
<polygon fill="none" stroke="#c0c0c0" points="12641,-53.1 12541,-53.1 12541,-17.1 12641,-17.1 12641,-53.1"/>
<text text-anchor="middle" x="12591" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">modeselektor</text>
</g>
<!-- literal_178&#45;&gt;leaf_182 -->
<g id="edge182" class="edge">
<title>literal_178&#45;&gt;leaf_182</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12624.2741,-866.5632C12619.9401,-758.2631 12597.4879,-197.2221 12592.143,-63.6604"/>
<polygon fill="#000000" stroke="#000000" points="12595.6307,-63.2813 12591.7335,-53.4293 12588.6363,-63.5613 12595.6307,-63.2813"/>
</g>
<!-- leaf_183 -->
<g id="node184" class="node">
<title>leaf_183</title>
<polygon fill="none" stroke="#c0c0c0" points="12899,-53.1 12659,-53.1 12659,-17.1 12899,-17.1 12899,-53.1"/>
<text text-anchor="middle" x="12779" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> it might be time for a new one.</text>
</g>
<!-- raw_179&#45;&gt;leaf_183 -->
<g id="edge183" class="edge">
<title>raw_179&#45;&gt;leaf_183</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12698.6974,-866.6335C12688.2861,-779.9167 12649.7878,-398.5735 12737,-106.2001 12741.7281,-90.3494 12750.7253,-74.3445 12759.1832,-61.5439"/>
<polygon fill="#000000" stroke="#000000" points="12762.114,-63.4589 12764.8935,-53.2351 12756.345,-59.4941 12762.114,-63.4589"/>
</g>
<!-- leaf_185 -->
<g id="node186" class="node">
<title>leaf_185</title>
<polygon fill="none" stroke="#c0c0c0" points="13304.5,-55.0021 12917.5,-55.0021 12917.5,-15.198 13304.5,-15.198 13304.5,-55.0021"/>
<text text-anchor="middle" x="13111" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;d like to stop buffering blank lines at some point.</text>
</g>
<!-- raw_184&#45;&gt;leaf_185 -->
<g id="edge185" class="edge">
<title>raw_184&#45;&gt;leaf_185</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12771.0356,-866.6385C12759.9714,-761.2351 12709.3945,-226.1761 12809,-106.2001 12821.0433,-91.6938 12910.2481,-71.7875 12988.6095,-56.7271"/>
<polygon fill="#000000" stroke="#000000" points="12989.4304,-60.1337 12998.5976,-54.8221 12988.1189,-53.2576 12989.4304,-60.1337"/>
</g>
<!-- leaf_193 -->
<g id="node194" class="node">
<title>leaf_193</title>
<polygon fill="none" stroke="#c0c0c0" points="13433,-902.7014 13263,-902.7014 13263,-866.7014 13433,-866.7014 13433,-902.7014"/>
<text text-anchor="middle" x="13348" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Historian:append()</text>
</g>
<!-- header_187&#45;&gt;leaf_193 -->
<g id="edge193" class="edge">
<title>header_187&#45;&gt;leaf_193</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13348,-1993.9379C13348,-1863.8043 13348,-1073.9236 13348,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="13351.5001,-912.7562 13348,-902.7562 13344.5001,-912.7562 13351.5001,-912.7562"/>
</g>
<!-- raw_194 -->
<g id="node195" class="node">
<title>raw_194</title>
<ellipse fill="none" stroke="#000000" cx="13485" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="13485" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_188&#45;&gt;raw_194 -->
<g id="edge194" class="edge">
<title>prose_188&#45;&gt;raw_194</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13492.8711,-1993.9379C13491.9477,-1863.8043 13486.3427,-1073.9236 13485.2024,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="13488.6991,-912.7311 13485.1281,-902.7562 13481.6993,-912.7808 13488.6991,-912.7311"/>
</g>
<!-- raw_196 -->
<g id="node197" class="node">
<title>raw_196</title>
<ellipse fill="none" stroke="#000000" cx="13557" cy="-884.7014" rx="27" ry="18"/>
<text text-anchor="middle" x="13557" y="-880.5014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_189&#45;&gt;raw_196 -->
<g id="edge196" class="edge">
<title>prose_189&#45;&gt;raw_196</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13574.71,-1993.9379C13572.6323,-1863.8043 13560.0211,-1073.9236 13557.4554,-913.2217"/>
<polygon fill="#000000" stroke="#000000" points="13560.9475,-912.699 13557.2883,-902.7562 13553.9484,-912.8108 13560.9475,-912.699"/>
</g>
<!-- leaf_198 -->
<g id="node199" class="node">
<title>leaf_198</title>
<polygon fill="none" stroke="#c0c0c0" points="14052,-988.9019 13602,-988.9019 13602,-780.5009 14052,-780.5009 14052,-988.9019"/>
<text text-anchor="middle" x="13827" y="-973.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">function Historian.append(historian, txtbuf, results, success)</text>
<text text-anchor="middle" x="13827" y="-958.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if tostring(historian[#historian]) == tostring(txtbuf) then</text>
<text text-anchor="middle" x="13827" y="-942.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; don&#39;t bother</text>
<text text-anchor="middle" x="13827" y="-927.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="13827" y="-912.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13827" y="-896.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian[#historian + 1] = txtbuf</text>
<text text-anchor="middle" x="13827" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if success then</text>
<text text-anchor="middle" x="13827" y="-865.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian:persist(txtbuf, results)</text>
<text text-anchor="middle" x="13827" y="-850.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="13827" y="-835.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;historian:persist(txtbuf)</text>
<text text-anchor="middle" x="13827" y="-819.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="13827" y="-804.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return true</text>
<text text-anchor="middle" x="13827" y="-788.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_190&#45;&gt;leaf_198 -->
<g id="edge198" class="edge">
<title>codeblock_190&#45;&gt;leaf_198</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13769.9345,-1993.9379C13775.801,-1879.9061 13807.729,-1259.2905 13821.1029,-999.3296"/>
<polygon fill="#000000" stroke="#000000" points="13824.6103,-999.2725 13821.6288,-989.1058 13817.6196,-998.9127 13824.6103,-999.2725"/>
</g>
<!-- leaf_199 -->
<g id="node200" class="node">
<title>leaf_199</title>
<polygon fill="none" stroke="#c0c0c0" points="14338,-935.1024 14070,-935.1024 14070,-834.3004 14338,-834.3004 14338,-935.1024"/>
<text text-anchor="middle" x="14204" y="-919.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new()</text>
<text text-anchor="middle" x="14204" y="-904.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local historian = meta(Historian)</text>
<text text-anchor="middle" x="14204" y="-888.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;historian:load()</text>
<text text-anchor="middle" x="14204" y="-873.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return historian</text>
<text text-anchor="middle" x="14204" y="-858.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="14204" y="-842.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">Historian.idEst = new</text>
</g>
<!-- codeblock_191&#45;&gt;leaf_199 -->
<g id="edge199" class="edge">
<title>codeblock_191&#45;&gt;leaf_199</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14083.9657,-1993.9379C14097.2715,-1870.9791 14174.3154,-1159.017 14197.4398,-945.3239"/>
<polygon fill="#000000" stroke="#000000" points="14200.9358,-945.549 14198.5321,-935.2305 14193.9764,-944.7959 14200.9358,-945.549"/>
</g>
<!-- leaf_200 -->
<g id="node201" class="node">
<title>leaf_200</title>
<polygon fill="none" stroke="#c0c0c0" points="14442,-902.7014 14356,-902.7014 14356,-866.7014 14442,-866.7014 14442,-902.7014"/>
<text text-anchor="middle" x="14399" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_192&#45;&gt;leaf_200 -->
<g id="edge200" class="edge">
<title>codeblock_192&#45;&gt;leaf_200</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14337.999,-1993.9379C14345.1627,-1863.6742 14388.6809,-1072.3432 14397.458,-912.7415"/>
<polygon fill="#000000" stroke="#000000" points="14400.9526,-912.9333 14398.0071,-902.7562 14393.9632,-912.5489 14400.9526,-912.9333"/>
</g>
<!-- leaf_195 -->
<g id="node196" class="node">
<title>leaf_195</title>
<polygon fill="none" stroke="#c0c0c0" points="13647,-63.0015 13323,-63.0015 13323,-7.1986 13647,-7.1986 13647,-63.0015"/>
<text text-anchor="middle" x="13485" y="-15.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Appends a txtbuf to history and persists it.</text>
</g>
<!-- raw_194&#45;&gt;leaf_195 -->
<g id="edge195" class="edge">
<title>raw_194&#45;&gt;leaf_195</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13485,-866.5632C13485,-760.6464 13485,-221.6953 13485,-73.0895"/>
<polygon fill="#000000" stroke="#000000" points="13488.5001,-73.0758 13485,-63.0758 13481.5001,-73.0759 13488.5001,-73.0758"/>
</g>
<!-- leaf_197 -->
<g id="node198" class="node">
<title>leaf_197</title>
<polygon fill="none" stroke="#c0c0c0" points="13863,-55.0021 13665,-55.0021 13665,-15.198 13863,-15.198 13863,-55.0021"/>
<text text-anchor="middle" x="13764" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Doesn&#39;t adjust the cursor.</text>
</g>
<!-- raw_196&#45;&gt;leaf_197 -->
<g id="edge197" class="edge">
<title>raw_196&#45;&gt;leaf_197</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13555.3052,-866.5276C13545.8888,-761.6229 13503.5782,-233.7404 13593,-106.2001 13599.6773,-96.6764 13653.4439,-75.2015 13698.9306,-58.3295"/>
<polygon fill="#000000" stroke="#000000" points="13700.3192,-61.548 13708.4914,-54.8051 13697.898,-54.98 13700.3192,-61.548"/>
</g>
</g>
</svg>
