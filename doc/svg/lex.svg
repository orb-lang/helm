<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="2534pt" height="1768pt"
 viewBox="0.00 0.00 2534.00 1767.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1763.8021)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1763.8021 2530,-1763.8021 2530,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="831" cy="-1741.8021" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="831" y="-1737.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 155</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="831" cy="-1669.8021" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="831" y="-1665.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;105</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M831,-1723.6335C831,-1715.933 831,-1706.7764 831,-1698.2187"/>
<polygon fill="#000000" stroke="#000000" points="834.5001,-1698.2153 831,-1688.2154 827.5001,-1698.2154 834.5001,-1698.2153"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="371" cy="-1597.8021" rx="36.8096" ry="18"/>
<text text-anchor="middle" x="371" y="-1593.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Lex</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M773.6708,-1660.8288C680.96,-1646.3176 500.0397,-1617.9996 415.9561,-1604.8387"/>
<polygon fill="#000000" stroke="#000000" points="416.3748,-1601.3617 405.9538,-1603.2731 415.2922,-1608.2775 416.3748,-1601.3617"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="544" cy="-1597.8021" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="544" y="-1593.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M782.3144,-1657.5883C726.2401,-1643.5209 635.2043,-1620.6826 583.3885,-1607.6835"/>
<polygon fill="#000000" stroke="#000000" points="584.1213,-1604.259 573.5702,-1605.2204 582.418,-1611.0486 584.1213,-1604.259"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="831" cy="-1597.8021" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="831" y="-1593.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;13</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M831,-1651.6335C831,-1643.933 831,-1634.7764 831,-1626.2187"/>
<polygon fill="#000000" stroke="#000000" points="834.5001,-1626.2153 831,-1616.2154 827.5001,-1626.2154 834.5001,-1626.2153"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1134" cy="-1597.8021" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1134" y="-1593.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;105</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M880.695,-1657.9934C933.1193,-1645.5361 1015.8136,-1625.886 1072.358,-1612.4497"/>
<polygon fill="#000000" stroke="#000000" points="1073.3281,-1615.8167 1082.248,-1610.0996 1071.7097,-1609.0064 1073.3281,-1615.8167"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1999" cy="-1597.8021" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="1999" y="-1593.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 106&#45;155</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M895.4605,-1665.8285C1093.6531,-1653.6111 1693.9962,-1616.6037 1915.627,-1602.9415"/>
<polygon fill="#000000" stroke="#000000" points="1916.1258,-1606.4175 1925.8915,-1602.3088 1915.6951,-1599.4308 1916.1258,-1606.4175"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="312,-1511.602 258,-1511.602 258,-1475.602 312,-1475.602 312,-1511.602"/>
<text text-anchor="middle" x="285" y="-1490.102" font-family="Inconsolata" font-size="14.00" fill="#000000">* Lex</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M354.6775,-1581.2636C344.6244,-1570.8163 331.6642,-1556.8677 321,-1543.8021 314.8904,-1536.3167 308.6223,-1527.8824 303.064,-1520.0943"/>
<polygon fill="#000000" stroke="#000000" points="305.7503,-1517.8295 297.1364,-1511.6608 300.0234,-1521.8548 305.7503,-1517.8295"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="357" cy="-1493.602" rx="27" ry="18"/>
<text text-anchor="middle" x="357" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M513.0413,-1592.4174C480.5442,-1585.5449 429.2353,-1571.1234 393,-1543.8021 384.4835,-1537.3807 377.1509,-1528.3722 371.3677,-1519.7559"/>
<polygon fill="#000000" stroke="#000000" points="374.1881,-1517.6649 365.9171,-1511.0436 368.2537,-1521.3776 374.1881,-1517.6649"/>
</g>
<!-- prespace_9 -->
<g id="node10" class="node">
<title>prespace_9</title>
<ellipse fill="none" stroke="#000000" cx="448" cy="-1493.602" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="448" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_3&#45;&gt;prespace_9 -->
<g id="edge9" class="edge">
<title>prose_3&#45;&gt;prespace_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M529,-1581.5208C513.3577,-1564.5424 488.653,-1537.7275 470.6367,-1518.1723"/>
<polygon fill="#000000" stroke="#000000" points="473.2023,-1515.7916 463.8524,-1510.8085 468.0541,-1520.5346 473.2023,-1515.7916"/>
</g>
<!-- literal_10 -->
<g id="node11" class="node">
<title>literal_10</title>
<ellipse fill="none" stroke="#000000" cx="544" cy="-1493.602" rx="31.481" ry="18"/>
<text text-anchor="middle" x="544" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_3&#45;&gt;literal_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;literal_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M544,-1579.6518C544,-1563.7618 544,-1540.4092 544,-1522.0397"/>
<polygon fill="#000000" stroke="#000000" points="547.5001,-1521.8939 544,-1511.8939 540.5001,-1521.8939 547.5001,-1521.8939"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="620" cy="-1493.602" rx="27" ry="18"/>
<text text-anchor="middle" x="620" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M556.6781,-1580.827C564.5777,-1570.2154 574.929,-1556.2474 584,-1543.8021 590.0308,-1535.528 596.5701,-1526.4436 602.4,-1518.3041"/>
<polygon fill="#000000" stroke="#000000" points="605.4213,-1520.0961 608.3899,-1509.9256 599.7269,-1516.025 605.4213,-1520.0961"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="996.5,-1544.003 665.5,-1544.003 665.5,-1443.201 996.5,-1443.201 996.5,-1544.003"/>
<text text-anchor="middle" x="831" y="-1528.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="831" y="-1513.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local P, R, S, match = L.P, L.R, L.S, L.match</text>
<text text-anchor="middle" x="831" y="-1497.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local Lex = meta {}</text>
<text text-anchor="middle" x="831" y="-1482.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local Rainbuf = require &quot;rainbuf&quot;</text>
<text text-anchor="middle" x="831" y="-1467.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local sub = assert(string.sub)</text>
<text text-anchor="middle" x="831" y="-1451.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local c = require &quot;color&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_4&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M831,-1579.6518C831,-1572.3724 831,-1563.5267 831,-1554.3115"/>
<polygon fill="#000000" stroke="#000000" points="834.5001,-1554.2235 831,-1544.2236 827.5001,-1554.2236 834.5001,-1554.2235"/>
</g>
<!-- header_17 -->
<g id="node18" class="node">
<title>header_17</title>
<ellipse fill="none" stroke="#000000" cx="1078" cy="-1493.602" rx="63.3963" ry="18"/>
<text text-anchor="middle" x="1078" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Lua lexers</text>
</g>
<!-- section_5&#45;&gt;header_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;header_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1124.2455,-1579.6518C1115.4527,-1563.2908 1102.4079,-1539.0182 1092.4125,-1520.4196"/>
<polygon fill="#000000" stroke="#000000" points="1095.4596,-1518.6959 1087.6427,-1511.5443 1089.2937,-1522.0097 1095.4596,-1518.6959"/>
</g>
<!-- prose_18 -->
<g id="node19" class="node">
<title>prose_18</title>
<ellipse fill="none" stroke="#000000" cx="1191" cy="-1493.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1191" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_18 -->
<g id="edge18" class="edge">
<title>section_5&#45;&gt;prose_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1143.9286,-1579.6518C1152.9877,-1563.0913 1166.4807,-1538.425 1176.7009,-1519.7417"/>
<polygon fill="#000000" stroke="#000000" points="1179.8351,-1521.3052 1181.5636,-1510.8524 1173.6938,-1517.9458 1179.8351,-1521.3052"/>
</g>
<!-- codeblock_19 -->
<g id="node20" class="node">
<title>codeblock_19</title>
<ellipse fill="none" stroke="#000000" cx="1413" cy="-1493.602" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="1413" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 18&#45;103</text>
</g>
<!-- section_5&#45;&gt;codeblock_19 -->
<g id="edge19" class="edge">
<title>section_5&#45;&gt;codeblock_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1173.9739,-1582.8728C1223.4391,-1564.3986 1307.7405,-1532.914 1361.8686,-1512.6984"/>
<polygon fill="#000000" stroke="#000000" points="1363.1346,-1515.9618 1371.278,-1509.1842 1360.6855,-1509.4042 1363.1346,-1515.9618"/>
</g>
<!-- header_24 -->
<g id="node25" class="node">
<title>header_24</title>
<ellipse fill="none" stroke="#000000" cx="1846" cy="-1493.602" rx="103.0387" ry="18"/>
<text text-anchor="middle" x="1846" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Lex.lua_thor(linebuf)</text>
</g>
<!-- section_6&#45;&gt;header_24 -->
<g id="edge24" class="edge">
<title>section_6&#45;&gt;header_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1973.7352,-1580.5956C1948.1982,-1563.2037 1908.5641,-1536.211 1880.2197,-1516.9072"/>
<polygon fill="#000000" stroke="#000000" points="1882.0492,-1513.9186 1871.8138,-1511.1824 1878.1088,-1519.7043 1882.0492,-1513.9186"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="1999" cy="-1493.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1999" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_6&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1999,-1579.6518C1999,-1563.7618 1999,-1540.4092 1999,-1522.0397"/>
<polygon fill="#000000" stroke="#000000" points="2002.5001,-1521.8939 1999,-1511.8939 1995.5001,-1521.8939 2002.5001,-1521.8939"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="2180" cy="-1493.602" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="2180" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 110&#45;149</text>
</g>
<!-- section_6&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>section_6&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2028.0808,-1581.0605C2058.9031,-1563.3164 2107.7221,-1535.2117 2141.6691,-1515.6687"/>
<polygon fill="#000000" stroke="#000000" points="2143.4698,-1518.6707 2150.3901,-1510.6482 2139.9774,-1512.6042 2143.4698,-1518.6707"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2427" cy="-1493.602" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2427" y="-1489.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 152&#45;154</text>
</g>
<!-- section_6&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_6&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2062.2278,-1587.8561C2118.7128,-1578.4082 2203.4939,-1562.8377 2276,-1543.8021 2309.3693,-1535.0414 2346.1157,-1522.8818 2375.0034,-1512.7243"/>
<polygon fill="#000000" stroke="#000000" points="2376.2266,-1516.0042 2384.4825,-1509.3641 2373.8878,-1509.4064 2376.2266,-1516.0042"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="408,-785.3021 0,-785.3021 0,-713.4998 408,-713.4998 408,-785.3021"/>
<text text-anchor="middle" x="204" y="-721.901" font-family="Inconsolata" font-size="14.00" fill="#000000">We&#39;re going to do this will straight el peg, and fold in</text>
</g>
<!-- raw_8&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_8&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M353.2938,-1475.5747C333.8183,-1380.8448 243.0883,-939.529 213.4172,-795.2066"/>
<polygon fill="#000000" stroke="#000000" points="216.8303,-794.4278 211.3882,-785.3375 209.9737,-795.8375 216.8303,-794.4278"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="480,-767.401 426,-767.401 426,-731.401 480,-731.401 480,-767.401"/>
<text text-anchor="middle" x="453" y="-745.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_9&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>prespace_9&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M448.1211,-1475.5747C448.7863,-1376.565 451.9953,-898.9456 452.8111,-777.5238"/>
<polygon fill="#000000" stroke="#000000" points="456.3109,-777.5467 452.8782,-767.5234 449.311,-777.4996 456.3109,-777.5467"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="577,-767.401 505,-767.401 505,-731.401 577,-731.401 577,-767.401"/>
<text text-anchor="middle" x="541" y="-745.901" font-family="Inconsolata" font-size="14.00" fill="#000000">espalier</text>
</g>
<!-- literal_10&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>literal_10&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M543.9273,-1475.5747C543.5282,-1376.565 541.6028,-898.9456 541.1134,-777.5238"/>
<polygon fill="#000000" stroke="#000000" points="544.6134,-777.5092 541.0731,-767.5234 537.6135,-777.5375 544.6134,-777.5092"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="653,-767.401 595,-767.401 595,-731.401 653,-731.401 653,-767.401"/>
<text text-anchor="middle" x="624" y="-745.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> ASAP.</text>
</g>
<!-- raw_11&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_11&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M620.0969,-1475.5747C620.6291,-1376.565 623.1962,-898.9456 623.8488,-777.5238"/>
<polygon fill="#000000" stroke="#000000" points="627.3487,-777.5421 623.9026,-767.5234 620.3488,-777.5044 627.3487,-777.5421"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1090,-767.401 976,-767.401 976,-731.401 1090,-731.401 1090,-767.401"/>
<text text-anchor="middle" x="1033" y="-745.901" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Lua lexers</text>
</g>
<!-- header_17&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>header_17&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1076.9099,-1475.5747C1070.9231,-1376.565 1042.0426,-898.9456 1034.7005,-777.5238"/>
<polygon fill="#000000" stroke="#000000" points="1038.1931,-777.2939 1034.0958,-767.5234 1031.2059,-777.7165 1038.1931,-777.2939"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1135" cy="-749.401" rx="27" ry="18"/>
<text text-anchor="middle" x="1135" y="-745.201" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_18&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_18&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1185.8645,-1475.6121C1181.1499,-1458.292 1174.3973,-1431.2811 1171,-1407.4019 1136.5849,-1165.5003 1134.5364,-869.2597 1134.8028,-777.7025"/>
<polygon fill="#000000" stroke="#000000" points="1138.3032,-777.5835 1134.8447,-767.5691 1131.3033,-777.5544 1138.3032,-777.5835"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1735.5,-1407.4028 1180.5,-1407.4028 1180.5,-91.3991 1735.5,-91.3991 1735.5,-1407.4028"/>
<text text-anchor="middle" x="1458" y="-1392.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local WS = (P&quot; &quot;)^0</text>
<text text-anchor="middle" x="1458" y="-1360.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local NL = P&quot;\n&quot;</text>
<text text-anchor="middle" x="1458" y="-1329.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local terminal = S&quot; +&#45;*^~%#;,&lt;&gt;={}[]().:\n&quot; + &#45;P(1)</text>
<text text-anchor="middle" x="1458" y="-1298.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local KW = (P&quot;function&quot; + &quot;local&quot; + &quot;for&quot; + &quot;in&quot; + &quot;do&quot;</text>
<text text-anchor="middle" x="1458" y="-1282.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ &quot;and&quot; + &quot;or&quot; + &quot;not&quot; + &quot;true&quot; + &quot;false&quot;</text>
<text text-anchor="middle" x="1458" y="-1267.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ &quot;while&quot; + &quot;break&quot; + &quot;if&quot; + &quot;then&quot; + &quot;else&quot; + &quot;elseif&quot;</text>
<text text-anchor="middle" x="1458" y="-1251.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ &quot;goto&quot; + &quot;repeat&quot; + &quot;until&quot; + &quot;return&quot; + &quot;nil&quot;</text>
<text text-anchor="middle" x="1458" y="-1236.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ &quot;end&quot;) * #terminal</text>
<text text-anchor="middle" x="1458" y="-1205.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local OP = P&quot;+&quot; + &quot;&#45;&quot; + &quot;*&quot; + &quot;/&quot; + &quot;%&quot; + &quot;^&quot; + &quot;#&quot;</text>
<text text-anchor="middle" x="1458" y="-1189.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ &quot;==&quot; + &quot;~=&quot; + &quot;&lt;=&quot; + &quot;&gt;=&quot; + &quot;&lt;&quot; + &quot;&gt;&quot;</text>
<text text-anchor="middle" x="1458" y="-1174.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ &quot;=&quot; + &quot;(&quot; + &quot;)&quot; + &quot;{&quot; + &quot;}&quot; + &quot;[&quot; + &quot;]&quot;</text>
<text text-anchor="middle" x="1458" y="-1158.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ &quot;;&quot; + &quot;;&quot; + &quot;...&quot; + &quot;..&quot; + &quot;.&quot; + &quot;,&quot;</text>
<text text-anchor="middle" x="1458" y="-1127.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; #todo valid escape sequences instead of P(1)s in below &#160;&#160;&#160;â†“</text>
<text text-anchor="middle" x="1458" y="-1096.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">local double_str = P&quot;\&quot;&quot; * (P(1) &#45; (P&quot;\&quot;&quot; + P&quot;\\&quot;) + P&quot;\\&quot; * P(1))^0 * P&quot;\&quot;&quot;</text>
<text text-anchor="middle" x="1458" y="-1080.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">local single_str = P&quot;\&#39;&quot; * (P(1) &#45; (P&quot;\&#39;&quot; + P&quot;\\&quot;) + P&quot;\\&quot; * P(1))^0 * P&quot;\&#39;&quot;</text>
<text text-anchor="middle" x="1458" y="-1049.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local digit = R&quot;09&quot;</text>
<text text-anchor="middle" x="1458" y="-1017.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">local letter = R&quot;az&quot; + R&quot;AZ&quot;</text>
<text text-anchor="middle" x="1458" y="-986.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local symbol = &#160;&#160;(letter^1 + P&quot;_&quot;^1)</text>
<text text-anchor="middle" x="1458" y="-971.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* (letter + digit + P&quot;_&quot;)^0</text>
<text text-anchor="middle" x="1458" y="-955.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* #terminal</text>
<text text-anchor="middle" x="1458" y="-924.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local _digital = P&quot;&#45;&quot;^0 * ((digit^1 * P&quot;.&quot;^&#45;1 * digit^0</text>
<text text-anchor="middle" x="1458" y="-908.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* ((P&quot;e&quot; + P&quot;E&quot;)^&#45;1 * P&quot;&#45;&quot;^&#45;1 * digit^1)^&#45;1</text>
<text text-anchor="middle" x="1458" y="-893.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ digit^1)^1 + digit^1)</text>
<text text-anchor="middle" x="1458" y="-862.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local _hexadecimal = P&quot;0&quot; * (P&quot;x&quot; + P&quot;X&quot;) * (digit + R&quot;af&quot; + R&quot;AF&quot;)^1</text>
<text text-anchor="middle" x="1458" y="-830.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local number = _digital</text>
<text text-anchor="middle" x="1458" y="-799.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local comment = P&quot;&#45;&#45;&quot; * (P(1) &#45; NL) * (NL + &#45; (1))</text>
<text text-anchor="middle" x="1458" y="-767.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; long strings, long comments...</text>
<text text-anchor="middle" x="1458" y="-736.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local ERR = P(1)^1</text>
<text text-anchor="middle" x="1458" y="-705.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local lua_toks = {KW, number, OP, symbol, double_str, single_str,</text>
<text text-anchor="middle" x="1458" y="-689.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment, WS, NL, ERR}</text>
<text text-anchor="middle" x="1458" y="-658.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local lex_kv = { KW = KW,</text>
<text text-anchor="middle" x="1458" y="-642.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;number = number,</text>
<text text-anchor="middle" x="1458" y="-627.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OP = OP,</text>
<text text-anchor="middle" x="1458" y="-612.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;symbol = symbol,</text>
<text text-anchor="middle" x="1458" y="-596.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;double_str = double_str,</text>
<text text-anchor="middle" x="1458" y="-581.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;single_str = single_str,</text>
<text text-anchor="middle" x="1458" y="-565.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment = comment,</text>
<text text-anchor="middle" x="1458" y="-550.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;WS = WS,</text>
<text text-anchor="middle" x="1458" y="-535.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NL = NL,</text>
<text text-anchor="middle" x="1458" y="-519.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ERR = ERR}</text>
<text text-anchor="middle" x="1458" y="-488.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local color_map = {</text>
<text text-anchor="middle" x="1458" y="-472.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;KW = c.color.keyword(),</text>
<text text-anchor="middle" x="1458" y="-457.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;OP = c.color.operator(),</text>
<text text-anchor="middle" x="1458" y="-442.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;number = c.color.number(),</text>
<text text-anchor="middle" x="1458" y="-426.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;symbol = c.color.field(),</text>
<text text-anchor="middle" x="1458" y="-411.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;double_str = c.color.string(),</text>
<text text-anchor="middle" x="1458" y="-395.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;single_str = c.color.string(),</text>
<text text-anchor="middle" x="1458" y="-380.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;comment = c.color.comment(),</text>
<text text-anchor="middle" x="1458" y="-365.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ERR = c.color.error,</text>
<text text-anchor="middle" x="1458" y="-349.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">}</text>
<text text-anchor="middle" x="1458" y="-302.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local lex_map = {}</text>
<text text-anchor="middle" x="1458" y="-270.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">for k, v in pairs(lex_kv) do</text>
<text text-anchor="middle" x="1458" y="-255.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;lex_map[v] = k</text>
<text text-anchor="middle" x="1458" y="-240.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1458" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">lex_kv = nil</text>
<text text-anchor="middle" x="1458" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">Lex.lex_map = lex_map</text>
<text text-anchor="middle" x="1458" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">Lex.WS, Lex.NL, Lex.KW, Lex.OP = WS, NL, KW, OP</text>
<text text-anchor="middle" x="1458" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">Lex.double, Lex.single = double_str, single_str</text>
<text text-anchor="middle" x="1458" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">Lex.digit, Lex.letter, Lex.symbol, Lex.number = digit, letter, symbol, number</text>
<text text-anchor="middle" x="1458" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Lex.comment = comment</text>
</g>
<!-- codeblock_19&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_19&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1414.0901,-1475.5747C1414.8869,-1462.3962 1416.0894,-1442.51 1417.5927,-1417.649"/>
<polygon fill="#000000" stroke="#000000" points="1421.097,-1417.6827 1418.207,-1407.4897 1414.1097,-1417.2601 1421.097,-1417.6827"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1162,-45.7 1108,-45.7 1108,-9.7 1162,-9.7 1162,-45.7"/>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1135,-731.2001C1135,-633.8946 1135,-175.0692 1135,-55.9895"/>
<polygon fill="#000000" stroke="#000000" points="1138.5001,-55.8516 1135,-45.8517 1131.5001,-55.8517 1138.5001,-55.8516"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1938,-767.401 1754,-767.401 1754,-731.401 1938,-731.401 1938,-767.401"/>
<text text-anchor="middle" x="1846" y="-745.901" font-family="Inconsolata" font-size="14.00" fill="#000000">** Lex.lua_thor(linebuf)</text>
</g>
<!-- header_24&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>header_24&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1846,-1475.5747C1846,-1376.565 1846,-898.9456 1846,-777.5238"/>
<polygon fill="#000000" stroke="#000000" points="1849.5001,-777.5234 1846,-767.5234 1842.5001,-777.5234 1849.5001,-777.5234"/>
</g>
<!-- raw_29 -->
<g id="node30" class="node">
<title>raw_29</title>
<ellipse fill="none" stroke="#000000" cx="1983" cy="-749.401" rx="27" ry="18"/>
<text text-anchor="middle" x="1983" y="-745.201" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_29 -->
<g id="edge29" class="edge">
<title>prose_25&#45;&gt;raw_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1998.6124,-1475.5747C1996.4838,-1376.565 1986.2151,-898.9456 1983.6046,-777.5238"/>
<polygon fill="#000000" stroke="#000000" points="1987.1039,-777.4458 1983.3896,-767.5234 1980.1055,-777.5964 1987.1039,-777.4458"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2422,-1046.9021 2028,-1046.9021 2028,-451.8999 2422,-451.8999 2422,-1046.9021"/>
<text text-anchor="middle" x="2225" y="-1031.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function chomp_token(lb)</text>
<text text-anchor="middle" x="2225" y="-1016.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _,v in ipairs(lua_toks) do</text>
<text text-anchor="middle" x="2225" y="-1000.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local bite = match(v, lb)</text>
<text text-anchor="middle" x="2225" y="-985.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if bite ~= nil then</text>
<text text-anchor="middle" x="2225" y="-970.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return sub(lb, 1, bite &#45; 1), sub(lb, bite), v</text>
<text text-anchor="middle" x="2225" y="-954.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2225" y="-939.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2225" y="-923.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return nil</text>
<text text-anchor="middle" x="2225" y="-908.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2225" y="-877.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">Lex.chomp = chomp_token</text>
<text text-anchor="middle" x="2225" y="-845.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">function Lex.lua_thor(linebuf)</text>
<text text-anchor="middle" x="2225" y="-830.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local toks = {}</text>
<text text-anchor="middle" x="2225" y="-814.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local lb = tostring(linebuf)</text>
<text text-anchor="middle" x="2225" y="-799.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;while lb ~= &quot;&quot; do</text>
<text text-anchor="middle" x="2225" y="-784.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local len = #lb</text>
<text text-anchor="middle" x="2225" y="-768.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local bite, tok_t</text>
<text text-anchor="middle" x="2225" y="-753.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;bite, lb, tok_t = chomp_token(lb)</text>
<text text-anchor="middle" x="2225" y="-737.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if bite == nil then</text>
<text text-anchor="middle" x="2225" y="-722.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="2225" y="-707.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2225" y="-691.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; #todo add a color</text>
<text text-anchor="middle" x="2225" y="-676.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local col = color_map[lex_map[tok_t]]</text>
<text text-anchor="middle" x="2225" y="-660.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if col then</text>
<text text-anchor="middle" x="2225" y="-645.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;toks[#toks + 1] = col</text>
<text text-anchor="middle" x="2225" y="-630.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2225" y="-614.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;toks[#toks + 1] = bite</text>
<text text-anchor="middle" x="2225" y="-583.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2225" y="-567.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if len == #lb then</text>
<text text-anchor="middle" x="2225" y="-552.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;toks[#toks + 1] = &quot;!!!&quot;</text>
<text text-anchor="middle" x="2225" y="-537.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lb = sub(lb,2)</text>
<text text-anchor="middle" x="2225" y="-521.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2225" y="-506.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2225" y="-490.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;toks[#toks + 1] = a.clear()</text>
<text text-anchor="middle" x="2225" y="-475.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return toks</text>
<text text-anchor="middle" x="2225" y="-460.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_26&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2181.0901,-1475.5747C2184.6137,-1417.3015 2196.0678,-1227.8765 2206.3935,-1057.1118"/>
<polygon fill="#000000" stroke="#000000" points="2209.8991,-1057.1232 2207.0091,-1046.9302 2202.9119,-1056.7007 2209.8991,-1057.1232"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2526,-767.401 2440,-767.401 2440,-731.401 2526,-731.401 2526,-767.401"/>
<text text-anchor="middle" x="2483" y="-745.901" font-family="Inconsolata" font-size="14.00" fill="#000000">return Lex</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_27&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2428.3565,-1475.5747C2435.8069,-1376.565 2471.747,-898.9456 2480.8838,-777.5238"/>
<polygon fill="#000000" stroke="#000000" points="2484.376,-777.7579 2481.6363,-767.5234 2477.3957,-777.2325 2484.376,-777.7579"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2036.5,-55.6015 1929.5,-55.6015 1929.5,.2015 2036.5,.2015 2036.5,-55.6015"/>
<text text-anchor="middle" x="1983" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">...it&#39;s late.</text>
</g>
<!-- raw_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1983,-731.2001C1983,-636.3793 1983,-198.265 1983,-65.7642"/>
<polygon fill="#000000" stroke="#000000" points="1986.5001,-65.6846 1983,-55.6846 1979.5001,-65.6846 1986.5001,-65.6846"/>
</g>
</g>
</svg>
