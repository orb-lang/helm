<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="6442pt" height="1300pt"
 viewBox="0.00 0.00 6442.00 1299.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1295.6017)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1295.6017 6438,-1295.6017 6438,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="3141.5" cy="-1273.6017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="3141.5" y="-1269.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 104</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="3141.5" cy="-1201.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3141.5" y="-1197.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;104</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3141.5,-1255.433C3141.5,-1247.7326 3141.5,-1238.576 3141.5,-1230.0183"/>
<polygon fill="#000000" stroke="#000000" points="3145.0001,-1230.0149 3141.5,-1220.015 3138.0001,-1230.015 3145.0001,-1230.0149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="2574.5" cy="-1129.6017" rx="134.1341" ry="18"/>
<text text-anchor="middle" x="2574.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Table persistence via SQLite</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3081.8927,-1194.0325C2987.1998,-1182.008 2801.0108,-1158.365 2682.4237,-1143.3063"/>
<polygon fill="#000000" stroke="#000000" points="2682.5923,-1139.7997 2672.231,-1142.012 2681.7105,-1146.7439 2682.5923,-1139.7997"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="2766.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2766.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3079.2787,-1195.7055C3012.0607,-1188.3561 2902.2604,-1173.4936 2810.5,-1147.6017 2807.499,-1146.7549 2804.4254,-1145.766 2801.366,-1144.6954"/>
<polygon fill="#000000" stroke="#000000" points="2802.3407,-1141.3224 2791.7488,-1141.0713 2799.8723,-1147.8728 2802.3407,-1141.3224"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="2851.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2851.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3084.8233,-1192.2315C3034.2608,-1183.1618 2958.5425,-1167.8228 2894.5,-1147.6017 2891.7507,-1146.7336 2888.9338,-1145.7585 2886.1215,-1144.7231"/>
<polygon fill="#000000" stroke="#000000" points="2887.2699,-1141.4142 2876.6818,-1141.0377 2884.7241,-1147.9349 2887.2699,-1141.4142"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="2935.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2935.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3097.2845,-1188.1875C3064.069,-1177.8348 3017.5953,-1162.7619 2977.5,-1147.6017 2975.2461,-1146.7495 2972.9357,-1145.8461 2970.614,-1144.9156"/>
<polygon fill="#000000" stroke="#000000" points="2971.701,-1141.578 2961.1219,-1141.0004 2969.0317,-1148.0491 2971.701,-1141.578"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="3018.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3018.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3113.5894,-1185.2638C3094.6209,-1174.1603 3069.5028,-1159.457 3049.8461,-1147.9506"/>
<polygon fill="#000000" stroke="#000000" points="3051.3623,-1144.7826 3040.964,-1142.7513 3047.826,-1150.8237 3051.3623,-1144.7826"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="3100.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3100.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3131.3652,-1183.8039C3126.5632,-1175.3712 3120.7315,-1165.1302 3115.4358,-1155.8305"/>
<polygon fill="#000000" stroke="#000000" points="3118.3667,-1153.9042 3110.3768,-1146.9463 3112.2838,-1157.3681 3118.3667,-1153.9042"/>
</g>
<!-- prose_8 -->
<g id="node9" class="node">
<title>prose_8</title>
<ellipse fill="none" stroke="#000000" cx="3182.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3182.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;prose_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3151.6348,-1183.8039C3156.4368,-1175.3712 3162.2685,-1165.1302 3167.5642,-1155.8305"/>
<polygon fill="#000000" stroke="#000000" points="3170.7162,-1157.3681 3172.6232,-1146.9463 3164.6333,-1153.9042 3170.7162,-1157.3681"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="3986.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3986.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3204.322,-1196.2488C3368.341,-1182.2732 3806.3067,-1144.9554 3944.2692,-1133.2"/>
<polygon fill="#000000" stroke="#000000" points="3944.7641,-1136.6707 3954.4308,-1132.3342 3944.1698,-1129.6959 3944.7641,-1136.6707"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="4664.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4664.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3206.4542,-1198.531C3463.9895,-1186.356 4409.5729,-1141.6534 4621.9603,-1131.6128"/>
<polygon fill="#000000" stroke="#000000" points="4622.2595,-1135.1026 4632.083,-1131.1342 4621.9289,-1128.1104 4622.2595,-1135.1026"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="4818.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4818.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3207.0596,-1200.4186C3464.6413,-1195.6026 4407.6864,-1176.3518 4705.5,-1147.6017 4729.6298,-1145.2723 4756.4318,-1141.0735 4777.8754,-1137.3169"/>
<polygon fill="#000000" stroke="#000000" points="4778.7086,-1140.7236 4787.9366,-1135.5184 4777.4768,-1133.8328 4778.7086,-1140.7236"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="4936.5" cy="-1129.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4936.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3207.4461,-1201.2759C3481.4866,-1199.6526 4531.2664,-1190.6917 4859.5,-1147.6017 4872.0483,-1145.9544 4885.5442,-1143.1593 4897.6781,-1140.2567"/>
<polygon fill="#000000" stroke="#000000" points="4898.6388,-1143.6245 4907.4995,-1137.8161 4896.9506,-1136.8311 4898.6388,-1143.6245"/>
</g>
<!-- codeblock_13 -->
<g id="node14" class="node">
<title>codeblock_13</title>
<ellipse fill="none" stroke="#000000" cx="5184.5" cy="-1129.6017" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="5184.5" y="-1125.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 43&#45;103</text>
</g>
<!-- section_1&#45;&gt;codeblock_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;codeblock_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3207.4255,-1201.0282C3445.8779,-1198.6636 4285.884,-1187.8096 4977.5,-1147.6017 5017.4948,-1145.2765 5061.7461,-1141.5812 5099.0337,-1138.142"/>
<polygon fill="#000000" stroke="#000000" points="5099.7246,-1141.5929 5109.3567,-1137.1802 5099.0751,-1134.6231 5099.7246,-1141.5929"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="2686.5,-616.6009 2460.5,-616.6009 2460.5,-580.6009 2686.5,-580.6009 2686.5,-616.6009"/>
<text text-anchor="middle" x="2573.5" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">* Table persistence via SQLite</text>
</g>
<!-- header_2&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>header_2&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2574.4656,-1111.3234C2574.3174,-1032.6555 2573.7335,-722.5887 2573.5533,-626.8865"/>
<polygon fill="#000000" stroke="#000000" points="2577.0532,-626.7956 2573.5343,-616.8023 2570.0532,-626.8089 2577.0532,-626.7956"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="2731.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="2731.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_3&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2765.2952,-1111.3234C2760.11,-1032.6555 2739.6724,-722.5887 2733.3644,-626.8865"/>
<polygon fill="#000000" stroke="#000000" points="2736.8499,-626.5504 2732.6997,-616.8023 2729.8651,-627.0109 2736.8499,-626.5504"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="2803.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="2803.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_4&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2846.8504,-1111.7218C2844.3005,-1101.2618 2841.3005,-1087.7618 2839.5,-1075.6017 2814.5086,-906.8168 2806.4438,-701.7182 2804.2333,-627.3056"/>
<polygon fill="#000000" stroke="#000000" points="2807.7204,-626.798 2803.9377,-616.9015 2800.7232,-626.9969 2807.7204,-626.798"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="2875.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="2875.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_5&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2925.9059,-1112.1522C2920.7078,-1101.8357 2914.7078,-1088.3357 2911.5,-1075.6017 2869.6376,-909.4222 2871.872,-701.2206 2874.3133,-626.7141"/>
<polygon fill="#000000" stroke="#000000" points="2877.8113,-626.8307 2874.6698,-616.7124 2870.8157,-626.5814 2877.8113,-626.8307"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="2947.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="2947.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_6&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3004.7824,-1113.2362C2997.0933,-1103.0742 2988.1403,-1089.364 2983.5,-1075.6017 2928.7471,-913.2127 2938.8721,-702.6909 2944.8588,-627.1418"/>
<polygon fill="#000000" stroke="#000000" points="2948.3616,-627.2525 2945.7038,-616.9964 2941.3857,-626.6714 2948.3616,-627.2525"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="3019.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="3019.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_7&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3082.8577,-1113.9198C3072.9698,-1104.0002 3061.4586,-1090.3047 3055.5,-1075.6017 2990.986,-916.4105 3007.218,-703.0908 3015.8338,-627.016"/>
<polygon fill="#000000" stroke="#000000" points="3019.342,-627.1521 3017.0392,-616.8105 3012.3903,-626.3309 3019.342,-627.1521"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="3091.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="3091.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_8&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_8&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3162.0801,-1115.5784C3149.7707,-1105.8964 3135.0556,-1091.8634 3127.5,-1075.6017 3054.9566,-919.4689 3076.2951,-703.4105 3087.0378,-626.8641"/>
<polygon fill="#000000" stroke="#000000" points="3090.5539,-627.0068 3088.5335,-616.6065 3083.6272,-625.9968 3090.5539,-627.0068"/>
</g>
<!-- prespace_26 -->
<g id="node27" class="node">
<title>prespace_26</title>
<ellipse fill="none" stroke="#000000" cx="3182.5" cy="-598.6009" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="3182.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_8&#45;&gt;prespace_26 -->
<g id="edge26" class="edge">
<title>prose_8&#45;&gt;prespace_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3182.5,-1111.3234C3182.5,-1032.6555 3182.5,-722.5887 3182.5,-626.8865"/>
<polygon fill="#000000" stroke="#000000" points="3186.0001,-626.8022 3182.5,-616.8023 3179.0001,-626.8023 3186.0001,-626.8022"/>
</g>
<!-- literal_27 -->
<g id="node28" class="node">
<title>literal_27</title>
<ellipse fill="none" stroke="#000000" cx="3278.5" cy="-598.6009" rx="31.481" ry="18"/>
<text text-anchor="middle" x="3278.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_8&#45;&gt;literal_27 -->
<g id="edge27" class="edge">
<title>prose_8&#45;&gt;literal_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3202.8623,-1115.5515C3215.1486,-1105.8587 3229.8598,-1091.8239 3237.5,-1075.6017 3310.9171,-919.7178 3292.316,-703.5052 3282.5831,-626.8912"/>
<polygon fill="#000000" stroke="#000000" points="3286.0061,-626.0781 3281.2235,-616.6242 3279.0667,-626.9971 3286.0061,-626.0781"/>
</g>
<!-- raw_28 -->
<g id="node29" class="node">
<title>raw_28</title>
<ellipse fill="none" stroke="#000000" cx="3360.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="3360.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_8&#45;&gt;raw_28 -->
<g id="edge28" class="edge">
<title>prose_8&#45;&gt;raw_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3214.3937,-1126.4087C3246.2772,-1121.3825 3293.9876,-1108.502 3318.5,-1075.6017 3422.3875,-936.1649 3384.5519,-706.1553 3367.2294,-626.6575"/>
<polygon fill="#000000" stroke="#000000" points="3370.5461,-625.453 3364.9382,-616.464 3363.7165,-626.9882 3370.5461,-625.453"/>
</g>
<!-- raw_33 -->
<g id="node34" class="node">
<title>raw_33</title>
<ellipse fill="none" stroke="#000000" cx="3799.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="3799.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_9&#45;&gt;raw_33 -->
<g id="edge33" class="edge">
<title>prose_9&#45;&gt;raw_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3967.1323,-1115.0258C3955.2427,-1105.1233 3940.6,-1091.0523 3931.5,-1075.6017 3841.102,-922.1179 3810.5507,-704.4182 3802.1988,-627.1517"/>
<polygon fill="#000000" stroke="#000000" points="3805.6376,-626.3799 3801.1231,-616.795 3798.675,-627.1031 3805.6376,-626.3799"/>
</g>
<!-- prespace_34 -->
<g id="node35" class="node">
<title>prespace_34</title>
<ellipse fill="none" stroke="#000000" cx="3986.5" cy="-598.6009" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="3986.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_9&#45;&gt;prespace_34 -->
<g id="edge34" class="edge">
<title>prose_9&#45;&gt;prespace_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3986.5,-1111.3234C3986.5,-1032.6555 3986.5,-722.5887 3986.5,-626.8865"/>
<polygon fill="#000000" stroke="#000000" points="3990.0001,-626.8022 3986.5,-616.8023 3983.0001,-626.8023 3990.0001,-626.8022"/>
</g>
<!-- literal_35 -->
<g id="node36" class="node">
<title>literal_35</title>
<ellipse fill="none" stroke="#000000" cx="4082.5" cy="-598.6009" rx="31.481" ry="18"/>
<text text-anchor="middle" x="4082.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_9&#45;&gt;literal_35 -->
<g id="edge35" class="edge">
<title>prose_9&#45;&gt;literal_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4006.8623,-1115.5515C4019.1486,-1105.8587 4033.8598,-1091.8239 4041.5,-1075.6017 4114.9171,-919.7178 4096.316,-703.5052 4086.5831,-626.8912"/>
<polygon fill="#000000" stroke="#000000" points="4090.0061,-626.0781 4085.2235,-616.6242 4083.0667,-626.9971 4090.0061,-626.0781"/>
</g>
<!-- raw_36 -->
<g id="node37" class="node">
<title>raw_36</title>
<ellipse fill="none" stroke="#000000" cx="4244.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="4244.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_9&#45;&gt;raw_36 -->
<g id="edge36" class="edge">
<title>prose_9&#45;&gt;raw_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4017.913,-1125.4436C4048.9464,-1119.6658 4095.565,-1106.2123 4122.5,-1075.6017 4240.6069,-941.3779 4247.1593,-708.0628 4245.6034,-627.181"/>
<polygon fill="#000000" stroke="#000000" points="4249.0928,-626.7143 4245.3408,-616.8061 4242.0951,-626.8915 4249.0928,-626.7143"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="4573.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="4573.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_10&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_10&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4644.0801,-1115.5784C4631.7707,-1105.8964 4617.0556,-1091.8634 4609.5,-1075.6017 4536.9566,-919.4689 4558.2951,-703.4105 4569.0378,-626.8641"/>
<polygon fill="#000000" stroke="#000000" points="4572.5539,-627.0068 4570.5335,-616.6065 4565.6272,-625.9968 4572.5539,-627.0068"/>
</g>
<!-- prespace_42 -->
<g id="node43" class="node">
<title>prespace_42</title>
<ellipse fill="none" stroke="#000000" cx="4664.5" cy="-598.6009" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="4664.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_10&#45;&gt;prespace_42 -->
<g id="edge42" class="edge">
<title>prose_10&#45;&gt;prespace_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4664.5,-1111.3234C4664.5,-1032.6555 4664.5,-722.5887 4664.5,-626.8865"/>
<polygon fill="#000000" stroke="#000000" points="4668.0001,-626.8022 4664.5,-616.8023 4661.0001,-626.8023 4668.0001,-626.8022"/>
</g>
<!-- italic_43 -->
<g id="node44" class="node">
<title>italic_43</title>
<ellipse fill="none" stroke="#000000" cx="4756.5" cy="-598.6009" rx="27.5976" ry="18"/>
<text text-anchor="middle" x="4756.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">italic</text>
</g>
<!-- prose_10&#45;&gt;italic_43 -->
<g id="edge43" class="edge">
<title>prose_10&#45;&gt;italic_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4684.9084,-1115.5731C4697.2131,-1105.8889 4711.9274,-1091.8555 4719.5,-1075.6017 4792.2177,-919.5197 4771.4269,-703.4298 4760.8863,-626.8697"/>
<polygon fill="#000000" stroke="#000000" points="4764.2995,-626.0133 4759.4179,-616.6101 4757.3701,-627.0051 4764.2995,-626.0133"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="4829.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="4829.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_10&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_10&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.0146,-1125.7559C4726.3457,-1120.2425 4770.8472,-1107.0097 4793.5,-1075.6017 4895.1122,-934.7171 4854.714,-705.6255 4836.53,-626.5121"/>
<polygon fill="#000000" stroke="#000000" points="4839.8384,-625.2937 4834.1287,-616.369 4833.0266,-626.9064 4839.8384,-625.2937"/>
</g>
<!-- raw_49 -->
<g id="node50" class="node">
<title>raw_49</title>
<ellipse fill="none" stroke="#000000" cx="4901.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="4901.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_49 -->
<g id="edge49" class="edge">
<title>prose_11&#45;&gt;raw_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4836.4471,-1114.5217C4846.8771,-1104.6233 4859.1753,-1090.7394 4865.5,-1075.6017 4931.7186,-917.112 4914.4368,-703.3603 4905.3549,-627.0937"/>
<polygon fill="#000000" stroke="#000000" points="4908.7901,-626.3547 4904.0853,-616.8618 4901.8434,-627.2167 4908.7901,-626.3547"/>
</g>
<!-- raw_51 -->
<g id="node52" class="node">
<title>raw_51</title>
<ellipse fill="none" stroke="#000000" cx="4973.5" cy="-598.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="4973.5" y="-594.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_51 -->
<g id="edge51" class="edge">
<title>prose_12&#45;&gt;raw_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4937.7736,-1111.3234C4943.2552,-1032.6555 4964.8606,-722.5887 4971.5291,-626.8865"/>
<polygon fill="#000000" stroke="#000000" points="4975.0281,-627.0214 4972.2317,-616.8023 4968.045,-626.5348 4975.0281,-627.0214"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="5580.5,-1075.6025 5018.5,-1075.6025 5018.5,-121.5993 5580.5,-121.5993 5580.5,-1075.6025"/>
<text text-anchor="middle" x="5299.5" y="-1060.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;[[ luapersist3.lua &#160;2004&#45;Aug&#45;31 e</text>
<text text-anchor="middle" x="5299.5" y="-1029.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The author disclaims copyright to this source code. &#160;In place of</text>
<text text-anchor="middle" x="5299.5" y="-1013.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;a legal notice, here is a blessing:</text>
<text text-anchor="middle" x="5299.5" y="-998.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;May you be healthy and well.</text>
<text text-anchor="middle" x="5299.5" y="-982.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;May you be free of all suffering.</text>
<text text-anchor="middle" x="5299.5" y="-967.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;May you be happy, giving more than you take.</text>
<text text-anchor="middle" x="5299.5" y="-936.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Lua Persistent Tables</text>
<text text-anchor="middle" x="5299.5" y="-920.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;loosely based on the wiki page http://lua&#45;users.org/wiki/PersistentTables</text>
<text text-anchor="middle" x="5299.5" y="-905.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;uses Lua SQLite 3 (see http://luaforge.net/projects/luasqlite/)</text>
<text text-anchor="middle" x="5299.5" y="-889.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;handles circular structures</text>
<text text-anchor="middle" x="5299.5" y="-858.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;DB Schema</text>
<text text-anchor="middle" x="5299.5" y="-843.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;the Lua tables are stored in a single SQL table with five columns</text>
<text text-anchor="middle" x="5299.5" y="-827.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;TID : Table ID that identifies the Lua table &#45;&#45; string</text>
<text text-anchor="middle" x="5299.5" y="-812.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Key : index in the Lua Table &#45;&#45; TID, string, number, or boolean</text>
<text text-anchor="middle" x="5299.5" y="-796.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Kyp : the data type of Key</text>
<text text-anchor="middle" x="5299.5" y="-781.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Val : value in the Lua Table at index &#45;&#45; TID, string, number, or boolean</text>
<text text-anchor="middle" x="5299.5" y="-766.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Vyp : the data type of Val</text>
<text text-anchor="middle" x="5299.5" y="-734.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;A row is created for each Lua Persistent Table to reserve its TID.</text>
<text text-anchor="middle" x="5299.5" y="-719.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Key, Kyp, Val, and Vyp columns are all set to &quot;_&quot;.</text>
<text text-anchor="middle" x="5299.5" y="-687.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Both Kyp and Vyp use the following encoding:</text>
<text text-anchor="middle" x="5299.5" y="-672.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;b&quot; &#45;&#45; boolean (Key/Val = &quot;t&quot; or &quot;f&quot;)</text>
<text text-anchor="middle" x="5299.5" y="-657.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;n&quot; &#45;&#45; number</text>
<text text-anchor="middle" x="5299.5" y="-641.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;t&quot; &#45;&#45; TID</text>
<text text-anchor="middle" x="5299.5" y="-626.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;s&quot; &#45;&#45; string</text>
<text text-anchor="middle" x="5299.5" y="-610.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;e&quot; &#45;&#45; encoded string (the raw string has embedded NULs)</text>
<text text-anchor="middle" x="5299.5" y="-595.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&quot;_&quot; &#45;&#45; null</text>
<text text-anchor="middle" x="5299.5" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Caveats</text>
<text text-anchor="middle" x="5299.5" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;1. Strings used for Key and Val may contain embedded &#39;\0&#39; NUL characters;</text>
<text text-anchor="middle" x="5299.5" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;they are stored using sqlite blobs.</text>
<text text-anchor="middle" x="5299.5" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;Strings used for TIDs must not have embedded NULs.</text>
<text text-anchor="middle" x="5299.5" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;2. A table may not be used as a key unless the table is already persistent;</text>
<text text-anchor="middle" x="5299.5" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;tables may always be used as vals.</text>
<text text-anchor="middle" x="5299.5" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;3. Functions, threads, and userdata are not supported as keys or vals.</text>
<text text-anchor="middle" x="5299.5" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;4. Lua Persistent Tables may not have user metatables (they will not be</text>
<text text-anchor="middle" x="5299.5" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;persisted, and they may conflict with Lua Persistent Table events).</text>
<text text-anchor="middle" x="5299.5" y="-409.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Implementation</text>
<text text-anchor="middle" x="5299.5" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Lua Persistent Tables are represented by an empty Lua Table and a</text>
<text text-anchor="middle" x="5299.5" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;corresponding metatable.</text>
<text text-anchor="middle" x="5299.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Lua Persistent Table Metatable events:</text>
<text text-anchor="middle" x="5299.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;lpt_TID&quot; &#45;&#45; the TID for this table</text>
<text text-anchor="middle" x="5299.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;index&quot; &#45;&#45; handler for unmarshalling Key/Val from the DB</text>
<text text-anchor="middle" x="5299.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;newindex&quot; &#45;&#45; handler for marshalling Key/Val to the DB</text>
<text text-anchor="middle" x="5299.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;lpt_cache&quot; &#45;&#45; a Lua Table that caches Key/Val pairs</text>
<text text-anchor="middle" x="5299.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&quot;lpt_db&quot; &#45;&#45; the Lua Persistent Table database descriptor for this table&#39;s db</text>
<text text-anchor="middle" x="5299.5" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;LuaPersist maintains one global weak table, map, that is used to find</text>
<text text-anchor="middle" x="5299.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Lua Persistent Tables that are already open. This insures that there</text>
<text text-anchor="middle" x="5299.5" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;is at most one version of each Lua Persistent Table in memory.</text>
<text text-anchor="middle" x="5299.5" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="5299.5" y="-145.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; nb: accidentally corrupted this file (fuck) and am not using it so,</text>
<text text-anchor="middle" x="5299.5" y="-129.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; removed all source code &#45;Sam</text>
</g>
<!-- codeblock_13&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>codeblock_13&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5188.4586,-1111.3234C5189.9401,-1104.4826 5191.8006,-1095.892 5193.9766,-1085.8446"/>
<polygon fill="#000000" stroke="#000000" points="5197.4614,-1086.2892 5196.1574,-1075.7749 5190.62,-1084.8075 5197.4614,-1086.2892"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="345,-78.7012 0,-78.7012 0,-6.8989 345,-6.8989 345,-78.7012"/>
<text text-anchor="middle" x="172.5" y="-15.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">There&#39;s doing this, and there&#39;s doing it right.</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2733.1734,-580.5658C2740.0938,-501.3307 2763.0613,-185.2278 2695.5,-121.6001 2648.1553,-77.0121 419.0427,-93.5905 354.5,-85.6001 343.4129,-84.2275 332.0172,-82.4504 320.5964,-80.4023"/>
<polygon fill="#000000" stroke="#000000" points="321.0319,-76.9234 310.5605,-78.536 319.7521,-83.8054 321.0319,-76.9234"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="911.5,-78.0004 363.5,-78.0004 363.5,-7.5997 911.5,-7.5997 911.5,-78.0004"/>
<text text-anchor="middle" x="637.5" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">Doing this right requires Merkelizing all acyclic tables. &#160;It is painstaking</text>
<text text-anchor="middle" x="637.5" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">work to define this correctly over functions, threads, userdata and C data,</text>
<text text-anchor="middle" x="637.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">and to do it over cyclic tables requires metadata.</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2805.167,-580.5725C2812.0606,-501.366 2834.9304,-185.3665 2767.5,-121.6001 2730.2158,-86.3418 971.6309,-89.9461 920.5,-85.6001 900.7145,-83.9184 880.2102,-81.7188 859.6937,-79.204"/>
<polygon fill="#000000" stroke="#000000" points="859.981,-75.7128 849.6241,-77.9451 859.1126,-82.6587 859.981,-75.7128"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1463.5,-70.1005 929.5,-70.1005 929.5,-15.4996 1463.5,-15.4996 1463.5,-70.1005"/>
<text text-anchor="middle" x="1196.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">Which is okay. A value reference to an acyclic table is prepared by Merkle</text>
<text text-anchor="middle" x="1196.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">hashing and referred to by that hash inside the enclosing table.</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2877.1565,-580.5836C2884.0051,-501.4244 2906.7119,-185.5968 2839.5,-121.6001 2784.4807,-69.2128 1548.1627,-92.4349 1472.5,-85.6001 1435.972,-82.3005 1396.9349,-77.2143 1360.0603,-71.6853"/>
<polygon fill="#000000" stroke="#000000" points="1360.1332,-68.1563 1349.721,-70.1152 1359.0822,-75.077 1360.1332,-68.1563"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2037,-85.4011 1482,-85.4011 1482,-.199 2037,-.199 2037,-85.4011"/>
<text text-anchor="middle" x="1759.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">If they have circular references these must be fixed: each value reference is</text>
<text text-anchor="middle" x="1759.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">replaced with a deterministic and unique string, each table is then frozen</text>
<text text-anchor="middle" x="1759.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">once the full cycle graph is resolved, and all hashes are included in the</text>
<text text-anchor="middle" x="1759.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">container as resolutions of those strings.</text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2949.1328,-580.6083C2955.881,-501.5538 2978.223,-186.1063 2911.5,-121.6001 2878.2668,-89.4711 2154.9717,-90.0637 2047.3696,-85.4024"/>
<polygon fill="#000000" stroke="#000000" points="2047.4065,-81.8983 2037.2136,-84.7889 2046.9844,-88.8856 2047.4065,-81.8983"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2596,-78.0004 2055,-78.0004 2055,-7.5997 2596,-7.5997 2596,-78.0004"/>
<text text-anchor="middle" x="2325.5" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">The containers therefore have no cycles and may be hashed also. We&#39;ll need</text>
<text text-anchor="middle" x="2325.5" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">the containing format anyway, for metatables, and any other metadata of the</text>
<text text-anchor="middle" x="2325.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">sort that is deterministic to the value and not the reference or instance.</text>
</g>
<!-- raw_23&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3021.0703,-580.4279C3027.4867,-501.2958 3048.4125,-187.7826 2983.5,-121.6001 2953.8801,-91.4007 2646.4787,-90.8093 2604.5,-85.6001 2588.8943,-83.6636 2572.8172,-81.54 2556.6319,-79.3068"/>
<polygon fill="#000000" stroke="#000000" points="2556.9306,-75.8147 2546.5436,-77.9028 2555.9656,-82.7479 2556.9306,-75.8147"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3155,-70.1005 2614,-70.1005 2614,-15.4996 3155,-15.4996 3155,-70.1005"/>
<text text-anchor="middle" x="2884.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">Fortunately Lua has only the one level of reference, sparing us the need to</text>
<text text-anchor="middle" x="2884.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">serialize pointers to addresses and so on to the nth degree. </text>
</g>
<!-- raw_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>raw_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3096.0734,-580.487C3112.0564,-512.7506 3159.0291,-270.6287 3055.5,-121.6001 3041.3216,-101.1905 3020.4833,-85.9535 2998.1912,-74.6168"/>
<polygon fill="#000000" stroke="#000000" points="2999.4366,-71.332 2988.9079,-70.1497 2996.4013,-77.6397 2999.4366,-71.332"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3227.5,-60.8001 3173.5,-60.8001 3173.5,-24.8001 3227.5,-24.8001 3227.5,-60.8001"/>
<text text-anchor="middle" x="3200.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_26&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>prespace_26&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3183.0887,-580.4244C3185.7167,-499.2772 3196.3875,-169.7854 3199.5882,-70.9549"/>
<polygon fill="#000000" stroke="#000000" points="3203.0902,-70.946 3199.9158,-60.8379 3196.0939,-70.7193 3203.0902,-70.946"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="3299.5,-60.8001 3245.5,-60.8001 3245.5,-24.8001 3299.5,-24.8001 3299.5,-60.8001"/>
<text text-anchor="middle" x="3272.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">cdata</text>
</g>
<!-- literal_27&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>literal_27&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3278.3038,-580.4244C3277.4278,-499.2772 3273.8708,-169.7854 3272.8039,-70.9549"/>
<polygon fill="#000000" stroke="#000000" points="3276.3026,-70.7995 3272.6947,-60.8379 3269.303,-70.8751 3276.3026,-70.7995"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="3425,-62.1006 3318,-62.1006 3318,-23.4995 3425,-23.4995 3425,-62.1006"/>
<text text-anchor="middle" x="3371.5" y="-47.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> is not</text>
<text text-anchor="middle" x="3371.5" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">so limited...</text>
</g>
<!-- raw_28&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_28&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3360.8597,-580.4244C3362.4584,-499.6463 3368.9276,-172.7773 3370.9158,-72.3176"/>
<polygon fill="#000000" stroke="#000000" points="3374.4162,-72.3281 3371.1148,-62.2608 3367.4176,-72.1896 3374.4162,-72.3281"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="3963.5,-78.0004 3443.5,-78.0004 3443.5,-7.5997 3963.5,-7.5997 3963.5,-78.0004"/>
<text text-anchor="middle" x="3703.5" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">For the near future I&#39;m more interested in storing a naive string</text>
<text text-anchor="middle" x="3703.5" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">representation of results, than something which can be round&#45;tripped and</text>
<text text-anchor="middle" x="3703.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">deduplicated in a generalized way, and I suspect</text>
</g>
<!-- raw_33&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>raw_33&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3796.3605,-580.4244C3783.0606,-503.4234 3731.1372,-202.808 3711.2807,-87.8469"/>
<polygon fill="#000000" stroke="#000000" points="3714.7234,-87.2149 3709.5724,-77.9565 3707.8255,-88.4064 3714.7234,-87.2149"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="4035.5,-60.8001 3981.5,-60.8001 3981.5,-24.8001 4035.5,-24.8001 4035.5,-60.8001"/>
<text text-anchor="middle" x="4008.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_34&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>prespace_34&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3987.2195,-580.4244C3990.4315,-499.2772 4003.4736,-169.7854 4007.3856,-70.9549"/>
<polygon fill="#000000" stroke="#000000" points="4010.8877,-70.9685 4007.786,-60.8379 4003.8931,-70.6916 4010.8877,-70.9685"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="4111.5,-60.8001 4053.5,-60.8001 4053.5,-24.8001 4111.5,-24.8001 4111.5,-60.8001"/>
<text text-anchor="middle" x="4082.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">fossil</text>
</g>
<!-- literal_35&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>literal_35&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4082.5,-580.4244C4082.5,-499.2772 4082.5,-169.7854 4082.5,-70.9549"/>
<polygon fill="#000000" stroke="#000000" points="4086.0001,-70.8378 4082.5,-60.8379 4079.0001,-70.8379 4086.0001,-70.8378"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="4531,-62.1006 4130,-62.1006 4130,-23.4995 4531,-23.4995 4531,-62.1006"/>
<text text-anchor="middle" x="4330.5" y="-47.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> is doing a lot of</text>
<text text-anchor="middle" x="4330.5" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">the heavy lifting for this kind of persistence already.</text>
</g>
<!-- raw_36&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>raw_36&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4247.3125,-580.4244C4259.8114,-499.6463 4310.3884,-172.7773 4325.9327,-72.3176"/>
<polygon fill="#000000" stroke="#000000" points="4329.4184,-72.6784 4327.4888,-62.2608 4322.5008,-71.608 4329.4184,-72.6784"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="4628,-62.7021 4549,-62.7021 4549,-22.898 4628,-22.898 4628,-62.7021"/>
<text text-anchor="middle" x="4588.5" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">To get it</text>
</g>
<!-- raw_41&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_41&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4573.9905,-580.4244C4576.1682,-499.7365 4584.9725,-173.5074 4587.6943,-72.6552"/>
<polygon fill="#000000" stroke="#000000" points="4591.1958,-72.6421 4587.967,-62.5513 4584.1983,-72.4532 4591.1958,-72.6421"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="4700.5,-60.8001 4646.5,-60.8001 4646.5,-24.8001 4700.5,-24.8001 4700.5,-60.8001"/>
<text text-anchor="middle" x="4673.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_42&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>prespace_42&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4664.7943,-580.4244C4666.1083,-499.2772 4671.4437,-169.7854 4673.0441,-70.9549"/>
<polygon fill="#000000" stroke="#000000" points="4676.5455,-70.8933 4673.2079,-60.8379 4669.5464,-70.7799 4676.5455,-70.8933"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="4776.5,-60.8001 4718.5,-60.8001 4718.5,-24.8001 4776.5,-24.8001 4776.5,-60.8001"/>
<text text-anchor="middle" x="4747.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">really</text>
</g>
<!-- italic_43&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>italic_43&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4756.2057,-580.4244C4754.8917,-499.2772 4749.5563,-169.7854 4747.9559,-70.9549"/>
<polygon fill="#000000" stroke="#000000" points="4751.4536,-70.7799 4747.7921,-60.8379 4744.4545,-70.8933 4751.4536,-70.7799"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="5322,-70.0005 4795,-70.0005 4795,-15.5996 5322,-15.5996 5322,-70.0005"/>
<text text-anchor="middle" x="5058.5" y="-54.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> right will involve normalizing the whitespace (but not</text>
<text text-anchor="middle" x="5058.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">values) of function strings, following upvalues and tree&#45;shaking until we</text>
<text text-anchor="middle" x="5058.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">have a hash to go with each one.</text>
</g>
<!-- raw_44&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>raw_44&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4824.8307,-580.8033C4808.2129,-513.1861 4758.4599,-268.6412 4865.5,-121.6001 4880.6374,-100.8059 4902.2437,-85.4841 4925.5607,-74.1989"/>
<polygon fill="#000000" stroke="#000000" points="4927.288,-77.2577 4934.9256,-69.9149 4924.3759,-70.8921 4927.288,-77.2577"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="5888.5,-78.0004 5340.5,-78.0004 5340.5,-7.5997 5888.5,-7.5997 5888.5,-78.0004"/>
<text text-anchor="middle" x="5614.5" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">The result will be pretty butch though: a SHA&#45;3 hash that would refer to the</text>
<text text-anchor="middle" x="5614.5" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">same object consistently across LuaJIT codebases. &#160;Dedup and content&#45;centric</text>
<text text-anchor="middle" x="5614.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">references don&#39;t have to be just for the big bois.</text>
</g>
<!-- raw_49&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>raw_49&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4899.9243,-580.4226C4893.4849,-501.2679 4872.4766,-187.6736 4937.5,-121.6001 4968.2569,-90.3465 5286.9683,-90.8696 5330.5,-85.6001 5346.3848,-83.6773 5362.7497,-81.564 5379.2247,-79.3382"/>
<polygon fill="#000000" stroke="#000000" points="5380.058,-82.7571 5389.4937,-77.9385 5379.1126,-75.8212 5380.058,-82.7571"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="6434,-78.0004 5907,-78.0004 5907,-7.5997 6434,-7.5997 6434,-78.0004"/>
<text text-anchor="middle" x="6170.5" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">The below is from the Wiki. It has some decent ideas for ordinary table</text>
<text text-anchor="middle" x="6170.5" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">persistence, though it must be adapted to the LuaJIT SQLite library we&#39;re</text>
<text text-anchor="middle" x="6170.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">using.</text>
</g>
<!-- raw_51&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>raw_51&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4971.8656,-580.6066C4965.1106,-501.5451 4942.7438,-186.072 5009.5,-121.6001 5045.0149,-87.3005 5848.3631,-90.4317 5897.5,-85.6001 5915.4084,-83.8392 5933.9296,-81.6755 5952.4997,-79.2648"/>
<polygon fill="#000000" stroke="#000000" points="5953.0581,-82.7215 5962.5136,-77.942 5952.1413,-75.7818 5953.0581,-82.7215"/>
</g>
</g>
</svg>
